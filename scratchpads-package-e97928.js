KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_ace_deps.js", function(__KA_require, __KA_module, __KA_exports) {
(function(){var e="ace"
var t=function(){return this}()
if(!e&&typeof requirejs!=="undefined")return
var i=function(e,t,n){if(typeof e!=="string"){if(i.original)i.original.apply(window,arguments)
else{console.error("dropping module because define wasn't a string.")
console.trace()}return}if(arguments.length==2)n=t
if(!i.modules){i.modules={}
i.payloads={}}i.payloads[e]=n
i.modules[e]=null}
var n=function(e,t,i){if(Object.prototype.toString.call(t)==="[object Array]"){var r=[]
for(var o=0,a=t.length;o<a;++o){var l=s(e,t[o])
if(!l&&n.original)return n.original.apply(window,arguments)
r.push(l)}if(i){i.apply(null,r)}}else if(typeof t==="string"){var c=s(e,t)
if(!c&&n.original)return n.original.apply(window,arguments)
if(i){i()}return c}else{if(n.original)return n.original.apply(window,arguments)}}
var r=function(e,t){if(t.indexOf("!")!==-1){var i=t.split("!")
return r(e,i[0])+"!"+r(e,i[1])}if(t.charAt(0)=="."){var n=e.split("/").slice(0,-1).join("/")
t=n+"/"+t
while(t.indexOf(".")!==-1&&s!=t){var s=t
t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t}
var s=function(e,t){t=r(e,t)
var s=i.modules[t]
if(!s){s=i.payloads[t]
if(typeof s==="function"){var o={}
var a={id:t,uri:"",exports:o,packaged:true}
var l=function(e,i){return n(t,e,i)}
var c=s(l,o,a)
o=c||a.exports
i.modules[t]=o
delete i.payloads[t]}s=i.modules[t]=o||s}return s}
function o(e){var r=function(e,t){return n("",e,t)}
var s=t
if(e){if(!t[e])t[e]={}
s=t[e]}if(!s.define||!s.define.packaged){i.original=s.define
s.define=i
s.define.packaged=true}if(!s.require||!s.require.packaged){n.original=s.require
s.require=r
s.require.packaged=true}}o(e)})()
ace.define("ace/lib/regexp",["require","exports","module"],function(e,t,i){"use strict"
var n={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},r=n.exec.call(/()??/,"")[1]===undefined,s=function(){var e=/^/g
n.test.call(e,"")
return!e.lastIndex}()
if(s&&r)return
RegExp.prototype.exec=function(e){var t=n.exec.apply(this,arguments),i,l
if(typeof e=="string"&&t){if(!r&&t.length>1&&a(t,"")>-1){l=RegExp(this.source,n.replace.call(o(this),"g",""))
n.replace.call(e.slice(t.index),l,function(){for(var e=1;e<arguments.length-2;e++){if(arguments[e]===undefined)t[e]=undefined}})}if(this._xregexp&&this._xregexp.captureNames){for(var c=1;c<t.length;c++){i=this._xregexp.captureNames[c-1]
if(i)t[i]=t[c]}}if(!s&&this.global&&!t[0].length&&this.lastIndex>t.index)this.lastIndex--}return t}
if(!s){RegExp.prototype.test=function(e){var t=n.exec.call(this,e)
if(t&&this.global&&!t[0].length&&this.lastIndex>t.index)this.lastIndex--
return!!t}}function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function a(e,t,i){if(Array.prototype.indexOf)return e.indexOf(t,i)
for(var n=i||0;n<e.length;n++){if(e[n]===t)return n}return-1}})
ace.define("ace/lib/es5-shim",["require","exports","module"],function(e,t,i){function n(){}if(!Function.prototype.bind){Function.prototype.bind=function H(e){var t=this
if(typeof t!="function"){throw new TypeError("Function.prototype.bind called on incompatible "+t)}var i=a.call(arguments,1)
var r=function(){if(this instanceof r){var n=t.apply(this,i.concat(a.call(arguments)))
if(Object(n)===n){return n}return this}else{return t.apply(e,i.concat(a.call(arguments)))}}
if(t.prototype){n.prototype=t.prototype
r.prototype=new n
n.prototype=null}return r}}var r=Function.prototype.call
var s=Array.prototype
var o=Object.prototype
var a=s.slice
var l=r.bind(o.toString)
var c=r.bind(o.hasOwnProperty)
var h
var u
var d
var f
var g
if(g=c(o,"__defineGetter__")){h=r.bind(o.__defineGetter__)
u=r.bind(o.__defineSetter__)
d=r.bind(o.__lookupGetter__)
f=r.bind(o.__lookupSetter__)}if([1,2].splice(0).length!=2){if(function(){function e(e){var t=new Array(e+2)
t[0]=t[1]=0
return t}var t=[],i
t.splice.apply(t,e(20))
t.splice.apply(t,e(26))
i=t.length
t.splice(5,0,"XXX")
i+1==t.length
if(i+1==t.length){return true}}()){var m=Array.prototype.splice
Array.prototype.splice=function(e,t){if(!arguments.length){return[]}else{return m.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(a.call(arguments,2)))}}}else{Array.prototype.splice=function(e,t){var i=this.length
if(e>0){if(e>i)e=i}else if(e==void 0){e=0}else if(e<0){e=Math.max(i+e,0)}if(!(e+t<i))t=i-e
var n=this.slice(e,e+t)
var r=a.call(arguments,2)
var s=r.length
if(e===i){if(s){this.push.apply(this,r)}}else{var o=Math.min(t,i-e)
var l=e+o
var c=l+s-o
var h=i-l
var u=i-o
if(c<l){for(var d=0;d<h;++d){this[c+d]=this[l+d]}}else if(c>l){for(d=h;d--;){this[c+d]=this[l+d]}}if(s&&e===u){this.length=u
this.push.apply(this,r)}else{this.length=u+s
for(d=0;d<s;++d){this[e+d]=r[d]}}}return n}}}if(!Array.isArray){Array.isArray=function N(e){return l(e)=="[object Array]"}}var p=Object("a"),v=p[0]!="a"||!(0 in p)
if(!Array.prototype.forEach){Array.prototype.forEach=function z(e){var t=P(this),i=v&&l(this)=="[object String]"?this.split(""):t,n=arguments[1],r=-1,s=i.length>>>0
if(l(e)!="[object Function]"){throw new TypeError}while(++r<s){if(r in i){e.call(n,i[r],r,t)}}}}if(!Array.prototype.map){Array.prototype.map=function V(e){var t=P(this),i=v&&l(this)=="[object String]"?this.split(""):t,n=i.length>>>0,r=Array(n),s=arguments[1]
if(l(e)!="[object Function]"){throw new TypeError(e+" is not a function")}for(var o=0;o<n;o++){if(o in i)r[o]=e.call(s,i[o],o,t)}return r}}if(!Array.prototype.filter){Array.prototype.filter=function U(e){var t=P(this),i=v&&l(this)=="[object String]"?this.split(""):t,n=i.length>>>0,r=[],s,o=arguments[1]
if(l(e)!="[object Function]"){throw new TypeError(e+" is not a function")}for(var a=0;a<n;a++){if(a in i){s=i[a]
if(e.call(o,s,a,t)){r.push(s)}}}return r}}if(!Array.prototype.every){Array.prototype.every=function K(e){var t=P(this),i=v&&l(this)=="[object String]"?this.split(""):t,n=i.length>>>0,r=arguments[1]
if(l(e)!="[object Function]"){throw new TypeError(e+" is not a function")}for(var s=0;s<n;s++){if(s in i&&!e.call(r,i[s],s,t)){return false}}return true}}if(!Array.prototype.some){Array.prototype.some=function G(e){var t=P(this),i=v&&l(this)=="[object String]"?this.split(""):t,n=i.length>>>0,r=arguments[1]
if(l(e)!="[object Function]"){throw new TypeError(e+" is not a function")}for(var s=0;s<n;s++){if(s in i&&e.call(r,i[s],s,t)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function j(e){var t=P(this),i=v&&l(this)=="[object String]"?this.split(""):t,n=i.length>>>0
if(l(e)!="[object Function]"){throw new TypeError(e+" is not a function")}if(!n&&arguments.length==1){throw new TypeError("reduce of empty array with no initial value")}var r=0
var s
if(arguments.length>=2){s=arguments[1]}else{do{if(r in i){s=i[r++]
break}if(++r>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;r<n;r++){if(r in i){s=e.call(void 0,s,i[r],r,t)}}return s}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function q(e){var t=P(this),i=v&&l(this)=="[object String]"?this.split(""):t,n=i.length>>>0
if(l(e)!="[object Function]"){throw new TypeError(e+" is not a function")}if(!n&&arguments.length==1){throw new TypeError("reduceRight of empty array with no initial value")}var r,s=n-1
if(arguments.length>=2){r=arguments[1]}else{do{if(s in i){r=i[s--]
break}if(--s<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}do{if(s in this){r=e.call(void 0,r,i[s],s,t)}}while(s--)
return r}}if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1){Array.prototype.indexOf=function Y(e){var t=v&&l(this)=="[object String]"?this.split(""):P(this),i=t.length>>>0
if(!i){return-1}var n=0
if(arguments.length>1){n=I(arguments[1])}n=n>=0?n:Math.max(0,i+n)
for(;n<i;n++){if(n in t&&t[n]===e){return n}}return-1}}if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1){Array.prototype.lastIndexOf=function X(e){var t=v&&l(this)=="[object String]"?this.split(""):P(this),i=t.length>>>0
if(!i){return-1}var n=i-1
if(arguments.length>1){n=Math.min(n,I(arguments[1]))}n=n>=0?n:i-Math.abs(n)
for(;n>=0;n--){if(n in t&&e===t[n]){return n}}return-1}}if(!Object.getPrototypeOf){Object.getPrototypeOf=function Q(e){return e.__proto__||(e.constructor?e.constructor.prototype:o)}}if(!Object.getOwnPropertyDescriptor){var A="Object.getOwnPropertyDescriptor called on a "+"non-object: "
Object.getOwnPropertyDescriptor=function Z(e,t){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError(A+e)
if(!c(e,t))return
var i,n,r
i={enumerable:true,configurable:true}
if(g){var s=e.__proto__
e.__proto__=o
var n=d(e,t)
var r=f(e,t)
e.__proto__=s
if(n||r){if(n)i.get=n
if(r)i.set=r
return i}}i.value=e[t]
return i}}if(!Object.getOwnPropertyNames){Object.getOwnPropertyNames=function J(e){return Object.keys(e)}}if(!Object.create){var w
if(Object.prototype.__proto__===null){w=function(){return{__proto__:null}}}else{w=function(){var e={}
for(var t in e)e[t]=null
e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null
return e}}Object.create=function et(e,t){var i
if(e===null){i=w()}else{if(typeof e!="object")throw new TypeError("typeof prototype["+typeof e+"] != 'object'")
var n=function(){}
n.prototype=e
i=new n
i.__proto__=e}if(t!==void 0)Object.defineProperties(i,t)
return i}}function C(e){try{Object.defineProperty(e,"sentinel",{})
return"sentinel"in e}catch(t){}}if(Object.defineProperty){var F=C({})
var b=typeof document=="undefined"||C(document.createElement("div"))
if(!F||!b){var E=Object.defineProperty}}if(!Object.defineProperty||E){var x="Property description must be an object: "
var y="Object.defineProperty called on non-object: "
var k="getters & setters can not be defined "+"on this javascript engine"
Object.defineProperty=function tt(e,t,i){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError(y+e)
if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError(x+i)
if(E){try{return E.call(Object,e,t,i)}catch(n){}}if(c(i,"value")){if(g&&(d(e,t)||f(e,t))){var r=e.__proto__
e.__proto__=o
delete e[t]
e[t]=i.value
e.__proto__=r}else{e[t]=i.value}}else{if(!g)throw new TypeError(k)
if(c(i,"get"))h(e,t,i.get)
if(c(i,"set"))u(e,t,i.set)}return e}}if(!Object.defineProperties){Object.defineProperties=function it(e,t){for(var i in t){if(c(t,i))Object.defineProperty(e,i,t[i])}return e}}if(!Object.seal){Object.seal=function nt(e){return e}}if(!Object.freeze){Object.freeze=function rt(e){return e}}try{Object.freeze(function(){})}catch(B){Object.freeze=function st(e){return function t(i){if(typeof i=="function"){return i}else{return e(i)}}}(Object.freeze)}if(!Object.preventExtensions){Object.preventExtensions=function ot(e){return e}}if(!Object.isSealed){Object.isSealed=function at(e){return false}}if(!Object.isFrozen){Object.isFrozen=function lt(e){return false}}if(!Object.isExtensible){Object.isExtensible=function ct(e){if(Object(e)===e){throw new TypeError}var t=""
while(c(e,t)){t+="?"}e[t]=true
var i=c(e,t)
delete e[t]
return i}}if(!Object.keys){var S=true,D=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],L=D.length
for(var _ in{toString:null}){S=false}Object.keys=function ht(e){if(typeof e!="object"&&typeof e!="function"||e===null){throw new TypeError("Object.keys called on a non-object")}var ht=[]
for(var t in e){if(c(e,t)){ht.push(t)}}if(S){for(var i=0,n=L;i<n;i++){var r=D[i]
if(c(e,r)){ht.push(r)}}}return ht}}if(!Date.now){Date.now=function ut(){return(new Date).getTime()}}var R="	\n\f\r   ᠎    "+"         　\u2028"+"\u2029﻿"
if(!String.prototype.trim||R.trim()){R="["+R+"]"
var T=new RegExp("^"+R+R+"*"),M=new RegExp(R+R+"*$")
String.prototype.trim=function dt(){return String(this).replace(T,"").replace(M,"")}}function I(e){e=+e
if(e!==e){e=0}else if(e!==0&&e!==1/0&&e!==-(1/0)){e=(e>0||-1)*Math.floor(Math.abs(e))}return e}function O(e){var t=typeof e
return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function W(e){var t,i,n
if(O(e)){return e}i=e.valueOf
if(typeof i==="function"){t=i.call(e)
if(O(t)){return t}}n=e.toString
if(typeof n==="function"){t=n.call(e)
if(O(t)){return t}}throw new TypeError}var P=function(e){if(e==null){throw new TypeError("can't convert "+e+" to object")}return Object(e)}})
ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,i){"use strict"
e("./regexp")
e("./es5-shim")})
ace.define("ace/lib/dom",["require","exports","module"],function(e,t,i){"use strict"
if(typeof document=="undefined")return
var n="http://www.w3.org/1999/xhtml"
t.getDocumentHead=function(e){if(!e)e=document
return e.head||e.getElementsByTagName("head")[0]||e.documentElement}
t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||n,e):document.createElement(e)}
t.hasCssClass=function(e,t){var i=e.className.split(/\s+/g)
return i.indexOf(t)!==-1}
t.addCssClass=function(e,i){if(!t.hasCssClass(e,i)){e.className+=" "+i}}
t.removeCssClass=function(e,t){var i=e.className.split(/\s+/g)
while(true){var n=i.indexOf(t)
if(n==-1){break}i.splice(n,1)}e.className=i.join(" ")}
t.toggleCssClass=function(e,t){var i=e.className.split(/\s+/g),n=true
while(true){var r=i.indexOf(t)
if(r==-1){break}n=false
i.splice(r,1)}if(n)i.push(t)
e.className=i.join(" ")
return n}
t.setCssClass=function(e,i,n){if(n){t.addCssClass(e,i)}else{t.removeCssClass(e,i)}}
t.hasCssString=function(e,t){var i=0,n
t=t||document
if(t.createStyleSheet&&(n=t.styleSheets)){while(i<n.length)if(n[i++].owningElement.id===e)return true}else if(n=t.getElementsByTagName("style")){while(i<n.length)if(n[i++].id===e)return true}return false}
t.importCssString=function r(e,i,s){s=s||document
if(i&&t.hasCssString(i,s))return null
var o
if(s.createStyleSheet){o=s.createStyleSheet()
o.cssText=e
if(i)o.owningElement.id=i}else{o=s.createElementNS?s.createElementNS(n,"style"):s.createElement("style")
o.appendChild(s.createTextNode(e))
if(i)o.id=i
t.getDocumentHead(s).appendChild(o)}}
t.importCssStylsheet=function(e,i){if(i.createStyleSheet){i.createStyleSheet(e)}else{var n=t.createElement("link")
n.rel="stylesheet"
n.href=e
t.getDocumentHead(i).appendChild(n)}}
t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth}
t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight}
if(window.pageYOffset!==undefined){t.getPageScrollTop=function(){return window.pageYOffset}
t.getPageScrollLeft=function(){return window.pageXOffset}}else{t.getPageScrollTop=function(){return document.body.scrollTop}
t.getPageScrollLeft=function(){return document.body.scrollLeft}}if(window.getComputedStyle)t.computedStyle=function(e,t){if(t)return(window.getComputedStyle(e,"")||{})[t]||""
return window.getComputedStyle(e,"")||{}}
else t.computedStyle=function(e,t){if(t)return e.currentStyle[t]
return e.currentStyle}
t.scrollbarWidth=function(e){var i=t.createElement("ace_inner")
i.style.width="100%"
i.style.minWidth="0px"
i.style.height="200px"
i.style.display="block"
var n=t.createElement("ace_outer")
var r=n.style
r.position="absolute"
r.left="-10000px"
r.overflow="hidden"
r.width="200px"
r.minWidth="0px"
r.height="150px"
r.display="block"
n.appendChild(i)
var s=e.documentElement
s.appendChild(n)
var o=i.offsetWidth
r.overflow="scroll"
var a=i.offsetWidth
if(o==a){a=n.clientWidth}s.removeChild(n)
return o-a}
t.setInnerHtml=function(e,t){var i=e.cloneNode(false)
i.innerHTML=t
e.parentNode.replaceChild(i,e)
return i}
if("textContent"in document.documentElement){t.setInnerText=function(e,t){e.textContent=t}
t.getInnerText=function(e){return e.textContent}}else{t.setInnerText=function(e,t){e.innerText=t}
t.getInnerText=function(e){return e.innerText}}t.getParentWindow=function(e){return e.defaultView||e.parentWindow}})
ace.define("ace/lib/oop",["require","exports","module"],function(e,t,i){"use strict"
t.inherits=function(e,t){e.super_=t
e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}
t.mixin=function(e,t){for(var i in t){e[i]=t[i]}return e}
t.implement=function(e,i){t.mixin(e,i)}})
ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,i){"use strict"
var n=e("./oop")
var r=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}}
var t,i
for(i in e.FUNCTION_KEYS){t=e.FUNCTION_KEYS[i].toLowerCase()
e[t]=parseInt(i,10)}for(i in e.PRINTABLE_KEYS){t=e.PRINTABLE_KEYS[i].toLowerCase()
e[t]=parseInt(i,10)}n.mixin(e,e.MODIFIER_KEYS)
n.mixin(e,e.PRINTABLE_KEYS)
n.mixin(e,e.FUNCTION_KEYS)
e.enter=e["return"]
e.escape=e.esc
e.del=e["delete"]
e[173]="-";(function(){var t=["cmd","ctrl","alt","shift"]
for(var i=Math.pow(2,t.length);i--;){e.KEY_MODS[i]=t.filter(function(t){return i&e.KEY_MODS[t]}).join("-")+"-"}})()
return e}()
n.mixin(t,r)
t.keyCodeToString=function(e){var t=r[e]
if(typeof t!="string")t=String.fromCharCode(e)
return t.toLowerCase()}})
ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,i){"use strict"
t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"}
t.getOS=function(){if(t.isMac){return t.OS.MAC}else if(t.isLinux){return t.OS.LINUX}else{return t.OS.WINDOWS}}
if(typeof navigator!="object")return
var n=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase()
var r=navigator.userAgent
t.isWin=n=="win"
t.isMac=n=="mac"
t.isLinux=n=="linux"
t.isIE=navigator.appName=="Microsoft Internet Explorer"||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1])
t.isOldIE=t.isIE&&t.isIE<9
t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&window.navigator.product==="Gecko"
t.isOldGecko=t.isGecko&&parseInt((r.match(/rv\:(\d+)/)||[])[1],10)<4
t.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]"
t.isWebKit=parseFloat(r.split("WebKit/")[1])||undefined
t.isChrome=parseFloat(r.split(" Chrome/")[1])||undefined
t.isAIR=r.indexOf("AdobeAIR")>=0
t.isIPad=r.indexOf("iPad")>=0
t.isTouchPad=r.indexOf("TouchPad")>=0
t.isChromeOS=r.indexOf(" CrOS ")>=0})
ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,i){"use strict"
var n=e("./keys")
var r=e("./useragent")
t.addListener=function(e,t,i){if(e.addEventListener){return e.addEventListener(t,i,false)}if(e.attachEvent){var n=function(){i.call(e,window.event)}
i._wrapper=n
e.attachEvent("on"+t,n)}}
t.removeListener=function(e,t,i){if(e.removeEventListener){return e.removeEventListener(t,i,false)}if(e.detachEvent){e.detachEvent("on"+t,i._wrapper||i)}}
t.stopEvent=function(e){t.stopPropagation(e)
t.preventDefault(e)
return false}
t.stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation()
else e.cancelBubble=true}
t.preventDefault=function(e){if(e.preventDefault)e.preventDefault()
else e.returnValue=false}
t.getButton=function(e){if(e.type=="dblclick")return 0
if(e.type=="contextmenu"||r.isMac&&(e.ctrlKey&&!e.altKey&&!e.shiftKey))return 2
if(e.preventDefault){return e.button}else{return{1:0,2:2,4:1}[e.button]}}
t.capture=function(e,i,n){function r(e){i&&i(e)
n&&n(e)
t.removeListener(document,"mousemove",i,true)
t.removeListener(document,"mouseup",r,true)
t.removeListener(document,"dragstart",r,true)}t.addListener(document,"mousemove",i,true)
t.addListener(document,"mouseup",r,true)
t.addListener(document,"dragstart",r,true)
return r}
t.addMouseWheelListener=function(e,i){if("onmousewheel"in e){t.addListener(e,"mousewheel",function(e){var t=8
if(e.wheelDeltaX!==undefined){e.wheelX=-e.wheelDeltaX/t
e.wheelY=-e.wheelDeltaY/t}else{e.wheelX=0
e.wheelY=-e.wheelDelta/t}i(e)})}else if("onwheel"in e){t.addListener(e,"wheel",function(e){var t=.35
switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0
e.wheelY=e.deltaY*t||0
break
case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5
e.wheelY=(e.deltaY||0)*5
break}i(e)})}else{t.addListener(e,"DOMMouseScroll",function(e){if(e.axis&&e.axis==e.HORIZONTAL_AXIS){e.wheelX=(e.detail||0)*5
e.wheelY=0}else{e.wheelX=0
e.wheelY=(e.detail||0)*5}i(e)})}}
t.addMultiMouseDownListener=function(e,i,n,s){var o=0
var a,l,c
var h={2:"dblclick",3:"tripleclick",4:"quadclick"}
t.addListener(e,"mousedown",function(e){if(t.getButton(e)!==0){o=0}else if(e.detail>1){o++
if(o>4)o=1}else{o=1}if(r.isIE){var u=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-l)>5
if(!c||u)o=1
if(c)clearTimeout(c)
c=setTimeout(function(){c=null},i[o-1]||600)
if(o==1){a=e.clientX
l=e.clientY}}n[s]("mousedown",e)
if(o>4)o=0
else if(o>1)return n[s](h[o],e)})
if(r.isOldIE){t.addListener(e,"dblclick",function(e){o=2
if(c)clearTimeout(c)
c=setTimeout(function(){c=null},i[o-1]||600)
n[s]("mousedown",e)
n[s](h[o],e)})}}
var s=r.isMac&&r.isOpera&&!("KeyboardEvent"in window)?function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)}:function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}
t.getModifierString=function(e){return n.KEY_MODS[s(e)]}
function o(e,t,i){var o=s(t)
if(!r.isMac&&a){if(a[91]||a[92])o|=8
if(a.altGr){if((3&o)!=3)a.altGr=0
else return}if(i===18||i===17){var c=t.location||t.keyLocation
if(i===17&&c===1){l=t.timeStamp}else if(i===18&&o===3&&c===2){var h=-l
l=t.timeStamp
h+=l
if(h<3)a.altGr=true}}}if(i in n.MODIFIER_KEYS){switch(n.MODIFIER_KEYS[i]){case"Alt":o=2
break
case"Shift":o=4
break
case"Ctrl":o=1
break
default:o=8
break}i=-1}if(o&8&&(i===91||i===93)){i=-1}if(!o&&i===13){if(t.location||t.keyLocation===3){e(t,o,-i)
if(t.defaultPrevented)return}}if(r.isChromeOS&&o&8){e(t,o,i)
if(t.defaultPrevented)return
else o&=~8}if(!o&&!(i in n.FUNCTION_KEYS)&&!(i in n.PRINTABLE_KEYS)){return false}return e(t,o,i)}var a=null
var l=0
t.addCommandKeyListener=function(e,i){var n=t.addListener
if(r.isOldGecko||r.isOpera&&!("KeyboardEvent"in window)){var s=null
n(e,"keydown",function(e){s=e.keyCode})
n(e,"keypress",function(e){return o(i,e,s)})}else{var l=null
n(e,"keydown",function(e){a[e.keyCode]=true
var t=o(i,e,e.keyCode)
l=e.defaultPrevented
return t})
n(e,"keypress",function(e){if(l&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){t.stopEvent(e)
l=null}})
n(e,"keyup",function(e){a[e.keyCode]=null})
if(!a){a=Object.create(null)
n(window,"focus",function(e){a=Object.create(null)})}}}
if(window.postMessage&&!r.isOldIE){var c=1
t.nextTick=function(e,i){i=i||window
var n="zero-timeout-message-"+c
t.addListener(i,"message",function r(s){if(s.data==n){t.stopPropagation(s)
t.removeListener(i,"message",r)
e()}})
i.postMessage(n,"*")}}t.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame
if(t.nextFrame)t.nextFrame=t.nextFrame.bind(window)
else t.nextFrame=function(e){setTimeout(e,17)}})
ace.define("ace/lib/lang",["require","exports","module"],function(e,t,i){"use strict"
t.last=function(e){return e[e.length-1]}
t.stringReverse=function(e){return e.split("").reverse().join("")}
t.stringRepeat=function(e,t){var i=""
while(t>0){if(t&1)i+=e
if(t>>=1)e+=e}return i}
var n=/^\s\s*/
var r=/\s\s*$/
t.stringTrimLeft=function(e){return e.replace(n,"")}
t.stringTrimRight=function(e){return e.replace(r,"")}
t.copyObject=function(e){var t={}
for(var i in e){t[i]=e[i]}return t}
t.copyArray=function(e){var t=[]
for(var i=0,n=e.length;i<n;i++){if(e[i]&&typeof e[i]=="object")t[i]=this.copyObject(e[i])
else t[i]=e[i]}return t}
t.deepCopy=function(e){if(typeof e!=="object"||!e)return e
var i=e.constructor
if(i===RegExp)return e
var n=i()
for(var r in e){if(typeof e[r]==="object"){n[r]=t.deepCopy(e[r])}else{n[r]=e[r]}}return n}
t.arrayToMap=function(e){var t={}
for(var i=0;i<e.length;i++){t[e[i]]=1}return t}
t.createMap=function(e){var t=Object.create(null)
for(var i in e){t[i]=e[i]}return t}
t.arrayRemove=function(e,t){for(var i=0;i<=e.length;i++){if(t===e[i]){e.splice(i,1)}}}
t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}
t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")}
t.getMatchOffsets=function(e,t){var i=[]
e.replace(t,function(e){i.push({offset:arguments[arguments.length-2],length:e.length})})
return i}
t.deferredCall=function(e){var t=null
var i=function(){t=null
e()}
var n=function(e){n.cancel()
t=setTimeout(i,e||0)
return n}
n.schedule=n
n.call=function(){this.cancel()
e()
return n}
n.cancel=function(){clearTimeout(t)
t=null
return n}
n.isPending=function(){return t}
return n}
t.delayedCall=function(e,t){var i=null
var n=function(){i=null
e()}
var r=function(e){if(i==null)i=setTimeout(n,e||t)}
r.delay=function(e){i&&clearTimeout(i)
i=setTimeout(n,e||t)}
r.schedule=r
r.call=function(){this.cancel()
e()}
r.cancel=function(){i&&clearTimeout(i)
i=null}
r.isPending=function(){return i}
return r}})
ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,i){"use strict"
var n=e("../lib/event")
var r=e("../lib/useragent")
var s=e("../lib/dom")
var o=e("../lib/lang")
var a=r.isChrome<18
var l=r.isIE
var c=function(e,t){var i=s.createElement("textarea")
i.className="ace_text-input"
if(r.isTouchPad)i.setAttribute("x-palm-disable-auto-cap",true)
i.wrap="off"
i.autocorrect="off"
i.autocapitalize="off"
i.spellcheck=false
i.style.opacity="0"
e.insertBefore(i,e.firstChild)
var c=""
var h=false
var u=false
var d=false
var f=""
var g=true
try{var m=document.activeElement===i}catch(p){}n.addListener(i,"blur",function(){t.onBlur()
m=false})
n.addListener(i,"focus",function(){m=true
t.onFocus()
w()})
this.focus=function(){i.focus()}
this.blur=function(){i.blur()}
this.isFocused=function(){return m}
var v=o.delayedCall(function(){m&&w(g)})
var A=o.delayedCall(function(){if(!d){i.value=c
m&&w()}})
function w(e){if(d)return
if(B){t=0
n=e?0:i.value.length-1}else{var t=e?2:1
var n=2}try{i.setSelectionRange(t,n)}catch(r){}}function C(){if(d)return
i.value=c
if(r.isWebKit)A.schedule()}r.isWebKit||t.addEventListener("changeSelection",function(){if(t.selection.isEmpty()!=g){g=!g
v.schedule()}})
C()
if(m)t.onFocus()
var F=function(e){return e.selectionStart===0&&e.selectionEnd===e.value.length}
if(!i.setSelectionRange&&i.createTextRange){i.setSelectionRange=function(e,t){var i=this.createTextRange()
i.collapse(true)
i.moveStart("character",e)
i.moveEnd("character",t)
i.select()}
F=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(i){}if(!t||t.parentElement()!=e)return false
return t.text==e.value}}if(r.isOldIE){var b=false
var E=function(e){if(b)return
var t=i.value
if(d||!t||t==c)return
if(e&&t==c[0])return x.schedule()
D(t)
b=true
C()
b=false}
var x=o.delayedCall(E)
n.addListener(i,"propertychange",E)
var y={13:1,27:1}
n.addListener(i,"keyup",function(e){if(d&&(!i.value||y[e.keyCode]))setTimeout(P,0)
if((i.value.charCodeAt(0)||0)<129){return x.call()}d?W():O()})
n.addListener(i,"keydown",function(e){x.schedule(50)})}var k=function(e){if(h){h=false}else if(F(i)){t.selectAll()
w()}else if(B){w(t.selection.isEmpty())}}
var B=null
this.setInputHandler=function(e){B=e}
this.getInputHandler=function(){return B}
var S=false
var D=function(e){if(B){e=B(e)
B=null}if(u){w()
if(e)t.onPaste(e)
u=false}else if(e==c.charAt(0)){if(S)t.execCommand("del",{source:"ace"})
else t.execCommand("backspace",{source:"ace"})}else{if(e.substring(0,2)==c)e=e.substr(2)
else if(e.charAt(0)==c.charAt(0))e=e.substr(1)
else if(e.charAt(e.length-1)==c.charAt(0))e=e.slice(0,-1)
if(e.charAt(e.length-1)==c.charAt(0))e=e.slice(0,-1)
if(e)t.onTextInput(e)}if(S)S=false}
var L=function(e){if(d)return
var t=i.value
D(t)
C()}
var _=function(e,t){var i=e.clipboardData||window.clipboardData
if(!i||a)return
var n=l?"Text":"text/plain"
if(t){return i.setData(n,t)!==false}else{return i.getData(n)}}
var R=function(e,r){var s=t.getCopyText()
if(!s)return n.preventDefault(e)
if(_(e,s)){r?t.onCut():t.onCopy()
n.preventDefault(e)}else{h=true
i.value=s
i.select()
setTimeout(function(){h=false
C()
w()
r?t.onCut():t.onCopy()})}}
var T=function(e){R(e,true)}
var M=function(e){R(e,false)}
var I=function(e){var s=_(e)
if(typeof s=="string"){if(s)t.onPaste(s)
if(r.isIE)setTimeout(w)
n.preventDefault(e)}else{i.value=""
u=true}}
n.addCommandKeyListener(i,t.onCommandKey.bind(t))
n.addListener(i,"select",k)
n.addListener(i,"input",L)
n.addListener(i,"cut",T)
n.addListener(i,"copy",M)
n.addListener(i,"paste",I)
if(!("oncut"in i)||!("oncopy"in i)||!("onpaste"in i)){n.addListener(e,"keydown",function(e){if(r.isMac&&!e.metaKey||!e.ctrlKey)return
switch(e.keyCode){case 67:M(e)
break
case 86:I(e)
break
case 88:T(e)
break}})}var O=function(e){if(d||!t.onCompositionStart)return
d={}
t.onCompositionStart()
setTimeout(W,0)
t.on("mousedown",P)
if(!t.selection.isEmpty()){t.insert("")
t.session.markUndoGroup()
t.selection.clearSelection()}t.session.markUndoGroup()}
var W=function(){if(!d||!t.onCompositionUpdate)return
var e=i.value.replace(/\x01/g,"")
if(d.lastValue===e)return
t.onCompositionUpdate(e)
if(d.lastValue)t.undo()
d.lastValue=e
if(d.lastValue){var n=t.selection.getRange()
t.insert(d.lastValue)
t.session.markUndoGroup()
d.range=t.selection.getRange()
t.selection.setRange(n)
t.selection.clearSelection()}}
var P=function(e){if(!t.onCompositionEnd)return
var n=d
d=false
var r=setTimeout(function(){r=null
var e=i.value.replace(/\x01/g,"")
if(d)return
else if(e==n.lastValue)C()
else if(!n.lastValue&&e){C()
D(e)}})
B=function s(e){if(r)clearTimeout(r)
e=e.replace(/\x01/g,"")
if(e==n.lastValue)return""
if(n.lastValue&&r)t.undo()
return e}
t.onCompositionEnd()
t.removeListener("mousedown",P)
if(e.type=="compositionend"&&n.range){t.selection.setRange(n.range)}}
var H=o.delayedCall(W,50)
n.addListener(i,"compositionstart",O)
if(r.isGecko){n.addListener(i,"text",function(){H.schedule()})}else{n.addListener(i,"keyup",function(){H.schedule()})
n.addListener(i,"keydown",function(){H.schedule()})}n.addListener(i,"compositionend",P)
this.getElement=function(){return i}
this.setReadOnly=function(e){i.readOnly=e}
this.onContextMenu=function(e){S=true
if(!f)f=i.style.cssText
i.style.cssText="z-index:100000;"+(r.isIE?"opacity:0.1;":"")
w(t.selection.isEmpty())
t._emit("nativecontextmenu",{target:t,domEvent:e})
var o=t.container.getBoundingClientRect()
var a=s.computedStyle(t.container)
var l=o.top+(parseInt(a.borderTopWidth)||0)
var c=o.left+(parseInt(o.borderLeftWidth)||0)
var h=o.bottom-l-i.clientHeight
var u=function(e){i.style.left=e.clientX-c-2+"px"
i.style.top=Math.min(e.clientY-l-2,h)+"px"}
u(e)
if(e.type!="mousedown")return
if(t.renderer.$keepTextAreaAtCursor)t.renderer.$keepTextAreaAtCursor=null
if(r.isWin)n.capture(t.container,u,N)}
this.onContextMenuClose=N
function N(){setTimeout(function(){if(f){i.style.cssText=f
f=""}if(t.renderer.$keepTextAreaAtCursor==null){t.renderer.$keepTextAreaAtCursor=true
t.renderer.$moveTextAreaToCursor()}},0)}if(!r.isGecko||r.isMac){var z=function(e){t.textInput.onContextMenu(e)
N()}
n.addListener(t.renderer.scroller,"contextmenu",z)
n.addListener(i,"contextmenu",z)}}
t.TextInput=c})
ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict"
var n=e("../lib/dom")
var r=e("../lib/event")
var s=e("../lib/useragent")
var o=0
function a(e){e.$clickSelection=null
var t=e.editor
t.setDefaultHandler("mousedown",this.onMouseDown.bind(e))
t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e))
t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e))
t.setDefaultHandler("quadclick",this.onQuadClick.bind(e))
t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e))
var i=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"]
i.forEach(function(t){e[t]=this[t]},this)
e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange")
e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}(function(){this.onMouseDown=function(e){var t=e.inSelection()
var i=e.getDocumentPosition()
this.mousedownEvent=e
var n=this.editor
var r=e.getButton()
if(r!==0){var s=n.getSelectionRange()
var o=s.isEmpty()
if(o){n.selection.moveToPosition(i)}n.textInput.onContextMenu(e.domEvent)
return}if(t&&!n.isFocused()){n.focus()
if(this.$focusTimout&&!this.$clickSelection&&!n.inMultiSelectMode){this.mousedownEvent.time=Date.now()
this.setState("focusWait")
this.captureMouse(e)
return}}this.captureMouse(e)
if(!t||this.$clickSelection||e.getShiftKey()||n.inMultiSelectMode){this.startSelect(i)}else if(t){this.mousedownEvent.time=Date.now()
this.startSelect(i)}return e.preventDefault()}
this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y)
var t=this.editor
var i=this.mousedownEvent.getShiftKey()
setTimeout(function(){if(i){t.selection.selectToPosition(e)}else if(!this.$clickSelection){t.selection.moveToPosition(e)}this.select()}.bind(this),0)
if(t.renderer.scroller.setCapture){t.renderer.scroller.setCapture()}t.setStyle("ace_selecting")
this.setState("select")}
this.select=function(){var e,t=this.editor
var i=t.renderer.screenToTextCoordinates(this.x,this.y)
if(this.$clickSelection){var n=this.$clickSelection.comparePoint(i)
if(n==-1){e=this.$clickSelection.end}else if(n==1){e=this.$clickSelection.start}else{var r=c(this.$clickSelection,i)
i=r.cursor
e=r.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(i)
t.renderer.scrollCursorIntoView()}
this.extendSelectionBy=function(e){var t,i=this.editor
var n=i.renderer.screenToTextCoordinates(this.x,this.y)
var r=i.selection[e](n.row,n.column)
if(this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start)
var o=this.$clickSelection.comparePoint(r.end)
if(s==-1&&o<=0){t=this.$clickSelection.end
if(r.end.row!=n.row||r.end.column!=n.column)n=r.start}else if(o==1&&s>=0){t=this.$clickSelection.start
if(r.start.row!=n.row||r.start.column!=n.column)n=r.end}else if(s==-1&&o==1){n=r.end
t=r.start}else{var a=c(this.$clickSelection,n)
n=a.cursor
t=a.anchor}i.selection.setSelectionAnchor(t.row,t.column)}i.selection.selectToPosition(n)
i.renderer.scrollCursorIntoView()}
this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null
this.editor.unsetStyle("ace_selecting")
if(this.editor.renderer.scroller.releaseCapture){this.editor.renderer.scroller.releaseCapture()}}
this.focusWait=function(){var e=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)
var t=Date.now()
if(e>o||t-this.mousedownEvent.time>this.$focusTimout)this.startSelect(this.mousedownEvent.getDocumentPosition())}
this.onDoubleClick=function(e){var t=e.getDocumentPosition()
var i=this.editor
var n=i.session
var r=n.getBracketRange(t)
if(r){if(r.isEmpty()){r.start.column--
r.end.column++}this.setState("select")}else{r=i.selection.getWordRange(t.row,t.column)
this.setState("selectByWords")}this.$clickSelection=r}
this.onTripleClick=function(e){var t=e.getDocumentPosition()
var i=this.editor
this.setState("selectByLines")
var n=i.getSelectionRange()
if(n.isMultiLine()&&n.contains(t.row,t.column)){this.$clickSelection=i.selection.getLineRange(n.start.row)
this.$clickSelection.end=i.selection.getLineRange(n.end.row).end}else{this.$clickSelection=i.selection.getLineRange(t.row)}}
this.onQuadClick=function(e){var t=this.editor
t.selectAll()
this.$clickSelection=t.getSelectionRange()
this.setState("selectAll")}
this.onMouseWheel=function(e){if(e.getAccelKey())return
if(e.getShiftKey()&&e.wheelY&&!e.wheelX){e.wheelX=e.wheelY
e.wheelY=0}var t=e.domEvent.timeStamp
var i=t-(this.$lastScrollTime||0)
var n=this.editor
var r=n.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed)
if(r||i<200){this.$lastScrollTime=t
n.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed)
return e.stop()}}}).call(a.prototype)
t.DefaultHandlers=a
function l(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))}function c(e,t){if(e.start.row==e.end.row)var i=2*t.column-e.start.column-e.end.column
else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var i=t.column-4
else var i=2*t.row-e.start.row-e.end.row
if(i<0)return{cursor:e.start,anchor:e.end}
else return{cursor:e.end,anchor:e.start}}})
ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/dom")
function s(e){this.isOpen=false
this.$element=null
this.$parentNode=e}(function(){this.$init=function(){this.$element=r.createElement("div")
this.$element.className="ace_tooltip"
this.$element.style.display="none"
this.$parentNode.appendChild(this.$element)
return this.$element}
this.getElement=function(){return this.$element||this.$init()}
this.setText=function(e){r.setInnerText(this.getElement(),e)}
this.setHtml=function(e){this.getElement().innerHTML=e}
this.setPosition=function(e,t){this.getElement().style.left=e+"px"
this.getElement().style.top=t+"px"}
this.setClassName=function(e){r.addCssClass(this.getElement(),e)}
this.show=function(e,t,i){if(e!=null)this.setText(e)
if(t!=null&&i!=null)this.setPosition(t,i)
if(!this.isOpen){this.getElement().style.display="block"
this.isOpen=true}}
this.hide=function(){if(this.isOpen){this.getElement().style.display="none"
this.isOpen=false}}
this.getHeight=function(){return this.getElement().offsetHeight}
this.getWidth=function(){return this.getElement().offsetWidth}}).call(s.prototype)
t.Tooltip=s})
ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,i){"use strict"
var n=e("../lib/dom")
var r=e("../lib/oop")
var s=e("../lib/event")
var o=e("../tooltip").Tooltip
function a(e){var t=e.editor
var i=t.renderer.$gutterLayer
var r=new l(t.container)
e.editor.setDefaultHandler("guttermousedown",function(n){if(!t.isFocused()||n.getButton()!=0)return
var r=i.getRegion(n)
if(r=="foldWidgets")return
var s=n.getDocumentPosition().row
var o=t.session.selection
if(n.getShiftKey())o.selectTo(s,0)
else{if(n.domEvent.detail==2){t.selectAll()
return n.preventDefault()}e.$clickSelection=t.selection.getLineRange(s)}e.setState("selectByLines")
e.captureMouse(n)
return n.preventDefault()})
var o,a,c
function h(){var n=a.getDocumentPosition().row
var s=i.$annotations[n]
if(!s)return u()
var o=t.session.getLength()
if(n==o){var l=t.renderer.pixelToScreenCoordinates(0,a.y).row
var h=a.$pos
if(l>t.session.documentToScreenRow(h.row,h.column))return u()}if(c==s)return
c=s.text.join("<br/>")
r.setHtml(c)
r.show()
t.on("mousewheel",u)
if(e.$tooltipFollowsMouse){d(a)}else{var f=i.$cells[t.session.documentToScreenRow(n,0)].element
var g=f.getBoundingClientRect()
var m=r.getElement().style
m.left=g.right+"px"
m.top=g.bottom+"px"}}function u(){if(o)o=clearTimeout(o)
if(c){r.hide()
c=null
t.removeEventListener("mousewheel",u)}}function d(e){r.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousemove",function(t){var i=t.domEvent.target||t.domEvent.srcElement
if(n.hasCssClass(i,"ace_fold-widget"))return u()
if(c&&e.$tooltipFollowsMouse)d(t)
a=t
if(o)return
o=setTimeout(function(){o=null
if(a&&!e.isMousePressed)h()
else u()},50)})
s.addListener(t.renderer.$gutter,"mouseout",function(e){a=null
if(!c||o)return
o=setTimeout(function(){o=null
u()},50)})
t.on("changeSession",u)}function l(e){o.call(this,e)}r.inherits(l,o);(function(){this.setPosition=function(e,t){var i=window.innerWidth||document.documentElement.clientWidth
var n=window.innerHeight||document.documentElement.clientHeight
var r=this.getWidth()
var s=this.getHeight()
e+=15
t+=15
if(e+r>i){e-=e+r-i}if(t+s>n){t-=20+s}o.prototype.setPosition.call(this,e,t)}}).call(l.prototype)
t.GutterHandler=a})
ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict"
var n=e("../lib/event")
var r=e("../lib/useragent")
var s=t.MouseEvent=function(e,t){this.domEvent=e
this.editor=t
this.x=this.clientX=e.clientX
this.y=this.clientY=e.clientY
this.$pos=null
this.$inSelection=null
this.propagationStopped=false
this.defaultPrevented=false};(function(){this.stopPropagation=function(){n.stopPropagation(this.domEvent)
this.propagationStopped=true}
this.preventDefault=function(){n.preventDefault(this.domEvent)
this.defaultPrevented=true}
this.stop=function(){this.stopPropagation()
this.preventDefault()}
this.getDocumentPosition=function(){if(this.$pos)return this.$pos
this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)
return this.$pos}
this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection
var e=this.editor
var t=e.getSelectionRange()
if(t.isEmpty())this.$inSelection=false
else{var i=this.getDocumentPosition()
this.$inSelection=t.contains(i.row,i.column)}return this.$inSelection}
this.getButton=function(){return n.getButton(this.domEvent)}
this.getShiftKey=function(){return this.domEvent.shiftKey}
this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)})
ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,i){"use strict"
var n=e("../lib/dom")
var r=e("../lib/event")
var s=e("../lib/useragent")
var o=200
var a=200
var l=5
function c(e){var t=e.editor
var i=n.createElement("img")
i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
if(s.isOpera)i.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"
var c=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"]
c.forEach(function(t){e[t]=this[t]},this)
t.addEventListener("mousedown",this.onMouseDown.bind(e))
var u=t.container
var d,f,g
var m,p
var v,A=0
var w
var C
var F
var b
var E
this.onDragStart=function(e){if(this.cancelDrag||!u.draggable){var n=this
setTimeout(function(){n.startSelect()
n.captureMouse(e)},0)
return e.preventDefault()}p=t.getSelectionRange()
var r=e.dataTransfer
r.effectAllowed=t.getReadOnly()?"copy":"copyMove"
if(s.isOpera){t.container.appendChild(i)
i._top=i.offsetTop}r.setDragImage&&r.setDragImage(i,0,0)
if(s.isOpera){t.container.removeChild(i)}r.clearData()
r.setData("Text",t.session.getTextRange())
C=true
this.setState("drag")}
this.onDragEnd=function(e){u.draggable=false
C=false
this.setState(null)
if(!t.getReadOnly()){var i=e.dataTransfer.dropEffect
if(!w&&i=="move")t.session.remove(t.getSelectionRange())
t.renderer.$cursorLayer.setBlinking(true)}this.editor.unsetStyle("ace_dragging")}
this.onDragEnter=function(e){if(t.getReadOnly()||!_(e.dataTransfer))return
if(!d)B()
A++
e.dataTransfer.dropEffect=w=R(e)
return r.preventDefault(e)}
this.onDragOver=function(e){if(t.getReadOnly()||!_(e.dataTransfer))return
if(!d){B()
A++}if(D!==null)D=null
f=e.clientX
g=e.clientY
e.dataTransfer.dropEffect=w=R(e)
return r.preventDefault(e)}
this.onDragLeave=function(e){A--
if(A<=0&&d){S()
w=null
return r.preventDefault(e)}}
this.onDrop=function(e){if(!d)return
var i=e.dataTransfer
if(C){switch(w){case"move":if(p.contains(v.row,v.column)){p={start:v,end:v}}else{p=t.moveText(p,v)}break
case"copy":p=t.moveText(p,v,true)
break}}else{var n=i.getData("Text")
p={start:v,end:t.session.insert(v,n)}
t.focus()
w=null}S()
return r.preventDefault(e)}
r.addListener(u,"dragstart",this.onDragStart.bind(e))
r.addListener(u,"dragend",this.onDragEnd.bind(e))
r.addListener(u,"dragenter",this.onDragEnter.bind(e))
r.addListener(u,"dragover",this.onDragOver.bind(e))
r.addListener(u,"dragleave",this.onDragLeave.bind(e))
r.addListener(u,"drop",this.onDrop.bind(e))
function x(e,i){var n=Date.now()
var r=!i||e.row!=i.row
var s=!i||e.column!=i.column
if(!b||r||s){t.$blockScrolling+=1
t.moveCursorToPosition(e)
t.$blockScrolling-=1
b=n
E={x:f,y:g}}else{var o=h(E.x,E.y,f,g)
if(o>l){b=null}else if(n-b>=a){t.renderer.scrollCursorIntoView()
b=null}}}function y(e,i){var n=Date.now()
var r=t.renderer.layerConfig.lineHeight
var s=t.renderer.layerConfig.characterWidth
var a=t.renderer.scroller.getBoundingClientRect()
var l={x:{left:f-a.left,right:a.right-f},y:{top:g-a.top,bottom:a.bottom-g}}
var c=Math.min(l.x.left,l.x.right)
var h=Math.min(l.y.top,l.y.bottom)
var u={row:e.row,column:e.column}
if(c/s<=2){u.column+=l.x.left<l.x.right?-3:+2}if(h/r<=1){u.row+=l.y.top<l.y.bottom?-1:+1}var d=e.row!=u.row
var m=e.column!=u.column
var p=!i||e.row!=i.row
if(d||m&&!p){if(!F)F=n
else if(n-F>=o)t.renderer.scrollCursorIntoView(u)}else{F=null}}function k(){var e=v
v=t.renderer.screenToTextCoordinates(f,g)
x(v,e)
y(v,e)}function B(){p=t.selection.toOrientedRange()
d=t.session.addMarker(p,"ace_selection",t.getSelectionStyle())
t.clearSelection()
if(t.isFocused())t.renderer.$cursorLayer.setBlinking(false)
clearInterval(m)
m=setInterval(k,20)
A=0
r.addListener(document,"mousemove",L)}function S(){clearInterval(m)
t.session.removeMarker(d)
d=null
t.$blockScrolling+=1
t.selection.fromOrientedRange(p)
t.$blockScrolling-=1
if(t.isFocused()&&!C)t.renderer.$cursorLayer.setBlinking(!t.getReadOnly())
p=null
A=0
F=null
b=null
r.removeListener(document,"mousemove",L)}var D=null
function L(){if(D==null){D=setTimeout(function(){if(D!=null&&d)S()},20)}}function _(e){var t=e.types
return!t||Array.prototype.some.call(t,function(e){return e=="text/plain"||e=="Text"})}function R(e){var t=["copy","copymove","all","uninitialized"]
var i=["move","copymove","linkmove","all","uninitialized"]
var n=s.isMac?e.altKey:e.ctrlKey
var r="uninitialized"
try{r=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none"
if(n&&t.indexOf(r)>=0)o="copy"
else if(i.indexOf(r)>=0)o="move"
else if(t.indexOf(r)>=0)o="copy"
return o}}(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time
if(e>this.editor.getDragDelay())this.startDrag()}
this.dragWaitEnd=function(){var e=this.editor.container
e.draggable=false
this.startSelect(this.mousedownEvent.getDocumentPosition())
this.selectEnd()}
this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly())
this.editor.unsetStyle("ace_dragging")
this.dragWaitEnd()}
this.startDrag=function(){this.cancelDrag=false
var e=this.editor.container
e.draggable=true
this.editor.renderer.$cursorLayer.setBlinking(false)
this.editor.setStyle("ace_dragging")
this.setState("dragReady")}
this.onMouseDrag=function(e){var t=this.editor.container
if(s.isIE&&this.state=="dragReady"){var i=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)
if(i>3)t.dragDrop()}if(this.state==="dragWait"){var i=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)
if(i>0){t.draggable=false
this.startSelect(this.mousedownEvent.getDocumentPosition())}}}
this.onMouseDown=function(e){if(!this.$dragEnabled)return
this.mousedownEvent=e
var t=this.editor
var i=e.inSelection()
var n=e.getButton()
var r=e.domEvent.detail||1
if(r===1&&n===0&&i){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return
this.mousedownEvent.time=Date.now()
var o=e.domEvent.target||e.domEvent.srcElement
if("unselectable"in o)o.unselectable="on"
if(t.getDragDelay()){if(s.isWebKit){this.cancelDrag=true
var a=t.container
a.draggable=true}this.setState("dragWait")}else{this.startDrag()}this.captureMouse(e,this.onMouseDrag.bind(this))
e.defaultPrevented=true}}}).call(c.prototype)
function h(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))}t.DragdropHandler=c})
ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict"
var n=e("./dom")
t.get=function(e,t){var i=new XMLHttpRequest
i.open("GET",e,true)
i.onreadystatechange=function(){if(i.readyState===4){t(i.responseText)}}
i.send(null)}
t.loadScript=function(e,t){var i=n.getDocumentHead()
var r=document.createElement("script")
r.src=e
i.appendChild(r)
r.onload=r.onreadystatechange=function(e,i){if(i||!r.readyState||r.readyState=="loaded"||r.readyState=="complete"){r=r.onload=r.onreadystatechange=null
if(!i)t()}}}
t.qualifyURL=function(e){var t=document.createElement("a")
t.href=e
return t.href}})
ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,i){"use strict"
var n={}
var r=function(){this.propagationStopped=true}
var s=function(){this.defaultPrevented=true}
n._emit=n._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={})
this._defaultHandlers||(this._defaultHandlers={})
var i=this._eventRegistry[e]||[]
var n=this._defaultHandlers[e]
if(!i.length&&!n)return
if(typeof t!="object"||!t)t={}
if(!t.type)t.type=e
if(!t.stopPropagation)t.stopPropagation=r
if(!t.preventDefault)t.preventDefault=s
i=i.slice()
for(var o=0;o<i.length;o++){i[o](t,this)
if(t.propagationStopped)break}if(n&&!t.defaultPrevented)return n(t,this)}
n._signal=function(e,t){var i=(this._eventRegistry||{})[e]
if(!i)return
i=i.slice()
for(var n=0;n<i.length;n++)i[n](t,this)}
n.once=function(e,t){var i=this
t&&this.addEventListener(e,function n(){i.removeEventListener(e,n)
t.apply(null,arguments)})}
n.setDefaultHandler=function(e,t){var i=this._defaultHandlers
if(!i)i=this._defaultHandlers={_disabled_:{}}
if(i[e]){var n=i[e]
var r=i._disabled_[e]
if(!r)i._disabled_[e]=r=[]
r.push(n)
var s=r.indexOf(t)
if(s!=-1)r.splice(s,1)}i[e]=t}
n.removeDefaultHandler=function(e,t){var i=this._defaultHandlers
if(!i)return
var n=i._disabled_[e]
if(i[e]==t){var r=i[e]
if(n)this.setDefaultHandler(e,n.pop())}else if(n){var s=n.indexOf(t)
if(s!=-1)n.splice(s,1)}}
n.on=n.addEventListener=function(e,t,i){this._eventRegistry=this._eventRegistry||{}
var n=this._eventRegistry[e]
if(!n)n=this._eventRegistry[e]=[]
if(n.indexOf(t)==-1)n[i?"unshift":"push"](t)
return t}
n.off=n.removeListener=n.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{}
var i=this._eventRegistry[e]
if(!i)return
var n=i.indexOf(t)
if(n!==-1)i.splice(n,1)}
n.removeAllListeners=function(e){if(this._eventRegistry)this._eventRegistry[e]=[]}
t.EventEmitter=n})
ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(e,t,i){"no use strict"
var n=e("./lib/lang")
var r=e("./lib/oop")
var s=e("./lib/net")
var o=e("./lib/event_emitter").EventEmitter
var a=function(){return this}()
var l={packaged:false,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}}
t.get=function(e){if(!l.hasOwnProperty(e))throw new Error("Unknown config key: "+e)
return l[e]}
t.set=function(e,t){if(!l.hasOwnProperty(e))throw new Error("Unknown config key: "+e)
l[e]=t}
t.all=function(){return n.copyObject(l)}
r.implement(t,o)
t.moduleUrl=function(e,t){if(l.$moduleUrls[e])return l.$moduleUrls[e]
var i=e.split("/")
t=t||i[i.length-2]||""
var n=t=="snippets"?"/":"-"
var r=i[i.length-1]
if(n=="-"){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g")
r=r.replace(s,"")}if((!r||r==t)&&i.length>1)r=i[i.length-2]
var o=l[t+"Path"]
if(o==null){o=l.basePath}else if(n=="/"){t=n=""}if(o&&o.slice(-1)!="/")o+="/"
return o+t+n+r+this.get("suffix")}
t.setModuleUrl=function(e,t){return l.$moduleUrls[e]=t}
t.$loading={}
t.loadModule=function(i,n){var r,o
if(Array.isArray(i)){o=i[0]
i=i[1]}try{r=e(i)}catch(a){}if(r&&!t.$loading[i])return n&&n(r)
if(!t.$loading[i])t.$loading[i]=[]
t.$loading[i].push(n)
if(t.$loading[i].length>1)return
var l=function(){e([i],function(e){t._emit("load.module",{name:i,module:e})
var n=t.$loading[i]
t.$loading[i]=null
n.forEach(function(t){t&&t(e)})})}
if(!t.get("packaged"))return l()
s.loadScript(t.moduleUrl(i,o),l)}
c(true)
function c(n){l.packaged=n||e.packaged||i.packaged||a.define&&define.packaged
if(!a.document)return""
var r={}
var s=""
var o=document.currentScript||document._currentScript
var c=o&&o.ownerDocument||document
var u=c.getElementsByTagName("script")
for(var d=0;d<u.length;d++){var f=u[d]
var g=f.src||f.getAttribute("src")
if(!g)continue
var m=f.attributes
for(var p=0,v=m.length;p<v;p++){var A=m[p]
if(A.name.indexOf("data-ace-")===0){r[h(A.name.replace(/^data-ace-/,""))]=A.value}}var w=g.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/)
if(w)s=w[1]}if(s){r.base=r.base||s
r.packaged=true}r.basePath=r.base
r.workerPath=r.workerPath||r.base
r.modePath=r.modePath||r.base
r.themePath=r.themePath||r.base
delete r.base
for(var C in r)if(typeof r[C]!=="undefined")t.set(C,r[C])}t.init=c
function h(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var u={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={}
if(!e){e=Object.keys(this.$options)}else if(!Array.isArray(e)){t=e
e=Object.keys(t)}e.forEach(function(e){t[e]=this.getOption(e)},this)
return t},setOption:function(e,t){if(this["$"+e]===t)return
var i=this.$options[e]
if(!i){if(typeof console!="undefined"&&console.warn)console.warn('misspelled option "'+e+'"')
return undefined}if(i.forwardTo)return this[i.forwardTo]&&this[i.forwardTo].setOption(e,t)
if(!i.handlesSet)this["$"+e]=t
if(i&&i.set)i.set.call(this,t)},getOption:function(e){var t=this.$options[e]
if(!t){if(typeof console!="undefined"&&console.warn)console.warn('misspelled option "'+e+'"')
return undefined}if(t.forwardTo)return this[t.forwardTo]&&this[t.forwardTo].getOption(e)
return t&&t.get?t.get.call(this):this["$"+e]}}
var d={}
t.defineOptions=function(e,t,i){if(!e.$options)d[t]=e.$options={}
Object.keys(i).forEach(function(t){var n=i[t]
if(typeof n=="string")n={forwardTo:n}
n.name||(n.name=t)
e.$options[n.name]=n
if("initialValue"in n)e["$"+n.name]=n.initialValue})
r.implement(e,u)
return this}
t.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var i=e.$options[t]
if("value"in i)e.setOption(t,i.value)})}
t.setDefaultValue=function(e,i,n){var r=d[e]||(d[e]={})
if(r[i]){if(r.forwardTo)t.setDefaultValue(r.forwardTo,i,n)
else r[i].value=n}}
t.setDefaultValues=function(e,i){Object.keys(i).forEach(function(n){t.setDefaultValue(e,n,i[n])})}})
ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,i){"use strict"
var n=e("../lib/event")
var r=e("../lib/useragent")
var s=e("./default_handlers").DefaultHandlers
var o=e("./default_gutter_handler").GutterHandler
var a=e("./mouse_event").MouseEvent
var l=e("./dragdrop_handler").DragdropHandler
var c=e("../config")
var h=function(e){var t=this
this.editor=e
new s(this)
new o(this)
new l(this)
var i=function(t){if(!e.isFocused()&&e.textInput)e.textInput.onContextMenu(t)
e.focus()}
var a=e.renderer.getMouseEventTarget()
n.addListener(a,"click",this.onMouseEvent.bind(this,"click"))
n.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove"))
n.addMultiMouseDownListener(a,[400,300,250],this,"onMouseEvent")
if(e.renderer.scrollBarV){n.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent")
n.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent")
if(r.isIE){n.addListener(e.renderer.scrollBarV.element,"mousedown",i)
n.addListener(e.renderer.scrollBarH.element,"mousemove",i)}}n.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"))
var c=e.renderer.$gutter
n.addListener(c,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"))
n.addListener(c,"click",this.onMouseEvent.bind(this,"gutterclick"))
n.addListener(c,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"))
n.addListener(c,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"))
n.addListener(a,"mousedown",i)
n.addListener(c,"mousedown",function(t){e.focus()
return n.preventDefault(t)})
e.on("mousemove",function(i){if(t.state||t.$dragDelay||!t.$dragEnabled)return
var n=e.renderer.screenToTextCoordinates(i.x,i.y)
var r=e.session.selection.getRange()
var s=e.renderer
if(!r.isEmpty()&&r.insideStart(n.row,n.column)){s.setCursorStyle("default")}else{s.setCursorStyle("")}})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new a(t,this.editor))}
this.onMouseMove=function(e,t){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove
if(!i||!i.length)return
this.editor._emit(e,new a(t,this.editor))}
this.onMouseWheel=function(e,t){var i=new a(t,this.editor)
i.speed=this.$scrollSpeed*2
i.wheelX=t.wheelX
i.wheelY=t.wheelY
this.editor._emit(e,i)}
this.setState=function(e){this.state=e}
this.captureMouse=function(e,t){this.x=e.x
this.y=e.y
this.isMousePressed=true
var i=this.editor.renderer
if(i.$keepTextAreaAtCursor)i.$keepTextAreaAtCursor=null
var s=this
var o=function(e){if(!e)return
if(r.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse()
s.x=e.clientX
s.y=e.clientY
t&&t(e)
s.mouseEvent=new a(e,s.editor)
s.$mouseMoved=true}
var l=function(e){clearInterval(h)
c()
s[s.state+"End"]&&s[s.state+"End"](e)
s.state=""
if(i.$keepTextAreaAtCursor==null){i.$keepTextAreaAtCursor=true
i.$moveTextAreaToCursor()}s.isMousePressed=false
s.$onCaptureMouseMove=s.releaseMouse=null
e&&s.onMouseEvent("mouseup",e)}
var c=function(){s[s.state]&&s[s.state]()
s.$mouseMoved=false}
if(r.isOldIE&&e.domEvent.type=="dblclick"){return setTimeout(function(){l(e)})}s.$onCaptureMouseMove=o
s.releaseMouse=n.capture(this.editor.container,o,l)
var h=setInterval(c,20)}
this.releaseMouse=null
this.cancelContextMenu=function(){var e=function(t){if(t&&t.domEvent&&t.domEvent.type!="contextmenu")return
this.editor.off("nativecontextmenu",e)
if(t&&t.domEvent)n.stopEvent(t.domEvent)}.bind(this)
setTimeout(e,10)
this.editor.on("nativecontextmenu",e)}}).call(h.prototype)
c.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:true},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:true}})
t.MouseHandler=h})
ace.define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,i){"use strict"
function n(e){e.on("click",function(t){var i=t.getDocumentPosition()
var n=e.session
var r=n.getFoldAt(i.row,i.column,1)
if(r){if(t.getAccelKey())n.removeFold(r)
else n.expandFold(r)
t.stop()}})
e.on("gutterclick",function(t){var i=e.renderer.$gutterLayer.getRegion(t)
if(i=="foldWidgets"){var n=t.getDocumentPosition().row
var r=e.session
if(r.foldWidgets&&r.foldWidgets[n])e.session.onFoldWidgetClick(n,t)
if(!e.isFocused())e.focus()
t.stop()}})
e.on("gutterdblclick",function(t){var i=e.renderer.$gutterLayer.getRegion(t)
if(i=="foldWidgets"){var n=t.getDocumentPosition().row
var r=e.session
var s=r.getParentFoldRangeData(n,true)
var o=s.range||s.firstRange
if(o){n=o.start.row
var a=r.getFoldAt(n,r.getLine(n).length,1)
if(a){r.removeFold(a)}else{r.addFold("...",o)
e.renderer.scrollCursorIntoView({row:o.start.row,column:0})}}t.stop()}})}t.FoldHandler=n})
ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,i){"use strict"
var n=e("../lib/keys")
var r=e("../lib/event")
var s=function(e){this.$editor=e
this.$data={editor:e}
this.$handlers=[]
this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler)
this.$defaultHandler=e
this.addKeyboardHandler(e,0)}
this.setKeyboardHandler=function(e){var t=this.$handlers
if(t[t.length-1]==e)return
while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1])
this.addKeyboardHandler(e,1)}
this.addKeyboardHandler=function(e,t){if(!e)return
if(typeof e=="function"&&!e.handleKeyboard)e.handleKeyboard=e
var i=this.$handlers.indexOf(e)
if(i!=-1)this.$handlers.splice(i,1)
if(t==undefined)this.$handlers.push(e)
else this.$handlers.splice(t,0,e)
if(i==-1&&e.attach)e.attach(this.$editor)}
this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e)
if(t==-1)return false
this.$handlers.splice(t,1)
e.detach&&e.detach(this.$editor)
return true}
this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]}
this.$callKeyboardHandlers=function(e,t,i,n){var s
var o=false
var a=this.$editor.commands
for(var l=this.$handlers.length;l--;){s=this.$handlers[l].handleKeyboard(this.$data,e,t,i,n)
if(!s||!s.command)continue
if(s.command=="null"){o=true}else{o=a.exec(s.command,this.$editor,s.args,n)}if(o&&n&&e!=-1&&s.passEvent!=true&&s.command.passEvent!=true){r.stopEvent(n)}if(o)break}return o}
this.onCommandKey=function(e,t,i){var r=n.keyCodeToString(i)
this.$callKeyboardHandlers(t,r,i,e)}
this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e)
if(!t)this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(s.prototype)
t.KeyBinding=s})
ace.define("ace/range",["require","exports","module"],function(e,t,i){"use strict"
var n=function(e,t){return e.row-t.row||e.column-t.column}
var r=function(e,t,i,n){this.start={row:e,column:t}
this.end={row:i,column:n}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column}
this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"}
this.contains=function(e,t){return this.compare(e,t)==0}
this.compareRange=function(e){var t,i=e.end,n=e.start
t=this.compare(i.row,i.column)
if(t==1){t=this.compare(n.row,n.column)
if(t==1){return 2}else if(t==0){return 1}else{return 0}}else if(t==-1){return-2}else{t=this.compare(n.row,n.column)
if(t==-1){return-1}else if(t==1){return 42}else{return 0}}}
this.comparePoint=function(e){return this.compare(e.row,e.column)}
this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0}
this.intersects=function(e){var t=this.compareRange(e)
return t==-1||t==0||t==1}
this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t}
this.isStart=function(e,t){return this.start.row==e&&this.start.column==t}
this.setStart=function(e,t){if(typeof e=="object"){this.start.column=e.column
this.start.row=e.row}else{this.start.row=e
this.start.column=t}}
this.setEnd=function(e,t){if(typeof e=="object"){this.end.column=e.column
this.end.row=e.row}else{this.end.row=e
this.end.column=t}}
this.inside=function(e,t){if(this.compare(e,t)==0){if(this.isEnd(e,t)||this.isStart(e,t)){return false}else{return true}}return false}
this.insideStart=function(e,t){if(this.compare(e,t)==0){if(this.isEnd(e,t)){return false}else{return true}}return false}
this.insideEnd=function(e,t){if(this.compare(e,t)==0){if(this.isStart(e,t)){return false}else{return true}}return false}
this.compare=function(e,t){if(!this.isMultiLine()){if(e===this.start.row){return t<this.start.column?-1:t>this.end.column?1:0}}if(e<this.start.row)return-1
if(e>this.end.row)return 1
if(this.start.row===e)return t>=this.start.column?0:-1
if(this.end.row===e)return t<=this.end.column?0:1
return 0}
this.compareStart=function(e,t){if(this.start.row==e&&this.start.column==t){return-1}else{return this.compare(e,t)}}
this.compareEnd=function(e,t){if(this.end.row==e&&this.end.column==t){return 1}else{return this.compare(e,t)}}
this.compareInside=function(e,t){if(this.end.row==e&&this.end.column==t){return 1}else if(this.start.row==e&&this.start.column==t){return-1}else{return this.compare(e,t)}}
this.clipRows=function(e,t){if(this.end.row>t)var i={row:t+1,column:0}
else if(this.end.row<e)var i={row:e,column:0}
if(this.start.row>t)var n={row:t+1,column:0}
else if(this.start.row<e)var n={row:e,column:0}
return r.fromPoints(n||this.start,i||this.end)}
this.extend=function(e,t){var i=this.compare(e,t)
if(i==0)return this
else if(i==-1)var n={row:e,column:t}
else var s={row:e,column:t}
return r.fromPoints(n||this.start,s||this.end)}
this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column}
this.isMultiLine=function(){return this.start.row!==this.end.row}
this.clone=function(){return r.fromPoints(this.start,this.end)}
this.collapseRows=function(){if(this.end.column==0)return new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0)
else return new r(this.start.row,0,this.end.row,0)}
this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start)
var i=e.documentToScreenPosition(this.end)
return new r(t.row,t.column,i.row,i.column)}
this.moveBy=function(e,t){this.start.row+=e
this.start.column+=t
this.end.row+=e
this.end.column+=t}}).call(r.prototype)
r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)}
r.comparePoints=n
r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column}
t.Range=r})
ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/lang")
var s=e("./lib/event_emitter").EventEmitter
var o=e("./range").Range
var a=function(e){this.session=e
this.doc=e.getDocument()
this.clearSelection()
this.lead=this.selectionLead=this.doc.createAnchor(0,0)
this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0)
var t=this
this.lead.on("change",function(e){t._emit("changeCursor")
if(!t.$isEmpty)t._emit("changeSelection")
if(!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column)t.$desiredColumn=null})
this.selectionAnchor.on("change",function(){if(!t.$isEmpty)t._emit("changeSelection")})};(function(){n.implement(this,s)
this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column}
this.isMultiLine=function(){if(this.isEmpty()){return false}return this.getRange().isMultiLine()}
this.getCursor=function(){return this.lead.getPosition()}
this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t)
if(this.$isEmpty){this.$isEmpty=false
this._emit("changeSelection")}}
this.getSelectionAnchor=function(){if(this.$isEmpty)return this.getSelectionLead()
else return this.anchor.getPosition()}
this.getSelectionLead=function(){return this.lead.getPosition()}
this.shiftSelection=function(e){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+e)
return}var t=this.getSelectionAnchor()
var i=this.getSelectionLead()
var n=this.isBackwards()
if(!n||t.column!==0)this.setSelectionAnchor(t.row,t.column+e)
if(n||i.column!==0){this.$moveSelection(function(){this.moveCursorTo(i.row,i.column+e)})}}
this.isBackwards=function(){var e=this.anchor
var t=this.lead
return e.row>t.row||e.row==t.row&&e.column>t.column}
this.getRange=function(){var e=this.anchor
var t=this.lead
if(this.isEmpty())return o.fromPoints(t,t)
if(this.isBackwards()){return o.fromPoints(t,e)}else{return o.fromPoints(e,t)}}
this.clearSelection=function(){if(!this.$isEmpty){this.$isEmpty=true
this._emit("changeSelection")}}
this.selectAll=function(){var e=this.doc.getLength()-1
this.setSelectionAnchor(0,0)
this.moveCursorTo(e,this.doc.getLine(e).length)}
this.setRange=this.setSelectionRange=function(e,t){if(t){this.setSelectionAnchor(e.end.row,e.end.column)
this.selectTo(e.start.row,e.start.column)}else{this.setSelectionAnchor(e.start.row,e.start.column)
this.selectTo(e.end.row,e.end.column)}if(this.getRange().isEmpty())this.$isEmpty=true
this.$desiredColumn=null}
this.$moveSelection=function(e){var t=this.lead
if(this.$isEmpty)this.setSelectionAnchor(t.row,t.column)
e.call(this)}
this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})}
this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})}
this.moveTo=function(e,t){this.clearSelection()
this.moveCursorTo(e,t)}
this.moveToPosition=function(e){this.clearSelection()
this.moveCursorToPosition(e)}
this.selectUp=function(){this.$moveSelection(this.moveCursorUp)}
this.selectDown=function(){this.$moveSelection(this.moveCursorDown)}
this.selectRight=function(){this.$moveSelection(this.moveCursorRight)}
this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)}
this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)}
this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)}
this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)}
this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)}
this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)}
this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)}
this.getWordRange=function(e,t){if(typeof t=="undefined"){var i=e||this.lead
e=i.row
t=i.column}return this.session.getWordRange(e,t)}
this.selectWord=function(){this.setSelectionRange(this.getWordRange())}
this.selectAWord=function(){var e=this.getCursor()
var t=this.session.getAWordRange(e.row,e.column)
this.setSelectionRange(t)}
this.getLineRange=function(e,t){var i=typeof e=="number"?e:this.lead.row
var n
var r=this.session.getFoldLine(i)
if(r){i=r.start.row
n=r.end.row}else{n=i}if(t===true)return new o(i,0,n,this.session.getLine(n).length)
else return new o(i,0,n+1,0)}
this.selectLine=function(){this.setSelectionRange(this.getLineRange())}
this.moveCursorUp=function(){this.moveCursorBy(-1,0)}
this.moveCursorDown=function(){this.moveCursorBy(1,0)}
this.moveCursorLeft=function(){var e=this.lead.getPosition(),t
if(t=this.session.getFoldAt(e.row,e.column,-1)){this.moveCursorTo(t.start.row,t.start.column)}else if(e.column==0){if(e.row>0){this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length)}}else{var i=this.session.getTabSize()
if(this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-i,e.column).split(" ").length-1==i)this.moveCursorBy(0,-i)
else this.moveCursorBy(0,-1)}}
this.moveCursorRight=function(){var e=this.lead.getPosition(),t
if(t=this.session.getFoldAt(e.row,e.column,1)){this.moveCursorTo(t.end.row,t.end.column)}else if(this.lead.column==this.doc.getLine(this.lead.row).length){if(this.lead.row<this.doc.getLength()-1){this.moveCursorTo(this.lead.row+1,0)}}else{var i=this.session.getTabSize()
var e=this.lead
if(this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+i).split(" ").length-1==i)this.moveCursorBy(0,i)
else this.moveCursorBy(0,1)}}
this.moveCursorLineStart=function(){var e=this.lead.row
var t=this.lead.column
var i=this.session.documentToScreenRow(e,t)
var n=this.session.screenToDocumentPosition(i,0)
var r=this.session.getDisplayLine(e,null,n.row,n.column)
var s=r.match(/^\s*/)
if(s[0].length!=t&&!this.session.$useEmacsStyleLineStart)n.column+=s[0].length
this.moveCursorToPosition(n)}
this.moveCursorLineEnd=function(){var e=this.lead
var t=this.session.getDocumentLastRowColumnPosition(e.row,e.column)
if(this.lead.column==t.column){var i=this.session.getLine(t.row)
if(t.column==i.length){var n=i.search(/\s+$/)
if(n>0)t.column=n}}this.moveCursorTo(t.row,t.column)}
this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1
var t=this.doc.getLine(e).length
this.moveCursorTo(e,t)}
this.moveCursorFileStart=function(){this.moveCursorTo(0,0)}
this.moveCursorLongWordRight=function(){var e=this.lead.row
var t=this.lead.column
var i=this.doc.getLine(e)
var n=i.substring(t)
var r
this.session.nonTokenRe.lastIndex=0
this.session.tokenRe.lastIndex=0
var s=this.session.getFoldAt(e,t,1)
if(s){this.moveCursorTo(s.end.row,s.end.column)
return}if(r=this.session.nonTokenRe.exec(n)){t+=this.session.nonTokenRe.lastIndex
this.session.nonTokenRe.lastIndex=0
n=i.substring(t)}if(t>=i.length){this.moveCursorTo(e,i.length)
this.moveCursorRight()
if(e<this.doc.getLength()-1)this.moveCursorWordRight()
return}if(r=this.session.tokenRe.exec(n)){t+=this.session.tokenRe.lastIndex
this.session.tokenRe.lastIndex=0}this.moveCursorTo(e,t)}
this.moveCursorLongWordLeft=function(){var e=this.lead.row
var t=this.lead.column
var i
if(i=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(i.start.row,i.start.column)
return}var n=this.session.getFoldStringAt(e,t,-1)
if(n==null){n=this.doc.getLine(e).substring(0,t)}var s=r.stringReverse(n)
var o
this.session.nonTokenRe.lastIndex=0
this.session.tokenRe.lastIndex=0
if(o=this.session.nonTokenRe.exec(s)){t-=this.session.nonTokenRe.lastIndex
s=s.slice(this.session.nonTokenRe.lastIndex)
this.session.nonTokenRe.lastIndex=0}if(t<=0){this.moveCursorTo(e,0)
this.moveCursorLeft()
if(e>0)this.moveCursorWordLeft()
return}if(o=this.session.tokenRe.exec(s)){t-=this.session.tokenRe.lastIndex
this.session.tokenRe.lastIndex=0}this.moveCursorTo(e,t)}
this.$shortWordEndIndex=function(e){var t,i=0,n
var r=/\s/
var s=this.session.tokenRe
s.lastIndex=0
if(t=this.session.tokenRe.exec(e)){i=this.session.tokenRe.lastIndex}else{while((n=e[i])&&r.test(n))i++
if(i<1){s.lastIndex=0
while((n=e[i])&&!s.test(n)){s.lastIndex=0
i++
if(r.test(n)){if(i>2){i--
break}else{while((n=e[i])&&r.test(n))i++
if(i>2)break}}}}}s.lastIndex=0
return i}
this.moveCursorShortWordRight=function(){var e=this.lead.row
var t=this.lead.column
var i=this.doc.getLine(e)
var n=i.substring(t)
var r=this.session.getFoldAt(e,t,1)
if(r)return this.moveCursorTo(r.end.row,r.end.column)
if(t==i.length){var s=this.doc.getLength()
do{e++
n=this.doc.getLine(e)}while(e<s&&/^\s*$/.test(n))
if(!/^\s+/.test(n))n=""
t=0}var o=this.$shortWordEndIndex(n)
this.moveCursorTo(e,t+o)}
this.moveCursorShortWordLeft=function(){var e=this.lead.row
var t=this.lead.column
var i
if(i=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(i.start.row,i.start.column)
var n=this.session.getLine(e).substring(0,t)
if(t==0){do{e--
n=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(n))
t=n.length
if(!/\s+$/.test(n))n=""}var s=r.stringReverse(n)
var o=this.$shortWordEndIndex(s)
return this.moveCursorTo(e,t-o)}
this.moveCursorWordRight=function(){if(this.session.$selectLongWords)this.moveCursorLongWordRight()
else this.moveCursorShortWordRight()}
this.moveCursorWordLeft=function(){if(this.session.$selectLongWords)this.moveCursorLongWordLeft()
else this.moveCursorShortWordLeft()}
this.moveCursorBy=function(e,t){var i=this.session.documentToScreenPosition(this.lead.row,this.lead.column)
if(t===0){if(this.$desiredColumn)i.column=this.$desiredColumn
else this.$desiredColumn=i.column}var n=this.session.screenToDocumentPosition(i.row+e,i.column)
if(e!==0&&t===0&&n.row===this.lead.row&&n.column===this.lead.column){if(this.session.lineWidgets&&this.session.lineWidgets[n.row])n.row++}this.moveCursorTo(n.row,n.column+t,t===0)}
this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)}
this.moveCursorTo=function(e,t,i){var n=this.session.getFoldAt(e,t,1)
if(n){e=n.start.row
t=n.start.column}this.$keepDesiredColumnOnChange=true
this.lead.setPosition(e,t)
this.$keepDesiredColumnOnChange=false
if(!i)this.$desiredColumn=null}
this.moveCursorToScreen=function(e,t,i){var n=this.session.screenToDocumentPosition(e,t)
this.moveCursorTo(n.row,n.column,i)}
this.detach=function(){this.lead.detach()
this.anchor.detach()
this.session=this.doc=null}
this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start)
this.$desiredColumn=e.desiredColumn||this.$desiredColumn}
this.toOrientedRange=function(e){var t=this.getRange()
if(e){e.start.column=t.start.column
e.start.row=t.start.row
e.end.column=t.end.column
e.end.row=t.end.row}else{e=t}e.cursor=this.isBackwards()?e.start:e.end
e.desiredColumn=this.$desiredColumn
return e}
this.getRangeOfMovements=function(e){var t=this.getCursor()
try{e.call(null,this)
var i=this.getCursor()
return o.fromPoints(t,i)}catch(n){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}}
this.toJSON=function(){if(this.rangeCount){var e=this.ranges.map(function(e){var t=e.clone()
t.isBackwards=e.cursor==e.start
return t})}else{var e=this.getRange()
e.isBackwards=this.isBackwards()}return e}
this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList){this.toSingleRange(e[0])
for(var t=e.length;t--;){var i=o.fromPoints(e[t].start,e[t].end)
if(e.isBackwards)i.cursor=i.start
this.addRange(i,true)}return}else e=e[0]}if(this.rangeList)this.toSingleRange(e)
this.setSelectionRange(e,e.isBackwards)}
this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return false
if(!e.length||!this.ranges)return this.getRange().isEqual(e)
for(var t=this.ranges.length;t--;){if(!this.ranges[t].isEqual(e[t]))return false}return true}}).call(a.prototype)
t.Selection=a})
ace.define("ace/tokenizer",["require","exports","module"],function(e,t,i){"use strict"
var n=1e3
var r=function(e){this.states=e
this.regExps={}
this.matchMappings={}
for(var t in this.states){var i=this.states[t]
var n=[]
var r=0
var s=this.matchMappings[t]={defaultToken:"text"}
var o="g"
var a=[]
for(var l=0;l<i.length;l++){var c=i[l]
if(c.defaultToken)s.defaultToken=c.defaultToken
if(c.caseInsensitive)o="gi"
if(c.regex==null)continue
if(c.regex instanceof RegExp)c.regex=c.regex.toString().slice(1,-1)
var h=c.regex
var u=new RegExp("(?:("+h+")|(.))").exec("a").length-2
if(Array.isArray(c.token)){if(c.token.length==1||u==1){c.token=c.token[0]}else if(u-1!=c.token.length){throw new Error("number of classes and regexp groups in '"+c.token+"'\n'"+c.regex+"' doesn't match\n"+(u-1)+"!="+c.token.length)}else{c.tokenArray=c.token
c.token=null
c.onMatch=this.$arrayTokens}}else if(typeof c.token=="function"&&!c.onMatch){if(u>1)c.onMatch=this.$applyToken
else c.onMatch=c.token}if(u>1){if(/\\\d/.test(c.regex)){h=c.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+r+1)})}else{u=1
h=this.removeCapturingGroups(c.regex)}if(!c.splitRegex&&typeof c.token!="string")a.push(c)}s[r]=l
r+=u
n.push(h)
if(!c.onMatch)c.onMatch=null}if(!n.length){s[0]=0
n.push("$")}a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this)
this.regExps[t]=new RegExp("("+n.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){n=e|0}
this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1)
var i=this.token.apply(this,t)
if(typeof i==="string")return[{type:i,value:e}]
var n=[]
for(var r=0,s=i.length;r<s;r++){if(t[r])n[n.length]={type:i[r],value:t[r]}}return n},this.$arrayTokens=function(e){if(!e)return[]
var t=this.splitRegex.exec(e)
if(!t)return"text"
var i=[]
var n=this.tokenArray
for(var r=0,s=n.length;r<s;r++){if(t[r+1])i[i.length]={type:n[r],value:t[r+1]}}return i}
this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e})
return t}
this.createSplitterRegexp=function(e,t){if(e.indexOf("(?=")!=-1){var i=0
var n=false
var r={}
e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,a,l){if(n){n=a!="]"}else if(a){n=true}else if(o){if(i==r.stack){r.end=l+1
r.stack=-1}i--}else if(s){i++
if(s.length!=1){r.stack=i
r.start=l}}return e})
if(r.end!=null&&/^\)*$/.test(e.substr(r.end)))e=e.substring(0,r.start)+e.substr(r.end)}return new RegExp(e,(t||"").replace("g",""))}
this.getLineTokens=function(e,t){if(t&&typeof t!="string"){var i=t.slice(0)
t=i[0]}else var i=[]
var r=t||"start"
var s=this.states[r]
if(!s){r="start"
s=this.states[r]}var o=this.matchMappings[r]
var a=this.regExps[r]
a.lastIndex=0
var l,c=[]
var h=0
var u={type:null,value:""}
while(l=a.exec(e)){var d=o.defaultToken
var f=null
var g=l[0]
var m=a.lastIndex
if(m-g.length>h){var p=e.substring(h,m-g.length)
if(u.type==d){u.value+=p}else{if(u.type)c.push(u)
u={type:d,value:p}}}for(var v=0;v<l.length-2;v++){if(l[v+1]===undefined)continue
f=s[o[v]]
if(f.onMatch)d=f.onMatch(g,r,i)
else d=f.token
if(f.next){if(typeof f.next=="string")r=f.next
else r=f.next(r,i)
s=this.states[r]
if(!s){window.console&&console.error&&console.error(r,"doesn't exist")
r="start"
s=this.states[r]}o=this.matchMappings[r]
h=m
a=this.regExps[r]
a.lastIndex=m}break}if(g){if(typeof d=="string"){if((!f||f.merge!==false)&&u.type===d){u.value+=g}else{if(u.type)c.push(u)
u={type:d,value:g}}}else if(d){if(u.type)c.push(u)
u={type:null,value:""}
for(var v=0;v<d.length;v++)c.push(d[v])}}if(h==e.length)break
h=m
if(c.length>n){while(h<e.length){if(u.type)c.push(u)
u={value:e.substring(h,h+=2e3),type:"overflow"}}r="start"
i=[]
break}}if(u.type)c.push(u)
if(i.length>1){if(i[0]!==r)i.unshift(r)}return{tokens:c,state:i.length?i:r}}}).call(r.prototype)
t.Tokenizer=r})
ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,i){"use strict"
var n=e("../lib/lang")
var r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(!t){for(var i in e)this.$rules[i]=e[i]
return}for(var i in e){var n=e[i]
for(var r=0;r<n.length;r++){var s=n[r]
if(s.next){if(typeof s.next!="string"){if(s.nextState&&s.nextState.indexOf(t)!==0)s.nextState=t+s.nextState}else{if(s.next.indexOf(t)!==0)s.next=t+s.next}}}this.$rules[t+i]=n}}
this.getRules=function(){return this.$rules}
this.embedRules=function(e,t,i,r,s){var o=typeof e=="function"?(new e).getRules():e
if(r){for(var a=0;a<r.length;a++)r[a]=t+r[a]}else{r=[]
for(var l in o)r.push(t+l)}this.addRules(o,t)
if(i){var c=Array.prototype[s?"push":"unshift"]
for(var a=0;a<r.length;a++)c.apply(this.$rules[r[a]],n.deepCopy(i))}if(!this.$embeds)this.$embeds=[]
this.$embeds.push(t)}
this.getEmbeds=function(){return this.$embeds}
var e=function(e,t){if(e!="start"||t.length)t.unshift(this.nextState,e)
return this.nextState}
var t=function(e,t){t.shift()
return t.shift()||"start"}
this.normalizeRules=function(){var i=0
var n=this.$rules
function r(s){var o=n[s]
o.processed=true
for(var a=0;a<o.length;a++){var l=o[a]
if(!l.regex&&l.start){l.regex=l.start
if(!l.next)l.next=[]
l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"})
l.token=l.token+".start"
l.push=true}var c=l.next||l.push
if(c&&Array.isArray(c)){var h=l.stateName
if(!h){h=l.token
if(typeof h!="string")h=h[0]||""
if(n[h])h+=i++}n[h]=c
l.next=h
r(h)}else if(c=="pop"){l.next=t}if(l.push){l.nextState=l.next||l.push
l.next=e
delete l.push}if(l.rules){for(var u in l.rules){if(n[u]){if(n[u].push)n[u].push.apply(n[u],l.rules[u])}else{n[u]=l.rules[u]}}}if(l.include||typeof l=="string"){var d=l.include||l
var f=n[d]}else if(Array.isArray(l))f=l
if(f){var g=[a,1].concat(f)
if(l.noEscape)g=g.filter(function(e){return!e.next})
o.splice.apply(o,g)
a--
f=null}if(l.keywordMap){l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive)
delete l.defaultToken}}}Object.keys(n).forEach(r,this)}
this.createKeywordMapper=function(e,t,i,n){var r=Object.create(null)
Object.keys(e).forEach(function(t){var s=e[t]
if(i)s=s.toLowerCase()
var o=s.split(n||"|")
for(var a=o.length;a--;)r[o[a]]=t})
if(Object.getPrototypeOf(r)){r.__proto__=null}this.$keywordList=Object.keys(r)
e=null
return i?function(e){return r[e.toLowerCase()]||t}:function(e){return r[e]||t}}
this.getKeywords=function(){return this.$keywords}}).call(r.prototype)
t.TextHighlightRules=r})
ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,i){"use strict"
var n=function(){this.$behaviours={}};(function(){this.add=function(e,t,i){switch(undefined){case this.$behaviours:this.$behaviours={}
case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=i}
this.addBehaviours=function(e){for(var t in e){for(var i in e[t]){this.add(t,i,e[t][i])}}}
this.remove=function(e){if(this.$behaviours&&this.$behaviours[e]){delete this.$behaviours[e]}}
this.inherit=function(e,t){if(typeof e==="function"){var i=(new e).getBehaviours(t)}else{var i=e.getBehaviours(t)}this.addBehaviours(i)}
this.getBehaviours=function(e){if(!e){return this.$behaviours}else{var t={}
for(var i=0;i<e.length;i++){if(this.$behaviours[e[i]]){t[e[i]]=this.$behaviours[e[i]]}}return t}}}).call(n.prototype)
t.Behaviour=n})
ace.define("ace/unicode",["require","exports","module"],function(e,t,i){"use strict"
t.packages={}
n({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})
function n(e){var i=/\w{4}/g
for(var n in e)t.packages[n]=e[n].replace(i,"\\u$&")}})
ace.define("ace/token_iterator",["require","exports","module"],function(e,t,i){"use strict"
var n=function(e,t,i){this.$session=e
this.$row=t
this.$rowTokens=e.getTokens(t)
var n=e.getTokenAt(t,i)
this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1
while(this.$tokenIndex<0){this.$row-=1
if(this.$row<0){this.$row=0
return null}this.$rowTokens=this.$session.getTokens(this.$row)
this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]}
this.stepForward=function(){this.$tokenIndex+=1
var e
while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1
if(!e)e=this.$session.getLength()
if(this.$row>=e){this.$row=e-1
return null}this.$rowTokens=this.$session.getTokens(this.$row)
this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]}
this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]}
this.getCurrentTokenRow=function(){return this.$row}
this.getCurrentTokenColumn=function(){var e=this.$rowTokens
var t=this.$tokenIndex
var i=e[t].start
if(i!==undefined)return i
i=0
while(t>0){t-=1
i+=e[t].value.length}return i}}).call(n.prototype)
t.TokenIterator=n})
ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,i){"use strict"
var n=e("../tokenizer").Tokenizer
var r=e("./text_highlight_rules").TextHighlightRules
var s=e("./behaviour").Behaviour
var o=e("../unicode")
var a=e("../lib/lang")
var l=e("../token_iterator").TokenIterator
var c=e("../range").Range
var h=function(){this.HighlightRules=r
this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g")
this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|\\s])+","g")
this.getTokenizer=function(){if(!this.$tokenizer){this.$highlightRules=this.$highlightRules||new this.HighlightRules
this.$tokenizer=new n(this.$highlightRules.getRules())}return this.$tokenizer}
this.lineCommentStart=""
this.blockComment=""
this.toggleCommentLines=function(e,t,i,n){var r=t.doc
var s=true
var o=true
var l=Infinity
var c=t.getTabSize()
var h=false
if(!this.lineCommentStart){if(!this.blockComment)return false
var u=this.blockComment.start
var d=this.blockComment.end
var f=new RegExp("^(\\s*)(?:"+a.escapeRegExp(u)+")")
var g=new RegExp("(?:"+a.escapeRegExp(d)+")\\s*$")
var m=function(e,t){if(v(e,t))return
if(!s||/\S/.test(e)){r.insertInLine({row:t,column:e.length},d)
r.insertInLine({row:t,column:l},u)}}
var p=function(e,t){var i
if(i=e.match(g))r.removeInLine(t,e.length-i[0].length,e.length)
if(i=e.match(f))r.removeInLine(t,i[1].length,i[0].length)}
var v=function(e,i){if(f.test(e))return true
var n=t.getTokens(i)
for(var r=0;r<n.length;r++){if(n[r].type==="comment")return true}}}else{if(Array.isArray(this.lineCommentStart)){var f=this.lineCommentStart.map(a.escapeRegExp).join("|")
var u=this.lineCommentStart[0]}else{var f=a.escapeRegExp(this.lineCommentStart)
var u=this.lineCommentStart}f=new RegExp("^(\\s*)(?:"+f+") ?")
h=t.getUseSoftTabs()
var p=function(e,t){var i=e.match(f)
if(!i)return
var n=i[1].length,s=i[0].length
if(!w(e,n,s)&&i[0][s-1]==" ")s--
r.removeInLine(t,n,s)}
var A=u+" "
var m=function(e,t){if(!s||/\S/.test(e)){if(w(e,l,l))r.insertInLine({row:t,column:l},A)
else r.insertInLine({row:t,column:l},u)}}
var v=function(e,t){return f.test(e)}
var w=function(e,t,i){var n=0
while(t--&&e.charAt(t)==" ")n++
if(n%c!=0)return false
var n=0
while(e.charAt(i++)==" ")n++
if(c>2)return n%c!=c-1
else return n%c==0
return true}}function C(e){for(var t=i;t<=n;t++)e(r.getLine(t),t)}var F=Infinity
C(function(e,t){var i=e.search(/\S/)
if(i!==-1){if(i<l)l=i
if(o&&!v(e,t))o=false}else if(F>e.length){F=e.length}})
if(l==Infinity){l=F
s=false
o=false}if(h&&l%c!=0)l=Math.floor(l/c)*c
C(o?p:m)}
this.toggleBlockComment=function(e,t,i,n){var r=this.blockComment
if(!r)return
if(!r.start&&r[0])r=r[0]
var s=new l(t,n.row,n.column)
var o=s.getCurrentToken()
var a=t.selection
var h=t.selection.toOrientedRange()
var u,d
if(o&&/comment/.test(o.type)){var f,g
while(o&&/comment/.test(o.type)){var m=o.value.indexOf(r.start)
if(m!=-1){var p=s.getCurrentTokenRow()
var v=s.getCurrentTokenColumn()+m
f=new c(p,v,p,v+r.start.length)
break}o=s.stepBackward()}var s=new l(t,n.row,n.column)
var o=s.getCurrentToken()
while(o&&/comment/.test(o.type)){var m=o.value.indexOf(r.end)
if(m!=-1){var p=s.getCurrentTokenRow()
var v=s.getCurrentTokenColumn()+m
g=new c(p,v,p,v+r.end.length)
break}o=s.stepForward()}if(g)t.remove(g)
if(f){t.remove(f)
u=f.start.row
d=-r.start.length}}else{d=r.start.length
u=i.start.row
t.insert(i.end,r.end)
t.insert(i.start,r.start)}if(h.start.row==u)h.start.column+=d
if(h.end.row==u)h.end.column+=d
t.selection.fromOrientedRange(h)}
this.getNextLineIndent=function(e,t,i){return this.$getIndent(t)}
this.checkOutdent=function(e,t,i){return false}
this.autoOutdent=function(e,t,i){}
this.$getIndent=function(e){return e.match(/^\s*/)[0]}
this.createWorker=function(e){return null}
this.createModeDelegates=function(e){this.$embeds=[]
this.$modes={}
for(var t in e){if(e[t]){this.$embeds.push(t)
this.$modes[t]=new e[t]}}var i=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"]
for(var t=0;t<i.length;t++){(function(e){var n=i[t]
var r=e[n]
e[i[t]]=function(){return this.$delegator(n,arguments,r)}})(this)}}
this.$delegator=function(e,t,i){var n=t[0]
if(typeof n!="string")n=n[0]
for(var r=0;r<this.$embeds.length;r++){if(!this.$modes[this.$embeds[r]])continue
var s=n.split(this.$embeds[r])
if(!s[0]&&s[1]){t[0]=s[1]
var o=this.$modes[this.$embeds[r]]
return o[e].apply(o,t)}}var a=i.apply(this,t)
return i?a:undefined}
this.transformAction=function(e,t,i,n,r){if(this.$behaviour){var s=this.$behaviour.getBehaviours()
for(var o in s){if(s[o][t]){var a=s[o][t].apply(this,arguments)
if(a){return a}}}}}
this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules
var i=[]
for(var n in t){var r=t[n]
for(var s=0,o=r.length;s<o;s++){if(typeof r[s].token==="string"){if(/keyword|support|storage/.test(r[s].token))i.push(r[s].regex)}else if(typeof r[s].token==="object"){for(var a=0,l=r[s].token.length;a<l;a++){if(/keyword|support|storage/.test(r[s].token[a])){var n=r[s].regex.match(/\(.+?\)/g)[a]
i.push(n.substr(1,n.length-2))}}}}}this.completionKeywords=i}if(!e)return this.$keywordList
return i.concat(this.$keywordList||[])}
this.$createKeywordList=function(){if(!this.$highlightRules)this.getTokenizer()
return this.$keywordList=this.$highlightRules.$keywordList||[]}
this.getCompletions=function(e,t,i,n){var r=this.$keywordList||this.$createKeywordList()
return r.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})}
this.$id="ace/mode/text"}).call(h.prototype)
t.Mode=h})
ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/event_emitter").EventEmitter
var s=t.Anchor=function(e,t,i){this.$onChange=this.onChange.bind(this)
this.attach(e)
if(typeof i=="undefined")this.setPosition(t.row,t.column)
else this.setPosition(t,i)};(function(){n.implement(this,r)
this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)}
this.getDocument=function(){return this.document}
this.$insertRight=false
this.onChange=function(e){var t=e.data
var i=t.range
if(i.start.row==i.end.row&&i.start.row!=this.row)return
if(i.start.row>this.row)return
if(i.start.row==this.row&&i.start.column>this.column)return
var n=this.row
var r=this.column
var s=i.start
var o=i.end
if(t.action==="insertText"){if(s.row===n&&s.column<=r){if(s.column===r&&this.$insertRight){}else if(s.row===o.row){r+=o.column-s.column}else{r-=s.column
n+=o.row-s.row}}else if(s.row!==o.row&&s.row<n){n+=o.row-s.row}}else if(t.action==="insertLines"){if(s.row===n&&r===0&&this.$insertRight){}else if(s.row<=n){n+=o.row-s.row}}else if(t.action==="removeText"){if(s.row===n&&s.column<r){if(o.column>=r)r=s.column
else r=Math.max(0,r-(o.column-s.column))}else if(s.row!==o.row&&s.row<n){if(o.row===n)r=Math.max(0,r-o.column)+s.column
n-=o.row-s.row}else if(o.row===n){n-=o.row-s.row
r=Math.max(0,r-o.column)+s.column}}else if(t.action=="removeLines"){if(s.row<=n){if(o.row<=n)n-=o.row-s.row
else{n=s.row
r=0}}}this.setPosition(n,r,true)}
this.setPosition=function(e,t,i){var n
if(i){n={row:e,column:t}}else{n=this.$clipPositionToDocument(e,t)}if(this.row==n.row&&this.column==n.column)return
var r={row:this.row,column:this.column}
this.row=n.row
this.column=n.column
this._signal("change",{old:r,value:n})}
this.detach=function(){this.document.removeEventListener("change",this.$onChange)}
this.attach=function(e){this.document=e||this.document
this.document.on("change",this.$onChange)}
this.$clipPositionToDocument=function(e,t){var i={}
if(e>=this.document.getLength()){i.row=Math.max(0,this.document.getLength()-1)
i.column=this.document.getLine(i.row).length}else if(e<0){i.row=0
i.column=0}else{i.row=e
i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,t))}if(t<0)i.column=0
return i}}).call(s.prototype)})
ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/event_emitter").EventEmitter
var s=e("./range").Range
var o=e("./anchor").Anchor
var a=function(e){this.$lines=[]
if(e.length===0){this.$lines=[""]}else if(Array.isArray(e)){this._insertLines(0,e)}else{this.insert({row:0,column:0},e)}};(function(){n.implement(this,r)
this.setValue=function(e){var t=this.getLength()
this.remove(new s(0,0,t,this.getLine(t-1).length))
this.insert({row:0,column:0},e)}
this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())}
this.createAnchor=function(e,t){return new o(this,e,t)}
if("aaa".split(/a/).length===0)this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}
else this.$split=function(e){return e.split(/\r\n|\r|\n/)}
this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m)
this.$autoNewLine=t?t[1]:"\n"
this._signal("changeNewLineMode")}
this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n"
case"unix":return"\n"
default:return this.$autoNewLine||"\n"}}
this.$autoNewLine=""
this.$newLineMode="auto"
this.setNewLineMode=function(e){if(this.$newLineMode===e)return
this.$newLineMode=e
this._signal("changeNewLineMode")}
this.getNewLineMode=function(){return this.$newLineMode}
this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"}
this.getLine=function(e){return this.$lines[e]||""}
this.getLines=function(e,t){return this.$lines.slice(e,t+1)}
this.getAllLines=function(){return this.getLines(0,this.getLength())}
this.getLength=function(){return this.$lines.length}
this.getTextRange=function(e){if(e.start.row==e.end.row){return this.getLine(e.start.row).substring(e.start.column,e.end.column)}var t=this.getLines(e.start.row,e.end.row)
t[0]=(t[0]||"").substring(e.start.column)
var i=t.length-1
if(e.end.row-e.start.row==i)t[i]=t[i].substring(0,e.end.column)
return t.join(this.getNewLineCharacter())}
this.$clipPosition=function(e){var t=this.getLength()
if(e.row>=t){e.row=Math.max(0,t-1)
e.column=this.getLine(t-1).length}else if(e.row<0)e.row=0
return e}
this.insert=function(e,t){if(!t||t.length===0)return e
e=this.$clipPosition(e)
if(this.getLength()<=1)this.$detectNewLine(t)
var i=this.$split(t)
var n=i.splice(0,1)[0]
var r=i.length==0?null:i.splice(i.length-1,1)[0]
e=this.insertInLine(e,n)
if(r!==null){e=this.insertNewLine(e)
e=this._insertLines(e.row,i)
e=this.insertInLine(e,r||"")}return e}
this.insertLines=function(e,t){if(e>=this.getLength())return this.insert({row:e,column:0},"\n"+t.join("\n"))
return this._insertLines(Math.max(e,0),t)}
this._insertLines=function(e,t){if(t.length==0)return{row:e,column:0}
while(t.length>61440){var i=this._insertLines(e,t.slice(0,61440))
t=t.slice(61440)
e=i.row}var n=[e,0]
n.push.apply(n,t)
this.$lines.splice.apply(this.$lines,n)
var r=new s(e,0,e+t.length,0)
var o={action:"insertLines",range:r,lines:t}
this._signal("change",{data:o})
return r.end}
this.insertNewLine=function(e){e=this.$clipPosition(e)
var t=this.$lines[e.row]||""
this.$lines[e.row]=t.substring(0,e.column)
this.$lines.splice(e.row+1,0,t.substring(e.column,t.length))
var i={row:e.row+1,column:0}
var n={action:"insertText",range:s.fromPoints(e,i),text:this.getNewLineCharacter()}
this._signal("change",{data:n})
return i}
this.insertInLine=function(e,t){if(t.length==0)return e
var i=this.$lines[e.row]||""
this.$lines[e.row]=i.substring(0,e.column)+t+i.substring(e.column)
var n={row:e.row,column:e.column+t.length}
var r={action:"insertText",range:s.fromPoints(e,n),text:t}
this._signal("change",{data:r})
return n}
this.remove=function(e){if(!(e instanceof s))e=s.fromPoints(e.start,e.end)
e.start=this.$clipPosition(e.start)
e.end=this.$clipPosition(e.end)
if(e.isEmpty())return e.start
var t=e.start.row
var i=e.end.row
if(e.isMultiLine()){var n=e.start.column==0?t:t+1
var r=i-1
if(e.end.column>0)this.removeInLine(i,0,e.end.column)
if(r>=n)this._removeLines(n,r)
if(n!=t){this.removeInLine(t,e.start.column,this.getLine(t).length)
this.removeNewLine(e.start.row)}}else{this.removeInLine(t,e.start.column,e.end.column)}return e.start}
this.removeInLine=function(e,t,i){if(t==i)return
var n=new s(e,t,e,i)
var r=this.getLine(e)
var o=r.substring(t,i)
var a=r.substring(0,t)+r.substring(i,r.length)
this.$lines.splice(e,1,a)
var l={action:"removeText",range:n,text:o}
this._signal("change",{data:l})
return n.start}
this.removeLines=function(e,t){if(e<0||t>=this.getLength())return this.remove(new s(e,0,t+1,0))
return this._removeLines(e,t)}
this._removeLines=function(e,t){var i=new s(e,0,t+1,0)
var n=this.$lines.splice(e,t-e+1)
var r={action:"removeLines",range:i,nl:this.getNewLineCharacter(),lines:n}
this._signal("change",{data:r})
return n}
this.removeNewLine=function(e){var t=this.getLine(e)
var i=this.getLine(e+1)
var n=new s(e,t.length,e+1,0)
var r=t+i
this.$lines.splice(e,2,r)
var o={action:"removeText",range:n,text:this.getNewLineCharacter()}
this._signal("change",{data:o})}
this.replace=function(e,t){if(!(e instanceof s))e=s.fromPoints(e.start,e.end)
if(t.length==0&&e.isEmpty())return e.start
if(t==this.getTextRange(e))return e.end
this.remove(e)
if(t){var i=this.insert(e.start,t)}else{i=e.start}return i}
this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var i=e[t]
var n=s.fromPoints(i.range.start,i.range.end)
if(i.action=="insertLines")this.insertLines(n.start.row,i.lines)
else if(i.action=="insertText")this.insert(n.start,i.text)
else if(i.action=="removeLines")this._removeLines(n.start.row,n.end.row-1)
else if(i.action=="removeText")this.remove(n)}}
this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var i=e[t]
var n=s.fromPoints(i.range.start,i.range.end)
if(i.action=="insertLines")this._removeLines(n.start.row,n.end.row-1)
else if(i.action=="insertText")this.remove(n)
else if(i.action=="removeLines")this._insertLines(n.start.row,i.lines)
else if(i.action=="removeText")this.insert(n.start,i.text)}}
this.indexToPosition=function(e,t){var i=this.$lines||this.getAllLines()
var n=this.getNewLineCharacter().length
for(var r=t||0,s=i.length;r<s;r++){e-=i[r].length+n
if(e<0)return{row:r,column:e+i[r].length+n}}return{row:s-1,column:i[s-1].length}}
this.positionToIndex=function(e,t){var i=this.$lines||this.getAllLines()
var n=this.getNewLineCharacter().length
var r=0
var s=Math.min(e.row,i.length)
for(var o=t||0;o<s;++o)r+=i[o].length+n
return r+e.column}}).call(a.prototype)
t.Document=a})
ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/event_emitter").EventEmitter
var s=function(e,t){this.running=false
this.lines=[]
this.states=[]
this.currentLine=0
this.tokenizer=e
var i=this
this.$worker=function(){if(!i.running){return}var e=new Date
var t=i.currentLine
var n=-1
var r=i.doc
while(i.lines[t])t++
var s=t
var o=r.getLength()
var a=0
i.running=false
while(t<o){i.$tokenizeRow(t)
n=t
do{t++}while(i.lines[t])
a++
if(a%5==0&&new Date-e>20){i.running=setTimeout(i.$worker,20)
i.currentLine=t
return}}i.currentLine=t
if(s<=n)i.fireUpdateEvent(s,n)}};(function(){n.implement(this,r)
this.setTokenizer=function(e){this.tokenizer=e
this.lines=[]
this.states=[]
this.start(0)}
this.setDocument=function(e){this.doc=e
this.lines=[]
this.states=[]
this.stop()}
this.fireUpdateEvent=function(e,t){var i={first:e,last:t}
this._signal("update",{data:i})}
this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength())
this.lines.splice(this.currentLine,this.lines.length)
this.states.splice(this.currentLine,this.states.length)
this.stop()
this.running=setTimeout(this.$worker,700)}
this.scheduleStart=function(){if(!this.running)this.running=setTimeout(this.$worker,700)}
this.$updateOnChange=function(e){var t=e.range
var i=t.start.row
var n=t.end.row-i
if(n===0){this.lines[i]=null}else if(e.action=="removeText"||e.action=="removeLines"){this.lines.splice(i,n+1,null)
this.states.splice(i,n+1,null)}else{var r=Array(n+1)
r.unshift(i,1)
this.lines.splice.apply(this.lines,r)
this.states.splice.apply(this.states,r)}this.currentLine=Math.min(i,this.currentLine,this.doc.getLength())
this.stop()}
this.stop=function(){if(this.running)clearTimeout(this.running)
this.running=false}
this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)}
this.getState=function(e){if(this.currentLine==e)this.$tokenizeRow(e)
return this.states[e]||"start"}
this.$tokenizeRow=function(e){var t=this.doc.getLine(e)
var i=this.states[e-1]
var n=this.tokenizer.getLineTokens(t,i,e)
if(this.states[e]+""!==n.state+""){this.states[e]=n.state
this.lines[e+1]=null
if(this.currentLine>e+1)this.currentLine=e+1}else if(this.currentLine==e){this.currentLine=e+1}return this.lines[e]=n.tokens}}).call(s.prototype)
t.BackgroundTokenizer=s})
ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,i){"use strict"
var n=e("./lib/lang")
var r=e("./lib/oop")
var s=e("./range").Range
var o=function(e,t,i){this.setRegexp(e)
this.clazz=t
this.type=i||"text"};(function(){this.MAX_RANGES=500
this.setRegexp=function(e){if(this.regExp+""==e+"")return
this.regExp=e
this.cache=[]}
this.update=function(e,t,i,r){if(!this.regExp)return
var o=r.firstRow,a=r.lastRow
for(var l=o;l<=a;l++){var c=this.cache[l]
if(c==null){c=n.getMatchOffsets(i.getLine(l),this.regExp)
if(c.length>this.MAX_RANGES)c=c.slice(0,this.MAX_RANGES)
c=c.map(function(e){return new s(l,e.offset,l,e.offset+e.length)})
this.cache[l]=c.length?c:""}for(var h=c.length;h--;){t.drawSingleLineMarker(e,c[h].toScreenRange(i),this.clazz,r)}}}}).call(o.prototype)
t.SearchHighlight=o})
ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,i){"use strict"
var n=e("../range").Range
function r(e,t){this.foldData=e
if(Array.isArray(t)){this.folds=t}else{t=this.folds=[t]}var i=t[t.length-1]
this.range=new n(t[0].start.row,t[0].start.column,i.end.row,i.end.column)
this.start=this.range.start
this.end=this.range.end
this.folds.forEach(function(e){e.setFoldLine(this)},this)}(function(){this.shiftRow=function(e){this.start.row+=e
this.end.row+=e
this.folds.forEach(function(t){t.start.row+=e
t.end.row+=e})}
this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow){throw new Error("Can't add a fold to this FoldLine as it has no connection")}this.folds.push(e)
this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})
if(this.range.compareEnd(e.start.row,e.start.column)>0){this.end.row=e.end.row
this.end.column=e.end.column}else if(this.range.compareStart(e.end.row,e.end.column)<0){this.start.row=e.start.row
this.start.column=e.start.column}}else if(e.start.row==this.end.row){this.folds.push(e)
this.end.row=e.end.row
this.end.column=e.end.column}else if(e.end.row==this.start.row){this.folds.unshift(e)
this.start.row=e.start.row
this.start.column=e.start.column}else{throw new Error("Trying to add fold to FoldRow that doesn't have a matching row")}e.foldLine=this}
this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row}
this.walk=function(e,t,i){var n=0,r=this.folds,s,o,a,l=true
if(t==null){t=this.end.row
i=this.end.column}for(var c=0;c<r.length;c++){s=r[c]
o=s.range.compareStart(t,i)
if(o==-1){e(null,t,i,n,l)
return}a=e(null,s.start.row,s.start.column,n,l)
a=!a&&e(s.placeholder,s.start.row,s.start.column,n)
if(a||o==0){return}l=!s.sameRow
n=s.end.column}e(null,t,i,n,l)}
this.getNextFoldTo=function(e,t){var i,n
for(var r=0;r<this.folds.length;r++){i=this.folds[r]
n=i.range.compareEnd(e,t)
if(n==-1){return{fold:i,kind:"after"}}else if(n==0){return{fold:i,kind:"inside"}}}return null}
this.addRemoveChars=function(e,t,i){var n=this.getNextFoldTo(e,t),r,s
if(n){r=n.fold
if(n.kind=="inside"&&r.start.column!=t&&r.start.row!=e){window.console&&window.console.log(e,t,r)}else if(r.start.row==e){s=this.folds
var o=s.indexOf(r)
if(o==0){this.start.column+=i}for(o;o<s.length;o++){r=s[o]
r.start.column+=i
if(!r.sameRow){return}r.end.column+=i}this.end.column+=i}}}
this.split=function(e,t){var i=this.getNextFoldTo(e,t).fold
var n=this.folds
var s=this.foldData
if(!i)return null
var o=n.indexOf(i)
var a=n[o-1]
this.end.row=a.end.row
this.end.column=a.end.column
n=n.splice(o,n.length-o)
var l=new r(s,n)
s.splice(s.indexOf(this)+1,0,l)
return l}
this.merge=function(e){var t=e.folds
for(var i=0;i<t.length;i++){this.addFold(t[i])}var n=this.foldData
n.splice(n.indexOf(e),1)}
this.toString=function(){var e=[this.range.toString()+": ["]
this.folds.forEach(function(t){e.push("  "+t.toString())})
e.push("]")
return e.join("\n")}
this.idxToPosition=function(e){var t=0
var i
for(var n=0;n<this.folds.length;n++){var i=this.folds[n]
e-=i.start.column-t
if(e<0){return{row:i.start.row,column:i.start.column+e}}e-=i.placeholder.length
if(e<0){return i.start}t=i.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(r.prototype)
t.FoldLine=r})
ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,i){"use strict"
var n=e("./range").Range
var r=n.comparePoints
var s=function(){this.ranges=[]};(function(){this.comparePoints=r
this.pointIndex=function(e,t,i){var n=this.ranges
for(var s=i||0;s<n.length;s++){var o=n[s]
var a=r(e,o.end)
if(a>0)continue
var l=r(e,o.start)
if(a===0)return t&&l!==0?-s-2:s
if(l>0||l===0&&!t)return s
return-s-1}return-s-1}
this.add=function(e){var t=!e.isEmpty()
var i=this.pointIndex(e.start,t)
if(i<0)i=-i-1
var n=this.pointIndex(e.end,t,i)
if(n<0)n=-n-1
else n++
return this.ranges.splice(i,n-i,e)}
this.addList=function(e){var t=[]
for(var i=e.length;i--;){t.push.call(t,this.add(e[i]))}return t}
this.substractPoint=function(e){var t=this.pointIndex(e)
if(t>=0)return this.ranges.splice(t,1)}
this.merge=function(){var e=[]
var t=this.ranges
t=t.sort(function(e,t){return r(e.start,t.start)})
var i=t[0],n
for(var s=1;s<t.length;s++){n=i
i=t[s]
var o=r(n.end,i.start)
if(o<0)continue
if(o==0&&!n.isEmpty()&&!i.isEmpty())continue
if(r(n.end,i.end)<0){n.end.row=i.end.row
n.end.column=i.end.column}t.splice(s,1)
e.push(i)
i=n
s--}this.ranges=t
return e}
this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0}
this.containsPoint=function(e){return this.pointIndex(e)>=0}
this.rangeAtPoint=function(e){var t=this.pointIndex(e)
if(t>=0)return this.ranges[t]}
this.clipRows=function(e,t){var i=this.ranges
if(i[0].start.row>t||i[i.length-1].start.row<e)return[]
var n=this.pointIndex({row:e,column:0})
if(n<0)n=-n-1
var r=this.pointIndex({row:t,column:0},n)
if(r<0)r=-r-1
var s=[]
for(var o=n;o<r;o++){s.push(i[o])}return s}
this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)}
this.attach=function(e){if(this.session)this.detach()
this.session=e
this.onChange=this.$onChange.bind(this)
this.session.on("change",this.onChange)}
this.detach=function(){if(!this.session)return
this.session.removeListener("change",this.onChange)
this.session=null}
this.$onChange=function(e){var t=e.data.range
if(e.data.action[0]=="i"){var i=t.start
var n=t.end}else{var n=t.start
var i=t.end}var r=i.row
var s=n.row
var o=s-r
var a=-i.column+n.column
var l=this.ranges
for(var c=0,h=l.length;c<h;c++){var u=l[c]
if(u.end.row<r)continue
if(u.start.row>r)break
if(u.start.row==r&&u.start.column>=i.column){if(u.start.column==i.column&&this.$insertRight){}else{u.start.column+=a
u.start.row+=o}}if(u.end.row==r&&u.end.column>=i.column){if(u.end.column==i.column&&this.$insertRight){continue}if(u.end.column==i.column&&a>0&&c<h-1){if(u.end.column>u.start.column&&u.end.column==l[c+1].start.column)u.end.column-=a}u.end.column+=a
u.end.row+=o}}if(o!=0&&c<h){for(;c<h;c++){var u=l[c]
u.start.row+=o
u.end.row+=o}}}}).call(s.prototype)
t.RangeList=s})
ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,i){"use strict"
var n=e("../range").Range
var r=e("../range_list").RangeList
var s=e("../lib/oop")
var o=t.Fold=function(e,t){this.foldLine=null
this.placeholder=t
this.range=e
this.start=e.start
this.end=e.end
this.sameRow=e.start.row==e.end.row
this.subFolds=this.ranges=[]}
s.inherits(o,r);(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()}
this.setFoldLine=function(e){this.foldLine=e
this.subFolds.forEach(function(t){t.setFoldLine(e)})}
this.clone=function(){var e=this.range.clone()
var t=new o(e,this.placeholder)
this.subFolds.forEach(function(e){t.subFolds.push(e.clone())})
t.collapseChildren=this.collapseChildren
return t}
this.addSubFold=function(e){if(this.range.isEqual(e))return
if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range)
l(e,this.start)
var t=e.start.row,i=e.start.column
for(var n=0,r=-1;n<this.subFolds.length;n++){r=this.subFolds[n].range.compare(t,i)
if(r!=1)break}var s=this.subFolds[n]
if(r==0)return s.addSubFold(e)
var t=e.range.end.row,i=e.range.end.column
for(var o=n,r=-1;o<this.subFolds.length;o++){r=this.subFolds[o].range.compare(t,i)
if(r!=1)break}var a=this.subFolds[o]
if(r==0)throw new Error("A fold can't intersect already existing fold"+e.range+this.range)
var c=this.subFolds.splice(n,o-n,e)
e.setFoldLine(this.foldLine)
return e}
this.restoreRange=function(e){return h(e,this.start)}}).call(o.prototype)
function a(e,t){e.row-=t.row
if(e.row==0)e.column-=t.column}function l(e,t){a(e.start,t)
a(e.end,t)}function c(e,t){if(e.row==0)e.column+=t.column
e.row+=t.row}function h(e,t){c(e.start,t)
c(e.end,t)}})
ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,i){"use strict"
var n=e("../range").Range
var r=e("./fold_line").FoldLine
var s=e("./fold").Fold
var o=e("../token_iterator").TokenIterator
function a(){this.getFoldAt=function(e,t,i){var n=this.getFoldLine(e)
if(!n)return null
var r=n.folds
for(var s=0;s<r.length;s++){var o=r[s]
if(o.range.contains(e,t)){if(i==1&&o.range.isEnd(e,t)){continue}else if(i==-1&&o.range.isStart(e,t)){continue}return o}}}
this.getFoldsInRange=function(e){var t=e.start
var i=e.end
var n=this.$foldData
var r=[]
t.column+=1
i.column-=1
for(var s=0;s<n.length;s++){var o=n[s].range.compareRange(e)
if(o==2){continue}else if(o==-2){break}var a=n[s].folds
for(var l=0;l<a.length;l++){var c=a[l]
o=c.range.compareRange(e)
if(o==-2){break}else if(o==2){continue}else if(o==42){break}r.push(c)}}t.column-=1
i.column+=1
return r}
this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[]
e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else{var t=this.getFoldsInRange(e)}return t}
this.getAllFolds=function(){var e=[]
var t=this.$foldData
for(var i=0;i<t.length;i++)for(var n=0;n<t[i].folds.length;n++)e.push(t[i].folds[n])
return e}
this.getFoldStringAt=function(e,t,i,n){n=n||this.getFoldLine(e)
if(!n)return null
var r={end:{column:0}}
var s,o
for(var a=0;a<n.folds.length;a++){o=n.folds[a]
var l=o.range.compareEnd(e,t)
if(l==-1){s=this.getLine(o.start.row).substring(r.end.column,o.start.column)
break}else if(l===0){return null}r=o}if(!s)s=this.getLine(o.start.row).substring(r.end.column)
if(i==-1)return s.substring(0,t-r.end.column)
else if(i==1)return s.substring(t-r.end.column)
else return s}
this.getFoldLine=function(e,t){var i=this.$foldData
var n=0
if(t)n=i.indexOf(t)
if(n==-1)n=0
for(n;n<i.length;n++){var r=i[n]
if(r.start.row<=e&&r.end.row>=e){return r}else if(r.end.row>e){return null}}return null}
this.getNextFoldLine=function(e,t){var i=this.$foldData
var n=0
if(t)n=i.indexOf(t)
if(n==-1)n=0
for(n;n<i.length;n++){var r=i[n]
if(r.end.row>=e){return r}}return null}
this.getFoldedRowCount=function(e,t){var i=this.$foldData,n=t-e+1
for(var r=0;r<i.length;r++){var s=i[r],o=s.end.row,a=s.start.row
if(o>=t){if(a<t){if(a>=e)n-=t-a
else n=0}break}else if(o>=e){if(a>=e)n-=o-a
else n-=o-e+1}}return n}
this.$addFoldLine=function(e){this.$foldData.push(e)
this.$foldData.sort(function(e,t){return e.start.row-t.start.row})
return e}
this.addFold=function(e,t){var i=this.$foldData
var n=false
var o
if(e instanceof s)o=e
else{o=new s(t,e)
o.collapseChildren=t.collapseChildren}this.$clipRangeToDocument(o.range)
var a=o.start.row
var l=o.start.column
var c=o.end.row
var h=o.end.column
if(!(a<c||a==c&&l<=h-2))throw new Error("The range has to be at least 2 characters width")
var u=this.getFoldAt(a,l,1)
var d=this.getFoldAt(c,h,-1)
if(u&&d==u)return u.addSubFold(o)
if(u&&!u.range.isStart(a,l)||d&&!d.range.isEnd(c,h)){throw new Error("A fold can't intersect already existing fold"+o.range+u.range)}var f=this.getFoldsInRange(o.range)
if(f.length>0){this.removeFolds(f)
f.forEach(function(e){o.addSubFold(e)})}for(var g=0;g<i.length;g++){var m=i[g]
if(c==m.start.row){m.addFold(o)
n=true
break}else if(a==m.end.row){m.addFold(o)
n=true
if(!o.sameRow){var p=i[g+1]
if(p&&p.start.row==c){m.merge(p)
break}}break}else if(c<=m.start.row){break}}if(!n)m=this.$addFoldLine(new r(this.$foldData,o))
if(this.$useWrapMode)this.$updateWrapData(m.start.row,m.start.row)
else this.$updateRowLengthCache(m.start.row,m.start.row)
this.$modified=true
this._emit("changeFold",{data:o,action:"add"})
return o}
this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)}
this.removeFold=function(e){var t=e.foldLine
var i=t.start.row
var n=t.end.row
var r=this.$foldData
var s=t.folds
if(s.length==1){r.splice(r.indexOf(t),1)}else if(t.range.isEnd(e.end.row,e.end.column)){s.pop()
t.end.row=s[s.length-1].end.row
t.end.column=s[s.length-1].end.column}else if(t.range.isStart(e.start.row,e.start.column)){s.shift()
t.start.row=s[0].start.row
t.start.column=s[0].start.column}else if(e.sameRow){s.splice(s.indexOf(e),1)}else{var o=t.split(e.start.row,e.start.column)
s=o.folds
s.shift()
o.start.row=s[0].start.row
o.start.column=s[0].start.column}if(!this.$updating){if(this.$useWrapMode)this.$updateWrapData(i,n)
else this.$updateRowLengthCache(i,n)}this.$modified=true
this._emit("changeFold",{data:e,action:"remove"})}
this.removeFolds=function(e){var t=[]
for(var i=0;i<e.length;i++){t.push(e[i])}t.forEach(function(e){this.removeFold(e)},this)
this.$modified=true}
this.expandFold=function(e){this.removeFold(e)
e.subFolds.forEach(function(t){e.restoreRange(t)
this.addFold(t)},this)
if(e.collapseChildren>0){this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1)}e.subFolds=[]}
this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)}
this.unfold=function(e,t){var i,r
if(e==null){i=new n(0,0,this.getLength(),0)
t=true}else if(typeof e=="number")i=new n(e,0,e,this.getLine(e).length)
else if("row"in e)i=n.fromPoints(e,e)
else i=e
r=this.getFoldsInRangeList(i)
if(t){this.removeFolds(r)}else{var s=r
while(s.length){this.expandFolds(s)
s=this.getFoldsInRangeList(i)}}if(r.length)return r}
this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)}
this.getRowFoldEnd=function(e,t){var i=this.getFoldLine(e,t)
return i?i.end.row:e}
this.getRowFoldStart=function(e,t){var i=this.getFoldLine(e,t)
return i?i.start.row:e}
this.getFoldDisplayLine=function(e,t,i,n,r){if(n==null)n=e.start.row
if(r==null)r=0
if(t==null)t=e.end.row
if(i==null)i=this.getLine(t).length
var s=this.doc
var o=""
e.walk(function(e,t,i,a){if(t<n)return
if(t==n){if(i<r)return
a=Math.max(r,a)}if(e!=null){o+=e}else{o+=s.getLine(t).substring(a,i)}},t,i)
return o}
this.getDisplayLine=function(e,t,i,n){var r=this.getFoldLine(e)
if(!r){var s
s=this.doc.getLine(e)
return s.substring(n||0,t||s.length)}else{return this.getFoldDisplayLine(r,e,t,i,n)}}
this.$cloneFoldData=function(){var e=[]
e=this.$foldData.map(function(t){var i=t.folds.map(function(e){return e.clone()})
return new r(e,i)})
return e}
this.toggleFold=function(e){var t=this.selection
var i=t.getRange()
var n
var r
if(i.isEmpty()){var s=i.start
n=this.getFoldAt(s.row,s.column)
if(n){this.expandFold(n)
return}else if(r=this.findMatchingBracket(s)){if(i.comparePoint(r)==1){i.end=r}else{i.start=r
i.start.column++
i.end.column--}}else if(r=this.findMatchingBracket({row:s.row,column:s.column+1})){if(i.comparePoint(r)==1)i.end=r
else i.start=r
i.start.column++}else{i=this.getCommentFoldRange(s.row,s.column)||i}}else{var o=this.getFoldsInRange(i)
if(e&&o.length){this.expandFolds(o)
return}else if(o.length==1){n=o[0]}}if(!n)n=this.getFoldAt(i.start.row,i.start.column)
if(n&&n.range.toString()==i.toString()){this.expandFold(n)
return}var a="..."
if(!i.isMultiLine()){a=this.getTextRange(i)
if(a.length<4)return
a=a.trim().substring(0,2)+".."}this.addFold(a,i)}
this.getCommentFoldRange=function(e,t,i){var r=new o(this,e,t)
var s=r.getCurrentToken()
if(s&&/^comment|string/.test(s.type)){var a=new n
var l=new RegExp(s.type.replace(/\..*/,"\\."))
if(i!=1){do{s=r.stepBackward()}while(s&&l.test(s.type))
r.stepForward()}a.start.row=r.getCurrentTokenRow()
a.start.column=r.getCurrentTokenColumn()+2
r=new o(this,e,t)
if(i!=-1){do{s=r.stepForward()}while(s&&l.test(s.type))
s=r.stepBackward()}else s=r.getCurrentToken()
a.end.row=r.getCurrentTokenRow()
a.end.column=r.getCurrentTokenColumn()+s.value.length-2
return a}}
this.foldAll=function(e,t,i){if(i==undefined)i=1e5
var n=this.foldWidgets
if(!n)return
t=t||this.getLength()
e=e||0
for(var r=e;r<t;r++){if(n[r]==null)n[r]=this.getFoldWidget(r)
if(n[r]!="start")continue
var s=this.getFoldWidgetRange(r)
if(s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e){r=s.end.row
try{var o=this.addFold("...",s)
if(o)o.collapseChildren=i}catch(a){}}}}
this.$foldStyles={manual:1,markbegin:1,markbeginend:1}
this.$foldStyle="markbegin"
this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]")
if(this.$foldStyle==e)return
this.$foldStyle=e
if(e=="manual")this.unfold()
var t=this.$foldMode
this.$setFolding(null)
this.$setFolding(t)}
this.$setFolding=function(e){if(this.$foldMode==e)return
this.$foldMode=e
this.removeListener("change",this.$updateFoldWidgets)
this._emit("changeAnnotation")
if(!e||this.$foldStyle=="manual"){this.foldWidgets=null
return}this.foldWidgets=[]
this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle)
this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle)
this.$updateFoldWidgets=this.updateFoldWidgets.bind(this)
this.on("change",this.$updateFoldWidgets)}
this.getParentFoldRangeData=function(e,t){var i=this.foldWidgets
if(!i||t&&i[e])return{}
var n=e-1,r
while(n>=0){var s=i[n]
if(s==null)s=i[n]=this.getFoldWidget(n)
if(s=="start"){var o=this.getFoldWidgetRange(n)
if(!r)r=o
if(o&&o.end.row>=e)break}n--}return{range:n!==-1&&o,firstRange:r}}
this.onFoldWidgetClick=function(e,t){t=t.domEvent
var i={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey}
var n=this.$toggleFoldWidget(e,i)
if(!n){var r=t.target||t.srcElement
if(r&&/ace_fold-widget/.test(r.className))r.className+=" ace_invalid"}}
this.$toggleFoldWidget=function(e,t){if(!this.getFoldWidget)return
var i=this.getFoldWidget(e)
var n=this.getLine(e)
var r=i==="end"?-1:1
var s=this.getFoldAt(e,r===-1?0:n.length,r)
if(s){if(t.children||t.all)this.removeFold(s)
else this.expandFold(s)
return}var o=this.getFoldWidgetRange(e,true)
if(o&&!o.isMultiLine()){s=this.getFoldAt(o.start.row,o.start.column,1)
if(s&&o.isEqual(s.range)){this.removeFold(s)
return}}if(t.siblings){var a=this.getParentFoldRangeData(e)
if(a.range){var l=a.range.start.row+1
var c=a.range.end.row}this.foldAll(l,c,t.all?1e4:0)}else if(t.children){c=o?o.end.row:this.getLength()
this.foldAll(e+1,o.end.row,t.all?1e4:0)}else if(o){if(t.all)o.collapseChildren=1e4
this.addFold("...",o)}return o}
this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row
t=this.getRowFoldStart(t)
var i=this.$toggleFoldWidget(t,{})
if(i)return
var n=this.getParentFoldRangeData(t,true)
i=n.range||n.firstRange
if(i){t=i.start.row
var r=this.getFoldAt(t,this.getLine(t).length,1)
if(r){this.removeFold(r)}else{this.addFold("...",i)}}}
this.updateFoldWidgets=function(e){var t=e.data
var i=t.range
var n=i.start.row
var r=i.end.row-n
if(r===0){this.foldWidgets[n]=null}else if(t.action=="removeText"||t.action=="removeLines"){this.foldWidgets.splice(n,r+1,null)}else{var s=Array(r+1)
s.unshift(n,1)
this.foldWidgets.splice.apply(this.foldWidgets,s)}}}t.Folding=a})
ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,i){"use strict"
var n=e("../token_iterator").TokenIterator
var r=e("../range").Range
function s(){this.findMatchingBracket=function(e,t){if(e.column==0)return null
var i=t||this.getLine(e.row).charAt(e.column-1)
if(i=="")return null
var n=i.match(/([\(\[\{])|([\)\]\}])/)
if(!n)return null
if(n[1])return this.$findClosingBracket(n[1],e)
else return this.$findOpeningBracket(n[2],e)}
this.getBracketRange=function(e){var t=this.getLine(e.row)
var i=true,n
var s=t.charAt(e.column-1)
var o=s&&s.match(/([\(\[\{])|([\)\]\}])/)
if(!o){s=t.charAt(e.column)
e={row:e.row,column:e.column+1}
o=s&&s.match(/([\(\[\{])|([\)\]\}])/)
i=false}if(!o)return null
if(o[1]){var a=this.$findClosingBracket(o[1],e)
if(!a)return null
n=r.fromPoints(e,a)
if(!i){n.end.column++
n.start.column--}n.cursor=n.end}else{var a=this.$findOpeningBracket(o[2],e)
if(!a)return null
n=r.fromPoints(a,e)
if(!i){n.start.column++
n.end.column--}n.cursor=n.start}return n}
this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"}
this.$findOpeningBracket=function(e,t,i){var r=this.$brackets[e]
var s=1
var o=new n(this,t.row,t.column)
var a=o.getCurrentToken()
if(!a)a=o.stepForward()
if(!a)return
if(!i){i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren")+")+")}var l=t.column-o.getCurrentTokenColumn()-2
var c=a.value
while(true){while(l>=0){var h=c.charAt(l)
if(h==r){s-=1
if(s==0){return{row:o.getCurrentTokenRow(),column:l+o.getCurrentTokenColumn()}}}else if(h==e){s+=1}l-=1}do{a=o.stepBackward()}while(a&&!i.test(a.type))
if(a==null)break
c=a.value
l=c.length-1}return null}
this.$findClosingBracket=function(e,t,i){var r=this.$brackets[e]
var s=1
var o=new n(this,t.row,t.column)
var a=o.getCurrentToken()
if(!a)a=o.stepForward()
if(!a)return
if(!i){i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren")+")+")}var l=t.column-o.getCurrentTokenColumn()
while(true){var c=a.value
var h=c.length
while(l<h){var u=c.charAt(l)
if(u==r){s-=1
if(s==0){return{row:o.getCurrentTokenRow(),column:l+o.getCurrentTokenColumn()}}}else if(u==e){s+=1}l+=1}do{a=o.stepForward()}while(a&&!i.test(a.type))
if(a==null)break
l=0}return null}}t.BracketMatch=s})
ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/lang")
var s=e("./config")
var o=e("./lib/event_emitter").EventEmitter
var a=e("./selection").Selection
var l=e("./mode/text").Mode
var c=e("./range").Range
var h=e("./document").Document
var u=e("./background_tokenizer").BackgroundTokenizer
var d=e("./search_highlight").SearchHighlight
var f=function(e,t){this.$breakpoints=[]
this.$decorations=[]
this.$frontMarkers={}
this.$backMarkers={}
this.$markerId=1
this.$undoSelect=true
this.$foldData=[]
this.$foldData.toString=function(){return this.join("\n")}
this.on("changeFold",this.onChangeFold.bind(this))
this.$onChange=this.onChange.bind(this)
if(typeof e!="object"||!e.getLine)e=new h(e)
this.setDocument(e)
this.selection=new a(this)
s.resetOptions(this)
this.setMode(t)
s._signal("session",this)};(function(){n.implement(this,o)
this.setDocument=function(e){if(this.doc)this.doc.removeListener("change",this.$onChange)
this.doc=e
e.on("change",this.$onChange)
if(this.bgTokenizer)this.bgTokenizer.setDocument(this.getDocument())
this.resetCaches()}
this.getDocument=function(){return this.doc}
this.$resetRowCache=function(e){if(!e){this.$docRowCache=[]
this.$screenRowCache=[]
return}var t=this.$docRowCache.length
var i=this.$getRowCacheIndex(this.$docRowCache,e)+1
if(t>i){this.$docRowCache.splice(i,t)
this.$screenRowCache.splice(i,t)}}
this.$getRowCacheIndex=function(e,t){var i=0
var n=e.length-1
while(i<=n){var r=i+n>>1
var s=e[r]
if(t>s)i=r+1
else if(t<s)n=r-1
else return r}return i-1}
this.resetCaches=function(){this.$modified=true
this.$wrapData=[]
this.$rowLengthCache=[]
this.$resetRowCache(0)
if(this.bgTokenizer)this.bgTokenizer.start(0)}
this.onChangeFold=function(e){var t=e.data
this.$resetRowCache(t.start.row)}
this.onChange=function(e){var t=e.data
this.$modified=true
this.$resetRowCache(t.range.start.row)
var i=this.$updateInternalDataOnChange(e)
if(!this.$fromUndo&&this.$undoManager&&!t.ignore){this.$deltasDoc.push(t)
if(i&&i.length!=0){this.$deltasFold.push({action:"removeFolds",folds:i})}this.$informUndoManager.schedule()}this.bgTokenizer.$updateOnChange(t)
this._signal("change",e)}
this.setValue=function(e){this.doc.setValue(e)
this.selection.moveTo(0,0)
this.$resetRowCache(0)
this.$deltas=[]
this.$deltasDoc=[]
this.$deltasFold=[]
this.setUndoManager(this.$undoManager)
this.getUndoManager().reset()}
this.getValue=this.toString=function(){return this.doc.getValue()}
this.getSelection=function(){return this.selection}
this.getState=function(e){return this.bgTokenizer.getState(e)}
this.getTokens=function(e){return this.bgTokenizer.getTokens(e)}
this.getTokenAt=function(e,t){var i=this.bgTokenizer.getTokens(e)
var n,r=0
if(t==null){s=i.length-1
r=this.getLine(e).length}else{for(var s=0;s<i.length;s++){r+=i[s].value.length
if(r>=t)break}}n=i[s]
if(!n)return null
n.index=s
n.start=r-n.value.length
return n}
this.setUndoManager=function(e){this.$undoManager=e
this.$deltas=[]
this.$deltasDoc=[]
this.$deltasFold=[]
if(this.$informUndoManager)this.$informUndoManager.cancel()
if(e){var t=this
this.$syncInformUndoManager=function(){t.$informUndoManager.cancel()
if(t.$deltasFold.length){t.$deltas.push({group:"fold",deltas:t.$deltasFold})
t.$deltasFold=[]}if(t.$deltasDoc.length){t.$deltas.push({group:"doc",deltas:t.$deltasDoc})
t.$deltasDoc=[]}if(t.$deltas.length>0){e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas})}t.mergeUndoDeltas=false
t.$deltas=[]}
this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}}
this.markUndoGroup=function(){if(this.$syncInformUndoManager)this.$syncInformUndoManager()}
this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}}
this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager}
this.getTabString=function(){if(this.getUseSoftTabs()){return r.stringRepeat(" ",this.getTabSize())}else{return"	"}}
this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)}
this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs}
this.setTabSize=function(e){this.setOption("tabSize",e)}
this.getTabSize=function(){return this.$tabSize}
this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0}
this.$overwrite=false
this.setOverwrite=function(e){this.setOption("overwrite",e)}
this.getOverwrite=function(){return this.$overwrite}
this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)}
this.addGutterDecoration=function(e,t){if(!this.$decorations[e])this.$decorations[e]=""
this.$decorations[e]+=" "+t
this._signal("changeBreakpoint",{})}
this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,"")
this._signal("changeBreakpoint",{})}
this.getBreakpoints=function(){return this.$breakpoints}
this.setBreakpoints=function(e){this.$breakpoints=[]
for(var t=0;t<e.length;t++){this.$breakpoints[e[t]]="ace_breakpoint"}this._signal("changeBreakpoint",{})}
this.clearBreakpoints=function(){this.$breakpoints=[]
this._signal("changeBreakpoint",{})}
this.setBreakpoint=function(e,t){if(t===undefined)t="ace_breakpoint"
if(t)this.$breakpoints[e]=t
else delete this.$breakpoints[e]
this._signal("changeBreakpoint",{})}
this.clearBreakpoint=function(e){delete this.$breakpoints[e]
this._signal("changeBreakpoint",{})}
this.addMarker=function(e,t,i,n){var r=this.$markerId++
var s={range:e,type:i||"line",renderer:typeof i=="function"?i:null,clazz:t,inFront:!!n,id:r}
if(n){this.$frontMarkers[r]=s
this._signal("changeFrontMarker")}else{this.$backMarkers[r]=s
this._signal("changeBackMarker")}return r}
this.addDynamicMarker=function(e,t){if(!e.update)return
var i=this.$markerId++
e.id=i
e.inFront=!!t
if(t){this.$frontMarkers[i]=e
this._signal("changeFrontMarker")}else{this.$backMarkers[i]=e
this._signal("changeBackMarker")}return e}
this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e]
if(!t)return
var i=t.inFront?this.$frontMarkers:this.$backMarkers
if(t){delete i[e]
this._signal(t.inFront?"changeFrontMarker":"changeBackMarker")}}
this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers}
this.highlight=function(e){if(!this.$searchHighlight){var t=new d(null,"ace_selected-word","text")
this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)}
this.highlightLines=function(e,t,i,n){if(typeof t!="number"){i=t
t=e}if(!i)i="ace_step"
var r=new c(e,0,t,Infinity)
r.id=this.addMarker(r,i,"fullLine",n)
return r}
this.setAnnotations=function(e){this.$annotations=e
this._signal("changeAnnotation",{})}
this.getAnnotations=function(){return this.$annotations||[]}
this.clearAnnotations=function(){this.setAnnotations([])}
this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m)
if(t){this.$autoNewLine=t[1]}else{this.$autoNewLine="\n"}}
this.getWordRange=function(e,t){var i=this.getLine(e)
var n=false
if(t>0)n=!!i.charAt(t-1).match(this.tokenRe)
if(!n)n=!!i.charAt(t).match(this.tokenRe)
if(n)var r=this.tokenRe
else if(/^\s+$/.test(i.slice(t-1,t+1)))var r=/\s/
else var r=this.nonTokenRe
var s=t
if(s>0){do{s--}while(s>=0&&i.charAt(s).match(r))
s++}var o=t
while(o<i.length&&i.charAt(o).match(r)){o++}return new c(e,s,e,o)}
this.getAWordRange=function(e,t){var i=this.getWordRange(e,t)
var n=this.getLine(i.end.row)
while(n.charAt(i.end.column).match(/[ \t]/)){i.end.column+=1}return i}
this.setNewLineMode=function(e){this.doc.setNewLineMode(e)}
this.getNewLineMode=function(){return this.doc.getNewLineMode()}
this.setUseWorker=function(e){this.setOption("useWorker",e)}
this.getUseWorker=function(){return this.$useWorker}
this.onReloadTokenizer=function(e){var t=e.data
this.bgTokenizer.start(t.first)
this._signal("tokenizerUpdate",e)}
this.$modes={}
this.$mode=null
this.$modeId=null
this.setMode=function(e,t){if(e&&typeof e==="object"){if(e.getTokenizer)return this.$onChangeMode(e)
var i=e
var n=i.path}else{n=e||"ace/mode/text"}if(!this.$modes["ace/mode/text"])this.$modes["ace/mode/text"]=new l
if(this.$modes[n]&&!i){this.$onChangeMode(this.$modes[n])
t&&t()
return}this.$modeId=n
s.loadModule(["mode",n],function(e){if(this.$modeId!==n)return t&&t()
if(this.$modes[n]&&!i)return this.$onChangeMode(this.$modes[n])
if(e&&e.Mode){e=new e.Mode(i)
if(!i){this.$modes[n]=e
e.$id=n}this.$onChangeMode(e)
t&&t()}}.bind(this))
if(!this.$mode)this.$onChangeMode(this.$modes["ace/mode/text"],true)}
this.$onChangeMode=function(e,t){if(!t)this.$modeId=e.$id
if(this.$mode===e)return
this.$mode=e
this.$stopWorker()
if(this.$useWorker)this.$startWorker()
var i=e.getTokenizer()
if(i.addEventListener!==undefined){var n=this.onReloadTokenizer.bind(this)
i.addEventListener("update",n)}if(!this.bgTokenizer){this.bgTokenizer=new u(i)
var r=this
this.bgTokenizer.addEventListener("update",function(e){r._signal("tokenizerUpdate",e)})}else{this.bgTokenizer.setTokenizer(i)}this.bgTokenizer.setDocument(this.getDocument())
this.tokenRe=e.tokenRe
this.nonTokenRe=e.nonTokenRe
if(!t){this.$options.wrapMethod.set.call(this,this.$wrapMethod)
this.$setFolding(e.foldingRules)
this.bgTokenizer.start(0)
this._emit("changeMode")}}
this.$stopWorker=function(){if(this.$worker)this.$worker.terminate()
this.$worker=null}
this.$startWorker=function(){if(typeof Worker!=="undefined"&&!e.noWorker){try{this.$worker=this.$mode.createWorker(this)}catch(t){console.log("Could not load worker")
console.log(t)
this.$worker=null}}else this.$worker=null}
this.getMode=function(){return this.$mode}
this.$scrollTop=0
this.setScrollTop=function(e){if(this.$scrollTop===e||isNaN(e))return
this.$scrollTop=e
this._signal("changeScrollTop",e)}
this.getScrollTop=function(){return this.$scrollTop}
this.$scrollLeft=0
this.setScrollLeft=function(e){if(this.$scrollLeft===e||isNaN(e))return
this.$scrollLeft=e
this._signal("changeScrollLeft",e)}
this.getScrollLeft=function(){return this.$scrollLeft}
this.getScreenWidth=function(){this.$computeWidth()
if(this.lineWidgets)return Math.max(this.getLineWidgetMaxWidth(),this.screenWidth)
return this.screenWidth}
this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth
var e=0
this.lineWidgets.forEach(function(t){if(t&&t.screenWidth>e)e=t.screenWidth})
return this.lineWidgetWidth=e}
this.$computeWidth=function(e){if(this.$modified||e){this.$modified=false
if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit
var t=this.doc.getAllLines()
var i=this.$rowLengthCache
var n=0
var r=0
var s=this.$foldData[r]
var o=s?s.start.row:Infinity
var a=t.length
for(var l=0;l<a;l++){if(l>o){l=s.end.row+1
if(l>=a)break
s=this.$foldData[r++]
o=s?s.start.row:Infinity}if(i[l]==null)i[l]=this.$getStringScreenWidth(t[l])[0]
if(i[l]>n)n=i[l]}this.screenWidth=n}}
this.getLine=function(e){return this.doc.getLine(e)}
this.getLines=function(e,t){return this.doc.getLines(e,t)}
this.getLength=function(){return this.doc.getLength()}
this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())}
this.insert=function(e,t){return this.doc.insert(e,t)}
this.remove=function(e){return this.doc.remove(e)}
this.undoChanges=function(e,t){if(!e.length)return
this.$fromUndo=true
var i=null
for(var n=e.length-1;n!=-1;n--){var r=e[n]
if(r.group=="doc"){this.doc.revertDeltas(r.deltas)
i=this.$getUndoSelection(r.deltas,true,i)}else{r.deltas.forEach(function(e){this.addFolds(e.folds)},this)}}this.$fromUndo=false
i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i)
return i}
this.redoChanges=function(e,t){if(!e.length)return
this.$fromUndo=true
var i=null
for(var n=0;n<e.length;n++){var r=e[n]
if(r.group=="doc"){this.doc.applyDeltas(r.deltas)
i=this.$getUndoSelection(r.deltas,false,i)}}this.$fromUndo=false
i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i)
return i}
this.setUndoSelect=function(e){this.$undoSelect=e}
this.$getUndoSelection=function(e,t,i){function n(e){var i=e.action==="insertText"||e.action==="insertLines"
return t?!i:i}var r=e[0]
var s,o
var a=false
if(n(r)){s=c.fromPoints(r.range.start,r.range.end)
a=true}else{s=c.fromPoints(r.range.start,r.range.start)
a=false}for(var l=1;l<e.length;l++){r=e[l]
if(n(r)){o=r.range.start
if(s.compare(o.row,o.column)==-1){s.setStart(r.range.start)}o=r.range.end
if(s.compare(o.row,o.column)==1){s.setEnd(r.range.end)}a=true}else{o=r.range.start
if(s.compare(o.row,o.column)==-1){s=c.fromPoints(r.range.start,r.range.start)}a=false}}if(i!=null){if(c.comparePoints(i.start,s.start)===0){i.start.column+=s.end.column-s.start.column
i.end.column+=s.end.column-s.start.column}var h=i.compareRange(s)
if(h==1){s.setStart(i.start)}else if(h==-1){s.setEnd(i.end)}}return s}
this.replace=function(e,t){return this.doc.replace(e,t)}
this.moveText=function(e,t,i){var n=this.getTextRange(e)
var r=this.getFoldsInRange(e)
var s=c.fromPoints(t,t)
if(!i){this.remove(e)
var o=e.start.row-e.end.row
var a=o?-e.end.column:e.start.column-e.end.column
if(a){if(s.start.row==e.end.row&&s.start.column>e.end.column)s.start.column+=a
if(s.end.row==e.end.row&&s.end.column>e.end.column)s.end.column+=a}if(o&&s.start.row>=e.end.row){s.start.row+=o
s.end.row+=o}}s.end=this.insert(s.start,n)
if(r.length){var l=e.start
var h=s.start
var o=h.row-l.row
var a=h.column-l.column
this.addFolds(r.map(function(e){e=e.clone()
if(e.start.row==l.row)e.start.column+=a
if(e.end.row==l.row)e.end.column+=a
e.start.row+=o
e.end.row+=o
return e}))}return s}
this.indentRows=function(e,t,i){i=i.replace(/\t/g,this.getTabString())
for(var n=e;n<=t;n++)this.insert({row:n,column:0},i)}
this.outdentRows=function(e){var t=e.collapseRows()
var i=new c(0,0,0,0)
var n=this.getTabSize()
for(var r=t.start.row;r<=t.end.row;++r){var s=this.getLine(r)
i.start.row=r
i.end.row=r
for(var o=0;o<n;++o)if(s.charAt(o)!=" ")break
if(o<n&&s.charAt(o)=="	"){i.start.column=o
i.end.column=o+1}else{i.start.column=0
i.end.column=o}this.remove(i)}}
this.$moveLines=function(e,t,i){e=this.getRowFoldStart(e)
t=this.getRowFoldEnd(t)
if(i<0){var n=this.getRowFoldStart(e+i)
if(n<0)return 0
var r=n-e}else if(i>0){var n=this.getRowFoldEnd(t+i)
if(n>this.doc.getLength()-1)return 0
var r=n-t}else{e=this.$clipRowToDocument(e)
t=this.$clipRowToDocument(t)
var r=t-e+1}var s=new c(e,0,t,Number.MAX_VALUE)
var o=this.getFoldsInRange(s).map(function(e){e=e.clone()
e.start.row+=r
e.end.row+=r
return e})
var a=i==0?this.doc.getLines(e,t):this.doc.removeLines(e,t)
this.doc.insertLines(e+r,a)
o.length&&this.addFolds(o)
return r}
this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)}
this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)}
this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)}
this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))}
this.$clipColumnToRow=function(e,t){if(t<0)return 0
return Math.min(this.doc.getLine(e).length,t)}
this.$clipPositionToDocument=function(e,t){t=Math.max(0,t)
if(e<0){e=0
t=0}else{var i=this.doc.getLength()
if(e>=i){e=i-1
t=this.doc.getLine(i-1).length}else{t=Math.min(this.doc.getLine(e).length,t)}}return{row:e,column:t}}
this.$clipRangeToDocument=function(e){if(e.start.row<0){e.start.row=0
e.start.column=0}else{e.start.column=this.$clipColumnToRow(e.start.row,e.start.column)}var t=this.doc.getLength()-1
if(e.end.row>t){e.end.row=t
e.end.column=this.doc.getLine(t).length}else{e.end.column=this.$clipColumnToRow(e.end.row,e.end.column)}return e}
this.$wrapLimit=80
this.$useWrapMode=false
this.$wrapLimitRange={min:null,max:null}
this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e
this.$modified=true
this.$resetRowCache(0)
if(e){var t=this.getLength()
this.$wrapData=Array(t)
this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}}
this.getUseWrapMode=function(){return this.$useWrapMode}
this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t){this.$wrapLimitRange={min:e,max:t}
this.$modified=true
this._signal("changeWrapMode")}}
this.adjustWrapLimit=function(e,t){var i=this.$wrapLimitRange
if(i.max<0)i={min:t,max:t}
var n=this.$constrainWrapLimit(e,i.min,i.max)
if(n!=this.$wrapLimit&&n>1){this.$wrapLimit=n
this.$modified=true
if(this.$useWrapMode){this.$updateWrapData(0,this.getLength()-1)
this.$resetRowCache(0)
this._signal("changeWrapLimit")}return true}return false}
this.$constrainWrapLimit=function(e,t,i){if(t)e=Math.max(t,e)
if(i)e=Math.min(i,e)
return e}
this.getWrapLimit=function(){return this.$wrapLimit}
this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)}
this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}}
this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode
var i
var n=e.data.action
var r=e.data.range.start.row
var s=e.data.range.end.row
var o=e.data.range.start
var a=e.data.range.end
var l=null
if(n.indexOf("Lines")!=-1){if(n=="insertLines"){s=r+e.data.lines.length}else{s=r}i=e.data.lines?e.data.lines.length:s-r}else{i=s-r}this.$updating=true
if(i!=0){if(n.indexOf("remove")!=-1){this[t?"$wrapData":"$rowLengthCache"].splice(r,i)
var c=this.$foldData
l=this.getFoldsInRange(e.data.range)
this.removeFolds(l)
var h=this.getFoldLine(a.row)
var u=0
if(h){h.addRemoveChars(a.row,a.column,o.column-a.column)
h.shiftRow(-i)
var d=this.getFoldLine(r)
if(d&&d!==h){d.merge(h)
h=d}u=c.indexOf(h)+1}for(u;u<c.length;u++){var h=c[u]
if(h.start.row>=a.row){h.shiftRow(-i)}}s=r}else{var f=Array(i)
f.unshift(r,0)
var g=t?this.$wrapData:this.$rowLengthCache
g.splice.apply(g,f)
var c=this.$foldData
var h=this.getFoldLine(r)
var u=0
if(h){var m=h.range.compareInside(o.row,o.column)
if(m==0){h=h.split(o.row,o.column)
h.shiftRow(i)
h.addRemoveChars(s,0,a.column-o.column)}else if(m==-1){h.addRemoveChars(r,0,a.column-o.column)
h.shiftRow(i)}u=c.indexOf(h)+1}for(u;u<c.length;u++){var h=c[u]
if(h.start.row>=r){h.shiftRow(i)}}}}else{i=Math.abs(e.data.range.start.column-e.data.range.end.column)
if(n.indexOf("remove")!=-1){l=this.getFoldsInRange(e.data.range)
this.removeFolds(l)
i=-i}var h=this.getFoldLine(r)
if(h){h.addRemoveChars(r,o.column,i)}}if(t&&this.$wrapData.length!=this.doc.getLength()){console.error("doc.getLength() and $wrapData.length have to be the same!")}this.$updating=false
if(t)this.$updateWrapData(r,s)
else this.$updateRowLengthCache(r,s)
return l}
this.$updateRowLengthCache=function(e,t,i){this.$rowLengthCache[e]=null
this.$rowLengthCache[t]=null}
this.$updateWrapData=function(e,t){var i=this.doc.getAllLines()
var n=this.getTabSize()
var r=this.$wrapData
var s=this.$wrapLimit
var o
var l
var c=e
t=Math.min(t,i.length-1)
while(c<=t){l=this.getFoldLine(c,l)
if(!l){o=this.$getDisplayTokens(i[c])
r[c]=this.$computeWrapSplits(o,s,n)
c++}else{o=[]
l.walk(function(e,t,n,r){var s
if(e!=null){s=this.$getDisplayTokens(e,o.length)
s[0]=a
for(var l=1;l<s.length;l++){s[l]=h}}else{s=this.$getDisplayTokens(i[t].substring(r,n),o.length)}o=o.concat(s)}.bind(this),l.end.row,i[l.end.row].length+1)
r[l.start.row]=this.$computeWrapSplits(o,s,n)
c=l.end.row+1}}}
var t=1,i=2,a=3,h=4,f=9,g=10,m=11,p=12
this.$computeWrapSplits=function(e,t){if(e.length==0){return[]}var i=[]
var n=e.length
var r=0,s=0
var o=this.$wrapAsCode
function l(t){var n=e.slice(r,t)
var o=n.length
n.join("").replace(/12/g,function(){o-=1}).replace(/2/g,function(){o-=1})
s+=o
i.push(s)
r=t}while(n-r>t){var c=r+t
if(e[c-1]>=g&&e[c]>=g){l(c)
continue}if(e[c]==a||e[c]==h){for(c;c!=r-1;c--){if(e[c]==a){break}}if(c>r){l(c)
continue}c=r+t
for(c;c<e.length;c++){if(e[c]!=h){break}}if(c==e.length){break}l(c)
continue}var u=Math.max(c-(o?10:t-(t>>2)),r-1)
while(c>u&&e[c]<a){c--}if(o){while(c>u&&e[c]<a){c--}while(c>u&&e[c]==f){c--}}else{while(c>u&&e[c]<g){c--}}if(c>u){l(++c)
continue}c=r+t
l(c)}return i}
this.$getDisplayTokens=function(e,n){var r=[]
var s
n=n||0
for(var o=0;o<e.length;o++){var a=e.charCodeAt(o)
if(a==9){s=this.getScreenTabSize(r.length+n)
r.push(m)
for(var l=1;l<s;l++){r.push(p)}}else if(a==32){r.push(g)}else if(a>39&&a<48||a>57&&a<64){r.push(f)}else if(a>=4352&&v(a)){r.push(t,i)}else{r.push(t)}}return r}
this.$getStringScreenWidth=function(e,t,i){if(t==0)return[0,0]
if(t==null)t=Infinity
i=i||0
var n,r
for(r=0;r<e.length;r++){n=e.charCodeAt(r)
if(n==9){i+=this.getScreenTabSize(i)}else if(n>=4352&&v(n)){i+=2}else{i+=1}if(i>t){break}}return[i,r]}
this.lineWidgets=null
this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0
else t=0
if(!this.$useWrapMode||!this.$wrapData[e]){return 1+t}else{return this.$wrapData[e].length+1+t}}
this.getRowLineCount=function(e){if(!this.$useWrapMode||!this.$wrapData[e]){return 1}else{return this.$wrapData[e].length+1}}
this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE)
return this.documentToScreenColumn(t.row,t.column)}
this.getDocumentLastRowColumn=function(e,t){var i=this.documentToScreenRow(e,t)
return this.getScreenLastRowColumn(i)}
this.getDocumentLastRowColumnPosition=function(e,t){var i=this.documentToScreenRow(e,t)
return this.screenToDocumentPosition(i,Number.MAX_VALUE/10)}
this.getRowSplitData=function(e){if(!this.$useWrapMode){return undefined}else{return this.$wrapData[e]}}
this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize}
this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row}
this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column}
this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0}
var i
var n=0
var r=0
var s
var o=0
var a=0
var l=this.$screenRowCache
var c=this.$getRowCacheIndex(l,e)
var h=l.length
if(h&&c>=0){var o=l[c]
var n=this.$docRowCache[c]
var u=e>l[h-1]}else{var u=!h}var d=this.getLength()-1
var f=this.getNextFoldLine(n)
var g=f?f.start.row:Infinity
while(o<=e){a=this.getRowLength(n)
if(o+a>e||n>=d){break}else{o+=a
n++
if(n>g){n=f.end.row+1
f=this.getNextFoldLine(n,f)
g=f?f.start.row:Infinity}}if(u){this.$docRowCache.push(n)
this.$screenRowCache.push(o)}}if(f&&f.start.row<=n){i=this.getFoldDisplayLine(f)
n=f.start.row}else if(o+a<=e||n>d){return{row:d,column:this.getLine(d).length}}else{i=this.getLine(n)
f=null}if(this.$useWrapMode){var m=this.$wrapData[n]
if(m){var p=Math.floor(e-o)
s=m[p]
if(p>0&&m.length){r=m[p-1]||m[m.length-1]
i=i.substring(r)}}}r+=this.$getStringScreenWidth(i,t)[1]
if(this.$useWrapMode&&r>=s)r=s-1
if(f)return f.idxToPosition(r)
return{row:n,column:r}}
this.documentToScreenPosition=function(e,t){if(typeof t==="undefined")var i=this.$clipPositionToDocument(e.row,e.column)
else i=this.$clipPositionToDocument(e,t)
e=i.row
t=i.column
var n=0
var r=null
var s=null
s=this.getFoldAt(e,t,1)
if(s){e=s.start.row
t=s.start.column}var o,a=0
var l=this.$docRowCache
var c=this.$getRowCacheIndex(l,e)
var h=l.length
if(h&&c>=0){var a=l[c]
var n=this.$screenRowCache[c]
var u=e>l[h-1]}else{var u=!h}var d=this.getNextFoldLine(a)
var f=d?d.start.row:Infinity
while(a<e){if(a>=f){o=d.end.row+1
if(o>e)break
d=this.getNextFoldLine(o,d)
f=d?d.start.row:Infinity}else{o=a+1}n+=this.getRowLength(a)
a=o
if(u){this.$docRowCache.push(a)
this.$screenRowCache.push(n)}}var g=""
if(d&&a>=f){g=this.getFoldDisplayLine(d,e,t)
r=d.start.row}else{g=this.getLine(e).substring(0,t)
r=e}if(this.$useWrapMode){var m=this.$wrapData[r]
if(m){var p=0
while(g.length>=m[p]){n++
p++}g=g.substring(m[p-1]||0,g.length)}}return{row:n,column:this.$getStringScreenWidth(g)[0]}}
this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column}
this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row}
this.getScreenLength=function(){var e=0
var t=null
if(!this.$useWrapMode){e=this.getLength()
var i=this.$foldData
for(var n=0;n<i.length;n++){t=i[n]
e-=t.end.row-t.start.row}}else{var r=this.$wrapData.length
var s=0,n=0
var t=this.$foldData[n++]
var o=t?t.start.row:Infinity
while(s<r){var a=this.$wrapData[s]
e+=a?a.length+1:1
s++
if(s>o){s=t.end.row+1
t=this.$foldData[n++]
o=t?t.start.row:Infinity}}}if(this.lineWidgets)e+=this.$getWidgetScreenLength()
return e}
this.$setFontMetrics=function(e){}
function v(e){if(e<4352)return false
return e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}}).call(f.prototype)
e("./edit_session/folding").Folding.call(f.prototype)
e("./edit_session/bracket_match").BracketMatch.call(f.prototype)
s.defineOptions(f.prototype,"session",{wrap:{set:function(e){if(!e||e=="off")e=false
else if(e=="free")e=true
else if(e=="printMargin")e=-1
else if(typeof e=="string")e=parseInt(e,10)||false
if(this.$wrap==e)return
if(!e){this.setUseWrapMode(false)}else{var t=typeof e=="number"?e:null
this.setWrapLimitRange(t,t)
this.setUseWrapMode(true)}this.$wrap=e},get:function(){if(this.getUseWrapMode()){if(this.$wrap==-1)return"printMargin"
if(!this.getWrapLimitRange().min)return"free"
return this.$wrap}return"off"},handlesSet:true},wrapMethod:{set:function(e){e=e=="auto"?this.$mode.type!="text":e!="text"
if(e!=this.$wrapAsCode){this.$wrapAsCode=e
if(this.$useWrapMode){this.$modified=true
this.$resetRowCache(0)
this.$updateWrapData(0,this.getLength()-1)}}},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e
this.$stopWorker()
if(e)this.$startWorker()},initialValue:true},useSoftTabs:{initialValue:true},tabSize:{set:function(e){if(isNaN(e)||this.$tabSize===e)return
this.$modified=true
this.$rowLengthCache=[]
this.$tabSize=e
this._signal("changeTabSize")},initialValue:4,handlesSet:true},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:false},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:true},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}})
t.EditSession=f})
ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,i){"use strict"
var n=e("./lib/lang")
var r=e("./lib/oop")
var s=e("./range").Range
var o=function(){this.$options={}};(function(){this.set=function(e){r.mixin(this.$options,e)
return this}
this.getOptions=function(){return n.copyObject(this.$options)}
this.setOptions=function(e){this.$options=e}
this.find=function(e){var t=this.$matchIterator(e,this.$options)
if(!t)return false
var i=null
t.forEach(function(e,t,n){if(!e.start){var r=e.offset+(n||0)
i=new s(t,r,t,r+e.length)}else i=e
return true})
return i}
this.findAll=function(e){var t=this.$options
if(!t.needle)return[]
this.$assembleRegExp(t)
var i=t.range
var r=i?e.getLines(i.start.row,i.end.row):e.doc.getAllLines()
var o=[]
var a=t.re
if(t.$isMultiLine){var l=a.length
var c=r.length-l
var h
e:for(var u=a.offset||0;u<=c;u++){for(var d=0;d<l;d++)if(r[u+d].search(a[d])==-1)continue e
var f=r[u]
var g=r[u+l-1]
var m=f.length-f.match(a[0])[0].length
var p=g.match(a[l-1])[0].length
if(h&&h.end.row===u&&h.end.column>m){continue}o.push(h=new s(u,m,u+l-1,p))
if(l>2)u=u+l-2}}else{for(var v=0;v<r.length;v++){var A=n.getMatchOffsets(r[v],a)
for(var d=0;d<A.length;d++){var w=A[d]
o.push(new s(v,w.offset,v,w.offset+w.length))}}}if(i){var C=i.start.column
var F=i.start.column
var v=0,d=o.length-1
while(v<d&&o[v].start.column<C&&o[v].start.row==i.start.row)v++
while(v<d&&o[d].end.column>F&&o[d].end.row==i.end.row)d--
o=o.slice(v,d+1)
for(v=0,d=o.length;v<d;v++){o[v].start.row+=i.start.row
o[v].end.row+=i.start.row}}return o}
this.replace=function(e,t){var i=this.$options
var n=this.$assembleRegExp(i)
if(i.$isMultiLine)return t
if(!n)return
var r=n.exec(e)
if(!r||r[0].length!=e.length)return null
t=e.replace(n,t)
if(i.preserveCase){t=t.split("")
for(var s=Math.min(e.length,e.length);s--;){var o=e[s]
if(o&&o.toLowerCase()!=o)t[s]=t[s].toUpperCase()
else t[s]=t[s].toLowerCase()}t=t.join("")}return t}
this.$matchIterator=function(e,t){var i=this.$assembleRegExp(t)
if(!i)return false
var r=this,o,a=t.backwards
if(t.$isMultiLine){var l=i.length
var c=function(t,n,r){var a=t.search(i[0])
if(a==-1)return
for(var c=1;c<l;c++){t=e.getLine(n+c)
if(t.search(i[c])==-1)return}var h=t.match(i[l-1])[0].length
var u=new s(n,a,n+l-1,h)
if(i.offset==1){u.start.row--
u.start.column=Number.MAX_VALUE}else if(r)u.start.column+=r
if(o(u))return true}}else if(a){var c=function(e,t,r){var s=n.getMatchOffsets(e,i)
for(var a=s.length-1;a>=0;a--)if(o(s[a],t,r))return true}}else{var c=function(e,t,r){var s=n.getMatchOffsets(e,i)
for(var a=0;a<s.length;a++)if(o(s[a],t,r))return true}}return{forEach:function(i){o=i
r.$lineIterator(e,t).forEach(c)}}}
this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle
var i=e.needle
if(!e.needle)return e.re=false
if(!e.regExp)i=n.escapeRegExp(i)
if(e.wholeWord)i="\\b"+i+"\\b"
var r=e.caseSensitive?"g":"gi"
e.$isMultiLine=!t&&/[\n\r]/.test(i)
if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(i,r)
try{var s=new RegExp(i,r)}catch(o){s=false}return e.re=s}
this.$assembleMultilineRegExp=function(e,t){var i=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n")
var n=[]
for(var r=0;r<i.length;r++)try{n.push(new RegExp(i[r],t))}catch(s){return false}if(i[0]==""){n.shift()
n.offset=1}else{n.offset=0}return n}
this.$lineIterator=function(e,t){var i=t.backwards==true
var n=t.skipCurrent!=false
var r=t.range
var s=t.start
if(!s)s=r?r[i?"end":"start"]:e.selection.getRange()
if(s.start)s=s[n!=i?"end":"start"]
var o=r?r.start.row:0
var a=r?r.end.row:e.getLength()-1
var l=i?function(i){var n=s.row
var r=e.getLine(n).substring(0,s.column)
if(i(r,n))return
for(n--;n>=o;n--)if(i(e.getLine(n),n))return
if(t.wrap==false)return
for(n=a,o=s.row;n>=o;n--)if(i(e.getLine(n),n))return}:function(i){var n=s.row
var r=e.getLine(n).substr(s.column)
if(i(r,n,s.column))return
for(n=n+1;n<=a;n++)if(i(e.getLine(n),n))return
if(t.wrap==false)return
for(n=o,a=s.row;n<=a;n++)if(i(e.getLine(n),n))return}
return{forEach:l}}}).call(o.prototype)
t.Search=o})
ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,i){"use strict"
var n=e("../lib/keys")
var r=e("../lib/useragent")
function s(e,t){this.platform=t||(r.isMac?"mac":"win")
this.commands={}
this.commandKeyBinding={}
if(this.__defineGetter__&&this.__defineSetter__&&typeof console!="undefined"&&console.error){var i=false
var n=function(){if(!i){i=true
console.error("commmandKeyBinding has too many m's. use commandKeyBinding")}}
this.__defineGetter__("commmandKeyBinding",function(){n()
return this.commandKeyBinding})
this.__defineSetter__("commmandKeyBinding",function(e){n()
return this.commandKeyBinding=e})}else{this.commmandKeyBinding=this.commandKeyBinding}this.addCommands(e)}(function(){this.addCommand=function(e){if(this.commands[e.name])this.removeCommand(e)
this.commands[e.name]=e
if(e.bindKey)this._buildKeyHash(e)}
this.removeCommand=function(e){var t=typeof e==="string"?e:e.name
e=this.commands[t]
delete this.commands[t]
var i=this.commandKeyBinding
for(var n in i){for(var r in i[n]){if(i[n][r]==e)delete i[n][r]}}}
this.bindKey=function(e,t){if(!e)return
if(typeof t=="function"){this.addCommand({exec:t,bindKey:e,name:t.name||e})
return}var i=this.commandKeyBinding
e.split("|").forEach(function(e){var n=this.parseKeys(e,t)
var r=n.hashId;(i[r]||(i[r]={}))[n.key]=t},this)}
this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var i=e[t]
if(!i)return
if(typeof i==="string")return this.bindKey(i,t)
if(typeof i==="function")i={exec:i}
if(typeof i!=="object")return
if(!i.name)i.name=t
this.addCommand(i)},this)}
this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)}
this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)}
this._buildKeyHash=function(e){var t=e.bindKey
if(!t)return
var i=typeof t=="string"?t:t[this.platform]
this.bindKey(i,e)}
this.parseKeys=function(e){if(e.indexOf(" ")!=-1)e=e.split(/\s+/).pop()
var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e})
var i=t.pop()
var r=n[i]
if(n.FUNCTION_KEYS[r])i=n.FUNCTION_KEYS[r].toLowerCase()
else if(!t.length)return{key:i,hashId:-1}
else if(t.length==1&&t[0]=="shift")return{key:i.toUpperCase(),hashId:-1}
var s=0
for(var o=t.length;o--;){var a=n.KEY_MODS[t[o]]
if(a==null){if(typeof console!="undefined")console.error("invalid modifier "+t[o]+" in "+e)
return false}s|=a}return{key:i,hashId:s}}
this.findKeyCommand=function e(t,i){var n=this.commandKeyBinding
return n[t]&&n[t][i]}
this.handleKeyboard=function(e,t,i,n){return{command:this.findKeyCommand(t,i)}}}).call(s.prototype)
t.HashHandler=s})
ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("../keyboard/hash_handler").HashHandler
var s=e("../lib/event_emitter").EventEmitter
var o=function(e,t){r.call(this,t,e)
this.byName=this.commands
this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})}
n.inherits(o,r);(function(){n.implement(this,s)
this.exec=function(e,t,i){if(typeof e==="string")e=this.commands[e]
if(!e)return false
if(t&&t.$readOnly&&!e.readOnly)return false
var n={editor:t,command:e,args:i}
var r=this._emit("exec",n)
this._signal("afterExec",n)
return r===false?false:true}
this.toggleRecording=function(e){if(this.$inReplay)return
e&&e._emit("changeStatus")
if(this.recording){this.macro.pop()
this.removeEventListener("exec",this.$addCommandToMacro)
if(!this.macro.length)this.macro=this.oldMacro
return this.recording=false}if(!this.$addCommandToMacro){this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)}this.oldMacro=this.macro
this.macro=[]
this.on("exec",this.$addCommandToMacro)
return this.recording=true}
this.replay=function(e){if(this.$inReplay||!this.macro)return
if(this.recording)return this.toggleRecording(e)
try{this.$inReplay=true
this.macro.forEach(function(t){if(typeof t=="string")this.exec(t,e)
else this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=false}}
this.trimMacro=function(e){return e.map(function(e){if(typeof e[0]!="string")e[0]=e[0].name
if(!e[1])e=e[0]
return e})}}).call(o.prototype)
t.CommandManager=o})
ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,i){"use strict"
var n=e("../lib/lang")
var r=e("../config")
var s=e("../range").Range
function o(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){r.loadModule("ace/ext/settings_menu",function(t){t.init(e)
e.showSettingsMenu()})},readOnly:true},{name:"goToNextError",bindKey:o("Alt-E","Ctrl-E"),exec:function(e){r.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:true},{name:"goToPreviousError",bindKey:o("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){r.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:true},{name:"selectall",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:true},{name:"centerselection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:true},{name:"gotoline",bindKey:o("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10)
if(!isNaN(t)){e.gotoLine(t)}},readOnly:true},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(false)},scrollIntoView:"center",readOnly:true},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(true)},scrollIntoView:"center",readOnly:true},{name:"toggleFoldWidget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:true},{name:"toggleParentFoldWidget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(true)},scrollIntoView:"center",readOnly:true},{name:"foldall",bindKey:o("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:true},{name:"foldOther",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll()
e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:true},{name:"unfoldall",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:true},{name:"findnext",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"findprevious",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"selectOrFindNext",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){if(e.selection.isEmpty())e.selection.selectWord()
else e.findNext()},readOnly:true},{name:"selectOrFindPrevious",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){if(e.selection.isEmpty())e.selection.selectWord()
else e.findPrevious()},readOnly:true},{name:"find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){r.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:true},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:true},{name:"selecttostart",bindKey:o("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:o("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:true},{name:"golineup",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:true},{name:"selecttoend",bindKey:o("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:o("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"golinedown",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordleft",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordleft",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolinestart",bindKey:o("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolinestart",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectleft",bindKey:o("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoleft",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordright",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordright",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolineend",bindKey:o("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolineend",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectright",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoright",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:true},{name:"pagedown",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:true},{name:"gotopagedown",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:true},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:true},{name:"pageup",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:true},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:true},{name:"scrollup",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"scrolldown",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"togglerecording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:true},{name:"replaymacro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:true},{name:"jumptomatching",bindKey:o("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:true},{name:"selecttomatching",bindKey:o("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(true)},multiSelectAction:"forEach",readOnly:true},{name:"passKeysToBrowser",bindKey:o("null","null"),exec:function(){},passEvent:true,readOnly:true},{name:"cut",exec:function(e){var t=e.getSelectionRange()
e._emit("cut",t)
if(!e.selection.isEmpty()){e.session.remove(t)
e.clearSelection()}},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){r.loadModule("ace/ext/searchbox",function(t){t.Search(e,true)})}},{name:"undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:o("Shift-Delete",null),exec:function(e){if(e.selection.isEmpty()){e.remove("left")}else{return false}},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:o("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(n.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:o("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange()
t.start.column=t.end.column=0
t.end.row++
e.selection.setRange(t,false)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"joinlines",bindKey:o(null,null),exec:function(e){var t=e.selection.isBackwards()
var i=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor()
var r=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead()
var o=e.session.doc.getLine(i.row).length
var a=e.session.doc.getTextRange(e.selection.getRange())
var l=a.replace(/\n\s*/," ").length
var c=e.session.doc.getLine(i.row)
for(var h=i.row+1;h<=r.row+1;h++){var u=n.stringTrimLeft(n.stringTrimRight(e.session.doc.getLine(h)))
if(u.length!==0){u=" "+u}c+=u}if(r.row+1<e.session.doc.getLength()-1){c+=e.session.doc.getNewLineCharacter()}e.clearSelection()
e.session.doc.replace(new s(i.row,0,r.row+2,0),c)
if(l>0){e.selection.moveCursorTo(i.row,i.column)
e.selection.selectTo(i.row,i.column+l)}else{o=e.session.doc.getLine(i.row).length>o?o+1:o
e.selection.moveCursorTo(i.row,o)}},multiSelectAction:"forEach",readOnly:true},{name:"invertSelection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1
var i=e.session.doc.getLine(t).length
var n=e.selection.rangeList.ranges
var r=[]
if(n.length<1){n=[e.selection.getRange()]}for(var o=0;o<n.length;o++){if(o==n.length-1){if(!(n[o].end.row===t&&n[o].end.column===i)){r.push(new s(n[o].end.row,n[o].end.column,t,i))}}if(o===0){if(!(n[o].start.row===0&&n[o].start.column===0)){r.push(new s(0,0,n[o].start.row,n[o].start.column))}}else{r.push(new s(n[o-1].end.row,n[o-1].end.column,n[o].start.row,n[o].start.column))}}e.exitMultiSelectMode()
e.clearSelection()
for(var o=0;o<r.length;o++){e.selection.addRange(r[o],false)}},readOnly:true,scrollIntoView:"none"}]})
ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t,i){"use strict"
e("./lib/fixoldbrowsers")
var n=e("./lib/oop")
var r=e("./lib/dom")
var s=e("./lib/lang")
var o=e("./lib/useragent")
var a=e("./keyboard/textinput").TextInput
var l=e("./mouse/mouse_handler").MouseHandler
var c=e("./mouse/fold_handler").FoldHandler
var h=e("./keyboard/keybinding").KeyBinding
var u=e("./edit_session").EditSession
var d=e("./search").Search
var f=e("./range").Range
var g=e("./lib/event_emitter").EventEmitter
var m=e("./commands/command_manager").CommandManager
var p=e("./commands/default_commands").commands
var v=e("./config")
var A=e("./token_iterator").TokenIterator
var w=function(e,t){var i=e.getContainerElement()
this.container=i
this.renderer=e
this.commands=new m(o.isMac?"mac":"win",p)
this.textInput=new a(e.getTextAreaContainer(),this)
this.renderer.textarea=this.textInput.getElement()
this.keyBinding=new h(this)
this.$mouseHandler=new l(this)
new c(this)
this.$blockScrolling=0
this.$search=(new d).set({wrap:true})
this.$historyTracker=this.$historyTracker.bind(this)
this.commands.on("exec",this.$historyTracker)
this.$initOperationListeners()
this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{})
this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this))
this.on("change",function(e,t){t._$emitInputEvent.schedule(31)})
this.setSession(t||new u(""))
v.resetOptions(this)
v._signal("editor",this)};(function(){n.implement(this,g)
this.$initOperationListeners=function(){function e(e){return e[e.length-1]}this.selections=[]
this.commands.on("exec",function(t){this.startOperation(t)
var i=t.command
if(i.aceCommandGroup=="fileJump"){var n=this.prevOp
if(!n||n.command.aceCommandGroup!="fileJump"){this.lastFileJumpPos=e(this.selections)}}else{this.lastFileJumpPos=null}}.bind(this),true)
this.commands.on("afterExec",function(e){var t=e.command
if(t.aceCommandGroup=="fileJump"){if(this.lastFileJumpPos&&!this.curOp.selectionChanged){this.selection.fromJSON(this.lastFileJumpPos)}}this.endOperation(e)}.bind(this),true)
this.$opResetTimer=s.delayedCall(this.endOperation.bind(this))
this.on("change",function(){this.curOp||this.startOperation()
this.curOp.docChanged=true}.bind(this),true)
this.on("changeSelection",function(){this.curOp||this.startOperation()
this.curOp.selectionChanged=true}.bind(this),true)}
this.curOp=null
this.prevOp={}
this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return
this.prevOp=this.curOp}if(!e){this.previousCommand=null
e={}}this.$opResetTimer.schedule()
this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop}
var t=this.curOp.command
if(t&&t.scrollIntoView)this.$blockScrolling++
this.selections.push(this.selection.toJSON())}
this.endOperation=function(){if(this.curOp){var e=this.curOp.command
if(e&&e.scrollIntoView){this.$blockScrolling--
switch(e.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5)
break
case"animate":case"cursor":this.renderer.scrollCursorIntoView()
break
case"selectionPart":var t=this.selection.getRange()
var i=this.renderer.layerConfig
if(t.start.row>=i.lastRow||t.end.row<=i.firstRow){this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}break
default:break}if(e.scrollIntoView=="animate")this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp
this.curOp=null}}
this.$mergeableCommands=["backspace","del","insertstring"]
this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return
var t=this.prevOp
var i=this.$mergeableCommands
var n=t.command&&e.command.name==t.command.name
if(e.command.name=="insertstring"){var r=e.args
if(this.mergeNextCommand===undefined)this.mergeNextCommand=true
n=n&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(t.args))
this.mergeNextCommand=true}else{n=n&&i.indexOf(e.command.name)!==-1}if(this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3){n=false}if(n)this.session.mergeUndoDeltas=true
else if(i.indexOf(e.command.name)!==-1)this.sequenceStartTime=Date.now()}
this.setKeyboardHandler=function(e){if(!e){this.keyBinding.setKeyboardHandler(null)}else if(typeof e==="string"){this.$keybindingId=e
var t=this
v.loadModule(["keybinding",e],function(i){if(t.$keybindingId==e)t.keyBinding.setKeyboardHandler(i&&i.handler)})}else{this.$keybindingId=null
this.keyBinding.setKeyboardHandler(e)}}
this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()}
this.setSession=function(e){if(this.session==e)return
var t=this.session
if(t){this.session.removeEventListener("change",this.$onDocumentChange)
this.session.removeEventListener("changeMode",this.$onChangeMode)
this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate)
this.session.removeEventListener("changeTabSize",this.$onChangeTabSize)
this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit)
this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode)
this.session.removeEventListener("onChangeFold",this.$onChangeFold)
this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker)
this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker)
this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint)
this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation)
this.session.removeEventListener("changeOverwrite",this.$onCursorChange)
this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange)
this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange)
var i=this.session.getSelection()
i.removeEventListener("changeCursor",this.$onCursorChange)
i.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e
if(e){this.$onDocumentChange=this.onDocumentChange.bind(this)
e.addEventListener("change",this.$onDocumentChange)
this.renderer.setSession(e)
this.$onChangeMode=this.onChangeMode.bind(this)
e.addEventListener("changeMode",this.$onChangeMode)
this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this)
e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate)
this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer)
e.addEventListener("changeTabSize",this.$onChangeTabSize)
this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this)
e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit)
this.$onChangeWrapMode=this.onChangeWrapMode.bind(this)
e.addEventListener("changeWrapMode",this.$onChangeWrapMode)
this.$onChangeFold=this.onChangeFold.bind(this)
e.addEventListener("changeFold",this.$onChangeFold)
this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this)
this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker)
this.$onChangeBackMarker=this.onChangeBackMarker.bind(this)
this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker)
this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this)
this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint)
this.$onChangeAnnotation=this.onChangeAnnotation.bind(this)
this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation)
this.$onCursorChange=this.onCursorChange.bind(this)
this.session.addEventListener("changeOverwrite",this.$onCursorChange)
this.$onScrollTopChange=this.onScrollTopChange.bind(this)
this.session.addEventListener("changeScrollTop",this.$onScrollTopChange)
this.$onScrollLeftChange=this.onScrollLeftChange.bind(this)
this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange)
this.selection=e.getSelection()
this.selection.addEventListener("changeCursor",this.$onCursorChange)
this.$onSelectionChange=this.onSelectionChange.bind(this)
this.selection.addEventListener("changeSelection",this.$onSelectionChange)
this.onChangeMode()
this.$blockScrolling+=1
this.onCursorChange()
this.$blockScrolling-=1
this.onScrollTopChange()
this.onScrollLeftChange()
this.onSelectionChange()
this.onChangeFrontMarker()
this.onChangeBackMarker()
this.onChangeBreakpoint()
this.onChangeAnnotation()
this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit()
this.renderer.updateFull()}this._signal("changeSession",{session:e,oldSession:t})
t&&t._signal("changeEditor",{oldEditor:this})
e&&e._signal("changeEditor",{editor:this})}
this.getSession=function(){return this.session}
this.setValue=function(e,t){this.session.doc.setValue(e)
if(!t)this.selectAll()
else if(t==1)this.navigateFileEnd()
else if(t==-1)this.navigateFileStart()
return e}
this.getValue=function(){return this.session.getValue()}
this.getSelection=function(){return this.selection}
this.resize=function(e){this.renderer.onResize(e)}
this.setTheme=function(e,t){this.renderer.setTheme(e,t)}
this.getTheme=function(){return this.renderer.getTheme()}
this.setStyle=function(e){this.renderer.setStyle(e)}
this.unsetStyle=function(e){this.renderer.unsetStyle(e)}
this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container,"fontSize")}
this.setFontSize=function(e){this.setOption("fontSize",e)}
this.$highlightBrackets=function(){if(this.session.$bracketHighlight){this.session.removeMarker(this.session.$bracketHighlight)
this.session.$bracketHighlight=null}if(this.$highlightPending){return}var e=this
this.$highlightPending=true
setTimeout(function(){e.$highlightPending=false
var t=e.session.findMatchingBracket(e.getCursorPosition())
if(t){var i=new f(t.row,t.column,t.row,t.column+1)}else if(e.session.$mode.getMatching){var i=e.session.$mode.getMatching(e.session)}if(i)e.session.$bracketHighlight=e.session.addMarker(i,"ace_bracket","text")},50)}
this.$highlightTags=function(){var e=this.session
if(this.$highlightTagPending){return}var t=this
this.$highlightTagPending=true
setTimeout(function(){t.$highlightTagPending=false
var i=t.getCursorPosition()
var n=new A(t.session,i.row,i.column)
var r=n.getCurrentToken()
if(!r||r.type.indexOf("tag-name")===-1){e.removeMarker(e.$tagHighlight)
e.$tagHighlight=null
return}var s=r.value
var o=0
var a=n.stepBackward()
if(a.value=="<"){do{a=r
r=n.stepForward()
if(r&&r.value===s&&r.type.indexOf("tag-name")!==-1){if(a.value==="<"){o++}else if(a.value==="</"){o--}}}while(r&&o>=0)}else{do{r=a
a=n.stepBackward()
if(r&&r.value===s&&r.type.indexOf("tag-name")!==-1){if(a.value==="<"){o++}else if(a.value==="</"){o--}}}while(a&&o<=0)
n.stepForward()}if(!r){e.removeMarker(e.$tagHighlight)
e.$tagHighlight=null
return}var l=n.getCurrentTokenRow()
var c=n.getCurrentTokenColumn()
var h=new f(l,c,l,c+r.value.length)
if(e.$tagHighlight&&h.compareRange(e.$backMarkers[e.$tagHighlight].range)!==0){e.removeMarker(e.$tagHighlight)
e.$tagHighlight=null}if(h&&!e.$tagHighlight)e.$tagHighlight=e.addMarker(h,"ace_bracket","text")},50)}
this.focus=function(){var e=this
setTimeout(function(){e.textInput.focus()})
this.textInput.focus()}
this.isFocused=function(){return this.textInput.isFocused()}
this.blur=function(){this.textInput.blur()}
this.onFocus=function(){if(this.$isFocused)return
this.$isFocused=true
this.renderer.showCursor()
this.renderer.visualizeFocus()
this._emit("focus")}
this.onBlur=function(){if(!this.$isFocused)return
this.$isFocused=false
this.renderer.hideCursor()
this.renderer.visualizeBlur()
this._emit("blur")}
this.$cursorChange=function(){this.renderer.updateCursor()}
this.onDocumentChange=function(e){var t=e.data
var i=t.range
var n
if(i.start.row==i.end.row&&t.action!="insertLines"&&t.action!="removeLines")n=i.end.row
else n=Infinity
this.renderer.updateLines(i.start.row,n)
this._signal("change",e)
this.$cursorChange()}
this.onTokenizerUpdate=function(e){var t=e.data
this.renderer.updateLines(t.first,t.last)}
this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())}
this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())}
this.onCursorChange=function(){this.$cursorChange()
if(!this.$blockScrolling){this.renderer.scrollCursorIntoView()}this.$highlightBrackets()
this.$highlightTags()
this.$updateHighlightActiveLine()
this._signal("changeSelection")}
this.$updateHighlightActiveLine=function(){var e=this.getSession()
var t
if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())t=this.getCursorPosition()
if(this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1))t=false}if(e.$highlightLineMarker&&!t){e.removeMarker(e.$highlightLineMarker.id)
e.$highlightLineMarker=null}else if(!e.$highlightLineMarker&&t){var i=new f(t.row,t.column,t.row,Infinity)
i.id=e.addMarker(i,"ace_active-line","screenLine")
e.$highlightLineMarker=i}else if(t){e.$highlightLineMarker.start.row=t.row
e.$highlightLineMarker.end.row=t.row
e.$highlightLineMarker.start.column=t.column
e._signal("changeBackMarker")}}
this.onSelectionChange=function(e){var t=this.session
if(t.$selectionMarker){t.removeMarker(t.$selectionMarker)}t.$selectionMarker=null
if(!this.selection.isEmpty()){var i=this.selection.getRange()
var n=this.getSelectionStyle()
t.$selectionMarker=t.addMarker(i,"ace_selection",n)}else{this.$updateHighlightActiveLine()}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp()
this.session.highlight(r)
this._signal("changeSelection")}
this.$getSelectionHighLightRegexp=function(){var e=this.session
var t=this.getSelectionRange()
if(t.isEmpty()||t.isMultiLine())return
var i=t.start.column-1
var n=t.end.column+1
var r=e.getLine(t.start.row)
var s=r.length
var o=r.substring(Math.max(i,0),Math.min(n,s))
if(i>=0&&/^[\w\d]/.test(o)||n<=s&&/[\w\d]$/.test(o))return
o=r.substring(t.start.column,t.end.column)
if(!/^[\w\d]+$/.test(o))return
var a=this.$search.$assembleRegExp({wholeWord:true,caseSensitive:true,needle:o})
return a}
this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()}
this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()}
this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()}
this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())}
this.onChangeMode=function(e){this.renderer.updateText()
this._emit("changeMode",e)}
this.onChangeWrapLimit=function(){this.renderer.updateFull()}
this.onChangeWrapMode=function(){this.renderer.onResize(true)}
this.onChangeFold=function(){this.$updateHighlightActiveLine()
this.renderer.updateFull()}
this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())}
this.getCopyText=function(){var e=this.getSelectedText()
this._signal("copy",e)
return e}
this.onCopy=function(){this.commands.exec("copy",this)}
this.onCut=function(){this.commands.exec("cut",this)}
this.onPaste=function(e){if(this.$readOnly)return
var t={text:e}
this._signal("paste",t)
this.insert(t.text,true)}
this.execCommand=function(e,t){this.commands.exec(e,this,t)}
this.insert=function(e,t){var i=this.session
var n=i.getMode()
var r=this.getCursorPosition()
if(this.getBehavioursEnabled()&&!t){var s=n.transformAction(i.getState(r.row),"insertion",this,i,e)
if(s){if(e!==s.text){this.session.mergeUndoDeltas=false
this.$mergeNextCommand=false}e=s.text}}if(e=="	")e=this.session.getTabString()
if(!this.selection.isEmpty()){var o=this.getSelectionRange()
r=this.session.remove(o)
this.clearSelection()}else if(this.session.getOverwrite()){var o=new f.fromPoints(r,r)
o.end.column+=e.length
this.session.remove(o)}if(e=="\n"||e=="\r\n"){var a=i.getLine(r.row)
if(r.column>a.search(/\S|$/)){var l=a.substr(r.column).search(/\S|$/)
i.doc.removeInLine(r.row,r.column,r.column+l)}}this.clearSelection()
var c=r.column
var h=i.getState(r.row)
var a=i.getLine(r.row)
var u=n.checkOutdent(h,a,e)
var d=i.insert(r,e)
if(s&&s.selection){if(s.selection.length==2){this.selection.setSelectionRange(new f(r.row,c+s.selection[0],r.row,c+s.selection[1]))}else{this.selection.setSelectionRange(new f(r.row+s.selection[0],s.selection[1],r.row+s.selection[2],s.selection[3]))}}if(i.getDocument().isNewLine(e)){var g=n.getNextLineIndent(h,a.slice(0,r.column),i.getTabString())
i.insert({row:r.row+1,column:0},g)}if(u)n.autoOutdent(h,i,r.row)}
this.onTextInput=function(e){this.keyBinding.onTextInput(e)}
this.onCommandKey=function(e,t,i){this.keyBinding.onCommandKey(e,t,i)}
this.setOverwrite=function(e){this.session.setOverwrite(e)}
this.getOverwrite=function(){return this.session.getOverwrite()}
this.toggleOverwrite=function(){this.session.toggleOverwrite()}
this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)}
this.getScrollSpeed=function(){return this.getOption("scrollSpeed")}
this.setDragDelay=function(e){this.setOption("dragDelay",e)}
this.getDragDelay=function(){return this.getOption("dragDelay")}
this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)}
this.getSelectionStyle=function(){return this.getOption("selectionStyle")}
this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)}
this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")}
this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)}
this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")}
this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)}
this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord}
this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)}
this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()}
this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)}
this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()}
this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)}
this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()}
this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)}
this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()}
this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)}
this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()}
this.setReadOnly=function(e){this.setOption("readOnly",e)}
this.getReadOnly=function(){return this.getOption("readOnly")}
this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)}
this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")}
this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)}
this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")}
this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)}
this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")}
this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)}
this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")}
this.remove=function(e){if(this.selection.isEmpty()){if(e=="left")this.selection.selectLeft()
else this.selection.selectRight()}var t=this.getSelectionRange()
if(this.getBehavioursEnabled()){var i=this.session
var n=i.getState(t.start.row)
var r=i.getMode().transformAction(n,"deletion",this,i,t)
if(t.end.column===0){var s=i.getTextRange(t)
if(s[s.length-1]=="\n"){var o=i.getLine(t.end.row)
if(/^\s+$/.test(o)){t.end.column=o.length}}}if(r)t=r}this.session.remove(t)
this.clearSelection()}
this.removeWordRight=function(){if(this.selection.isEmpty())this.selection.selectWordRight()
this.session.remove(this.getSelectionRange())
this.clearSelection()}
this.removeWordLeft=function(){if(this.selection.isEmpty())this.selection.selectWordLeft()
this.session.remove(this.getSelectionRange())
this.clearSelection()}
this.removeToLineStart=function(){if(this.selection.isEmpty())this.selection.selectLineStart()
this.session.remove(this.getSelectionRange())
this.clearSelection()}
this.removeToLineEnd=function(){if(this.selection.isEmpty())this.selection.selectLineEnd()
var e=this.getSelectionRange()
if(e.start.column==e.end.column&&e.start.row==e.end.row){e.end.column=0
e.end.row++}this.session.remove(e)
this.clearSelection()}
this.splitLine=function(){if(!this.selection.isEmpty()){this.session.remove(this.getSelectionRange())
this.clearSelection()}var e=this.getCursorPosition()
this.insert("\n")
this.moveCursorToPosition(e)}
this.transposeLetters=function(){if(!this.selection.isEmpty()){return}var e=this.getCursorPosition()
var t=e.column
if(t===0)return
var i=this.session.getLine(e.row)
var n,r
if(t<i.length){n=i.charAt(t)+i.charAt(t-1)
r=new f(e.row,t-1,e.row,t+1)}else{n=i.charAt(t-1)+i.charAt(t-2)
r=new f(e.row,t-2,e.row,t)}this.session.replace(r,n)}
this.toLowerCase=function(){var e=this.getSelectionRange()
if(this.selection.isEmpty()){this.selection.selectWord()}var t=this.getSelectionRange()
var i=this.session.getTextRange(t)
this.session.replace(t,i.toLowerCase())
this.selection.setSelectionRange(e)}
this.toUpperCase=function(){var e=this.getSelectionRange()
if(this.selection.isEmpty()){this.selection.selectWord()}var t=this.getSelectionRange()
var i=this.session.getTextRange(t)
this.session.replace(t,i.toUpperCase())
this.selection.setSelectionRange(e)}
this.indent=function(){var e=this.session
var t=this.getSelectionRange()
if(t.start.row<t.end.row){var i=this.$getSelectedRows()
e.indentRows(i.first,i.last,"	")
return}else if(t.start.column<t.end.column){var n=e.getTextRange(t)
if(!/^\s+$/.test(n)){var i=this.$getSelectedRows()
e.indentRows(i.first,i.last,"	")
return}}var r=e.getLine(t.start.row)
var o=t.start
var a=e.getTabSize()
var l=e.documentToScreenColumn(o.row,o.column)
if(this.session.getUseSoftTabs()){var c=a-l%a
var h=s.stringRepeat(" ",c)}else{var c=l%a
while(r[t.start.column]==" "&&c){t.start.column--
c--}this.selection.setSelectionRange(t)
h="	"}return this.insert(h)}
this.blockIndent=function(){var e=this.$getSelectedRows()
this.session.indentRows(e.first,e.last,"	")}
this.blockOutdent=function(){var e=this.session.getSelection()
this.session.outdentRows(e.getRange())}
this.sortLines=function(){var e=this.$getSelectedRows()
var t=this.session
var i=[]
for(r=e.first;r<=e.last;r++)i.push(t.getLine(r))
i.sort(function(e,t){if(e.toLowerCase()<t.toLowerCase())return-1
if(e.toLowerCase()>t.toLowerCase())return 1
return 0})
var n=new f(0,0,0,0)
for(var r=e.first;r<=e.last;r++){var s=t.getLine(r)
n.start.row=r
n.end.row=r
n.end.column=s.length
t.replace(n,i[r-e.first])}}
this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row)
var t=this.$getSelectedRows()
this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)}
this.toggleBlockComment=function(){var e=this.getCursorPosition()
var t=this.session.getState(e.row)
var i=this.getSelectionRange()
this.session.getMode().toggleBlockComment(t,this.session,i,e)}
this.getNumberAt=function(e,t){var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g
i.lastIndex=0
var n=this.session.getLine(e)
while(i.lastIndex<t){var r=i.exec(n)
if(r.index<=t&&r.index+r[0].length>=t){var s={value:r[0],start:r.index,end:r.index+r[0].length}
return s}}return null}
this.modifyNumber=function(e){var t=this.selection.getCursor().row
var i=this.selection.getCursor().column
var n=new f(t,i-1,t,i)
var r=this.session.getTextRange(n)
if(!isNaN(parseFloat(r))&&isFinite(r)){var s=this.getNumberAt(t,i)
if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end
var a=s.start+s.value.length-o
var l=parseFloat(s.value)
l*=Math.pow(10,a)
if(o!==s.end&&i<o){e*=Math.pow(10,s.end-i-1)}else{e*=Math.pow(10,s.end-i)}l+=e
l/=Math.pow(10,a)
var c=l.toFixed(a)
var h=new f(t,s.start,t,s.end)
this.session.replace(h,c)
this.moveCursorTo(t,Math.max(s.start+1,i+c.length-s.value.length))}}}
this.removeLines=function(){var e=this.$getSelectedRows()
var t
if(e.first===0||e.last+1<this.session.getLength())t=new f(e.first,0,e.last+1,0)
else t=new f(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length)
this.session.remove(t)
this.clearSelection()}
this.duplicateSelection=function(){var e=this.selection
var t=this.session
var i=e.getRange()
var n=e.isBackwards()
if(i.isEmpty()){var r=i.start.row
t.duplicateLines(r,r)}else{var s=n?i.start:i.end
var o=t.insert(s,t.getTextRange(i),false)
i.start=s
i.end=o
e.setSelectionRange(i,n)}}
this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})}
this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})}
this.moveText=function(e,t,i){return this.session.moveText(e,t,i)}
this.copyLinesUp=function(){this.$moveLines(function(e,t){this.session.duplicateLines(e,t)
return 0})}
this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})}
this.$moveLines=function(e){var t=this.selection
if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var i=t.toOrientedRange()
var n=this.$getSelectedRows(i)
var r=e.call(this,n.first,n.last)
i.moveBy(r,0)
t.fromOrientedRange(i)}else{var s=t.rangeList.ranges
t.rangeList.detach(this.session)
for(var o=s.length;o--;){var a=o
var n=s[o].collapseRows()
var l=n.end.row
var c=n.start.row
while(o--){n=s[o].collapseRows()
if(c-n.end.row<=1)c=n.end.row
else break}o++
var r=e.call(this,c,l)
while(a>=o){s[a].moveBy(r,0)
a--}}t.fromOrientedRange(t.ranges[0])
t.rangeList.attach(this.session)}}
this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows()
return{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}}
this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())}
this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)}
this.onCompositionEnd=function(){this.renderer.hideComposition()}
this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()}
this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()}
this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()}
this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()}
this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1}
this.$moveByPage=function(e,t){var i=this.renderer
var n=this.renderer.layerConfig
var r=e*Math.floor(n.height/n.lineHeight)
this.$blockScrolling++
if(t===true){this.selection.$moveSelection(function(){this.moveCursorBy(r,0)})}else if(t===false){this.selection.moveCursorBy(r,0)
this.selection.clearSelection()}this.$blockScrolling--
var s=i.scrollTop
i.scrollBy(0,r*n.lineHeight)
if(t!=null)i.scrollCursorIntoView(null,.5)
i.animateScrolling(s)}
this.selectPageDown=function(){this.$moveByPage(1,true)}
this.selectPageUp=function(){this.$moveByPage(-1,true)}
this.gotoPageDown=function(){this.$moveByPage(1,false)}
this.gotoPageUp=function(){this.$moveByPage(-1,false)}
this.scrollPageDown=function(){this.$moveByPage(1)}
this.scrollPageUp=function(){this.$moveByPage(-1)}
this.scrollToRow=function(e){this.renderer.scrollToRow(e)}
this.scrollToLine=function(e,t,i,n){this.renderer.scrollToLine(e,t,i,n)}
this.centerSelection=function(){var e=this.getSelectionRange()
var t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)}
this.renderer.alignCursor(t,.5)}
this.getCursorPosition=function(){return this.selection.getCursor()}
this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())}
this.getSelectionRange=function(){return this.selection.getRange()}
this.selectAll=function(){this.$blockScrolling+=1
this.selection.selectAll()
this.$blockScrolling-=1}
this.clearSelection=function(){this.selection.clearSelection()}
this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)}
this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)}
this.jumpToMatching=function(e){var t=this.getCursorPosition()
var i=new A(this.session,t.row,t.column)
var n=i.getCurrentToken()
var r=n
if(!r)r=i.stepForward()
if(!r)return
var s
var o=false
var a={}
var l=t.column-r.start
var c
var h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"}
do{if(r.value.match(/[{}()\[\]]/g)){for(;l<r.value.length&&!o;l++){if(!h[r.value[l]]){continue}c=h[r.value[l]]+"."+r.type.replace("rparen","lparen")
if(isNaN(a[c])){a[c]=0}switch(r.value[l]){case"(":case"[":case"{":a[c]++
break
case")":case"]":case"}":a[c]--
if(a[c]===-1){s="bracket"
o=true}break}}}else if(r&&r.type.indexOf("tag-name")!==-1){if(isNaN(a[r.value])){a[r.value]=0}if(n.value==="<"){a[r.value]++}else if(n.value==="</"){a[r.value]--}if(a[r.value]===-1){s="tag"
o=true}}if(!o){n=r
r=i.stepForward()
l=0}}while(r&&!o)
if(!s){return}var u
if(s==="bracket"){u=this.session.getBracketRange(t)
if(!u){u=new f(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+l-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+l-1)
if(!u)return
var d=u.start
if(d.row===t.row&&Math.abs(d.column-t.column)<2)u=this.session.getBracketRange(d)}}else if(s==="tag"){if(r&&r.type.indexOf("tag-name")!==-1)var g=r.value
else return
var u=new f(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)
if(u.compare(t.row,t.column)===0){o=false
do{r=n
n=i.stepBackward()
if(n){if(n.type.indexOf("tag-close")!==-1){u.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1)}if(r.value===g&&r.type.indexOf("tag-name")!==-1){if(n.value==="<"){a[g]++}else if(n.value==="</"){a[g]--}if(a[g]===0)o=true}}}while(n&&!o)}if(r&&r.type.indexOf("tag-name")){var d=u.start
if(d.row==t.row&&Math.abs(d.column-t.column)<2)d=u.end}}d=u&&u.cursor||d
if(d){if(e){if(u&&u.isEqual(this.getSelectionRange()))this.clearSelection()
else this.selection.selectTo(d.row,d.column)}else{this.selection.moveTo(d.row,d.column)}}}
this.gotoLine=function(e,t,i){this.selection.clearSelection()
this.session.unfold({row:e-1,column:t||0})
this.$blockScrolling+=1
this.exitMultiSelectMode&&this.exitMultiSelectMode()
this.moveCursorTo(e-1,t||0)
this.$blockScrolling-=1
if(!this.isRowFullyVisible(e-1))this.scrollToLine(e-1,true,i)}
this.navigateTo=function(e,t){this.selection.moveTo(e,t)}
this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition()
return this.moveCursorToPosition(t)}this.selection.clearSelection()
this.selection.moveCursorBy(-e||-1,0)}
this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition()
return this.moveCursorToPosition(t)}this.selection.clearSelection()
this.selection.moveCursorBy(e||1,0)}
this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start
this.moveCursorToPosition(t)}else{e=e||1
while(e--){this.selection.moveCursorLeft()}}this.clearSelection()}
this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end
this.moveCursorToPosition(t)}else{e=e||1
while(e--){this.selection.moveCursorRight()}}this.clearSelection()}
this.navigateLineStart=function(){this.selection.moveCursorLineStart()
this.clearSelection()}
this.navigateLineEnd=function(){this.selection.moveCursorLineEnd()
this.clearSelection()}
this.navigateFileEnd=function(){this.selection.moveCursorFileEnd()
this.clearSelection()}
this.navigateFileStart=function(){this.selection.moveCursorFileStart()
this.clearSelection()}
this.navigateWordRight=function(){this.selection.moveCursorWordRight()
this.clearSelection()}
this.navigateWordLeft=function(){this.selection.moveCursorWordLeft()
this.clearSelection()}
this.replace=function(e,t){if(t)this.$search.set(t)
var i=this.$search.find(this.session)
var n=0
if(!i)return n
if(this.$tryReplace(i,e)){n=1}if(i!==null){this.selection.setSelectionRange(i)
this.renderer.scrollSelectionIntoView(i.start,i.end)}return n}
this.replaceAll=function(e,t){if(t){this.$search.set(t)}var i=this.$search.findAll(this.session)
var n=0
if(!i.length)return n
this.$blockScrolling+=1
var r=this.getSelectionRange()
this.selection.moveTo(0,0)
for(var s=i.length-1;s>=0;--s){if(this.$tryReplace(i[s],e)){n++}}this.selection.setSelectionRange(r)
this.$blockScrolling-=1
return n}
this.$tryReplace=function(e,t){var i=this.session.getTextRange(e)
t=this.$search.replace(i,t)
if(t!==null){e.end=this.session.replace(e,t)
return e}else{return null}}
this.getLastSearchOptions=function(){return this.$search.getOptions()}
this.find=function(e,t,i){if(!t)t={}
if(typeof e=="string"||e instanceof RegExp)t.needle=e
else if(typeof e=="object")n.mixin(t,e)
var r=this.selection.getRange()
if(t.needle==null){e=this.session.getTextRange(r)||this.$search.$options.needle
if(!e){r=this.session.getWordRange(r.start.row,r.start.column)
e=this.session.getTextRange(r)}this.$search.set({needle:e})}this.$search.set(t)
if(!t.start)this.$search.set({start:r})
var s=this.$search.find(this.session)
if(t.preventScroll)return s
if(s){this.revealRange(s,i)
return s}if(t.backwards)r.start=r.end
else r.end=r.start
this.selection.setRange(r)}
this.findNext=function(e,t){this.find({skipCurrent:true,backwards:false},e,t)}
this.findPrevious=function(e,t){this.find(e,{skipCurrent:true,backwards:true},t)}
this.revealRange=function(e,t){this.$blockScrolling+=1
this.session.unfold(e)
this.selection.setSelectionRange(e)
this.$blockScrolling-=1
var i=this.renderer.scrollTop
this.renderer.scrollSelectionIntoView(e.start,e.end,.5)
if(t!==false)this.renderer.animateScrolling(i)}
this.undo=function(){this.$blockScrolling++
this.session.getUndoManager().undo()
this.$blockScrolling--
this.renderer.scrollCursorIntoView(null,.5)}
this.redo=function(){this.$blockScrolling++
this.session.getUndoManager().redo()
this.$blockScrolling--
this.renderer.scrollCursorIntoView(null,.5)}
this.destroy=function(){this.renderer.destroy()
this._signal("destroy",this)}
this.setAutoScrollEditorIntoView=function(e){if(!e)return
var t
var i=this
var n=false
if(!this.$scrollAnchor)this.$scrollAnchor=document.createElement("div")
var r=this.$scrollAnchor
r.style.cssText="position:absolute"
this.container.insertBefore(r,this.container.firstChild)
var s=this.on("changeSelection",function(){n=true})
var o=this.renderer.on("beforeRender",function(){if(n)t=i.renderer.container.getBoundingClientRect()})
var a=this.renderer.on("afterRender",function(){if(n&&t&&i.isFocused()){var e=i.renderer
var s=e.$cursorLayer.$pixelPos
var o=e.layerConfig
var a=s.top-o.offset
if(s.top>=0&&a+t.top<0){n=true}else if(s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight){n=false}else{n=null}if(n!=null){r.style.top=a+"px"
r.style.left=s.left+"px"
r.style.height=o.lineHeight+"px"
r.scrollIntoView(n)}n=t=null}})
this.setAutoScrollEditorIntoView=function(e){if(e)return
delete this.setAutoScrollEditorIntoView
this.removeEventListener("changeSelection",s)
this.renderer.removeEventListener("afterRender",a)
this.renderer.removeEventListener("beforeRender",o)}}
this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace"
var t=this.renderer.$cursorLayer
if(!t)return
t.setSmoothBlinking(/smooth/.test(e))
t.isBlinking=!this.$readOnly&&e!="wide"
r.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e))}}).call(w.prototype)
v.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange()
this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:true},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:true},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:false},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[false,true,"always"],initialValue:true},behavioursEnabled:{initialValue:true},wrapBehavioursEnabled:{initialValue:true},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"})
t.Editor=w})
ace.define("ace/undomanager",["require","exports","module"],function(e,t,i){"use strict"
var n=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0]
this.$doc=e.args[1]
if(e.merge&&this.hasUndo()){this.dirtyCounter--
t=this.$undoStack.pop().concat(t)}this.$undoStack.push(t)
this.$redoStack=[]
if(this.dirtyCounter<0){this.dirtyCounter=NaN}this.dirtyCounter++}
this.undo=function(e){var t=this.$undoStack.pop()
var i=null
if(t){i=this.$doc.undoChanges(t,e)
this.$redoStack.push(t)
this.dirtyCounter--}return i}
this.redo=function(e){var t=this.$redoStack.pop()
var i=null
if(t){i=this.$doc.redoChanges(t,e)
this.$undoStack.push(t)
this.dirtyCounter++}return i}
this.reset=function(){this.$undoStack=[]
this.$redoStack=[]
this.dirtyCounter=0}
this.hasUndo=function(){return this.$undoStack.length>0}
this.hasRedo=function(){return this.$redoStack.length>0}
this.markClean=function(){this.dirtyCounter=0}
this.isClean=function(){return this.dirtyCounter===0}}).call(n.prototype)
t.UndoManager=n})
ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,i){"use strict"
var n=e("../lib/dom")
var r=e("../lib/oop")
var s=e("../lib/lang")
var o=e("../lib/event_emitter").EventEmitter
var a=function(e){this.element=n.createElement("div")
this.element.className="ace_layer ace_gutter-layer"
e.appendChild(this.element)
this.setShowFoldWidgets(this.$showFoldWidgets)
this.gutterWidth=0
this.$annotations=[]
this.$updateAnnotations=this.$updateAnnotations.bind(this)
this.$cells=[]};(function(){r.implement(this,o)
this.setSession=function(e){if(this.session)this.session.removeEventListener("change",this.$updateAnnotations)
this.session=e
e.on("change",this.$updateAnnotations)}
this.addGutterDecoration=function(e,t){if(window.console)console.warn&&console.warn("deprecated use session.addGutterDecoration")
this.session.addGutterDecoration(e,t)}
this.removeGutterDecoration=function(e,t){if(window.console)console.warn&&console.warn("deprecated use session.removeGutterDecoration")
this.session.removeGutterDecoration(e,t)}
this.setAnnotations=function(e){this.$annotations=[]
for(var t=0;t<e.length;t++){var i=e[t]
var n=i.row
var r=this.$annotations[n]
if(!r)r=this.$annotations[n]={text:[]}
var o=i.text
o=o?s.escapeHTML(o):i.html||""
if(r.text.indexOf(o)===-1)r.text.push(o)
var a=i.type
if(a=="error")r.className=" ace_error"
else if(a=="warning"&&r.className!=" ace_error")r.className=" ace_warning"
else if(a=="info"&&!r.className)r.className=" ace_info"}}
this.$updateAnnotations=function(e){if(!this.$annotations.length)return
var t=e.data
var i=t.range
var n=i.start.row
var r=i.end.row-n
if(r===0){}else if(t.action=="removeText"||t.action=="removeLines"){this.$annotations.splice(n,r+1,null)}else{var s=new Array(r+1)
s.unshift(n,1)
this.$annotations.splice.apply(this.$annotations,s)}}
this.update=function(e){var t=this.session
var i=e.firstRow
var r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1)
var s=t.getNextFoldLine(i)
var o=s?s.start.row:Infinity
var a=this.$showFoldWidgets&&t.foldWidgets
var l=t.$breakpoints
var c=t.$decorations
var h=t.$firstLineNumber
var u=0
var d=t.gutterRenderer||this.$renderer
var f=null
var g=-1
var m=i
while(true){if(m>o){m=s.end.row+1
s=t.getNextFoldLine(m,s)
o=s?s.start.row:Infinity}if(m>r){while(this.$cells.length>g+1){f=this.$cells.pop()
this.element.removeChild(f.element)}break}f=this.$cells[++g]
if(!f){f={element:null,textNode:null,foldWidget:null}
f.element=n.createElement("div")
f.textNode=document.createTextNode("")
f.element.appendChild(f.textNode)
this.element.appendChild(f.element)
this.$cells[g]=f}var p="ace_gutter-cell "
if(l[m])p+=l[m]
if(c[m])p+=c[m]
if(this.$annotations[m])p+=this.$annotations[m].className
if(f.element.className!=p)f.element.className=p
var v=t.getRowLength(m)*e.lineHeight+"px"
if(v!=f.element.style.height)f.element.style.height=v
if(a){var A=a[m]
if(A==null)A=a[m]=t.getFoldWidget(m)}if(A){if(!f.foldWidget){f.foldWidget=n.createElement("span")
f.element.appendChild(f.foldWidget)}var p="ace_fold-widget ace_"+A
if(A=="start"&&m==o&&m<s.end.row)p+=" ace_closed"
else p+=" ace_open"
if(f.foldWidget.className!=p)f.foldWidget.className=p
var v=e.lineHeight+"px"
if(f.foldWidget.style.height!=v)f.foldWidget.style.height=v}else{if(f.foldWidget){f.element.removeChild(f.foldWidget)
f.foldWidget=null}}var w=u=d?d.getText(t,m):m+h
if(w!=f.textNode.data)f.textNode.data=w
m++}this.element.style.height=e.minHeight+"px"
if(this.$fixedWidth||t.$useWrapMode)u=t.getLength()+h
var C=d?d.getWidth(t,u,e):u.toString().length*e.characterWidth
var F=this.$padding||this.$computePadding()
C+=F.left+F.right
if(C!==this.gutterWidth&&!isNaN(C)){this.gutterWidth=C
this.element.style.width=Math.ceil(this.gutterWidth)+"px"
this._emit("changeGutterWidth",C)}}
this.$fixedWidth=false
this.$showLineNumbers=true
this.$renderer=""
this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}}
this.getShowLineNumbers=function(){return this.$showLineNumbers}
this.$showFoldWidgets=true
this.setShowFoldWidgets=function(e){if(e)n.addCssClass(this.element,"ace_folding-enabled")
else n.removeCssClass(this.element,"ace_folding-enabled")
this.$showFoldWidgets=e
this.$padding=null}
this.getShowFoldWidgets=function(){return this.$showFoldWidgets}
this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0}
var e=n.computedStyle(this.element.firstChild)
this.$padding={}
this.$padding.left=parseInt(e.paddingLeft)+1||0
this.$padding.right=parseInt(e.paddingRight)||0
return this.$padding}
this.getRegion=function(e){var t=this.$padding||this.$computePadding()
var i=this.element.getBoundingClientRect()
if(e.x<t.left+i.left)return"markers"
if(this.$showFoldWidgets&&e.x>i.right-t.right)return"foldWidgets"}}).call(a.prototype)
t.Gutter=a})
ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,i){"use strict"
var n=e("../range").Range
var r=e("../lib/dom")
var s=function(e){this.element=r.createElement("div")
this.element.className="ace_layer ace_marker-layer"
e.appendChild(this.element)};(function(){this.$padding=0
this.setPadding=function(e){this.$padding=e}
this.setSession=function(e){this.session=e}
this.setMarkers=function(e){this.markers=e}
this.update=function(e){var e=e||this.config
if(!e)return
this.config=e
var t=[]
for(var i in this.markers){var n=this.markers[i]
if(!n.range){n.update(t,this,this.session,e)
continue}var s=n.range.clipRows(e.firstRow,e.lastRow)
if(s.isEmpty())continue
s=s.toScreenRange(this.session)
if(n.renderer){var o=this.$getTop(s.start.row,e)
var a=this.$padding+s.start.column*e.characterWidth
n.renderer(t,s,a,o,e)}else if(n.type=="fullLine"){this.drawFullLineMarker(t,s,n.clazz,e)}else if(n.type=="screenLine"){this.drawScreenLineMarker(t,s,n.clazz,e)}else if(s.isMultiLine()){if(n.type=="text")this.drawTextMarker(t,s,n.clazz,e)
else this.drawMultiLineMarker(t,s,n.clazz,e)}else{this.drawSingleLineMarker(t,s,n.clazz+" ace_start",e)}}this.element=r.setInnerHtml(this.element,t.join(""))}
this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight}
this.drawTextMarker=function(e,t,i,r,s){var o=t.start.row
var a=new n(o,t.start.column,o,this.session.getScreenLastRowColumn(o))
this.drawSingleLineMarker(e,a,i+" ace_start",r,1,s)
o=t.end.row
a=new n(o,0,o,t.end.column)
this.drawSingleLineMarker(e,a,i,r,0,s)
for(o=t.start.row+1;o<t.end.row;o++){a.start.row=o
a.end.row=o
a.end.column=this.session.getScreenLastRowColumn(o)
this.drawSingleLineMarker(e,a,i,r,1,s)}}
this.drawMultiLineMarker=function(e,t,i,n,r){var s=this.$padding
var o=n.lineHeight
var a=this.$getTop(t.start.row,n)
var l=s+t.start.column*n.characterWidth
r=r||""
e.push("<div class='",i," ace_start' style='","height:",o,"px;","right:0;","top:",a,"px;","left:",l,"px;",r,"'></div>")
a=this.$getTop(t.end.row,n)
var c=t.end.column*n.characterWidth
e.push("<div class='",i,"' style='","height:",o,"px;","width:",c,"px;","top:",a,"px;","left:",s,"px;",r,"'></div>")
o=(t.end.row-t.start.row-1)*n.lineHeight
if(o<0)return
a=this.$getTop(t.start.row+1,n)
e.push("<div class='",i,"' style='","height:",o,"px;","right:0;","top:",a,"px;","left:",s,"px;",r,"'></div>")}
this.drawSingleLineMarker=function(e,t,i,n,r,s){var o=n.lineHeight
var a=(t.end.column+(r||0)-t.start.column)*n.characterWidth
var l=this.$getTop(t.start.row,n)
var c=this.$padding+t.start.column*n.characterWidth
e.push("<div class='",i,"' style='","height:",o,"px;","width:",a,"px;","top:",l,"px;","left:",c,"px;",s||"","'></div>")}
this.drawFullLineMarker=function(e,t,i,n,r){var s=this.$getTop(t.start.row,n)
var o=n.lineHeight
if(t.start.row!=t.end.row)o+=this.$getTop(t.end.row,n)-s
e.push("<div class='",i,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",r||"","'></div>")}
this.drawScreenLineMarker=function(e,t,i,n,r){var s=this.$getTop(t.start.row,n)
var o=n.lineHeight
e.push("<div class='",i,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",r||"","'></div>")}}).call(s.prototype)
t.Marker=s})
ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("../lib/dom")
var s=e("../lib/lang")
var o=e("../lib/useragent")
var a=e("../lib/event_emitter").EventEmitter
var l=function(e){this.element=r.createElement("div")
this.element.className="ace_layer ace_text-layer"
e.appendChild(this.element)
this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){n.implement(this,a)
this.EOF_CHAR="¶"
this.EOL_CHAR_LF="¬"
this.EOL_CHAR_CRLF="¤"
this.EOL_CHAR=this.EOL_CHAR_LF
this.TAB_CHAR="→"
this.SPACE_CHAR="·"
this.$padding=0
this.$updateEolChar=function(){var e=this.session.doc.getNewLineCharacter()=="\n"?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF
if(this.EOL_CHAR!=e){this.EOL_CHAR=e
return true}}
this.setPadding=function(e){this.$padding=e
this.element.style.padding="0 "+e+"px"}
this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0}
this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0}
this.$setFontMetrics=function(e){this.$fontMetrics=e
this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this))
this.$pollSizeChanges()}
this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()}
this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()}
this.setSession=function(e){this.session=e
this.$computeTabString()}
this.showInvisibles=false
this.setShowInvisibles=function(e){if(this.showInvisibles==e)return false
this.showInvisibles=e
this.$computeTabString()
return true}
this.displayIndentGuides=true
this.setDisplayIndentGuides=function(e){if(this.displayIndentGuides==e)return false
this.displayIndentGuides=e
this.$computeTabString()
return true}
this.$tabStrings=[]
this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize()
this.tabSize=e
var t=this.$tabStrings=[0]
for(var i=1;i<e+1;i++){if(this.showInvisibles){t.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+s.stringRepeat(" ",i-1)+"</span>")}else{t.push(s.stringRepeat(" ",i))}}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/
var n="ace_indent-guide"
var r=""
var o=""
if(this.showInvisibles){n+=" ace_invisible"
r=" ace_invisible_space"
o=" ace_invisible_tab"
var a=s.stringRepeat(this.SPACE_CHAR,this.tabSize)
var l=this.TAB_CHAR+s.stringRepeat(" ",this.tabSize-1)}else{var a=s.stringRepeat(" ",this.tabSize)
var l=a}this.$tabStrings[" "]="<span class='"+n+r+"'>"+a+"</span>"
this.$tabStrings["	"]="<span class='"+n+o+"'>"+l+"</span>"}}
this.updateLines=function(e,t,i){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow){this.scrollLines(e)}this.config=e
var n=Math.max(t,e.firstRow)
var s=Math.min(i,e.lastRow)
var o=this.element.childNodes
var a=0
for(var l=e.firstRow;l<n;l++){var c=this.session.getFoldLine(l)
if(c){if(c.containsRow(n)){n=c.start.row
break}else{l=c.end.row}}a++}var l=n
var c=this.session.getNextFoldLine(l)
var h=c?c.start.row:Infinity
while(true){if(l>h){l=c.end.row+1
c=this.session.getNextFoldLine(l,c)
h=c?c.start.row:Infinity}if(l>s)break
var u=o[a++]
if(u){var d=[]
this.$renderLine(d,l,!this.$useLineGroups(),l==h?c:false)
u.style.height=e.lineHeight*this.session.getRowLength(l)+"px"
r.setInnerHtml(u,d.join(""))}l++}}
this.scrollLines=function(e){var t=this.config
this.config=e
if(!t||t.lastRow<e.firstRow)return this.update(e)
if(e.lastRow<t.firstRow)return this.update(e)
var i=this.element
if(t.firstRow<e.firstRow)for(var n=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);n>0;n--)i.removeChild(i.firstChild)
if(t.lastRow>e.lastRow)for(var n=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);n>0;n--)i.removeChild(i.lastChild)
if(e.firstRow<t.firstRow){var r=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)
if(i.firstChild)i.insertBefore(r,i.firstChild)
else i.appendChild(r)}if(e.lastRow>t.lastRow){var r=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow)
i.appendChild(r)}}
this.$renderLinesFragment=function(e,t,i){var n=this.element.ownerDocument.createDocumentFragment()
var s=t
var o=this.session.getNextFoldLine(s)
var a=o?o.start.row:Infinity
while(true){if(s>a){s=o.end.row+1
o=this.session.getNextFoldLine(s,o)
a=o?o.start.row:Infinity}if(s>i)break
var l=r.createElement("div")
var c=[]
this.$renderLine(c,s,false,s==a?o:false)
l.innerHTML=c.join("")
if(this.$useLineGroups()){l.className="ace_line_group"
n.appendChild(l)
l.style.height=e.lineHeight*this.session.getRowLength(s)+"px"}else{while(l.firstChild)n.appendChild(l.firstChild)}s++}return n}
this.update=function(e){this.config=e
var t=[]
var i=e.firstRow,n=e.lastRow
var s=i
var o=this.session.getNextFoldLine(s)
var a=o?o.start.row:Infinity
while(true){if(s>a){s=o.end.row+1
o=this.session.getNextFoldLine(s,o)
a=o?o.start.row:Infinity}if(s>n)break
if(this.$useLineGroups())t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(s),"px'>")
this.$renderLine(t,s,false,s==a?o:false)
if(this.$useLineGroups())t.push("</div>")
s++}this.element=r.setInnerHtml(this.element,t.join(""))}
this.$textToken={text:true,rparen:true,lparen:true}
this.$renderToken=function(e,t,i,n){var r=this
var o=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g
var a=function(e,i,n,o,a){if(i){return r.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+s.stringRepeat(r.SPACE_CHAR,e.length)+"</span>":s.stringRepeat(" ",e.length)}else if(e=="&"){return"&#38;"}else if(e=="<"){return"&#60;"}else if(e=="	"){var l=r.session.getScreenTabSize(t+o)
t+=l-1
return r.$tabStrings[l]}else if(e=="　"){var c=r.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk"
var h=r.showInvisibles?r.SPACE_CHAR:""
t+=1
return"<span class='"+c+"' style='width:"+r.config.characterWidth*2+"px'>"+h+"</span>"}else if(n){return"<span class='ace_invisible ace_invisible_space ace_invalid'>"+r.SPACE_CHAR+"</span>"}else{t+=1
return"<span class='ace_cjk' style='width:"+r.config.characterWidth*2+"px'>"+e+"</span>"}}
var l=n.replace(o,a)
if(!this.$textToken[i.type]){var c="ace_"+i.type.replace(/\./g," ace_")
var h=""
if(i.type=="fold")h=" style='width:"+i.value.length*this.config.characterWidth+"px;' "
e.push("<span class='",c,"'",h,">",l,"</span>")}else{e.push(l)}return t+n.length}
this.renderIndentGuide=function(e,t,i){var n=t.search(this.$indentGuideRe)
if(n<=0||n>=i)return t
if(t[0]==" "){n-=n%this.tabSize
e.push(s.stringRepeat(this.$tabStrings[" "],n/this.tabSize))
return t.substr(n)}else if(t[0]=="	"){e.push(s.stringRepeat(this.$tabStrings["	"],n))
return t.substr(n)}return t}
this.$renderWrappedLine=function(e,t,i,n){var r=0
var s=0
var o=i[0]
var a=0
for(var l=0;l<t.length;l++){var c=t[l]
var h=c.value
if(l==0&&this.displayIndentGuides){r=h.length
h=this.renderIndentGuide(e,h,o)
if(!h)continue
r-=h.length}if(r+h.length<o){a=this.$renderToken(e,a,c,h)
r+=h.length}else{while(r+h.length>=o){a=this.$renderToken(e,a,c,h.substring(0,o-r))
h=h.substring(o-r)
r=o
if(!n){e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>")}s++
a=0
o=i[s]||Number.MAX_VALUE}if(h.length!=0){r+=h.length
a=this.$renderToken(e,a,c,h)}}}}
this.$renderSimpleLine=function(e,t){var i=0
var n=t[0]
var r=n.value
if(this.displayIndentGuides)r=this.renderIndentGuide(e,r)
if(r)i=this.$renderToken(e,i,n,r)
for(var s=1;s<t.length;s++){n=t[s]
r=n.value
i=this.$renderToken(e,i,n,r)}}
this.$renderLine=function(e,t,i,n){if(!n&&n!=false)n=this.session.getFoldLine(t)
if(n)var r=this.$getFoldLineTokens(t,n)
else var r=this.session.getTokens(t)
if(!i){e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>")}if(r.length){var s=this.session.getRowSplitData(t)
if(s&&s.length)this.$renderWrappedLine(e,r,s,i)
else this.$renderSimpleLine(e,r)}if(this.showInvisibles){if(n)t=n.end.row
e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")}if(!i)e.push("</div>")}
this.$getFoldLineTokens=function(e,t){var i=this.session
var n=[]
function r(e,t,i){var r=0,s=0
while(s+e[r].value.length<t){s+=e[r].value.length
r++
if(r==e.length)return}if(s!=t){var o=e[r].value.substring(t-s)
if(o.length>i-t)o=o.substring(0,i-t)
n.push({type:e[r].type,value:o})
s=t+o.length
r+=1}while(s<i&&r<e.length){var o=e[r].value
if(o.length+s>i){n.push({type:e[r].type,value:o.substring(0,i-s)})}else n.push(e[r])
s+=o.length
r+=1}}var s=i.getTokens(e)
t.walk(function(e,t,o,a,l){if(e!=null){n.push({type:"fold",value:e})}else{if(l)s=i.getTokens(t)
if(s.length)r(s,a,o)}},t.end.row,this.session.getLine(t.end.row).length)
return n}
this.$useLineGroups=function(){return this.session.getUseWrapMode()}
this.destroy=function(){clearInterval(this.$pollSizeChangesTimer)
if(this.$measureNode)this.$measureNode.parentNode.removeChild(this.$measureNode)
delete this.$measureNode}}).call(l.prototype)
t.Text=l})
ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict"
var n=e("../lib/dom")
var r
var s=function(e){this.element=n.createElement("div")
this.element.className="ace_layer ace_cursor-layer"
e.appendChild(this.element)
if(r===undefined)r="opacity"in this.element
this.isVisible=false
this.isBlinking=true
this.blinkInterval=1e3
this.smoothBlinking=false
this.cursors=[]
this.cursor=this.addCursor()
n.addCssClass(this.element,"ace_hidden-cursors")
this.$updateCursors=this.$updateVisibility.bind(this)};(function(){this.$updateVisibility=function(e){var t=this.cursors
for(var i=t.length;i--;)t[i].style.visibility=e?"":"hidden"}
this.$updateOpacity=function(e){var t=this.cursors
for(var i=t.length;i--;)t[i].style.opacity=e?"":"0"}
this.$padding=0
this.setPadding=function(e){this.$padding=e}
this.setSession=function(e){this.session=e}
this.setBlinking=function(e){if(e!=this.isBlinking){this.isBlinking=e
this.restartTimer()}}
this.setBlinkInterval=function(e){if(e!=this.blinkInterval){this.blinkInterval=e
this.restartTimer()}}
this.setSmoothBlinking=function(e){if(e!=this.smoothBlinking&&!r){this.smoothBlinking=e
n.setCssClass(this.element,"ace_smooth-blinking",e)
this.$updateCursors(true)
this.$updateCursors=(e?this.$updateOpacity:this.$updateVisibility).bind(this)
this.restartTimer()}}
this.addCursor=function(){var e=n.createElement("div")
e.className="ace_cursor"
this.element.appendChild(e)
this.cursors.push(e)
return e}
this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop()
e.parentNode.removeChild(e)
return e}}
this.hideCursor=function(){this.isVisible=false
n.addCssClass(this.element,"ace_hidden-cursors")
this.restartTimer()}
this.showCursor=function(){this.isVisible=true
n.removeCssClass(this.element,"ace_hidden-cursors")
this.restartTimer()}
this.restartTimer=function(){var e=this.$updateCursors
clearInterval(this.intervalId)
clearTimeout(this.timeoutId)
if(this.smoothBlinking){n.removeCssClass(this.element,"ace_smooth-blinking")}e(true)
if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return
if(this.smoothBlinking){setTimeout(function(){n.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))}var t=function(){this.timeoutId=setTimeout(function(){e(false)},.6*this.blinkInterval)}.bind(this)
this.intervalId=setInterval(function(){e(true)
t()},this.blinkInterval)
t()}
this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0}
if(!e)e=this.session.selection.getCursor()
var i=this.session.documentToScreenPosition(e)
var n=this.$padding+i.column*this.config.characterWidth
var r=(i.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight
return{left:n,top:r}}
this.update=function(e){this.config=e
var t=this.session.$selectionMarkers
var i=0,n=0
if(t===undefined||t.length===0){t=[{cursor:null}]}for(var i=0,r=t.length;i<r;i++){var s=this.getPixelPosition(t[i].cursor,true)
if((s.top>e.height+e.offset||s.top<0)&&i>1){continue}var o=(this.cursors[n++]||this.addCursor()).style
o.left=s.left+"px"
o.top=s.top+"px"
o.width=e.characterWidth+"px"
o.height=e.lineHeight+"px"}while(this.cursors.length>n)this.removeCursor()
var a=this.session.getOverwrite()
this.$setOverwrite(a)
this.$pixelPos=s
this.restartTimer()}
this.$setOverwrite=function(e){if(e!=this.overwrite){this.overwrite=e
if(e)n.addCssClass(this.element,"ace_overwrite-cursors")
else n.removeCssClass(this.element,"ace_overwrite-cursors")}}
this.destroy=function(){clearInterval(this.intervalId)
clearTimeout(this.timeoutId)}}).call(s.prototype)
t.Cursor=s})
ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/dom")
var s=e("./lib/event")
var o=e("./lib/event_emitter").EventEmitter
var a=function(e){this.element=r.createElement("div")
this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix
this.inner=r.createElement("div")
this.inner.className="ace_scrollbar-inner"
this.element.appendChild(this.inner)
e.appendChild(this.element)
this.setVisible(false)
this.skipEvent=false
s.addListener(this.element,"scroll",this.onScroll.bind(this))
s.addListener(this.element,"mousedown",s.preventDefault)};(function(){n.implement(this,o)
this.setVisible=function(e){this.element.style.display=e?"":"none"
this.isVisible=e}}).call(a.prototype)
var l=function(e,t){a.call(this,e)
this.scrollTop=0
t.$scrollbarWidth=this.width=r.scrollbarWidth(e.ownerDocument)
this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"}
n.inherits(l,a);(function(){this.classSuffix="-v"
this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop
this._emit("scroll",{data:this.scrollTop})}this.skipEvent=false}
this.getWidth=function(){return this.isVisible?this.width:0}
this.setHeight=function(e){this.element.style.height=e+"px"}
this.setInnerHeight=function(e){this.inner.style.height=e+"px"}
this.setScrollHeight=function(e){this.inner.style.height=e+"px"}
this.setScrollTop=function(e){if(this.scrollTop!=e){this.skipEvent=true
this.scrollTop=this.element.scrollTop=e}}}).call(l.prototype)
var c=function(e,t){a.call(this,e)
this.scrollLeft=0
this.height=t.$scrollbarWidth
this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"}
n.inherits(c,a);(function(){this.classSuffix="-h"
this.onScroll=function(){if(!this.skipEvent){this.scrollLeft=this.element.scrollLeft
this._emit("scroll",{data:this.scrollLeft})}this.skipEvent=false}
this.getHeight=function(){return this.isVisible?this.height:0}
this.setWidth=function(e){this.element.style.width=e+"px"}
this.setInnerWidth=function(e){this.inner.style.width=e+"px"}
this.setScrollWidth=function(e){this.inner.style.width=e+"px"}
this.setScrollLeft=function(e){if(this.scrollLeft!=e){this.skipEvent=true
this.scrollLeft=this.element.scrollLeft=e}}}).call(c.prototype)
t.ScrollBar=l
t.ScrollBarV=l
t.ScrollBarH=c
t.VScrollBar=l
t.HScrollBar=c})
ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,i){"use strict"
var n=e("./lib/event")
var r=function(e,t){this.onRender=e
this.pending=false
this.changes=0
this.window=t||window};(function(){this.schedule=function(e){this.changes=this.changes|e
if(!this.pending&&this.changes){this.pending=true
var t=this
n.nextFrame(function(){t.pending=false
var e
while(e=t.changes){t.changes=0
t.onRender(e)}},this.window)}}}).call(r.prototype)
t.RenderLoop=r})
ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,i){var n=e("../lib/oop")
var r=e("../lib/dom")
var s=e("../lib/lang")
var o=e("../lib/useragent")
var a=e("../lib/event_emitter").EventEmitter
var l=0
var c=t.FontMetrics=function(e,t){this.el=r.createElement("div")
this.$setMeasureNodeStyles(this.el.style,true)
this.$main=r.createElement("div")
this.$setMeasureNodeStyles(this.$main.style)
this.$measureNode=r.createElement("div")
this.$setMeasureNodeStyles(this.$measureNode.style)
this.el.appendChild(this.$main)
this.el.appendChild(this.$measureNode)
e.appendChild(this.el)
if(!l)this.$testFractionalRect()
this.$measureNode.innerHTML=s.stringRepeat("X",l)
this.$characterSize={width:0,height:0}
this.checkForSizeChanges()};(function(){n.implement(this,a)
this.$characterSize={width:0,height:0}
this.$testFractionalRect=function(){var e=r.createElement("div")
this.$setMeasureNodeStyles(e.style)
e.style.width="0.2px"
document.documentElement.appendChild(e)
var t=e.getBoundingClientRect().width
if(t>0&&t<1)l=1
else l=100
e.parentNode.removeChild(e)}
this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto"
e.left=e.top="-100px"
e.visibility="hidden"
e.position="fixed"
e.whiteSpace="pre"
if(o.isIE<8){e["font-family"]="inherit"}else{e.font="inherit"}e.overflow=t?"hidden":"visible"}
this.checkForSizeChanges=function(){var e=this.$measureSizes()
if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold"
var t=this.$measureSizes()
this.$measureNode.style.fontWeight=""
this.$characterSize=e
this.charSizes=Object.create(null)
this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height
this._emit("changeCharacterSize",{data:e})}}
this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer
var e=this
return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)}
this.setPolling=function(e){if(e){this.$pollSizeChanges()}else{if(this.$pollSizeChangesTimer)this.$pollSizeChangesTimer}}
this.$measureSizes=function(){if(l===1){var e=this.$measureNode.getBoundingClientRect()
var t={height:e.height,width:e.width}}else{var t={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/l}}if(t.width===0||t.height===0)return null
return t}
this.$measureCharWidth=function(e){this.$main.innerHTML=s.stringRepeat(e,l)
var t=this.$main.getBoundingClientRect()
return t.width/l}
this.getCharacterWidth=function(e){var t=this.charSizes[e]
if(t===undefined){this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width}return t}
this.destroy=function(){clearInterval(this.$pollSizeChangesTimer)
if(this.el&&this.el.parentNode)this.el.parentNode.removeChild(this.el)}}).call(c.prototype)})
ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/dom")
var s=e("./config")
var o=e("./lib/useragent")
var a=e("./layer/gutter").Gutter
var l=e("./layer/marker").Marker
var c=e("./layer/text").Text
var h=e("./layer/cursor").Cursor
var u=e("./scrollbar").HScrollBar
var d=e("./scrollbar").VScrollBar
var f=e("./renderloop").RenderLoop
var g=e("./layer/font_metrics").FontMetrics
var m=e("./lib/event_emitter").EventEmitter
var p='.ace_editor {position: relative;overflow: hidden;font-family: \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;font-size: 12px;line-height: normal;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: text;min-width: 100%;}.ace_dragging, .ace_dragging * {cursor: move !important;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: #f8f8f8;color: #111;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0px;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-moz-transition: opacity 0.18s;-webkit-transition: opacity 0.18s;-o-transition: opacity 0.18s;-ms-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;-moz-border-radius: 2px;-webkit-border-radius: 2px;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;display: block;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-moz-transition: opacity 0.4s ease 0.05s;-webkit-transition: opacity 0.4s ease 0.05s;-o-transition: opacity 0.4s ease 0.05s;-ms-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-moz-transition: opacity 0.05s ease 0.05s;-webkit-transition: opacity 0.05s ease 0.05s;-o-transition: opacity 0.05s ease 0.05s;-ms-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}'
r.importCssString(p,"ace_editor")
var v=function(e,t){var i=this
this.container=e||r.createElement("div")
this.$keepTextAreaAtCursor=!o.isOldIE
r.addCssClass(this.container,"ace_editor")
this.setTheme(t)
this.$gutter=r.createElement("div")
this.$gutter.className="ace_gutter"
this.container.appendChild(this.$gutter)
this.scroller=r.createElement("div")
this.scroller.className="ace_scroller"
this.container.appendChild(this.scroller)
this.content=r.createElement("div")
this.content.className="ace_content"
this.scroller.appendChild(this.content)
this.$gutterLayer=new a(this.$gutter)
this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this))
this.$markerBack=new l(this.content)
var n=this.$textLayer=new c(this.content)
this.canvas=n.element
this.$markerFront=new l(this.content)
this.$cursorLayer=new h(this.content)
this.$horizScroll=false
this.$vScroll=false
this.scrollBar=this.scrollBarV=new d(this.container,this)
this.scrollBarH=new u(this.container,this)
this.scrollBarV.addEventListener("scroll",function(e){if(!i.$scrollAnimation)i.session.setScrollTop(e.data-i.scrollMargin.top)})
this.scrollBarH.addEventListener("scroll",function(e){if(!i.$scrollAnimation)i.session.setScrollLeft(e.data-i.scrollMargin.left)})
this.scrollTop=0
this.scrollLeft=0
this.cursorPos={row:0,column:0}
this.$fontMetrics=new g(this.container,500)
this.$textLayer.$setFontMetrics(this.$fontMetrics)
this.$textLayer.addEventListener("changeCharacterSize",function(e){i.updateCharacterSize()
i.onResize(true,i.gutterWidth,i.$size.width,i.$size.height)
i._signal("changeCharacterSize",e)})
this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:true}
this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1}
this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0}
this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView)
this.$loop.schedule(this.CHANGE_FULL)
this.updateCharacterSize()
this.setPadding(4)
s.resetOptions(this)
s._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1
this.CHANGE_MARKER=2
this.CHANGE_GUTTER=4
this.CHANGE_SCROLL=8
this.CHANGE_LINES=16
this.CHANGE_TEXT=32
this.CHANGE_SIZE=64
this.CHANGE_MARKER_BACK=128
this.CHANGE_MARKER_FRONT=256
this.CHANGE_FULL=512
this.CHANGE_H_SCROLL=1024
n.implement(this,m)
this.updateCharacterSize=function(){if(this.$textLayer.allowBoldFonts!=this.$allowBoldFonts){this.$allowBoldFonts=this.$textLayer.allowBoldFonts
this.setStyle("ace_nobold",!this.$allowBoldFonts)}this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth()
this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight()
this.$updatePrintMargin()}
this.setSession=function(e){if(this.session)this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode)
this.session=e
if(!e)return
if(this.scrollMargin.top&&e.getScrollTop()<=0)e.setScrollTop(-this.scrollMargin.top)
this.$cursorLayer.setSession(e)
this.$markerBack.setSession(e)
this.$markerFront.setSession(e)
this.$gutterLayer.setSession(e)
this.$textLayer.setSession(e)
this.$loop.schedule(this.CHANGE_FULL)
this.session.$setFontMetrics(this.$fontMetrics)
this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this)
this.onChangeNewLineMode()
this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)}
this.updateLines=function(e,t){if(t===undefined)t=Infinity
if(!this.$changedLines){this.$changedLines={firstRow:e,lastRow:t}}else{if(this.$changedLines.firstRow>e)this.$changedLines.firstRow=e
if(this.$changedLines.lastRow<t)this.$changedLines.lastRow=t}if(this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow)return
this.$loop.schedule(this.CHANGE_LINES)}
this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT)
this.$textLayer.$updateEolChar()}
this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER)
this.$textLayer.onChangeTabSize()}
this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)}
this.updateFull=function(e){if(e)this.$renderChanges(this.CHANGE_FULL,true)
else this.$loop.schedule(this.CHANGE_FULL)}
this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()}
this.$changes=0
this.$updateSizeAsync=function(){if(this.$loop.pending)this.$size.$dirty=true
else this.onResize()}
this.onResize=function(e,t,i,n){if(this.resizing>2)return
else if(this.resizing>0)this.resizing++
else this.resizing=e?1:0
var r=this.container
if(!n)n=r.clientHeight||r.scrollHeight
if(!i)i=r.clientWidth||r.scrollWidth
var s=this.$updateCachedSize(e,t,i,n)
if(!this.$size.scrollerHeight||!i&&!n)return this.resizing=0
if(e)this.$gutterLayer.$padding=null
if(e)this.$renderChanges(s|this.$changes,true)
else this.$loop.schedule(s|this.$changes)
if(this.resizing)this.resizing=0}
this.$updateCachedSize=function(e,t,i,n){n-=this.$extraHeight||0
var r=0
var s=this.$size
var o={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth}
if(n&&(e||s.height!=n)){s.height=n
r|=this.CHANGE_SIZE
s.scrollerHeight=s.height
if(this.$horizScroll)s.scrollerHeight-=this.scrollBarH.getHeight()
this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px"
r=r|this.CHANGE_SCROLL}if(i&&(e||s.width!=i)){r|=this.CHANGE_SIZE
s.width=i
if(t==null)t=this.$showGutter?this.$gutter.offsetWidth:0
this.gutterWidth=t
this.scrollBarH.element.style.left=this.scroller.style.left=t+"px"
s.scrollerWidth=Math.max(0,i-t-this.scrollBarV.getWidth())
this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px"
this.scroller.style.bottom=this.scrollBarH.getHeight()+"px"
if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)r|=this.CHANGE_FULL}s.$dirty=!i||!n
if(r)this._signal("resize",o)
return r}
this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0
if(e!=this.gutterWidth)this.$changes|=this.$updateCachedSize(true,e,this.$size.width,this.$size.height)
if(this.session.getUseWrapMode()&&this.adjustWrapLimit()){this.$loop.schedule(this.CHANGE_FULL)}else if(this.$size.$dirty){this.$loop.schedule(this.CHANGE_FULL)}else{this.$computeLayerConfig()
this.$loop.schedule(this.CHANGE_MARKER)}}
this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2
var t=Math.floor(e/this.characterWidth)
return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)}
this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)}
this.getAnimatedScroll=function(){return this.$animatedScroll}
this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)}
this.getShowInvisibles=function(){return this.getOption("showInvisibles")}
this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")}
this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)}
this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)}
this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")}
this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)}
this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")}
this.getShowGutter=function(){return this.getOption("showGutter")}
this.setShowGutter=function(e){return this.setOption("showGutter",e)}
this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")}
this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)}
this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)}
this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")}
this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos
var t=this.layerConfig.lineHeight
if(this.session.getUseWrapMode()){var i=this.session.selection.getCursor()
i.column=0
e=this.$cursorLayer.getPixelPosition(i,true)
t*=this.session.getRowLength(i.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px"
this.$gutterLineHighlight.style.height=t+"px"}
this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return
if(!this.$printMarginEl){var e=r.createElement("div")
e.className="ace_layer ace_print-margin-layer"
this.$printMarginEl=r.createElement("div")
this.$printMarginEl.className="ace_print-margin"
e.appendChild(this.$printMarginEl)
this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style
t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px"
t.visibility=this.$showPrintMargin?"visible":"hidden"
if(this.session&&this.session.$wrap==-1)this.adjustWrapLimit()}
this.getContainerElement=function(){return this.container}
this.getMouseEventTarget=function(){return this.content}
this.getTextAreaContainer=function(){return this.container}
this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return
var e=this.layerConfig
var t=this.$cursorLayer.$pixelPos.top
var i=this.$cursorLayer.$pixelPos.left
t-=e.offset
var n=this.lineHeight
if(t<0||t>e.height-n)return
var r=this.characterWidth
if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"")
r*=this.session.$getStringScreenWidth(s)[0]+2
n+=2
t-=1}i-=this.scrollLeft
if(i>this.$size.scrollerWidth-r)i=this.$size.scrollerWidth-r
i-=this.scrollBar.width
this.textarea.style.height=n+"px"
this.textarea.style.width=r+"px"
this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-i-r)+"px"
this.textarea.style.bottom=Math.max(0,this.$size.height-t-n)+"px"}
this.getFirstVisibleRow=function(){return this.layerConfig.firstRow}
this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)}
this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight)
return this.layerConfig.firstRow-1+e}
this.getLastVisibleRow=function(){return this.layerConfig.lastRow}
this.$padding=null
this.setPadding=function(e){this.$padding=e
this.$textLayer.setPadding(e)
this.$cursorLayer.setPadding(e)
this.$markerFront.setPadding(e)
this.$markerBack.setPadding(e)
this.$loop.schedule(this.CHANGE_FULL)
this.$updatePrintMargin()}
this.setScrollMargin=function(e,t,i,n){var r=this.scrollMargin
r.top=e|0
r.bottom=t|0
r.right=n|0
r.left=i|0
r.v=r.top+r.bottom
r.h=r.left+r.right
if(r.top&&this.scrollTop<=0&&this.session)this.session.setScrollTop(-r.top)
this.updateFull()}
this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible}
this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)}
this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible}
this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)}
this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight
var t=this.$size.scrollerHeight
if(!this.$maxLines&&this.$scrollPastEnd){e-=(t-this.lineHeight)*this.$scrollPastEnd
if(this.scrollTop>e-t){e=this.scrollTop+t
this.scrollBarV.scrollTop=null}}this.scrollBarV.setScrollHeight(e+this.scrollMargin.v)
this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)}
this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h)
this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)}
this.$frozen=false
this.freeze=function(){this.$frozen=true}
this.unfreeze=function(){this.$frozen=false}
this.$renderChanges=function(e,t){if(this.$changes){e|=this.$changes
this.$changes=0}if(!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e
return}if(this.$size.$dirty){this.$changes|=e
return this.onResize(true)}if(!this.lineHeight){this.$textLayer.checkForSizeChanges()}this._signal("beforeRender")
var i=this.layerConfig
if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig()
i=this.layerConfig
this.$updateScrollBarV()
if(e&this.CHANGE_H_SCROLL)this.$updateScrollBarH()
this.$gutterLayer.element.style.marginTop=-i.offset+"px"
this.content.style.marginTop=-i.offset+"px"
this.content.style.width=i.width+2*this.$padding+"px"
this.content.style.height=i.minHeight+"px"}if(e&this.CHANGE_H_SCROLL){this.content.style.marginLeft=-this.scrollLeft+"px"
this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"}if(e&this.CHANGE_FULL){this.$textLayer.update(i)
if(this.$showGutter)this.$gutterLayer.update(i)
this.$markerBack.update(i)
this.$markerFront.update(i)
this.$cursorLayer.update(i)
this.$moveTextAreaToCursor()
this.$highlightGutterLine&&this.$updateGutterLineHighlight()
this._signal("afterRender")
return}if(e&this.CHANGE_SCROLL){if(e&this.CHANGE_TEXT||e&this.CHANGE_LINES)this.$textLayer.update(i)
else this.$textLayer.scrollLines(i)
if(this.$showGutter)this.$gutterLayer.update(i)
this.$markerBack.update(i)
this.$markerFront.update(i)
this.$cursorLayer.update(i)
this.$highlightGutterLine&&this.$updateGutterLineHighlight()
this.$moveTextAreaToCursor()
this._signal("afterRender")
return}if(e&this.CHANGE_TEXT){this.$textLayer.update(i)
if(this.$showGutter)this.$gutterLayer.update(i)}else if(e&this.CHANGE_LINES){if(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)this.$gutterLayer.update(i)}else if(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER){if(this.$showGutter)this.$gutterLayer.update(i)}if(e&this.CHANGE_CURSOR){this.$cursorLayer.update(i)
this.$moveTextAreaToCursor()
this.$highlightGutterLine&&this.$updateGutterLineHighlight()}if(e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)){this.$markerFront.update(i)}if(e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)){this.$markerBack.update(i)}this._signal("afterRender")}
this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight
var t=this.$maxLines*this.lineHeight
var i=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0)
var n=e>t
if(i!=this.desiredHeight||this.$size.height!=this.desiredHeight||n!=this.$vScroll){if(n!=this.$vScroll){this.$vScroll=n
this.scrollBarV.setVisible(n)}var r=this.container.clientWidth
this.container.style.height=i+"px"
this.$updateCachedSize(true,this.$gutterWidth,r,i)
this.desiredHeight=i}}
this.$computeLayerConfig=function(){if(this.$maxLines&&this.lineHeight>1)this.$autosize()
var e=this.session
var t=this.$size
var i=t.height<=2*this.lineHeight
var n=this.session.getScreenLength()
var r=n*this.lineHeight
var s=this.scrollTop%this.lineHeight
var o=t.scrollerHeight+this.lineHeight
var a=this.$getLongestLine()
var l=!i&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-a-2*this.$padding<0)
var c=this.$horizScroll!==l
if(c){this.$horizScroll=l
this.scrollBarH.setVisible(l)}if(!this.$maxLines&&this.$scrollPastEnd){r+=(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd}var h=!i&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-r<0)
var u=this.$vScroll!==h
if(u){this.$vScroll=h
this.scrollBarV.setVisible(h)}this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,r-t.scrollerHeight+this.scrollMargin.bottom)))
this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,a+2*this.$padding-t.scrollerWidth+this.scrollMargin.right)))
var d=Math.ceil(o/this.lineHeight)-1
var f=Math.max(0,Math.round((this.scrollTop-s)/this.lineHeight))
var g=f+d
var m,p
var v=this.lineHeight
f=e.screenToDocumentRow(f,0)
var A=e.getFoldLine(f)
if(A){f=A.start.row}m=e.documentToScreenRow(f,0)
p=e.getRowLength(f)*v
g=Math.min(e.screenToDocumentRow(g,0),e.getLength()-1)
o=t.scrollerHeight+e.getRowLength(g)*v+p
s=this.scrollTop-m*v
var w=0
if(this.layerConfig.width!=a)w=this.CHANGE_H_SCROLL
if(c||u){w=this.$updateCachedSize(true,this.gutterWidth,t.width,t.height)
this._signal("scrollbarVisibilityChanged")
if(u)a=this.$getLongestLine()}this.layerConfig={width:a,padding:this.$padding,firstRow:f,firstRowScreen:m,lastRow:g,lineHeight:v,characterWidth:this.characterWidth,minHeight:o,maxHeight:r,offset:s,gutterOffset:Math.max(0,Math.ceil((s+t.height-t.scrollerHeight)/v)),height:this.$size.scrollerHeight}
return w}
this.$updateLines=function(){var e=this.$changedLines.firstRow
var t=this.$changedLines.lastRow
this.$changedLines=null
var i=this.layerConfig
if(e>i.lastRow+1){return}if(t<i.firstRow){return}if(t===Infinity){if(this.$showGutter)this.$gutterLayer.update(i)
this.$textLayer.update(i)
return}this.$textLayer.updateLines(i,e,t)
return true}
this.$getLongestLine=function(){var e=this.session.getScreenWidth()
if(this.showInvisibles&&!this.session.$useWrapMode)e+=1
return Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))}
this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(true))
this.$loop.schedule(this.CHANGE_MARKER_FRONT)}
this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers())
this.$loop.schedule(this.CHANGE_MARKER_BACK)}
this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)}
this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)}
this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)}
this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e)
this.$loop.schedule(this.CHANGE_GUTTER)}
this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)}
this.hideCursor=function(){this.$cursorLayer.hideCursor()}
this.showCursor=function(){this.$cursorLayer.showCursor()}
this.scrollSelectionIntoView=function(e,t,i){this.scrollCursorIntoView(e,i)
this.scrollCursorIntoView(t,i)}
this.scrollCursorIntoView=function(e,t,i){if(this.$size.scrollerHeight===0)return
var n=this.$cursorLayer.getPixelPosition(e)
var r=n.left
var s=n.top
var o=i&&i.top||0
var a=i&&i.bottom||0
var l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop
if(l+o>s){if(t)s-=t*this.$size.scrollerHeight
if(s===0)s=-this.scrollMargin.top
this.session.setScrollTop(s)}else if(l+this.$size.scrollerHeight-a<s+this.lineHeight){if(t)s+=t*this.$size.scrollerHeight
this.session.setScrollTop(s+this.lineHeight-this.$size.scrollerHeight)}var c=this.scrollLeft
if(c>r){if(r<this.$padding+2*this.layerConfig.characterWidth)r=-this.scrollMargin.left
this.session.setScrollLeft(r)}else if(c+this.$size.scrollerWidth<r+this.characterWidth){this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth))}else if(c<=this.$padding&&r-c<this.characterWidth){this.session.setScrollLeft(0)}}
this.getScrollTop=function(){return this.session.getScrollTop()}
this.getScrollLeft=function(){return this.session.getScrollLeft()}
this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight}
this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)}
this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)}
this.alignCursor=function(e,t){if(typeof e=="number")e={row:e,column:0}
var i=this.$cursorLayer.getPixelPosition(e)
var n=this.$size.scrollerHeight-this.lineHeight
var r=i.top-n*(t||0)
this.session.setScrollTop(r)
return r}
this.STEPS=8
this.$calcSteps=function(e,t){var i=0
var n=this.STEPS
var r=[]
var s=function(e,t,i){return i*(Math.pow(e-1,3)+1)+t}
for(i=0;i<n;++i)r.push(s(i/this.STEPS,e,t-e))
return r}
this.scrollToLine=function(e,t,i,n){var r=this.$cursorLayer.getPixelPosition({row:e,column:0})
var s=r.top
if(t)s-=this.$size.scrollerHeight/2
var o=this.scrollTop
this.session.setScrollTop(s)
if(i!==false)this.animateScrolling(o,n)}
this.animateScrolling=function(e,t){var i=this.scrollTop
if(!this.$animatedScroll)return
var n=this
if(e==i)return
if(this.$scrollAnimation){var r=this.$scrollAnimation.steps
if(r.length){e=r[0]
if(e==i)return}}var s=n.$calcSteps(e,i)
this.$scrollAnimation={from:e,to:i,steps:s}
clearInterval(this.$timer)
n.session.setScrollTop(s.shift())
n.session.$scrollTop=i
this.$timer=setInterval(function(){if(s.length){n.session.setScrollTop(s.shift())
n.session.$scrollTop=i}else if(i!=null){n.session.$scrollTop=-1
n.session.setScrollTop(i)
i=null}else{n.$timer=clearInterval(n.$timer)
n.$scrollAnimation=null
t&&t()}},10)}
this.scrollToY=function(e){if(this.scrollTop!==e){this.$loop.schedule(this.CHANGE_SCROLL)
this.scrollTop=e}}
this.scrollToX=function(e){if(this.scrollLeft!==e)this.scrollLeft=e
this.$loop.schedule(this.CHANGE_H_SCROLL)}
this.scrollTo=function(e,t){this.session.setScrollTop(t)
this.session.setScrollLeft(t)}
this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t)
e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)}
this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return true
if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return true
if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return true
if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return true}
this.pixelToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect()
var n=(e+this.scrollLeft-i.left-this.$padding)/this.characterWidth
var r=Math.floor((t+this.scrollTop-i.top)/this.lineHeight)
var s=Math.round(n)
return{row:r,column:s,side:n-s>0?1:-1}}
this.screenToTextCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect()
var n=Math.round((e+this.scrollLeft-i.left-this.$padding)/this.characterWidth)
var r=(t+this.scrollTop-i.top)/this.lineHeight
return this.session.screenToDocumentPosition(r,Math.max(n,0))}
this.textToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect()
var n=this.session.documentToScreenPosition(e,t)
var r=this.$padding+Math.round(n.column*this.characterWidth)
var s=n.row*this.lineHeight
return{pageX:i.left+r-this.scrollLeft,pageY:i.top+s-this.scrollTop}}
this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")}
this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")}
this.showComposition=function(e){if(!this.$composition)this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}
this.$keepTextAreaAtCursor=true
r.addCssClass(this.textarea,"ace_composition")
this.textarea.style.cssText=""
this.$moveTextAreaToCursor()}
this.setCompositionText=function(e){this.$moveTextAreaToCursor()}
this.hideComposition=function(){if(!this.$composition)return
r.removeCssClass(this.textarea,"ace_composition")
this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor
this.textarea.style.cssText=this.$composition.cssText
this.$composition=null}
this.setTheme=function(e,t){var i=this
this.$themeId=e
i._dispatchEvent("themeChange",{theme:e})
if(!e||typeof e=="string"){var n=e||this.$options.theme.initialValue
s.loadModule(["theme",n],o)}else{o(e)}function o(n){if(i.$themeId!=e)return t&&t()
if(!n.cssClass)return
r.importCssString(n.cssText,n.cssClass,i.container.ownerDocument)
if(i.theme)r.removeCssClass(i.container,i.theme.cssClass)
var s="padding"in n?n.padding:"padding"in(i.theme||{})?4:i.$padding
if(i.$padding&&s!=i.$padding)i.setPadding(s)
i.$theme=n.cssClass
i.theme=n
r.addCssClass(i.container,n.cssClass)
r.setCssClass(i.container,"ace_dark",n.isDark)
if(i.$size){i.$size.width=0
i.$updateSizeAsync()}i._dispatchEvent("themeLoaded",{theme:n})
t&&t()}}
this.getTheme=function(){return this.$themeId}
this.setStyle=function(e,t){r.setCssClass(this.container,e,t!==false)}
this.unsetStyle=function(e){r.removeCssClass(this.container,e)}
this.setCursorStyle=function(e){if(this.content.style.cursor!=e)this.content.style.cursor=e}
this.setMouseCursor=function(e){this.content.style.cursor=e}
this.destroy=function(){this.$textLayer.destroy()
this.$cursorLayer.destroy()}}).call(v.prototype)
s.defineOptions(v.prototype,"renderer",{animatedScroll:{initialValue:false},showInvisibles:{set:function(e){if(this.$textLayer.setShowInvisibles(e))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:false},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:true},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){if(typeof e=="number")this.$printMarginColumn=e
this.$showPrintMargin=!!e
this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none"
this.$loop.schedule(this.CHANGE_FULL)
this.onGutterResize()},initialValue:true},fadeFoldWidgets:{set:function(e){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:false},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:true},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e)
this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:true},displayIndentGuides:{set:function(e){if(this.$textLayer.setDisplayIndentGuides(e))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:true},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight){this.$gutterLineHighlight=r.createElement("div")
this.$gutterLineHighlight.className="ace_gutter-active-line"
this.$gutter.appendChild(this.$gutterLineHighlight)
return}this.$gutterLineHighlight.style.display=e?"":"none"
if(this.$cursorLayer.$pixelPos)this.$updateGutterLineHighlight()},initialValue:false,value:true},hScrollBarAlwaysVisible:{set:function(e){if(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},vScrollBarAlwaysVisible:{set:function(e){if(!this.$vScrollBarAlwaysVisible||!this.$vScroll)this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},fontSize:{set:function(e){if(typeof e=="number")e=e+"px"
this.container.style.fontSize=e
this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e
this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0
if(this.$scrollPastEnd==e)return
this.$scrollPastEnd=e
this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:true},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e
this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:true}})
t.VirtualRenderer=v})
ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("../lib/net")
var s=e("../lib/event_emitter").EventEmitter
var o=e("../config")
var a=function(t,i,n,r){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this)
this.changeListener=this.changeListener.bind(this)
this.onMessage=this.onMessage.bind(this)
if(e.nameToUrl&&!e.toUrl)e.toUrl=e.nameToUrl
if(o.get("packaged")||!e.toUrl){r=r||o.moduleUrl(i,"worker")}else{var s=this.$normalizePath
r=r||s(e.toUrl("ace/worker/worker.js",null,"_"))
var a={}
t.forEach(function(t){a[t]=s(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(r)}catch(l){if(l instanceof window.DOMException){var c=this.$workerBlob(r)
var h=window.URL||window.webkitURL
var u=h.createObjectURL(c)
this.$worker=new Worker(u)
h.revokeObjectURL(u)}else{throw l}}this.$worker.postMessage({init:true,tlns:a,module:i,classname:n})
this.callbackId=1
this.callbacks={}
this.$worker.onmessage=this.onMessage};(function(){n.implement(this,s)
this.onMessage=function(e){var t=e.data
switch(t.type){case"log":window.console&&console.log&&console.log.apply(console,t.data)
break
case"event":this._signal(t.name,{data:t.data})
break
case"call":var i=this.callbacks[t.id]
if(i){i(t.data)
delete this.callbacks[t.id]}break}}
this.$normalizePath=function(e){return r.qualifyURL(e)}
this.terminate=function(){this._signal("terminate",{})
this.deltaQueue=null
this.$worker.terminate()
this.$worker=null
this.$doc.removeEventListener("change",this.changeListener)
this.$doc=null}
this.send=function(e,t){this.$worker.postMessage({command:e,args:t})}
this.call=function(e,t,i){if(i){var n=this.callbackId++
this.callbacks[n]=i
t.push(n)}this.send(e,t)}
this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(i){console.error(i.stack)}}
this.attachToDocument=function(e){if(this.$doc)this.terminate()
this.$doc=e
this.call("setValue",[e.getValue()])
e.on("change",this.changeListener)}
this.changeListener=function(e){if(!this.deltaQueue){this.deltaQueue=[e.data]
setTimeout(this.$sendDeltaQueue,0)}else this.deltaQueue.push(e.data)}
this.$sendDeltaQueue=function(){var e=this.deltaQueue
if(!e)return
this.deltaQueue=null
if(e.length>20&&e.length>this.$doc.getLength()>>1){this.call("setValue",[this.$doc.getValue()])}else this.emit("change",{data:e})}
this.$workerBlob=function(e){var t="importScripts('"+r.qualifyURL(e)+"');"
try{return new Blob([t],{type:"application/javascript"})}catch(i){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder
var s=new n
s.append(t)
return s.getBlob("application/javascript")}}}).call(a.prototype)
var l=function(e,t,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this)
this.changeListener=this.changeListener.bind(this)
this.callbackId=1
this.callbacks={}
this.messageBuffer=[]
var n=null
var r=false
var a=Object.create(s)
var l=this
this.$worker={}
this.$worker.terminate=function(){}
this.$worker.postMessage=function(e){l.messageBuffer.push(e)
if(n){if(r)setTimeout(c)
else c()}}
this.setEmitSync=function(e){r=e}
var c=function(){var e=l.messageBuffer.shift()
if(e.command)n[e.command].apply(n,e.args)
else if(e.event)a._signal(e.event,e.data)}
a.postMessage=function(e){l.onMessage({data:e})}
a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})}
a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})}
o.loadModule(["worker",t],function(e){n=new e[i](a)
while(l.messageBuffer.length)c()})}
l.prototype=a.prototype
t.UIWorkerClient=l
t.WorkerClient=a})
ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,i){"use strict"
var n=e("./range").Range
var r=e("./lib/event_emitter").EventEmitter
var s=e("./lib/oop")
var o=function(e,t,i,n,r,s){var o=this
this.length=t
this.session=e
this.doc=e.getDocument()
this.mainClass=r
this.othersClass=s
this.$onUpdate=this.onUpdate.bind(this)
this.doc.on("change",this.$onUpdate)
this.$others=n
this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})}
this.$pos=i
var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1}
this.$undoStackDepth=a.length
this.setup()
e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,r)
this.setup=function(){var e=this
var t=this.doc
var i=this.session
var r=this.$pos
this.pos=t.createAnchor(r.row,r.column)
this.markerId=i.addMarker(new n(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,false)
this.pos.on("change",function(t){i.removeMarker(e.markerId)
e.markerId=i.addMarker(new n(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,false)})
this.others=[]
this.$others.forEach(function(i){var n=t.createAnchor(i.row,i.column)
e.others.push(n)})
i.setUndoSelect(false)}
this.showOtherMarkers=function(){if(this.othersActive)return
var e=this.session
var t=this
this.othersActive=true
this.others.forEach(function(i){i.markerId=e.addMarker(new n(i.row,i.column,i.row,i.column+t.length),t.othersClass,null,false)
i.on("change",function(r){e.removeMarker(i.markerId)
i.markerId=e.addMarker(new n(r.value.row,r.value.column,r.value.row,r.value.column+t.length),t.othersClass,null,false)})})}
this.hideOtherMarkers=function(){if(!this.othersActive)return
this.othersActive=false
for(var e=0;e<this.others.length;e++){this.session.removeMarker(this.others[e].markerId)}}
this.onUpdate=function(e){var t=e.data
var i=t.range
if(i.start.row!==i.end.row)return
if(i.start.row!==this.pos.row)return
if(this.$updating)return
this.$updating=true
var r=t.action==="insertText"?i.end.column-i.start.column:i.start.column-i.end.column
if(i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1){var s=i.start.column-this.pos.column
this.length+=r
if(!this.session.$fromUndo){if(t.action==="insertText"){for(var o=this.others.length-1;o>=0;o--){var a=this.others[o]
var l={row:a.row,column:a.column+s}
if(a.row===i.start.row&&i.start.column<a.column)l.column+=r
this.doc.insert(l,t.text)}}else if(t.action==="removeText"){for(var o=this.others.length-1;o>=0;o--){var a=this.others[o]
var l={row:a.row,column:a.column+s}
if(a.row===i.start.row&&i.start.column<a.column)l.column+=r
this.doc.remove(new n(l.row,l.column,l.row,l.column-r))}}if(i.start.column===this.pos.column&&t.action==="insertText"){setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-r)
for(var e=0;e<this.others.length;e++){var t=this.others[e]
var n={row:t.row,column:t.column-r}
if(t.row===i.start.row&&i.start.column<t.column)n.column+=r
t.setPosition(n.row,n.column)}}.bind(this),0)}else if(i.start.column===this.pos.column&&t.action==="removeText"){setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e]
if(t.row===i.start.row&&i.start.column<t.column){t.setPosition(t.row,t.column-r)}}}.bind(this),0)}}this.pos._emit("change",{value:this.pos})
for(var o=0;o<this.others.length;o++){this.others[o]._emit("change",{value:this.others[o]})}}this.$updating=false}
this.onCursorChange=function(e){if(this.$updating)return
var t=this.session.selection.getCursor()
if(t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length){this.showOtherMarkers()
this._emit("cursorEnter",e)}else{this.hideOtherMarkers()
this._emit("cursorLeave",e)}}
this.detach=function(){this.session.removeMarker(this.markerId)
this.hideOtherMarkers()
this.doc.removeEventListener("change",this.$onUpdate)
this.session.selection.removeEventListener("changeCursor",this.$onCursorChange)
this.pos.detach()
for(var e=0;e<this.others.length;e++){this.others[e].detach()}this.session.setUndoSelect(true)}
this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.")
var e=this.session.getUndoManager()
var t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth
for(var i=0;i<t;i++){e.undo(true)}}}).call(o.prototype)
t.PlaceHolder=o})
ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,i){var n=e("../lib/event")
var r=e("../lib/useragent")
function s(e,t){return e.row==t.row&&e.column==t.column}function o(e){var t=e.domEvent
var i=t.altKey
var o=t.shiftKey
var a=t.ctrlKey
var l=e.getAccelKey()
var c=e.getButton()
if(a&&r.isMac)c=t.button
if(e.editor.inMultiSelectMode&&c==2){e.editor.textInput.onContextMenu(e.domEvent)
return}if(!a&&!i&&!l){if(c===0&&e.editor.inMultiSelectMode)e.editor.exitMultiSelectMode()
return}if(c!==0)return
var h=e.editor
var u=h.selection
var d=h.inMultiSelectMode
var f=e.getDocumentPosition()
var g=u.getCursor()
var m=e.inSelection()||u.isEmpty()&&s(f,g)
var p=e.x,v=e.y
var A=function(e){p=e.clientX
v=e.clientY}
var w=h.session
var C=h.renderer.pixelToScreenCoordinates(p,v)
var F=C
var b
if(h.$mouseHandler.$enableJumpToDef){if(a&&i||l&&i)b="add"
else if(i)b="block"}else{if(l&&!i){b="add"
if(!d&&o)return}else if(i){b="block"}}if(b&&r.isMac&&t.ctrlKey){h.$mouseHandler.cancelContextMenu()}if(b=="add"){if(!d&&m)return
if(!d){var E=u.toOrientedRange()
h.addSelectionMarker(E)}var x=u.rangeList.rangeAtPoint(f)
h.$blockScrolling++
h.inVirtualSelectionMode=true
if(o){x=null
E=u.ranges[0]
h.removeSelectionMarker(E)}h.once("mouseup",function(){var e=u.toOrientedRange()
if(x&&e.isEmpty()&&s(x.cursor,e.cursor))u.substractPoint(e.cursor)
else{if(o){u.substractPoint(E.cursor)}else if(E){h.removeSelectionMarker(E)
u.addRange(E)}u.addRange(e)}h.$blockScrolling--
h.inVirtualSelectionMode=false})}else if(b=="block"){e.stop()
h.inVirtualSelectionMode=true
var y
var k=[]
var B=function(){var e=h.renderer.pixelToScreenCoordinates(p,v)
var t=w.screenToDocumentPosition(e.row,e.column)
if(s(F,e)&&s(t,u.lead))return
F=e
h.selection.moveToPosition(t)
h.renderer.scrollCursorIntoView()
h.removeSelectionMarkers(k)
k=u.rectangularRangeBlock(F,C)
if(h.$mouseHandler.$clickSelection&&k.length==1&&k[0].isEmpty())k[0]=h.$mouseHandler.$clickSelection.clone()
k.forEach(h.addSelectionMarker,h)
h.updateSelectionMarkers()}
if(d&&!l){u.toSingleRange()}else if(!d&&l){y=u.toOrientedRange()
h.addSelectionMarker(y)}if(o)C=w.documentToScreenPosition(u.lead)
else u.moveToPosition(f)
F={row:-1,column:-1}
var S=function(e){clearInterval(L)
h.removeSelectionMarkers(k)
if(!k.length)k=[u.toOrientedRange()]
h.$blockScrolling++
if(y){h.removeSelectionMarker(y)
u.toSingleRange(y)}for(var t=0;t<k.length;t++)u.addRange(k[t])
h.inVirtualSelectionMode=false
h.$mouseHandler.$clickSelection=null
h.$blockScrolling--}
var D=B
n.capture(h.container,A,S)
var L=setInterval(function(){D()},20)
return e.preventDefault()}}t.onMouseDown=o})
ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,i){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:true},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:true},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:true},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:true},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:true},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:true},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:true},{name:"selectNextAfter",exec:function(e){e.selectMore(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:true},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:true},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},readonly:true}]
t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:true,isAvailable:function(e){return e&&e.inMultiSelectMode}}]
var n=e("../keyboard/hash_handler").HashHandler
t.keyboardHandler=new n(t.multiSelectCommands)})
ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,i){var n=e("./range_list").RangeList
var r=e("./range").Range
var s=e("./selection").Selection
var o=e("./mouse/multi_select_handler").onMouseDown
var a=e("./lib/event")
var l=e("./lib/lang")
var c=e("./commands/multi_select_commands")
t.commands=c.defaultCommands.concat(c.multiSelectCommands)
var h=e("./search").Search
var u=new h
function d(e,t,i){u.$options.wrap=true
u.$options.needle=t
u.$options.backwards=i==-1
return u.find(e)}var f=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(f.prototype);(function(){this.ranges=null
this.rangeList=null
this.addRange=function(e,t){if(!e)return
if(!this.inMultiSelectMode&&this.rangeCount===0){var i=this.toOrientedRange()
this.rangeList.add(i)
this.rangeList.add(e)
if(this.rangeList.ranges.length!=2){this.rangeList.removeAll()
return t||this.fromOrientedRange(e)}this.rangeList.removeAll()
this.rangeList.add(i)
this.$onAddRange(i)}if(!e.cursor)e.cursor=e.end
var n=this.rangeList.add(e)
this.$onAddRange(e)
if(n.length)this.$onRemoveRange(n)
if(this.rangeCount>1&&!this.inMultiSelectMode){this._signal("multiSelect")
this.inMultiSelectMode=true
this.session.$undoSelect=false
this.rangeList.attach(this.session)}return t||this.fromOrientedRange(e)}
this.toSingleRange=function(e){e=e||this.ranges[0]
var t=this.rangeList.removeAll()
if(t.length)this.$onRemoveRange(t)
e&&this.fromOrientedRange(e)}
this.substractPoint=function(e){var t=this.rangeList.substractPoint(e)
if(t){this.$onRemoveRange(t)
return t[0]}}
this.mergeOverlappingRanges=function(){var e=this.rangeList.merge()
if(e.length)this.$onRemoveRange(e)
else if(this.ranges[0])this.fromOrientedRange(this.ranges[0])}
this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length
this.ranges.unshift(e)
this._signal("addRange",{range:e})}
this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length
if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop()
e.push(t)
this.rangeCount=0}for(var i=e.length;i--;){var n=this.ranges.indexOf(e[i])
this.ranges.splice(n,1)}this._signal("removeRange",{ranges:e})
if(this.rangeCount===0&&this.inMultiSelectMode){this.inMultiSelectMode=false
this._signal("singleSelect")
this.session.$undoSelect=true
this.rangeList.detach(this.session)}t=t||this.ranges[0]
if(t&&!t.isEqual(this.getRange()))this.fromOrientedRange(t)}
this.$initRangeList=function(){if(this.rangeList)return
this.rangeList=new n
this.ranges=[]
this.rangeCount=0}
this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]}
this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges
var t=e[e.length-1]
var i=r.fromPoints(e[0].start,t.end)
this.toSingleRange()
this.setSelectionRange(i,t.cursor==t.start)}else{var i=this.getRange()
var n=this.isBackwards()
var s=i.start.row
var o=i.end.row
if(s==o){if(n)var a=i.end,l=i.start
else var a=i.start,l=i.end
this.addRange(r.fromPoints(l,l))
this.addRange(r.fromPoints(a,a))
return}var c=[]
var h=this.getLineRange(s,true)
h.start.column=i.start.column
c.push(h)
for(var u=s+1;u<o;u++)c.push(this.getLineRange(u,true))
h=this.getLineRange(o,true)
h.end.column=i.end.column
c.push(h)
c.forEach(this.addRange,this)}}
this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges
var t=e[e.length-1]
var i=r.fromPoints(e[0].start,t.end)
this.toSingleRange()
this.setSelectionRange(i,t.cursor==t.start)}else{var n=this.session.documentToScreenPosition(this.selectionLead)
var s=this.session.documentToScreenPosition(this.selectionAnchor)
var o=this.rectangularRangeBlock(n,s)
o.forEach(this.addRange,this)}}
this.rectangularRangeBlock=function(e,t,i){var n=[]
var s=e.column<t.column
if(s){var o=e.column
var a=t.column}else{var o=t.column
var a=e.column}var l=e.row<t.row
if(l){var c=e.row
var h=t.row}else{var c=t.row
var h=e.row}if(o<0)o=0
if(c<0)c=0
if(c==h)i=true
for(var u=c;u<=h;u++){var d=r.fromPoints(this.session.screenToDocumentPosition(u,o),this.session.screenToDocumentPosition(u,a))
if(d.isEmpty()){if(f&&m(d.end,f))break
var f=d.end}d.cursor=s?d.start:d.end
n.push(d)}if(l)n.reverse()
if(!i){var g=n.length-1
while(n[g].isEmpty()&&g>0)g--
if(g>0){var p=0
while(n[p].isEmpty())p++}for(var v=g;v>=p;v--){if(n[v].isEmpty())n.splice(v,1)}}return n}}).call(s.prototype)
var g=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor()
this.renderer.updateBackMarkers()}
this.addSelectionMarker=function(e){if(!e.cursor)e.cursor=e.end
var t=this.getSelectionStyle()
e.marker=this.session.addMarker(e,"ace_selection",t)
this.session.$selectionMarkers.push(e)
this.session.selectionMarkerCount=this.session.$selectionMarkers.length
return e}
this.removeSelectionMarker=function(e){if(!e.marker)return
this.session.removeMarker(e.marker)
var t=this.session.$selectionMarkers.indexOf(e)
if(t!=-1)this.session.$selectionMarkers.splice(t,1)
this.session.selectionMarkerCount=this.session.$selectionMarkers.length}
this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers
for(var i=e.length;i--;){var n=e[i]
if(!n.marker)continue
this.session.removeMarker(n.marker)
var r=t.indexOf(n)
if(r!=-1)t.splice(r,1)}this.session.selectionMarkerCount=t.length}
this.$onAddRange=function(e){this.addSelectionMarker(e.range)
this.renderer.updateCursor()
this.renderer.updateBackMarkers()}
this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges)
this.renderer.updateCursor()
this.renderer.updateBackMarkers()}
this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return
this.inMultiSelectMode=true
this.setStyle("ace_multiselect")
this.keyBinding.addKeyboardHandler(c.keyboardHandler)
this.commands.setDefaultHandler("exec",this.$onMultiSelectExec)
this.renderer.updateCursor()
this.renderer.updateBackMarkers()}
this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return
this.inMultiSelectMode=false
this.unsetStyle("ace_multiselect")
this.keyBinding.removeKeyboardHandler(c.keyboardHandler)
this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec)
this.renderer.updateCursor()
this.renderer.updateBackMarkers()
this._emit("changeSelection")}
this.$onMultiSelectExec=function(e){var t=e.command
var i=e.editor
if(!i.multiSelect)return
if(!t.multiSelectAction){var n=t.exec(i,e.args||{})
i.multiSelect.addRange(i.multiSelect.toOrientedRange())
i.multiSelect.mergeOverlappingRanges()}else if(t.multiSelectAction=="forEach"){n=i.forEachSelection(t,e.args)}else if(t.multiSelectAction=="forEachLine"){n=i.forEachSelection(t,e.args,true)}else if(t.multiSelectAction=="single"){i.exitMultiSelectMode()
n=t.exec(i,e.args||{})}else{n=t.multiSelectAction(i,e.args||{})}return n}
this.forEachSelection=function(e,t,i){if(this.inVirtualSelectionMode)return
var n=i&&i.keepOrder
var r=i==true||i&&i.$byLines
var o=this.session
var a=this.selection
var l=a.rangeList
var c=(n?a:l).ranges
var h
if(!c.length)return e.exec?e.exec(this,t||{}):e(this,t||{})
var u=a._eventRegistry
a._eventRegistry={}
var d=new s(o)
this.inVirtualSelectionMode=true
for(var f=c.length;f--;){if(r){while(f>0&&c[f].start.row==c[f-1].end.row)f--}d.fromOrientedRange(c[f])
d.index=f
this.selection=o.selection=d
var g=e.exec?e.exec(this,t||{}):e(this,t||{})
if(!h&&g!==undefined)h=g
d.toOrientedRange(c[f])}d.detach()
this.selection=o.selection=a
this.inVirtualSelectionMode=false
a._eventRegistry=u
a.mergeOverlappingRanges()
var m=this.renderer.$scrollAnimation
this.onCursorChange()
this.onSelectionChange()
if(m&&m.from==m.to)this.renderer.animateScrolling(m.from)
return h}
this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return
this.multiSelect.toSingleRange()}
this.getSelectedText=function(){var e=""
if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges
var i=[]
for(var n=0;n<t.length;n++){i.push(this.session.getTextRange(t[n]))}var r=this.session.getDocument().getNewLineCharacter()
e=i.join(r)
if(e.length==(i.length-1)*r.length)e=""}else if(!this.selection.isEmpty()){e=this.session.getTextRange(this.getSelectionRange())}return e}
this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var i=this.multiSelect.ranges[0]
if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return
var n=t==this.multiSelect.anchor?i.cursor==i.start?i.end:i.start:i.cursor
if(!m(n,t))this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}}
this.onPaste=function(e){if(this.$readOnly)return
var t={text:e}
this._signal("paste",t)
e=t.text
if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e)
var i=e.split(/\r\n|\r|\n/)
var n=this.selection.rangeList.ranges
if(i.length>n.length||i.length<2||!i[1])return this.commands.exec("insertstring",this,e)
for(var r=n.length;r--;){var s=n[r]
if(!s.isEmpty())this.session.remove(s)
this.session.insert(s.start,i[r])}}
this.findAll=function(e,t,i){t=t||{}
t.needle=e||t.needle
if(t.needle==undefined){var n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange()
t.needle=this.session.getTextRange(n)}this.$search.set(t)
var r=this.$search.findAll(this.session)
if(!r.length)return 0
this.$blockScrolling+=1
var s=this.multiSelect
if(!i)s.toSingleRange(r[0])
for(var o=r.length;o--;)s.addRange(r[o],true)
if(n&&s.rangeList.rangeAtPoint(n.start))s.addRange(n,true)
this.$blockScrolling-=1
return r.length}
this.selectMoreLines=function(e,t){var i=this.selection.toOrientedRange()
var n=i.cursor==i.end
var s=this.session.documentToScreenPosition(i.cursor)
if(this.selection.$desiredColumn)s.column=this.selection.$desiredColumn
var o=this.session.screenToDocumentPosition(s.row+e,s.column)
if(!i.isEmpty()){var a=this.session.documentToScreenPosition(n?i.end:i.start)
var l=this.session.screenToDocumentPosition(a.row+e,a.column)}else{var l=o}if(n){var c=r.fromPoints(o,l)
c.cursor=c.start}else{var c=r.fromPoints(l,o)
c.cursor=c.end}c.desiredColumn=s.column
if(!this.selection.inMultiSelectMode){this.selection.addRange(i)}else{if(t)var h=i.cursor}this.selection.addRange(c)
if(h)this.selection.substractPoint(h)}
this.transposeSelections=function(e){var t=this.session
var i=t.multiSelect
var n=i.ranges
for(var r=n.length;r--;){var s=n[r]
if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column)
s.start.row=o.start.row
s.start.column=o.start.column
s.end.row=o.end.row
s.end.column=o.end.column}}i.mergeOverlappingRanges()
var a=[]
for(var r=n.length;r--;){var s=n[r]
a.unshift(t.getTextRange(s))}if(e<0)a.unshift(a.pop())
else a.push(a.shift())
for(var r=n.length;r--;){var s=n[r]
var o=s.clone()
t.replace(s,a[r])
s.start.row=o.start.row
s.start.column=o.start.column}}
this.selectMore=function(e,t){var i=this.session
var n=i.multiSelect
var r=n.toOrientedRange()
if(r.isEmpty()){r=i.getWordRange(r.start.row,r.start.column)
r.cursor=e==-1?r.start:r.end
this.multiSelect.addRange(r)}var s=i.getTextRange(r)
var o=d(i,s,e)
if(o){o.cursor=e==-1?o.start:o.end
this.$blockScrolling+=1
this.session.unfold(o)
this.multiSelect.addRange(o)
this.$blockScrolling-=1
this.renderer.scrollCursorIntoView(null,.5)}if(t)this.multiSelect.substractPoint(r.cursor)}
this.alignCursors=function(){var e=this.session
var t=e.multiSelect
var i=t.ranges
var n=-1
var s=i.filter(function(e){if(e.cursor.row==n)return true
n=e.cursor.row})
if(!i.length||s.length==i.length-1){var o=this.selection.getRange()
var a=o.start.row,c=o.end.row
var h=a==c
if(h){var u=this.session.getLength()
var d
do{d=this.session.getLine(c)}while(/[=:]/.test(d)&&++c<u)
do{d=this.session.getLine(a)}while(/[=:]/.test(d)&&--a>0)
if(a<0)a=0
if(c>=u)c=u-1}var f=this.session.doc.removeLines(a,c)
f=this.$reAlignText(f,h)
this.session.doc.insert({row:a,column:0},f.join("\n")+"\n")
if(!h){o.start.column=0
o.end.column=f[f.length-1].length}this.selection.setRange(o)}else{s.forEach(function(e){t.substractPoint(e.cursor)})
var g=0
var m=Infinity
var p=i.map(function(t){var i=t.cursor
var n=e.getLine(i.row)
var r=n.substr(i.column).search(/\S/g)
if(r==-1)r=0
if(i.column>g)g=i.column
if(r<m)m=r
return r})
i.forEach(function(t,i){var n=t.cursor
var s=g-n.column
var o=p[i]-m
if(s>o)e.insert(n,l.stringRepeat(" ",s-o))
else e.remove(new r(n.row,n.column,n.row,n.column-s+o))
t.start.column=t.end.column=g
t.start.row=t.end.row=n.row
t.cursor=t.end})
t.fromOrientedRange(i[0])
this.renderer.updateCursor()
this.renderer.updateBackMarkers()}}
this.$reAlignText=function(e,t){var i=true,n=true
var r,s,o
return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/)
if(!t)return[e]
if(r==null){r=t[1].length
s=t[2].length
o=t[3].length
return t}if(r+s+o!=t[1].length+t[2].length+t[3].length)n=false
if(r!=t[1].length)i=false
if(r>t[1].length)r=t[1].length
if(s<t[2].length)s=t[2].length
if(o>t[3].length)o=t[3].length
return t}).map(t?c:i?n?h:c:u)
function a(e){return l.stringRepeat(" ",e)}function c(e){return!e[2]?e[0]:a(r)+e[2]+a(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 ")}function h(e){return!e[2]?e[0]:a(r+s-e[2].length)+e[2]+a(o," ")+e[4].replace(/^([=:])\s+/,"$1 ")}function u(e){return!e[2]?e[0]:a(r)+e[2]+a(o)+e[4].replace(/^([=:])\s+/,"$1 ")}}}).call(g.prototype)
function m(e,t){return e.row==t.row&&e.column==t.column}t.onSessionChange=function(e){var t=e.session
if(!t.multiSelect){t.$selectionMarkers=[]
t.selection.$initRangeList()
t.multiSelect=t.selection}this.multiSelect=t.multiSelect
var i=e.oldSession
if(i){i.multiSelect.off("addRange",this.$onAddRange)
i.multiSelect.off("removeRange",this.$onRemoveRange)
i.multiSelect.off("multiSelect",this.$onMultiSelect)
i.multiSelect.off("singleSelect",this.$onSingleSelect)
i.multiSelect.lead.off("change",this.$checkMultiselectChange)
i.multiSelect.anchor.off("change",this.$checkMultiselectChange)}t.multiSelect.on("addRange",this.$onAddRange)
t.multiSelect.on("removeRange",this.$onRemoveRange)
t.multiSelect.on("multiSelect",this.$onMultiSelect)
t.multiSelect.on("singleSelect",this.$onSingleSelect)
t.multiSelect.lead.on("change",this.$checkMultiselectChange)
t.multiSelect.anchor.on("change",this.$checkMultiselectChange)
if(this.inMultiSelectMode!=t.selection.inMultiSelectMode){if(t.selection.inMultiSelectMode)this.$onMultiSelect()
else this.$onSingleSelect()}}
function p(e){if(e.$multiselectOnSessionChange)return
e.$onAddRange=e.$onAddRange.bind(e)
e.$onRemoveRange=e.$onRemoveRange.bind(e)
e.$onMultiSelect=e.$onMultiSelect.bind(e)
e.$onSingleSelect=e.$onSingleSelect.bind(e)
e.$multiselectOnSessionChange=t.onSessionChange.bind(e)
e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e)
e.$multiselectOnSessionChange(e)
e.on("changeSession",e.$multiselectOnSessionChange)
e.on("mousedown",o)
e.commands.addCommands(c.defaultCommands)
v(e)}function v(e){var t=e.textInput.getElement()
var i=false
a.addListener(t,"keydown",function(t){if(t.keyCode==18&&!(t.ctrlKey||t.shiftKey||t.metaKey)){if(!i){e.renderer.setMouseCursor("crosshair")
i=true}}else if(i){n()}})
a.addListener(t,"keyup",n)
a.addListener(t,"blur",n)
function n(t){if(i){e.renderer.setMouseCursor("")
i=false}}}t.MultiSelect=p
e("./config").defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(e){p(this)
if(e){this.on("changeSession",this.$multiselectOnSessionChange)
this.on("mousedown",o)}else{this.off("changeSession",this.$multiselectOnSessionChange)
this.off("mousedown",o)}},value:true}})})
ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,i){"use strict"
var n=e("../../range").Range
var r=t.FoldMode=function(){};(function(){this.foldingStartMarker=null
this.foldingStopMarker=null
this.getFoldWidget=function(e,t,i){var n=e.getLine(i)
if(this.foldingStartMarker.test(n))return"start"
if(t=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(n))return"end"
return""}
this.getFoldWidgetRange=function(e,t,i){return null}
this.indentationBlock=function(e,t,i){var r=/\S/
var s=e.getLine(t)
var o=s.search(r)
if(o==-1)return
var a=i||s.length
var l=e.getLength()
var c=t
var h=t
while(++t<l){var u=e.getLine(t).search(r)
if(u==-1)continue
if(u<=o)break
h=t}if(h>c){var d=e.getLine(h).length
return new n(c,a,h,d)}}
this.openingBracketBlock=function(e,t,i,r,s){var o={row:i,column:r+1}
var a=e.$findClosingBracket(t,o,s)
if(!a)return
var l=e.foldWidgets[a.row]
if(l==null)l=e.getFoldWidget(a.row)
if(l=="start"&&a.row>o.row){a.row--
a.column=e.getLine(a.row).length}return n.fromPoints(o,a)}
this.closingBracketBlock=function(e,t,i,r,s){var o={row:i,column:r}
var a=e.$findOpeningBracket(t,o)
if(!a)return
a.column++
o.column--
return n.fromPoints(a,o)}}).call(r.prototype)})
ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,i){"use strict"
t.isDark=false
t.cssClass="ace-tm"
t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}'
var n=e("../lib/dom")
n.importCssString(t.cssText,t.cssClass)})
ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/dom")
var s=e("./range").Range
function o(e){this.session=e
this.session.widgetManager=this
this.session.getRowLength=this.getRowLength
this.session.$getWidgetScreenLength=this.$getWidgetScreenLength
this.updateOnChange=this.updateOnChange.bind(this)
this.renderWidgets=this.renderWidgets.bind(this)
this.measureWidgets=this.measureWidgets.bind(this)
this.session._changedWidgets=[]
this.detach=this.detach.bind(this)
this.session.on("change",this.updateOnChange)}(function(){this.getRowLength=function(e){var t
if(this.lineWidgets)t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0
else t=0
if(!this.$useWrapMode||!this.$wrapData[e]){return 1+t}else{return this.$wrapData[e].length+1+t}}
this.$getWidgetScreenLength=function(){var e=0
this.lineWidgets.forEach(function(t){if(t&&t.rowCount)e+=t.rowCount})
return e}
this.attach=function(e){if(e.widgetManager&&e.widgetManager!=this)e.widgetManager.detach()
if(this.editor==e)return
this.detach()
this.editor=e
this.editor.on("changeSession",this.detach)
e.widgetManager=this
e.renderer.on("beforeRender",this.measureWidgets)
e.renderer.on("afterRender",this.renderWidgets)}
this.detach=function(e){if(e&&e.session==this.session)return
var t=this.editor
if(!t)return
t.off("changeSession",this.detach)
this.editor=null
t.widgetManager=null
t.renderer.off("beforeRender",this.measureWidgets)
t.renderer.off("afterRender",this.renderWidgets)
var i=this.session.lineWidgets
i&&i.forEach(function(e){if(e&&e.el&&e.el.parentNode){e._inDocument=false
e.el.parentNode.removeChild(e.el)}})}
this.updateOnChange=function(e){var t=this.session.lineWidgets
if(!t)return
var i=e.data
var n=i.range
var r=n.start.row
var s=n.end.row-r
if(s===0){}else if(i.action=="removeText"||i.action=="removeLines"){var o=t.splice(r+1,s)
o.forEach(function(e){e&&this.removeLineWidget(e)},this)
this.$updateRows()}else{var a=new Array(s)
a.unshift(r,0)
t.splice.apply(t,a)
this.$updateRows()}}
this.$updateRows=function(){var e=this.session.lineWidgets
if(!e)return
var t=true
e.forEach(function(e,i){if(e){t=false
e.row=i}})
if(t)this.session.lineWidgets=null}
this.addLineWidget=function(e){if(!this.session.lineWidgets)this.session.lineWidgets=new Array(this.session.getLength())
this.session.lineWidgets[e.row]=e
var t=this.editor.renderer
if(e.html&&!e.el){e.el=r.createElement("div")
e.el.innerHTML=e.html}if(e.el){r.addCssClass(e.el,"ace_lineWidgetContainer")
e.el.style.position="absolute"
e.el.style.zIndex=5
t.container.appendChild(e.el)
e._inDocument=true}if(!e.coverGutter){e.el.style.zIndex=3}if(!e.pixelHeight){e.pixelHeight=e.el.offsetHeight}if(e.rowCount==null)e.rowCount=e.pixelHeight/t.layerConfig.lineHeight
this.session._emit("changeFold",{data:{start:{row:e.row}}})
this.$updateRows()
this.renderWidgets(null,t)
return e}
this.removeLineWidget=function(e){e._inDocument=false
if(e.el&&e.el.parentNode)e.el.parentNode.removeChild(e.el)
if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets)this.session.lineWidgets[e.row]=undefined
this.session._emit("changeFold",{data:{start:{row:e.row}}})
this.$updateRows()}
this.onWidgetChanged=function(e){this.session._changedWidgets.push(e)
this.editor&&this.editor.renderer.updateFull()}
this.measureWidgets=function(e,t){var i=this.session._changedWidgets
var n=t.layerConfig
if(!i||!i.length)return
var r=Infinity
for(var s=0;s<i.length;s++){var o=i[s]
if(!o._inDocument){o._inDocument=true
t.container.appendChild(o.el)}o.h=o.el.offsetHeight
if(!o.fixedWidth){o.w=o.el.offsetWidth
o.screenWidth=Math.ceil(o.w/n.characterWidth)}var a=o.h/n.lineHeight
if(o.coverLine){a-=this.session.getRowLineCount(o.row)
if(a<0)a=0}if(o.rowCount!=a){o.rowCount=a
if(o.row<r)r=o.row}}if(r!=Infinity){this.session._emit("changeFold",{data:{start:{row:r}}})
this.session.lineWidgetWidth=null}this.session._changedWidgets=[]}
this.renderWidgets=function(e,t){var i=t.layerConfig
var n=this.session.lineWidgets
if(!n)return
var r=Math.min(this.firstRow,i.firstRow)
var s=Math.max(this.lastRow,i.lastRow,n.length)
while(r>0&&!n[r])r--
this.firstRow=i.firstRow
this.lastRow=i.lastRow
t.$cursorLayer.config=i
for(var o=r;o<=s;o++){var a=n[o]
if(!a||!a.el)continue
if(!a._inDocument){a._inDocument=true
t.container.appendChild(a.el)}var l=t.$cursorLayer.getPixelPosition({row:o,column:0},true).top
if(!a.coverLine)l+=i.lineHeight*this.session.getRowLineCount(a.row)
a.el.style.top=l-i.offset+"px"
var c=a.coverGutter?0:t.gutterWidth
if(!a.fixedWidth)c-=t.scrollLeft
a.el.style.left=c+"px"
if(a.fixedWidth){a.el.style.right=t.scrollBar.getWidth()+"px"}else{a.el.style.right=""}}}}).call(o.prototype)
t.LineWidgets=o})
ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,i){"use strict"
var n=e("ace/line_widgets").LineWidgets
var r=e("ace/lib/dom")
var s=e("ace/range").Range
function o(e,t,i){var n=0
var r=e.length-1
while(n<=r){var s=n+r>>1
var o=i(t,e[s])
if(o>0)n=s+1
else if(o<0)r=s-1
else return s}return-(n+1)}function a(e,t,i){var n=e.getAnnotations().sort(s.comparePoints)
if(!n.length)return
var r=o(n,{row:t,column:-1},s.comparePoints)
if(r<0)r=-r-1
if(r>=n.length-1)r=i>0?0:n.length-1
else if(r===0&&i<0)r=n.length-1
var a=n[r]
if(!a||!i)return
if(a.row===t){do{a=n[r+=i]}while(a&&a.row===t)
if(!a)return n.slice()}var l=[]
t=a.row
do{l[i<0?"unshift":"push"](a)
a=n[r+=i]}while(a&&a.row==t)
return l.length&&l}t.showErrorMarker=function(e,t){var i=e.session
if(!i.widgetManager){i.widgetManager=new n(i)
i.widgetManager.attach(e)}var s=e.getCursorPosition()
var o=s.row
var l=i.lineWidgets&&i.lineWidgets[o]
if(l){l.destroy()}else{o-=t}var c=a(i,o,t)
var h
if(c){var u=c[0]
s.column=(u.pos&&typeof u.column!="number"?u.pos.sc:u.column)||0
s.row=u.row
h=e.renderer.$gutterLayer.$annotations[s.row]}else if(l){return}else{h={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row)
e.selection.moveToPosition(s)
var d={row:s.row,fixedWidth:true,coverGutter:true,el:r.createElement("div")}
var f=d.el.appendChild(r.createElement("div"))
var g=d.el.appendChild(r.createElement("div"))
g.className="error_widget_arrow "+h.className
var m=e.renderer.$cursorLayer.getPixelPosition(s).left
g.style.left=m+e.renderer.gutterWidth-5+"px"
d.el.className="error_widget_wrapper"
f.className="error_widget "+h.className
f.innerHTML=h.text.join("<br>")
f.appendChild(r.createElement("div"))
var p=function(e,t,i){if(t===0&&(i==="esc"||i==="return")){d.destroy()
return{command:"null"}}}
d.destroy=function(){if(e.$mouseHandler.isMousePressed)return
e.keyBinding.removeKeyboardHandler(p)
i.widgetManager.removeLineWidget(d)
e.off("changeSelection",d.destroy)
e.off("changeSession",d.destroy)
e.off("mouseup",d.destroy)
e.off("change",d.destroy)}
e.keyBinding.addKeyboardHandler(p)
e.on("changeSelection",d.destroy)
e.on("changeSession",d.destroy)
e.on("mouseup",d.destroy)
e.on("change",d.destroy)
e.session.widgetManager.addLineWidget(d)
d.el.onmousedown=e.focus.bind(e)
e.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})}
r.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})
ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,i){"use strict"
e("./lib/fixoldbrowsers")
var n=e("./lib/dom")
var r=e("./lib/event")
var s=e("./editor").Editor
var o=e("./edit_session").EditSession
var a=e("./undomanager").UndoManager
var l=e("./virtual_renderer").VirtualRenderer
e("./worker/worker_client")
e("./keyboard/hash_handler")
e("./placeholder")
e("./multi_select")
e("./mode/folding/fold_mode")
e("./theme/textmate")
e("./ext/error_marker")
t.config=e("./config")
t.require=e
t.edit=function(e){if(typeof e=="string"){var i=e
e=document.getElementById(i)
if(!e)throw new Error("ace.edit can't find div #"+i)}if(e.env&&e.env.editor instanceof s)return e.env.editor
var o=t.createEditSession(n.getInnerText(e))
e.innerHTML=""
var a=new s(new l(e))
a.setSession(o)
var c={document:o,editor:a,onResize:a.resize.bind(a,null)}
r.addListener(window,"resize",c.onResize)
a.on("destroy",function(){r.removeListener(window,"resize",c.onResize)})
e.env=a.env=c
return a}
t.createEditSession=function(e,t){var i=new o(e,t)
i.setUndoManager(new a)
return i}
t.EditSession=o
t.UndoManager=a});(function(){ace.require(["ace/ace"],function(e){e&&e.config.init(true)
if(!window.ace)window.ace=e
for(var t in e)if(e.hasOwnProperty(t))window.ace[t]=e[t]})})()
ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text_highlight_rules").TextHighlightRules
var s=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc.tag",regex:"\\bTODO\\b"},{defaultToken:"comment.doc"}]}}
n.inherits(s,r)
s.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}}
s.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}}
t.DocCommentHighlightRules=s})
ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./doc_comment_highlight_rules").DocCommentHighlightRules
var s=e("./text_highlight_rules").TextHighlightRules
var o=function(){var e=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|"+"Namespace|QName|XML|XMLList|"+"ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|"+"Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|"+"Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|"+"SyntaxError|TypeError|URIError|"+"decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|"+"isNaN|parseFloat|parseInt|"+"JSON|Math|"+"this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|"+"break|case|catch|continue|default|delete|do|else|finally|for|function|"+"if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|"+"__parent__|__count__|escape|unescape|with|__proto__|"+"class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier")
var t="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void"
var i="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*\\b"
var n="\\\\(?:x[0-9a-fA-F]{2}|"+"u[0-9a-fA-F]{4}|"+"[0-2][0-7]{0,2}|"+"3[0-6][0-7]?|"+"37[0-7]?|"+"[4-7][0-7]?|"+".)"
this.$rules={no_regex:[{token:"comment",regex:"\\/\\/",next:"line_comment"},r.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+i+")(\\.)(prototype)(\\.)("+i+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+i+")(\\.)("+i+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+i+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+i+")(\\.)("+i+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+i+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+i+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"(?:"+t+")\\b",next:"start"},{token:["punctuation.operator","support.function"],regex:/(\.)(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:["punctuation.operator","support.function.dom"],regex:/(\.)(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:["punctuation.operator","support.constant"],regex:/(\.)(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:e,regex:i},{token:"keyword.operator",regex:/--|\+\+|[!$%&*+\-~]|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\|\||\?\:|\*=|%=|\+=|\-=|&=|\^=/,next:"start"},{token:"punctuation.operator",regex:/\?|\:|\,|\;|\./,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"keyword.operator",regex:/\/=?/,next:"start"},{token:"comment",regex:/^#!.*$/}],start:[r.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/",next:"line_comment_regex_allowed"},{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:i},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],comment_regex_allowed:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],comment:[{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment"}],line_comment_regex_allowed:[{token:"comment",regex:"$|^",next:"start"},{defaultToken:"comment"}],line_comment:[{token:"comment",regex:"$|^",next:"no_regex"},{defaultToken:"comment"}],qqstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]}
this.embedRules(r,"doc-",[r.getEndRule("no_regex")])}
n.inherits(o,s)
t.JavaScriptHighlightRules=o})
ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,i){"use strict"
var n=e("../range").Range
var r=function(){};(function(){this.checkOutdent=function(e,t){if(!/^\s+$/.test(e))return false
return/^\s*\}/.test(t)}
this.autoOutdent=function(e,t){var i=e.getLine(t)
var r=i.match(/^(\s*\})/)
if(!r)return 0
var s=r[1].length
var o=e.findMatchingBracket({row:t,column:s})
if(!o||o.row==t)return 0
var a=this.$getIndent(e.getLine(o.row))
e.replace(new n(t,0,t,s-1),a)}
this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(r.prototype)
t.MatchingBraceOutdent=r})
ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("../behaviour").Behaviour
var s=e("../../token_iterator").TokenIterator
var o=e("../../lib/lang")
var a=["text","paren.rparen","punctuation.operator"]
var l=["text","paren.rparen","punctuation.operator","comment"]
var c
var h={}
var u=function(e){var t=-1
if(e.multiSelect){t=e.selection.id
if(h.rangeCount!=e.multiSelect.rangeCount)h={rangeCount:e.multiSelect.rangeCount}}if(h[t])return c=h[t]
c=h[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}}
var d=function(){this.add("braces","insertion",function(e,t,i,n,r){var s=i.getCursorPosition()
var a=n.doc.getLine(s.row)
if(r=="{"){u(i)
var l=i.getSelectionRange()
var h=n.doc.getTextRange(l)
if(h!==""&&h!=="{"&&i.getWrapBehavioursEnabled()){return{text:"{"+h+"}",selection:false}}else if(d.isSaneInsertion(i,n)){if(/[\]\}\)]/.test(a[s.column])||i.inMultiSelectMode){d.recordAutoInsert(i,n,"}")
return{text:"{}",selection:[1,1]}}else{d.recordMaybeInsert(i,n,"{")
return{text:"{",selection:[1,1]}}}}else if(r=="}"){u(i)
var f=a.substring(s.column,s.column+1)
if(f=="}"){var g=n.$findOpeningBracket("}",{column:s.column+1,row:s.row})
if(g!==null&&d.isAutoInsertedClosing(s,a,r)){d.popAutoInsertedClosing()
return{text:"",selection:[1,1]}}}}else if(r=="\n"||r=="\r\n"){u(i)
var m=""
if(d.isMaybeInsertedClosing(s,a)){m=o.stringRepeat("}",c.maybeInsertedBrackets)
d.clearMaybeInsertedClosing()}var f=a.substring(s.column,s.column+1)
if(f==="}"){var p=n.findMatchingBracket({row:s.row,column:s.column+1},"}")
if(!p)return null
var v=this.$getIndent(n.getLine(p.row))}else if(m){var v=this.$getIndent(a)}else{d.clearMaybeInsertedClosing()
return}var A=v+n.getTabString()
return{text:"\n"+A+"\n"+v+m,selection:[1,A.length,1,A.length]}}else{d.clearMaybeInsertedClosing()}})
this.add("braces","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&s=="{"){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.end.column,r.end.column+1)
if(a=="}"){r.end.column++
return r}else{c.maybeInsertedBrackets--}}})
this.add("parens","insertion",function(e,t,i,n,r){if(r=="("){u(i)
var s=i.getSelectionRange()
var o=n.doc.getTextRange(s)
if(o!==""&&i.getWrapBehavioursEnabled()){return{text:"("+o+")",selection:false}}else if(d.isSaneInsertion(i,n)){d.recordAutoInsert(i,n,")")
return{text:"()",selection:[1,1]}}}else if(r==")"){u(i)
var a=i.getCursorPosition()
var l=n.doc.getLine(a.row)
var c=l.substring(a.column,a.column+1)
if(c==")"){var h=n.$findOpeningBracket(")",{column:a.column+1,row:a.row})
if(h!==null&&d.isAutoInsertedClosing(a,l,r)){d.popAutoInsertedClosing()
return{text:"",selection:[1,1]}}}}})
this.add("parens","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&s=="("){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.start.column+1,r.start.column+2)
if(a==")"){r.end.column++
return r}}})
this.add("brackets","insertion",function(e,t,i,n,r){if(r=="["){u(i)
var s=i.getSelectionRange()
var o=n.doc.getTextRange(s)
if(o!==""&&i.getWrapBehavioursEnabled()){return{text:"["+o+"]",selection:false}}else if(d.isSaneInsertion(i,n)){d.recordAutoInsert(i,n,"]")
return{text:"[]",selection:[1,1]}}}else if(r=="]"){u(i)
var a=i.getCursorPosition()
var l=n.doc.getLine(a.row)
var c=l.substring(a.column,a.column+1)
if(c=="]"){var h=n.$findOpeningBracket("]",{column:a.column+1,row:a.row})
if(h!==null&&d.isAutoInsertedClosing(a,l,r)){d.popAutoInsertedClosing()
return{text:"",selection:[1,1]}}}}})
this.add("brackets","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&s=="["){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.start.column+1,r.start.column+2)
if(a=="]"){r.end.column++
return r}}})
this.add("string_dquotes","insertion",function(e,t,i,n,r){if(r=='"'||r=="'"){u(i)
var s=r
var o=i.getSelectionRange()
var a=n.doc.getTextRange(o)
if(a!==""&&a!=="'"&&a!='"'&&i.getWrapBehavioursEnabled()){return{text:s+a+s,selection:false}}else{var l=i.getCursorPosition()
var c=n.doc.getLine(l.row)
var h=c.substring(l.column-1,l.column)
if(h=="\\"){return null}var f=n.getTokens(o.start.row)
var g=0,m
var p=-1
for(var v=0;v<f.length;v++){m=f[v]
if(m.type=="string"){p=-1}else if(p<0){p=m.value.indexOf(s)}if(m.value.length+g>o.start.column){break}g+=f[v].value.length}if(!m||p<0&&m.type!=="comment"&&(m.type!=="string"||o.start.column!==m.value.length+g-1&&m.value.lastIndexOf(s)===m.value.length-1)){if(!d.isSaneInsertion(i,n))return
return{text:s+s,selection:[1,1]}}else if(m&&m.type==="string"){var A=c.substring(l.column,l.column+1)
if(A==s){return{text:"",selection:[1,1]}}}}}})
this.add("string_dquotes","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&(s=='"'||s=="'")){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.start.column+1,r.start.column+2)
if(a==s){r.end.column++
return r}}})}
d.isSaneInsertion=function(e,t){var i=e.getCursorPosition()
var n=new s(t,i.row,i.column)
if(!this.$matchTokenType(n.getCurrentToken()||"text",a)){var r=new s(t,i.row,i.column+1)
if(!this.$matchTokenType(r.getCurrentToken()||"text",a))return false}n.stepForward()
return n.getCurrentTokenRow()!==i.row||this.$matchTokenType(n.getCurrentToken()||"text",l)}
d.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1}
d.recordAutoInsert=function(e,t,i){var n=e.getCursorPosition()
var r=t.doc.getLine(n.row)
if(!this.isAutoInsertedClosing(n,r,c.autoInsertedLineEnd[0]))c.autoInsertedBrackets=0
c.autoInsertedRow=n.row
c.autoInsertedLineEnd=i+r.substr(n.column)
c.autoInsertedBrackets++}
d.recordMaybeInsert=function(e,t,i){var n=e.getCursorPosition()
var r=t.doc.getLine(n.row)
if(!this.isMaybeInsertedClosing(n,r))c.maybeInsertedBrackets=0
c.maybeInsertedRow=n.row
c.maybeInsertedLineStart=r.substr(0,n.column)+i
c.maybeInsertedLineEnd=r.substr(n.column)
c.maybeInsertedBrackets++}
d.isAutoInsertedClosing=function(e,t,i){return c.autoInsertedBrackets>0&&e.row===c.autoInsertedRow&&i===c.autoInsertedLineEnd[0]&&t.substr(e.column)===c.autoInsertedLineEnd}
d.isMaybeInsertedClosing=function(e,t){return c.maybeInsertedBrackets>0&&e.row===c.maybeInsertedRow&&t.substr(e.column)===c.maybeInsertedLineEnd&&t.substr(0,e.column)==c.maybeInsertedLineStart}
d.popAutoInsertedClosing=function(){c.autoInsertedLineEnd=c.autoInsertedLineEnd.substr(1)
c.autoInsertedBrackets--}
d.clearMaybeInsertedClosing=function(){if(c){c.maybeInsertedBrackets=0
c.maybeInsertedRow=-1}}
n.inherits(d,r)
t.CstyleBehaviour=d})
ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("../../range").Range
var s=e("./fold_mode").FoldMode
var o=t.FoldMode=function(e){if(e){this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start))
this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end))}}
n.inherits(o,s);(function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/
this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/
this.getFoldWidgetRange=function(e,t,i,n){var r=e.getLine(i)
var s=r.match(this.foldingStartMarker)
if(s){var o=s.index
if(s[1])return this.openingBracketBlock(e,s[1],i,o)
var a=e.getCommentFoldRange(i,o+s[0].length,1)
if(a&&!a.isMultiLine()){if(n){a=this.getSectionRange(e,i)}else if(t!="all")a=null}return a}if(t==="markbegin")return
var s=r.match(this.foldingStopMarker)
if(s){var o=s.index+s[0].length
if(s[1])return this.closingBracketBlock(e,s[1],i,o)
return e.getCommentFoldRange(i,o,-1)}}
this.getSectionRange=function(e,t){var i=e.getLine(t)
var n=i.search(/\S/)
var s=t
var o=i.length
t=t+1
var a=t
var l=e.getLength()
while(++t<l){i=e.getLine(t)
var c=i.search(/\S/)
if(c===-1)continue
if(n>c)break
var h=this.getFoldWidgetRange(e,"all",t)
if(h){if(h.start.row<=s){break}else if(h.isMultiLine()){t=h.end.row}else if(n==c){break}}a=t}return new r(s,o,a,e.getLine(a).length)}}).call(o.prototype)})
ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text").Mode
var s=e("./javascript_highlight_rules").JavaScriptHighlightRules
var o=e("./matching_brace_outdent").MatchingBraceOutdent
var a=e("../range").Range
var l=e("../worker/worker_client").WorkerClient
var c=e("./behaviour/cstyle").CstyleBehaviour
var h=e("./folding/cstyle").FoldMode
var u=function(){this.HighlightRules=s
this.$outdent=new o
this.$behaviour=new c
this.foldingRules=new h}
n.inherits(u,r);(function(){this.lineCommentStart="//"
this.blockComment={start:"/*",end:"*/"}
this.getNextLineIndent=function(e,t,i){var n=this.$getIndent(t)
var r=this.getTokenizer().getLineTokens(t,e)
var s=r.tokens
var o=r.state
if(s.length&&s[s.length-1].type=="comment"){return n}if(e=="start"||e=="no_regex"){var a=t.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/)
if(a){n+=i}}else if(e=="doc-start"){if(o=="start"||o=="no_regex"){return""}var a=t.match(/^\s*(\/?)\*/)
if(a){if(a[1]){n+=" "}n+="* "}}return n}
this.checkOutdent=function(e,t,i){return this.$outdent.checkOutdent(t,i)}
this.autoOutdent=function(e,t,i){this.$outdent.autoOutdent(t,i)}
this.createWorker=function(e){var t=new l(["ace"],"ace/mode/javascript_worker","JavaScriptWorker")
t.attachToDocument(e.getDocument())
t.on("jslint",function(t){e.setAnnotations(t.data)})
t.on("terminate",function(){e.clearAnnotations()})
return t}
this.$id="ace/mode/javascript"}).call(u.prototype)
t.Mode=u})
ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text_highlight_rules").TextHighlightRules
var s=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc.tag",regex:"\\bTODO\\b"},{defaultToken:"comment.doc"}]}}
n.inherits(s,r)
s.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}}
s.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}}
t.DocCommentHighlightRules=s})
ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./doc_comment_highlight_rules").DocCommentHighlightRules
var s=e("./text_highlight_rules").TextHighlightRules
var o=function(){var e=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|"+"Namespace|QName|XML|XMLList|"+"ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|"+"Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|"+"Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|"+"SyntaxError|TypeError|URIError|"+"decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|"+"isNaN|parseFloat|parseInt|"+"JSON|Math|"+"this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|"+"break|case|catch|continue|default|delete|do|else|finally|for|function|"+"if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|"+"__parent__|__count__|escape|unescape|with|__proto__|"+"class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier")
var t="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void"
var i="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*\\b"
var n="\\\\(?:x[0-9a-fA-F]{2}|"+"u[0-9a-fA-F]{4}|"+"[0-2][0-7]{0,2}|"+"3[0-6][0-7]?|"+"37[0-7]?|"+"[4-7][0-7]?|"+".)"
this.$rules={no_regex:[{token:"comment",regex:"\\/\\/",next:"line_comment"},r.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+i+")(\\.)(prototype)(\\.)("+i+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+i+")(\\.)("+i+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+i+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+i+")(\\.)("+i+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+i+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+i+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"(?:"+t+")\\b",next:"start"},{token:["punctuation.operator","support.function"],regex:/(\.)(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:["punctuation.operator","support.function.dom"],regex:/(\.)(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:["punctuation.operator","support.constant"],regex:/(\.)(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:e,regex:i},{token:"keyword.operator",regex:/--|\+\+|[!$%&*+\-~]|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\|\||\?\:|\*=|%=|\+=|\-=|&=|\^=/,next:"start"},{token:"punctuation.operator",regex:/\?|\:|\,|\;|\./,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"keyword.operator",regex:/\/=?/,next:"start"},{token:"comment",regex:/^#!.*$/}],start:[r.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/",next:"line_comment_regex_allowed"},{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:i},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],comment_regex_allowed:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],comment:[{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment"}],line_comment_regex_allowed:[{token:"comment",regex:"$|^",next:"start"},{defaultToken:"comment"}],line_comment:[{token:"comment",regex:"$|^",next:"no_regex"},{defaultToken:"comment"}],qqstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]}
this.embedRules(r,"doc-",[r.getEndRule("no_regex")])}
n.inherits(o,s)
t.JavaScriptHighlightRules=o})
ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,i){"use strict"
var n=e("../range").Range
var r=function(){};(function(){this.checkOutdent=function(e,t){if(!/^\s+$/.test(e))return false
return/^\s*\}/.test(t)}
this.autoOutdent=function(e,t){var i=e.getLine(t)
var r=i.match(/^(\s*\})/)
if(!r)return 0
var s=r[1].length
var o=e.findMatchingBracket({row:t,column:s})
if(!o||o.row==t)return 0
var a=this.$getIndent(e.getLine(o.row))
e.replace(new n(t,0,t,s-1),a)}
this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(r.prototype)
t.MatchingBraceOutdent=r})
ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("../behaviour").Behaviour
var s=e("../../token_iterator").TokenIterator
var o=e("../../lib/lang")
var a=["text","paren.rparen","punctuation.operator"]
var l=["text","paren.rparen","punctuation.operator","comment"]
var c
var h={}
var u=function(e){var t=-1
if(e.multiSelect){t=e.selection.id
if(h.rangeCount!=e.multiSelect.rangeCount)h={rangeCount:e.multiSelect.rangeCount}}if(h[t])return c=h[t]
c=h[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}}
var d=function(){this.add("braces","insertion",function(e,t,i,n,r){var s=i.getCursorPosition()
var a=n.doc.getLine(s.row)
if(r=="{"){u(i)
var l=i.getSelectionRange()
var h=n.doc.getTextRange(l)
if(h!==""&&h!=="{"&&i.getWrapBehavioursEnabled()){return{text:"{"+h+"}",selection:false}}else if(d.isSaneInsertion(i,n)){if(/[\]\}\)]/.test(a[s.column])||i.inMultiSelectMode){d.recordAutoInsert(i,n,"}")
return{text:"{}",selection:[1,1]}}else{d.recordMaybeInsert(i,n,"{")
return{text:"{",selection:[1,1]}}}}else if(r=="}"){u(i)
var f=a.substring(s.column,s.column+1)
if(f=="}"){var g=n.$findOpeningBracket("}",{column:s.column+1,row:s.row})
if(g!==null&&d.isAutoInsertedClosing(s,a,r)){d.popAutoInsertedClosing()
return{text:"",selection:[1,1]}}}}else if(r=="\n"||r=="\r\n"){u(i)
var m=""
if(d.isMaybeInsertedClosing(s,a)){m=o.stringRepeat("}",c.maybeInsertedBrackets)
d.clearMaybeInsertedClosing()}var f=a.substring(s.column,s.column+1)
if(f==="}"){var p=n.findMatchingBracket({row:s.row,column:s.column+1},"}")
if(!p)return null
var v=this.$getIndent(n.getLine(p.row))}else if(m){var v=this.$getIndent(a)}else{d.clearMaybeInsertedClosing()
return}var A=v+n.getTabString()
return{text:"\n"+A+"\n"+v+m,selection:[1,A.length,1,A.length]}}else{d.clearMaybeInsertedClosing()}})
this.add("braces","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&s=="{"){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.end.column,r.end.column+1)
if(a=="}"){r.end.column++
return r}else{c.maybeInsertedBrackets--}}})
this.add("parens","insertion",function(e,t,i,n,r){if(r=="("){u(i)
var s=i.getSelectionRange()
var o=n.doc.getTextRange(s)
if(o!==""&&i.getWrapBehavioursEnabled()){return{text:"("+o+")",selection:false}}else if(d.isSaneInsertion(i,n)){d.recordAutoInsert(i,n,")")
return{text:"()",selection:[1,1]}}}else if(r==")"){u(i)
var a=i.getCursorPosition()
var l=n.doc.getLine(a.row)
var c=l.substring(a.column,a.column+1)
if(c==")"){var h=n.$findOpeningBracket(")",{column:a.column+1,row:a.row})
if(h!==null&&d.isAutoInsertedClosing(a,l,r)){d.popAutoInsertedClosing()
return{text:"",selection:[1,1]}}}}})
this.add("parens","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&s=="("){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.start.column+1,r.start.column+2)
if(a==")"){r.end.column++
return r}}})
this.add("brackets","insertion",function(e,t,i,n,r){if(r=="["){u(i)
var s=i.getSelectionRange()
var o=n.doc.getTextRange(s)
if(o!==""&&i.getWrapBehavioursEnabled()){return{text:"["+o+"]",selection:false}}else if(d.isSaneInsertion(i,n)){d.recordAutoInsert(i,n,"]")
return{text:"[]",selection:[1,1]}}}else if(r=="]"){u(i)
var a=i.getCursorPosition()
var l=n.doc.getLine(a.row)
var c=l.substring(a.column,a.column+1)
if(c=="]"){var h=n.$findOpeningBracket("]",{column:a.column+1,row:a.row})
if(h!==null&&d.isAutoInsertedClosing(a,l,r)){d.popAutoInsertedClosing()
return{text:"",selection:[1,1]}}}}})
this.add("brackets","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&s=="["){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.start.column+1,r.start.column+2)
if(a=="]"){r.end.column++
return r}}})
this.add("string_dquotes","insertion",function(e,t,i,n,r){if(r=='"'||r=="'"){u(i)
var s=r
var o=i.getSelectionRange()
var a=n.doc.getTextRange(o)
if(a!==""&&a!=="'"&&a!='"'&&i.getWrapBehavioursEnabled()){return{text:s+a+s,selection:false}}else{var l=i.getCursorPosition()
var c=n.doc.getLine(l.row)
var h=c.substring(l.column-1,l.column)
if(h=="\\"){return null}var f=n.getTokens(o.start.row)
var g=0,m
var p=-1
for(var v=0;v<f.length;v++){m=f[v]
if(m.type=="string"){p=-1}else if(p<0){p=m.value.indexOf(s)}if(m.value.length+g>o.start.column){break}g+=f[v].value.length}if(!m||p<0&&m.type!=="comment"&&(m.type!=="string"||o.start.column!==m.value.length+g-1&&m.value.lastIndexOf(s)===m.value.length-1)){if(!d.isSaneInsertion(i,n))return
return{text:s+s,selection:[1,1]}}else if(m&&m.type==="string"){var A=c.substring(l.column,l.column+1)
if(A==s){return{text:"",selection:[1,1]}}}}}})
this.add("string_dquotes","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&(s=='"'||s=="'")){u(i)
var o=n.doc.getLine(r.start.row)
var a=o.substring(r.start.column+1,r.start.column+2)
if(a==s){r.end.column++
return r}}})}
d.isSaneInsertion=function(e,t){var i=e.getCursorPosition()
var n=new s(t,i.row,i.column)
if(!this.$matchTokenType(n.getCurrentToken()||"text",a)){var r=new s(t,i.row,i.column+1)
if(!this.$matchTokenType(r.getCurrentToken()||"text",a))return false}n.stepForward()
return n.getCurrentTokenRow()!==i.row||this.$matchTokenType(n.getCurrentToken()||"text",l)}
d.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1}
d.recordAutoInsert=function(e,t,i){var n=e.getCursorPosition()
var r=t.doc.getLine(n.row)
if(!this.isAutoInsertedClosing(n,r,c.autoInsertedLineEnd[0]))c.autoInsertedBrackets=0
c.autoInsertedRow=n.row
c.autoInsertedLineEnd=i+r.substr(n.column)
c.autoInsertedBrackets++}
d.recordMaybeInsert=function(e,t,i){var n=e.getCursorPosition()
var r=t.doc.getLine(n.row)
if(!this.isMaybeInsertedClosing(n,r))c.maybeInsertedBrackets=0
c.maybeInsertedRow=n.row
c.maybeInsertedLineStart=r.substr(0,n.column)+i
c.maybeInsertedLineEnd=r.substr(n.column)
c.maybeInsertedBrackets++}
d.isAutoInsertedClosing=function(e,t,i){return c.autoInsertedBrackets>0&&e.row===c.autoInsertedRow&&i===c.autoInsertedLineEnd[0]&&t.substr(e.column)===c.autoInsertedLineEnd}
d.isMaybeInsertedClosing=function(e,t){return c.maybeInsertedBrackets>0&&e.row===c.maybeInsertedRow&&t.substr(e.column)===c.maybeInsertedLineEnd&&t.substr(0,e.column)==c.maybeInsertedLineStart}
d.popAutoInsertedClosing=function(){c.autoInsertedLineEnd=c.autoInsertedLineEnd.substr(1)
c.autoInsertedBrackets--}
d.clearMaybeInsertedClosing=function(){if(c){c.maybeInsertedBrackets=0
c.maybeInsertedRow=-1}}
n.inherits(d,r)
t.CstyleBehaviour=d})
ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("../../range").Range
var s=e("./fold_mode").FoldMode
var o=t.FoldMode=function(e){if(e){this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start))
this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end))}}
n.inherits(o,s);(function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/
this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/
this.getFoldWidgetRange=function(e,t,i,n){var r=e.getLine(i)
var s=r.match(this.foldingStartMarker)
if(s){var o=s.index
if(s[1])return this.openingBracketBlock(e,s[1],i,o)
var a=e.getCommentFoldRange(i,o+s[0].length,1)
if(a&&!a.isMultiLine()){if(n){a=this.getSectionRange(e,i)}else if(t!="all")a=null}return a}if(t==="markbegin")return
var s=r.match(this.foldingStopMarker)
if(s){var o=s.index+s[0].length
if(s[1])return this.closingBracketBlock(e,s[1],i,o)
return e.getCommentFoldRange(i,o,-1)}}
this.getSectionRange=function(e,t){var i=e.getLine(t)
var n=i.search(/\S/)
var s=t
var o=i.length
t=t+1
var a=t
var l=e.getLength()
while(++t<l){i=e.getLine(t)
var c=i.search(/\S/)
if(c===-1)continue
if(n>c)break
var h=this.getFoldWidgetRange(e,"all",t)
if(h){if(h.start.row<=s){break}else if(h.isMultiLine()){t=h.end.row}else if(n==c){break}}a=t}return new r(s,o,a,e.getLine(a).length)}}).call(o.prototype)})
ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text").Mode
var s=e("./javascript_highlight_rules").JavaScriptHighlightRules
var o=e("./matching_brace_outdent").MatchingBraceOutdent
var a=e("../range").Range
var l=e("../worker/worker_client").WorkerClient
var c=e("./behaviour/cstyle").CstyleBehaviour
var h=e("./folding/cstyle").FoldMode
var u=function(){this.HighlightRules=s
this.$outdent=new o
this.$behaviour=new c
this.foldingRules=new h}
n.inherits(u,r);(function(){this.lineCommentStart="//"
this.blockComment={start:"/*",end:"*/"}
this.getNextLineIndent=function(e,t,i){var n=this.$getIndent(t)
var r=this.getTokenizer().getLineTokens(t,e)
var s=r.tokens
var o=r.state
if(s.length&&s[s.length-1].type=="comment"){return n}if(e=="start"||e=="no_regex"){var a=t.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/)
if(a){n+=i}}else if(e=="doc-start"){if(o=="start"||o=="no_regex"){return""}var a=t.match(/^\s*(\/?)\*/)
if(a){if(a[1]){n+=" "}n+="* "}}return n}
this.checkOutdent=function(e,t,i){return this.$outdent.checkOutdent(t,i)}
this.autoOutdent=function(e,t,i){this.$outdent.autoOutdent(t,i)}
this.createWorker=function(e){var t=new l(["ace"],"ace/mode/javascript_worker","JavaScriptWorker")
t.attachToDocument(e.getDocument())
t.on("jslint",function(t){e.setAnnotations(t.data)})
t.on("terminate",function(){e.clearAnnotations()})
return t}
this.$id="ace/mode/javascript"}).call(u.prototype)
t.Mode=u})
ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("../lib/lang")
var s=e("./text_highlight_rules").TextHighlightRules
var o=t.supportType="animation-fill-mode|alignment-adjust|alignment-baseline|animation-delay|animation-direction|animation-duration|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|animation|appearance|azimuth|backface-visibility|background-attachment|background-break|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|background|baseline-shift|binding|bleed|bookmark-label|bookmark-level|bookmark-state|bookmark-target|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|border|bottom|box-align|box-decoration-break|box-direction|box-flex-group|box-flex|box-lines|box-ordinal-group|box-orient|box-pack|box-shadow|box-sizing|break-after|break-before|break-inside|caption-side|clear|clip|color-profile|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|crop|cue-after|cue-before|cue|cursor|direction|display|dominant-baseline|drop-initial-after-adjust|drop-initial-after-align|drop-initial-before-adjust|drop-initial-before-align|drop-initial-size|drop-initial-value|elevation|empty-cells|fit|fit-position|float-offset|float|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|font|grid-columns|grid-rows|hanging-punctuation|height|hyphenate-after|hyphenate-before|hyphenate-character|hyphenate-lines|hyphenate-resource|hyphens|icon|image-orientation|image-rendering|image-resolution|inline-box-align|left|letter-spacing|line-height|line-stacking-ruby|line-stacking-shift|line-stacking-strategy|line-stacking|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|margin|mark-after|mark-before|mark|marks|marquee-direction|marquee-play-count|marquee-speed|marquee-style|max-height|max-width|min-height|min-width|move-to|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|orphans|outline-color|outline-offset|outline-style|outline-width|outline|overflow-style|overflow-x|overflow-y|overflow|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page-policy|page|pause-after|pause-before|pause|perspective-origin|perspective|phonemes|pitch-range|pitch|play-during|pointer-events|position|presentation-level|punctuation-trim|quotes|rendering-intent|resize|rest-after|rest-before|rest|richness|right|rotation-point|rotation|ruby-align|ruby-overhang|ruby-position|ruby-span|size|speak-header|speak-numeral|speak-punctuation|speak|speech-rate|stress|string-set|table-layout|target-name|target-new|target-position|target|text-align-last|text-align|text-decoration|text-emphasis|text-height|text-indent|text-justify|text-outline|text-shadow|text-transform|text-wrap|top|transform-origin|transform-style|transform|transition-delay|transition-duration|transition-property|transition-timing-function|transition|unicode-bidi|vertical-align|visibility|voice-balance|voice-duration|voice-family|voice-pitch-range|voice-pitch|voice-rate|voice-stress|voice-volume|volume|white-space-collapse|white-space|widows|width|word-break|word-spacing|word-wrap|z-index"
var a=t.supportFunction="rgb|rgba|url|attr|counter|counters"
var l=t.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero"
var c=t.supportConstantColor="aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow"
var h=t.supportConstantFonts="arial|century|comic|courier|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace"
var u=t.numRe="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))"
var d=t.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b"
var f=t.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b"
var g=function(){var e=this.createKeywordMapper({"support.function":a,"support.constant":l,"support.type":o,"support.constant.color":c,"support.constant.fonts":h},"text",true)
this.$rules={start:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"@.*?{",push:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:true}],media:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"\\}",next:"pop"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:true}],comment:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}],ruleset:[{token:"paren.rparen",regex:"\\}",next:"pop"},{token:"comment",regex:"\\/\\*",push:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:["constant.numeric","keyword"],regex:"("+u+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)"},{token:"constant.numeric",regex:u},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:d},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:f},{token:["support.function","string","support.function"],regex:"(url\\()(.*)(\\))"},{token:e,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:true}]}
this.normalizeRules()}
n.inherits(g,s)
t.CssHighlightRules=g})
ace.define("ace/mode/behaviour/css",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("../behaviour").Behaviour
var s=e("./cstyle").CstyleBehaviour
var o=e("../../token_iterator").TokenIterator
var a=function(){this.inherit(s)
this.add("colon","insertion",function(e,t,i,n,r){if(r===":"){var s=i.getCursorPosition()
var a=new o(n,s.row,s.column)
var l=a.getCurrentToken()
if(l&&l.value.match(/\s+/)){l=a.stepBackward()}if(l&&l.type==="support.type"){var c=n.doc.getLine(s.row)
var h=c.substring(s.column,s.column+1)
if(h===":"){return{text:"",selection:[1,1]}}if(!c.substring(s.column).match(/^\s*;/)){return{text:":;",selection:[1,1]}}}}})
this.add("colon","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&s===":"){var a=i.getCursorPosition()
var l=new o(n,a.row,a.column)
var c=l.getCurrentToken()
if(c&&c.value.match(/\s+/)){c=l.stepBackward()}if(c&&c.type==="support.type"){var h=n.doc.getLine(r.start.row)
var u=h.substring(r.end.column,r.end.column+1)
if(u===";"){r.end.column++
return r}}}})
this.add("semicolon","insertion",function(e,t,i,n,r){if(r===";"){var s=i.getCursorPosition()
var o=n.doc.getLine(s.row)
var a=o.substring(s.column,s.column+1)
if(a===";"){return{text:"",selection:[1,1]}}}})}
n.inherits(a,s)
t.CssBehaviour=a})
ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/css","ace/mode/folding/cstyle"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text").Mode
var s=e("./css_highlight_rules").CssHighlightRules
var o=e("./matching_brace_outdent").MatchingBraceOutdent
var a=e("../worker/worker_client").WorkerClient
var l=e("./behaviour/css").CssBehaviour
var c=e("./folding/cstyle").FoldMode
var h=function(){this.HighlightRules=s
this.$outdent=new o
this.$behaviour=new l
this.foldingRules=new c}
n.inherits(h,r);(function(){this.foldingRules="cStyle"
this.blockComment={start:"/*",end:"*/"}
this.getNextLineIndent=function(e,t,i){var n=this.$getIndent(t)
var r=this.getTokenizer().getLineTokens(t,e).tokens
if(r.length&&r[r.length-1].type=="comment"){return n}var s=t.match(/^.*\{\s*$/)
if(s){n+=i}return n}
this.checkOutdent=function(e,t,i){return this.$outdent.checkOutdent(t,i)}
this.autoOutdent=function(e,t,i){this.$outdent.autoOutdent(t,i)}
this.createWorker=function(e){var t=new a(["ace"],"ace/mode/css_worker","Worker")
t.attachToDocument(e.getDocument())
t.on("csslint",function(t){e.setAnnotations(t.data)})
t.on("terminate",function(){e.clearAnnotations()})
return t}
this.$id="ace/mode/css"}).call(h.prototype)
t.Mode=h})
ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text_highlight_rules").TextHighlightRules
var s=function(e){this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.xml-decl.xml","keyword.xml-decl.xml"],regex:"(<\\?)(xml)(?=[\\s])",next:"xml_decl",caseInsensitive:true},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)([-_a-zA-Z0-9]+)",next:"processing_instruction"},{token:"comment.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:true},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],xml_decl:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],processing_instruction:[{token:"punctuation.instruction.xml",regex:"\\?>",next:"start"},{defaultToken:"instruction.xml"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)([-_a-zA-Z0-9]+)",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.xml",regex:"-->",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+)",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]}
if(this.constructor===s)this.normalizeRules()};(function(){this.embedTagRules=function(e,t,i){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+i+".tag-name.xml"],regex:"(<)("+i+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:t+"start"}]})
this.$rules[i+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(e,t,i){i.splice(0)
return this.token}}]
this.embedRules(e,t,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+i+".tag-name.xml"],regex:"(</)("+i+"(?=\\s|>|$))",next:i+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(r.prototype)
n.inherits(s,r)
t.XmlHighlightRules=s})
ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("../lib/lang")
var s=e("./css_highlight_rules").CssHighlightRules
var o=e("./javascript_highlight_rules").JavaScriptHighlightRules
var a=e("./xml_highlight_rules").XmlHighlightRules
var l=r.createMap({a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",tr:"table"})
var c=function(){a.call(this)
this.addRules({attributes:[{include:"tag_whitespace"},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"keyword.operator.attribute-equals.xml",regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",next:"pop"},{token:"empty",regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(e,t){var i=l[t]
return["meta.tag.punctuation."+(e=="<"?"":"end-")+"tag-open.xml","meta.tag"+(i?"."+i:"")+".tag-name.xml"]},regex:"(</?)([-_a-zA-Z0-9:]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]})
this.embedTagRules(s,"css-","style")
this.embedTagRules(o,"js-","script")
if(this.constructor===c)this.normalizeRules()}
n.inherits(c,a)
t.HtmlHighlightRules=c})
ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("../behaviour").Behaviour
var s=e("../../token_iterator").TokenIterator
function o(e,t){return e.type.lastIndexOf(t+".xml")>-1}var a=function(){this.add("string_dquotes","insertion",function(e,t,i,n,r){if(r=='"'||r=="'"){var a=r
var l=n.doc.getTextRange(i.getSelectionRange())
if(l!==""&&l!=="'"&&l!='"'&&i.getWrapBehavioursEnabled()){return{text:a+l+a,selection:false}}var c=i.getCursorPosition()
var h=n.doc.getLine(c.row)
var u=h.substring(c.column,c.column+1)
var d=new s(n,c.row,c.column)
var f=d.getCurrentToken()
if(u==a&&(o(f,"attribute-value")||o(f,"string"))){return{text:"",selection:[1,1]}}if(!f)f=d.stepBackward()
if(!f)return
while(o(f,"tag-whitespace")||o(f,"whitespace")){f=d.stepBackward()}var g=!u||u.match(/\s/)
if(o(f,"attribute-equals")&&(g||u==">")||o(f,"decl-attribute-equals")&&(g||u=="?")){return{text:a+a,selection:[1,1]}}}})
this.add("string_dquotes","deletion",function(e,t,i,n,r){var s=n.doc.getTextRange(r)
if(!r.isMultiLine()&&(s=='"'||s=="'")){var o=n.doc.getLine(r.start.row)
var a=o.substring(r.start.column+1,r.start.column+2)
if(a==s){r.end.column++
return r}}})
this.add("autoclosing","insertion",function(e,t,i,n,r){if(r==">"){var a=i.getCursorPosition()
var l=new s(n,a.row,a.column)
var c=l.getCurrentToken()||l.stepBackward()
if(!c||!(o(c,"tag-name")||o(c,"tag-whitespace")||o(c,"attribute-name")||o(c,"attribute-equals")||o(c,"attribute-value")))return
if(o(c,"reference.attribute-value"))return
if(o(c,"attribute-value")){var h=c.value.charAt(0)
if(h=='"'||h=="'"){var u=c.value.charAt(c.value.length-1)
var d=l.getCurrentTokenColumn()+c.value.length
if(d>a.column||d==a.column&&h!=u)return}}while(!o(c,"tag-name")){c=l.stepBackward()}var f=l.getCurrentTokenRow()
var g=l.getCurrentTokenColumn()
if(o(l.stepBackward(),"end-tag-open"))return
var m=c.value
if(f==a.row)m=m.substring(0,a.column-g)
if(this.voidElements.hasOwnProperty(m.toLowerCase()))return
return{text:">"+"</"+m+">",selection:[1,1]}}})
this.add("autoindent","insertion",function(e,t,i,n,r){if(r=="\n"){var s=i.getCursorPosition()
var o=n.getLine(s.row)
var a=o.substring(s.column,s.column+2)
if(a=="</"){var l=this.$getIndent(o)
var c=l+n.getTabString()
return{text:"\n"+c+"\n"+l,selection:[1,c.length,1,c.length]}}}})}
n.inherits(a,r)
t.XmlBehaviour=a})
ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("./fold_mode").FoldMode
var s=t.FoldMode=function(e,t){this.defaultMode=e
this.subModes=t}
n.inherits(s,r);(function(){this.$getMode=function(e){if(typeof e!="string")e=e[0]
for(var t in this.subModes){if(e.indexOf(t)===0)return this.subModes[t]}return null}
this.$tryMode=function(e,t,i,n){var r=this.$getMode(e)
return r?r.getFoldWidget(t,i,n):""}
this.getFoldWidget=function(e,t,i){return this.$tryMode(e.getState(i-1),e,t,i)||this.$tryMode(e.getState(i),e,t,i)||this.defaultMode.getFoldWidget(e,t,i)}
this.getFoldWidgetRange=function(e,t,i){var n=this.$getMode(e.getState(i-1))
if(!n||!n.getFoldWidget(e,t,i))n=this.$getMode(e.getState(i))
if(!n||!n.getFoldWidget(e,t,i))n=this.defaultMode
return n.getFoldWidgetRange(e,t,i)}}).call(s.prototype)})
ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("../../lib/lang")
var s=e("../../range").Range
var o=e("./fold_mode").FoldMode
var a=e("../../token_iterator").TokenIterator
var l=t.FoldMode=function(e,t){o.call(this)
this.voidElements=n.mixin(e||{},t||{})}
n.inherits(l,o)
var c=function(){this.tagName=""
this.closing=false
this.selfClosing=false
this.start={row:0,column:0}
this.end={row:0,column:0}}
function h(e,t){return e.type.lastIndexOf(t+".xml")>-1}(function(){this.getFoldWidget=function(e,t,i){var n=this._getFirstTagInLine(e,i)
if(!n)return""
if(n.closing||!n.tagName&&n.selfClosing)return t=="markbeginend"?"end":""
if(!n.tagName||n.selfClosing||this.voidElements.hasOwnProperty(n.tagName.toLowerCase()))return""
if(this._findEndTagInLine(e,i,n.tagName,n.end.column))return""
return"start"}
this._getFirstTagInLine=function(e,t){var i=e.getTokens(t)
var n=new c
for(var r=0;r<i.length;r++){var s=i[r]
if(h(s,"tag-open")){n.end.column=n.start.column+s.value.length
n.closing=h(s,"end-tag-open")
s=i[++r]
if(!s)return null
n.tagName=s.value
n.end.column+=s.value.length
for(r++;r<i.length;r++){s=i[r]
n.end.column+=s.value.length
if(h(s,"tag-close")){n.selfClosing=s.value=="/>"
break}}return n}else if(h(s,"tag-close")){n.selfClosing=s.value=="/>"
return n}n.start.column+=s.value.length}return null}
this._findEndTagInLine=function(e,t,i,n){var r=e.getTokens(t)
var s=0
for(var o=0;o<r.length;o++){var a=r[o]
s+=a.value.length
if(s<n)continue
if(h(a,"end-tag-open")){a=r[o+1]
if(a&&a.value==i)return true}}return false}
this._readTagForward=function(e){var t=e.getCurrentToken()
if(!t)return null
var i=new c
do{if(h(t,"tag-open")){i.closing=h(t,"end-tag-open")
i.start.row=e.getCurrentTokenRow()
i.start.column=e.getCurrentTokenColumn()}else if(h(t,"tag-name")){i.tagName=t.value}else if(h(t,"tag-close")){i.selfClosing=t.value=="/>"
i.end.row=e.getCurrentTokenRow()
i.end.column=e.getCurrentTokenColumn()+t.value.length
e.stepForward()
return i}}while(t=e.stepForward())
return null}
this._readTagBackward=function(e){var t=e.getCurrentToken()
if(!t)return null
var i=new c
do{if(h(t,"tag-open")){i.closing=h(t,"end-tag-open")
i.start.row=e.getCurrentTokenRow()
i.start.column=e.getCurrentTokenColumn()
e.stepBackward()
return i}else if(h(t,"tag-name")){i.tagName=t.value}else if(h(t,"tag-close")){i.selfClosing=t.value=="/>"
i.end.row=e.getCurrentTokenRow()
i.end.column=e.getCurrentTokenColumn()+t.value.length}}while(t=e.stepBackward())
return null}
this._pop=function(e,t){while(e.length){var i=e[e.length-1]
if(!t||i.tagName==t.tagName){return e.pop()}else if(this.voidElements.hasOwnProperty(t.tagName)){return}else if(this.voidElements.hasOwnProperty(i.tagName)){e.pop()
continue}else{return null}}}
this.getFoldWidgetRange=function(e,t,i){var n=this._getFirstTagInLine(e,i)
if(!n)return null
var r=n.closing||n.selfClosing
var o=[]
var l
if(!r){var c=new a(e,i,n.start.column)
var h={row:i,column:n.start.column+n.tagName.length+2}
while(l=this._readTagForward(c)){if(l.selfClosing){if(!o.length){l.start.column+=l.tagName.length+2
l.end.column-=2
return s.fromPoints(l.start,l.end)}else continue}if(l.closing){this._pop(o,l)
if(o.length==0)return s.fromPoints(h,l.start)}else{o.push(l)}}}else{var c=new a(e,i,n.end.column)
var u={row:i,column:n.start.column}
while(l=this._readTagBackward(c)){if(l.selfClosing){if(!o.length){l.start.column+=l.tagName.length+2
l.end.column-=2
return s.fromPoints(l.start,l.end)}else continue}if(!l.closing){this._pop(o,l)
if(o.length==0){l.start.column+=l.tagName.length+2
return s.fromPoints(l.start,u)}}else{o.push(l)}}}}}).call(l.prototype)})
ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(e,t,i){"use strict"
var n=e("../../lib/oop")
var r=e("./mixed").FoldMode
var s=e("./xml").FoldMode
var o=e("./cstyle").FoldMode
var a=t.FoldMode=function(e,t){r.call(this,new s(e,t),{"js-":new o,"css-":new o})}
n.inherits(a,r)})
ace.define("ace/mode/html_completions",["require","exports","module","ace/token_iterator"],function(e,t,i){"use strict"
var n=e("../token_iterator").TokenIterator
var r=["accesskey","class","contenteditable","contextmenu","dir","draggable","dropzone","hidden","id","inert","itemid","itemprop","itemref","itemscope","itemtype","lang","spellcheck","style","tabindex","title","translate"]
var s=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"]
var o=r.concat(s)
var a={html:["manifest"],head:[],title:[],base:["href","target"],link:["href","hreflang","rel","media","type","sizes"],meta:["http-equiv","name","content","charset"],style:["type","media","scoped"],script:["charset","type","src","defer","async"],noscript:["href"],body:["onafterprint","onbeforeprint","onbeforeunload","onhashchange","onmessage","onoffline","onpopstate","onredo","onresize","onstorage","onundo","onunload"],section:[],nav:[],article:["pubdate"],aside:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],footer:[],address:[],main:[],p:[],hr:[],pre:[],blockquote:["cite"],ol:["start","reversed"],ul:[],li:["value"],dl:[],dt:[],dd:[],figure:[],figcaption:[],div:[],a:["href","target","ping","rel","media","hreflang","type"],em:[],strong:[],small:[],s:[],cite:[],q:["cite"],dfn:[],abbr:[],data:[],time:["datetime"],code:[],"var":[],samp:[],kbd:[],sub:[],sup:[],i:[],b:[],u:[],mark:[],ruby:[],rt:[],rp:[],bdi:[],bdo:[],span:[],br:[],wbr:[],ins:["cite","datetime"],del:["cite","datetime"],img:["alt","src","height","width","usemap","ismap"],iframe:["name","src","height","width","sandbox","seamless"],embed:["src","height","width","type"],object:["param","data","type","height","width","usemap","name","form","classid"],param:["name","value"],video:["src","autobuffer","autoplay","loop","controls","width","height","poster"],audio:["src","autobuffer","autoplay","loop","controls"],source:["src","type","media"],track:["kind","src","srclang","label","default"],canvas:["width","height"],map:["name"],area:["shape","coords","href","hreflang","alt","target","media","rel","ping","type"],svg:[],math:[],table:["summary"],caption:[],colgroup:["span"],col:["span"],tbody:[],thead:[],tfoot:[],tr:[],td:["headers","rowspan","colspan"],th:["headers","rowspan","colspan","scope"],form:["accept-charset","action","autocomplete","enctype","method","name","novalidate","target"],fieldset:["disabled","form","name"],legend:[],label:["form","for"],input:["type","accept","alt","autocomplete","checked","disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","height","list","max","maxlength","min","multiple","pattern","placeholder","readonly","required","size","src","step","width","files","value"],button:["autofocus","disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","name","value","type"],select:["autofocus","disabled","form","multiple","name","size"],datalist:[],optgroup:["disabled","label"],option:["disabled","selected","label","value"],textarea:["autofocus","disabled","form","maxlength","name","placeholder","readonly","required","rows","cols","wrap"],keygen:["autofocus","challenge","disabled","form","keytype","name"],output:["for","form","name"],progress:["value","max"],meter:["value","min","max","low","high","optimum"],details:["open"],summary:[],command:["type","label","icon","disabled","checked","radiogroup","command"],menu:["type","label"],dialog:["open"]}
var l=Object.keys(a)
function c(e,t){return e.type.lastIndexOf(t+".xml")>-1}function h(e,t){var i=new n(e,t.row,t.column)
var r=i.getCurrentToken()
while(r&&!c(r,"tag-name")){r=i.stepBackward()}if(r)return r.value}var u=function(){};(function(){this.getCompletions=function(e,t,i,n){var r=t.getTokenAt(i.row,i.column)
if(!r)return[]
if(c(r,"tag-name")||c(r,"tag-open")||c(r,"end-tag-open"))return this.getTagCompletions(e,t,i,n)
if(c(r,"tag-whitespace")||c(r,"attribute-name"))return this.getAttributeCompetions(e,t,i,n)
return[]}
this.getTagCompletions=function(e,t,i,n){return l.map(function(e){return{value:e,meta:"tag",score:Number.MAX_VALUE}})}
this.getAttributeCompetions=function(e,t,i,n){var r=h(t,i)
if(!r)return[]
var s=o
if(r in a){s=s.concat(a[r])}return s.map(function(e){return{caption:e,snippet:e+'="$0"',meta:"attribute",score:Number.MAX_VALUE}})}}).call(u.prototype)
t.HtmlCompletions=u})
ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html","ace/mode/html_completions","ace/worker/worker_client"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("../lib/lang")
var s=e("./text").Mode
var o=e("./javascript").Mode
var a=e("./css").Mode
var l=e("./html_highlight_rules").HtmlHighlightRules
var c=e("./behaviour/xml").XmlBehaviour
var h=e("./folding/html").FoldMode
var u=e("./html_completions").HtmlCompletions
var d=e("../worker/worker_client").WorkerClient
var f=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]
var g=["li","dt","dd","p","rt","rp","optgroup","option","colgroup","td","th"]
var m=function(e){this.fragmentContext=e&&e.fragmentContext
this.HighlightRules=l
this.$behaviour=new c
this.$completer=new u
this.createModeDelegates({"js-":o,"css-":a})
this.foldingRules=new h(this.voidElements,r.arrayToMap(g))}
n.inherits(m,s);(function(){this.blockComment={start:"<!--",end:"-->"}
this.voidElements=r.arrayToMap(f)
this.getNextLineIndent=function(e,t,i){return this.$getIndent(t)}
this.checkOutdent=function(e,t,i){return false}
this.getCompletions=function(e,t,i,n){return this.$completer.getCompletions(e,t,i,n)}
this.createWorker=function(e){if(this.constructor!=m)return
var t=new d(["ace"],"ace/mode/html_worker","Worker")
t.attachToDocument(e.getDocument())
if(this.fragmentContext)t.call("setOptions",[{context:this.fragmentContext}])
t.on("error",function(t){e.setAnnotations(t.data)})
t.on("terminate",function(){e.clearAnnotations()})
return t}
this.$id="ace/mode/html"}).call(m.prototype)
t.Mode=m})
ace.define("ace/ext/static_highlight",["require","exports","module","ace/edit_session","ace/layer/text","ace/config","ace/lib/dom"],function(e,t,i){"use strict"
var n=e("../edit_session").EditSession
var r=e("../layer/text").Text
var s=".ace_static_highlight {font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', 'Droid Sans Mono', monospace;font-size: 12px;}.ace_static_highlight .ace_gutter {width: 25px !important;display: block;float: left;text-align: right;padding: 0 3px 0 0;margin-right: 3px;position: static !important;}.ace_static_highlight .ace_line { clear: both; }.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}"
var o=e("../config")
var a=e("../lib/dom")
var l=function(e,t,i){var n=e.className.match(/lang-(\w+)/)
var r=t.mode||n&&"ace/mode/"+n[1]
if(!r)return false
var s=t.theme||"ace/theme/textmate"
var o=""
var c=[]
if(e.firstElementChild){var h=0
for(var u=0;u<e.childNodes.length;u++){var d=e.childNodes[u]
if(d.nodeType==3){h+=d.data.length
o+=d.data}else{c.push(h,d)}}}else{o=a.getInnerText(e)
if(t.trim)o=o.trim()}l.render(o,r,s,t.firstLineNumber,!t.showGutter,function(t){a.importCssString(t.css,"ace_highlight")
e.innerHTML=t.html
var n=e.firstChild.firstChild
for(var r=0;r<c.length;r+=2){var s=t.session.doc.indexToPosition(c[r])
var o=c[r+1]
var l=n.children[s.row]
l&&l.appendChild(o)}i&&i()})}
l.render=function(e,t,i,r,s,a){var c=1
var h=n.prototype.$modes
if(typeof i=="string"){c++
o.loadModule(["theme",i],function(e){i=e;--c||u()})}if(typeof t=="string"){c++
o.loadModule(["mode",t],function(e){if(!h[t])h[t]=new e.Mode
t=h[t];--c||u()})}function u(){var n=l.renderSync(e,t,i,r,s)
return a?a(n):n}return--c||u()}
l.renderSync=function(e,t,i,o,a){o=parseInt(o||1,10)
var l=new n("")
l.setUseWorker(false)
l.setMode(t)
var c=new r(document.createElement("div"))
c.setSession(l)
c.config={characterWidth:10,lineHeight:20}
l.setValue(e)
var h=[]
var u=l.getLength()
for(var d=0;d<u;d++){h.push("<div class='ace_line'>")
if(!a)h.push("<span class='ace_gutter ace_gutter-cell' unselectable='on'>"+"</span>")
c.$renderLine(h,d,true,false)
h.push("\n</div>")}var f="<div class='"+i.cssClass+"'>"+"<div class='ace_static_highlight' style='counter-reset:ace_line "+(o-1)+"'>"+h.join("")+"</div>"+"</div>"
c.destroy()
return{css:s+i.cssText,html:f,session:l}}
i.exports=l
i.exports.highlight=l});(function(){ace.require(["ace/ext/static_highlight"],function(){})})()
ace.define("ace/mode/sql_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text_highlight_rules").TextHighlightRules
var s=function(){var e="select|insert|update|delete|from|where|and|or|group|by|order|limit|offset|having|as|case|"+"when|else|end|type|left|right|join|on|outer|desc|asc"
var t="true|false|null"
var i="count|min|max|avg|sum|rank|now|coalesce"
var n=this.createKeywordMapper({"support.function":i,keyword:e,"constant.language":t},"identifier",true)
this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"string",regex:"'.*?'"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:n,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\/\\/|%|<@>|@>|<@|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]}
this.normalizeRules()}
n.inherits(s,r)
t.SqlHighlightRules=s})
ace.define("ace/mode/sql",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sql_highlight_rules","ace/range"],function(e,t,i){"use strict"
var n=e("../lib/oop")
var r=e("./text").Mode
var s=e("./sql_highlight_rules").SqlHighlightRules
var o=e("../range").Range
var a=function(){this.HighlightRules=s}
n.inherits(a,r);(function(){this.lineCommentStart="--"
this.$id="ace/mode/sql"}).call(a.prototype)
t.Mode=a})
ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],function(e,t,i){"use strict"
var n=e("../lib/dom")
var r=e("../lib/lang")
var s=e("../lib/event")
var o=".ace_search {background-color: #ddd;border: 1px solid #cbcbcb;border-top: 0 none;max-width: 297px;overflow: hidden;margin: 0;padding: 4px;padding-right: 6px;padding-bottom: 0;position: absolute;top: 0px;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {border-radius: 3px;border: 1px solid #cbcbcb;float: left;margin-bottom: 4px;overflow: hidden;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {background-color: white;border-right: 1px solid #cbcbcb;border: 0 none;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;display: block;float: left;height: 22px;outline: 0;padding: 0 7px;width: 214px;margin: 0;}.ace_searchbtn,.ace_replacebtn {background: #fff;border: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;display: block;float: left;height: 22px;margin: 0;padding: 0;position: relative;}.ace_searchbtn:last-child,.ace_replacebtn:last-child {border-top-right-radius: 3px;border-bottom-right-radius: 3px;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn {background-position: 50% 50%;background-repeat: no-repeat;width: 27px;}.ace_searchbtn.prev {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiSU1NZUAC/6E0I0yACYskCpsJiySKIiY0SUZk40FyTEgCjGgKwTRAgAEAQJUIPCE+qfkAAAAASUVORK5CYII=);    }.ace_searchbtn.next {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNpiTE1NZQCC/0DMyIAKwGJMUAYDEo3M/s+EpvM/mkKwCQxYjIeLMaELoLMBAgwAU7UJObTKsvAAAAAASUVORK5CYII=);    }.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;display: block;float: right;font-family: Arial;font-size: 16px;height: 14px;line-height: 16px;margin: 5px 1px 9px 5px;padding: 0;text-align: center;width: 14px;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_replacebtn.prev {width: 54px}.ace_replacebtn.next {width: 27px}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;-moz-box-sizing: border-box;box-sizing:    border-box;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;}"
var a=e("../keyboard/hash_handler").HashHandler
var l=e("../lib/keys")
n.importCssString(o,"ace_searchbox")
var c='<div class="ace_search right">    <button type="button" action="hide" class="ace_searchbtn_close"></button>    <div class="ace_search_form">        <input class="ace_search_field" placeholder="Search for" spellcheck="false"></input>        <button type="button" action="findNext" class="ace_searchbtn next"></button>        <button type="button" action="findPrev" class="ace_searchbtn prev"></button>    </div>    <div class="ace_replace_form">        <input class="ace_search_field" placeholder="Replace with" spellcheck="false"></input>        <button type="button" action="replaceAndFindNext" class="ace_replacebtn">Replace</button>        <button type="button" action="replaceAll" class="ace_replacebtn">All</button>    </div>    <div class="ace_search_options">        <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>        <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>        <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>    </div></div>'.replace(/>\s+/g,">")
var h=function(e,t,i){var r=n.createElement("div")
r.innerHTML=c
this.element=r.firstChild
this.$init()
this.setEditor(e)};(function(){this.setEditor=function(e){e.searchBox=this
e.container.appendChild(this.element)
this.editor=e}
this.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form")
this.replaceBox=e.querySelector(".ace_replace_form")
this.searchOptions=e.querySelector(".ace_search_options")
this.regExpOption=e.querySelector("[action=toggleRegexpMode]")
this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]")
this.wholeWordOption=e.querySelector("[action=toggleWholeWords]")
this.searchInput=this.searchBox.querySelector(".ace_search_field")
this.replaceInput=this.replaceBox.querySelector(".ace_search_field")}
this.$init=function(){var e=this.element
this.$initElements(e)
var t=this
s.addListener(e,"mousedown",function(e){setTimeout(function(){t.activeInput.focus()},0)
s.stopPropagation(e)})
s.addListener(e,"click",function(e){var i=e.target||e.srcElement
var n=i.getAttribute("action")
if(n&&t[n])t[n]()
else if(t.$searchBarKb.commands[n])t.$searchBarKb.commands[n].exec(t)
s.stopPropagation(e)})
s.addCommandKeyListener(e,function(e,i,n){var r=l.keyCodeToString(n)
var o=t.$searchBarKb.findKeyCommand(i,r)
if(o&&o.exec){o.exec(t)
s.stopEvent(e)}})
this.$onChange=r.delayedCall(function(){t.find(false,false)})
s.addListener(this.searchInput,"input",function(){t.$onChange.schedule(20)})
s.addListener(this.searchInput,"focus",function(){t.activeInput=t.searchInput
t.searchInput.value&&t.highlight()})
s.addListener(this.replaceInput,"focus",function(){t.activeInput=t.replaceInput
t.searchInput.value&&t.highlight()})}
this.$closeSearchBarKb=new a([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}])
this.$searchBarKb=new a
this.$searchBarKb.bindKeys({"Ctrl-f|Command-f|Ctrl-H|Command-Option-F":function(e){var t=e.isReplace=!e.isReplace
e.replaceBox.style.display=t?"":"none"
e[t?"replaceInput":"searchInput"].focus()},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout(function(){e.hide()})},Return:function(e){if(e.activeInput==e.replaceInput)e.replace()
e.findNext()},"Shift-Return":function(e){if(e.activeInput==e.replaceInput)e.replace()
e.findPrev()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}})
this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked
e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked
e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked
e.$syncOptions()}}])
this.$syncOptions=function(){n.setCssClass(this.regExpOption,"checked",this.regExpOption.checked)
n.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked)
n.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked)
this.find(false,false)}
this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re)
this.editor.renderer.updateBackMarkers()}
this.find=function(e,t){var i=this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:true,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})
var r=!i&&this.searchInput.value
n.setCssClass(this.searchBox,"ace_nomatch",r)
this.editor._emit("findSearchBox",{match:!r})
this.highlight()}
this.findNext=function(){this.find(true,false)}
this.findPrev=function(){this.find(true,true)}
this.replace=function(){if(!this.editor.getReadOnly())this.editor.replace(this.replaceInput.value)}
this.replaceAndFindNext=function(){if(!this.editor.getReadOnly()){this.editor.replace(this.replaceInput.value)
this.findNext()}}
this.replaceAll=function(){if(!this.editor.getReadOnly())this.editor.replaceAll(this.replaceInput.value)}
this.hide=function(){this.element.style.display="none"
this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb)
this.editor.focus()}
this.show=function(e,t){this.element.style.display=""
this.replaceBox.style.display=t?"":"none"
this.isReplace=t
if(e)this.searchInput.value=e
this.searchInput.focus()
this.searchInput.select()
this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb)}}).call(h.prototype)
t.SearchBox=h
t.Search=function(e,t){var i=e.searchBox||new h(e)
i.show(e.session.getTextRange(),t)}});(function(){ace.require(["ace/ext/searchbox"],function(){})})()
ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(e,t,i){"use strict"
var n=e("./lib/oop")
var r=e("./lib/event_emitter").EventEmitter
var s=e("./lib/lang")
var o=e("./range").Range
var a=e("./anchor").Anchor
var l=e("./keyboard/hash_handler").HashHandler
var c=e("./tokenizer").Tokenizer
var h=o.comparePoints
var u=function(){this.snippetMap={}
this.snippetNameMap={}};(function(){n.implement(this,r)
this.getTokenizer=function(){function e(e,t,i){e=e.substr(1)
if(/^\d+$/.test(e)&&!i.inFormatString)return[{tabstopId:parseInt(e,10)}]
return[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}u.$tokenizer=new c({start:[{regex:/:/,onMatch:function(e,t,i){if(i.length&&i[0].expectIf){i[0].expectIf=false
i[0].elseBranch=i[0]
return[i[0]]}return":"}},{regex:/\\./,onMatch:function(e,t,i){var n=e[1]
if(n=="}"&&i.length){e=n}else if("`$\\".indexOf(n)!=-1){e=n}else if(i.inFormatString){if(n=="n")e="\n"
else if(n=="t")e="\n"
else if("ulULE".indexOf(n)!=-1){e={changeCase:n,local:n>"a"}}}return[e]}},{regex:/}/,onMatch:function(e,t,i){return[i.length?i.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,i,n){var r=e(t.substr(1),i,n)
n.unshift(r[0])
return r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:false}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,i){i[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+t("/")+"+)/(?:("+t("/")+"*)/)(\\w*):?",onMatch:function(e,t,i){var n=i[0]
n.fmtString=e
e=this.splitRegex.exec(e)
n.guard=e[1]
n.fmt=e[2]
n.flag=e[3]
return""},next:"start"},{regex:"`"+t("`")+"*`",onMatch:function(e,t,i){i[0].code=e.splice(1,-1)
return""},next:"start"},{regex:"\\?",onMatch:function(e,t,i){if(i[0])i[0].expectIf=true},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+t("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,i){i.inFormatString=true},next:"start"}]})
u.prototype.getTokenizer=function(){return u.$tokenizer}
return u.$tokenizer}
this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})}
this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var i=t.substr(1)
return(this.variables[t[0]+"__"]||{})[i]}if(/^\d+$/.test(t)){return(this.variables.__||{})[t]}t=t.replace(/^TM_/,"")
if(!e)return
var n=e.session
switch(t){case"CURRENT_WORD":var r=n.getWordRange()
case"SELECTION":case"SELECTED_TEXT":return n.getTextRange(r)
case"CURRENT_LINE":return n.getLine(e.getCursorPosition().row)
case"PREV_LINE":return n.getLine(e.getCursorPosition().row-1)
case"LINE_INDEX":return e.getCursorPosition().column
case"LINE_NUMBER":return e.getCursorPosition().row+1
case"SOFT_TABS":return n.getUseSoftTabs()?"YES":"NO"
case"TAB_SIZE":return n.getTabSize()
case"FILENAME":case"FILEPATH":return""
case"FULLNAME":return"Ace"}}
this.variables={}
this.getVariableValue=function(e,t){if(this.variables.hasOwnProperty(t))return this.variables[t](e,t)||""
return this.$getDefaultValue(e,t)||""}
this.tmStrFormat=function(e,t,i){var n=t.flag||""
var r=t.guard
r=new RegExp(r,n.replace(/[^gi]/,""))
var s=this.tokenizeTmSnippet(t.fmt,"formatString")
var o=this
var a=e.replace(r,function(){o.variables.__=arguments
var e=o.resolveVariables(s,i)
var t="E"
for(var n=0;n<e.length;n++){var r=e[n]
if(typeof r=="object"){e[n]=""
if(r.changeCase&&r.local){var a=e[n+1]
if(a&&typeof a=="string"){if(r.changeCase=="u")e[n]=a[0].toUpperCase()
else e[n]=a[0].toLowerCase()
e[n+1]=a.substr(1)}}else if(r.changeCase){t=r.changeCase}}else if(t=="U"){e[n]=r.toUpperCase()}else if(t=="L"){e[n]=r.toLowerCase()}}return e.join("")})
this.variables.__=null
return a}
this.resolveVariables=function(e,t){var i=[]
for(var n=0;n<e.length;n++){var r=e[n]
if(typeof r=="string"){i.push(r)}else if(typeof r!="object"){continue}else if(r.skip){o(r)}else if(r.processed<n){continue}else if(r.text){var s=this.getVariableValue(t,r.text)
if(s&&r.fmtString)s=this.tmStrFormat(s,r)
r.processed=n
if(r.expectIf==null){if(s){i.push(s)
o(r)}}else{if(s){r.skip=r.elseBranch}else o(r)}}else if(r.tabstopId!=null){i.push(r)}else if(r.changeCase!=null){i.push(r)}}function o(t){var i=e.indexOf(t,n+1)
if(i!=-1)n=i}return i}
this.insertSnippetForSelection=function(e,t){var i=e.getCursorPosition()
var n=e.session.getLine(i.row)
var r=e.session.getTabString()
var s=n.match(/^\s*/)[0]
if(i.column<s.length)s=s.slice(0,i.column)
var o=this.tokenizeTmSnippet(t)
o=this.resolveVariables(o,e)
o=o.map(function(e){if(e=="\n")return e+s
if(typeof e=="string")return e.replace(/\t/g,r)
return e})
var a=[]
o.forEach(function(e,t){if(typeof e!="object")return
var i=e.tabstopId
var n=a[i]
if(!n){n=a[i]=[]
n.index=i
n.value=""}if(n.indexOf(e)!==-1)return
n.push(e)
var r=o.indexOf(e,t+1)
if(r===-1)return
var s=o.slice(t+1,r)
var l=s.some(function(e){return typeof e==="object"})
if(l&&!n.value){n.value=s}else if(s.length&&(!n.value||typeof n.value!=="string")){n.value=s.join("")}})
a.forEach(function(e){e.length=0})
var l={}
function c(e){var t=[]
for(var i=0;i<e.length;i++){var n=e[i]
if(typeof n=="object"){if(l[n.tabstopId])continue
var r=e.lastIndexOf(n,i-1)
n=t[r]||{tabstopId:n.tabstopId}}t[i]=n}return t}for(var h=0;h<o.length;h++){var u=o[h]
if(typeof u!="object")continue
var f=u.tabstopId
var g=o.indexOf(u,h+1)
if(l[f]){if(l[f]===u)l[f]=null
continue}var m=a[f]
var p=typeof m.value=="string"?[m.value]:c(m.value)
p.unshift(h+1,Math.max(0,g-h))
p.push(u)
l[f]=u
o.splice.apply(o,p)
if(m.indexOf(u)===-1)m.push(u)}var v=0,A=0
var w=""
o.forEach(function(e){if(typeof e==="string"){if(e[0]==="\n"){A=e.length-1
v++}else A+=e.length
w+=e}else{if(!e.start)e.start={row:v,column:A}
else e.end={row:v,column:A}}})
var C=e.getSelectionRange()
var F=e.session.replace(C,w)
var b=new d(e)
var E=e.inVirtualSelectionMode&&e.selection.index
b.addTabstops(a,C.start,F,E)}
this.insertSnippet=function(e,t){var i=this
if(e.inVirtualSelectionMode)return i.insertSnippetForSelection(e,t)
e.forEachSelection(function(){i.insertSnippetForSelection(e,t)},null,{keepOrder:true})
if(e.tabstopManager)e.tabstopManager.tabNext()}
this.$getScope=function(e){var t=e.session.$mode.$id||""
t=t.split("/").pop()
if(t==="html"||t==="php"){if(t==="php"&&!e.session.$mode.inlinePhp)t="html"
var i=e.getCursorPosition()
var n=e.session.getState(i.row)
if(typeof n==="object"){n=n[0]}if(n.substring){if(n.substring(0,3)=="js-")t="javascript"
else if(n.substring(0,4)=="css-")t="css"
else if(n.substring(0,4)=="php-")t="php"}}return t}
this.getActiveScopes=function(e){var t=this.$getScope(e)
var i=[t]
var n=this.snippetMap
if(n[t]&&n[t].includeScopes){i.push.apply(i,n[t].includeScopes)}i.push("_")
return i}
this.expandWithTab=function(e,t){var i=this
var n=e.forEachSelection(function(){return i.expandSnippetForSelection(e,t)},null,{keepOrder:true})
if(n&&e.tabstopManager)e.tabstopManager.tabNext()
return n}
this.expandSnippetForSelection=function(e,t){var i=e.getCursorPosition()
var n=e.session.getLine(i.row)
var r=n.substring(0,i.column)
var s=n.substr(i.column)
var o=this.snippetMap
var a
this.getActiveScopes(e).some(function(e){var t=o[e]
if(t)a=this.findMatchingSnippet(t,r,s)
return!!a},this)
if(!a)return false
if(t&&t.dryRun)return true
e.session.doc.removeInLine(i.row,i.column-a.replaceBefore.length,i.column+a.replaceAfter.length)
this.variables.M__=a.matchBefore
this.variables.T__=a.matchAfter
this.insertSnippetForSelection(e,a.content)
this.variables.M__=this.variables.T__=null
return true}
this.findMatchingSnippet=function(e,t,i){for(var n=e.length;n--;){var r=e[n]
if(r.startRe&&!r.startRe.test(t))continue
if(r.endRe&&!r.endRe.test(i))continue
if(!r.startRe&&!r.endRe)continue
r.matchBefore=r.startRe?r.startRe.exec(t):[""]
r.matchAfter=r.endRe?r.endRe.exec(i):[""]
r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:""
r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(i)[0]:""
return r}}
this.snippetMap={}
this.snippetNameMap={}
this.register=function(e,t){var i=this.snippetMap
var n=this.snippetNameMap
var r=this
function o(e){if(e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e))e="(?:"+e+")"
return e||""}function a(e,t,i){e=o(e)
t=o(t)
if(i){e=t+e
if(e&&e[e.length-1]!="$")e=e+"$"}else{e=e+t
if(e&&e[0]!="^")e="^"+e}return new RegExp(e)}function l(e){if(!e.scope)e.scope=t||"_"
t=e.scope
if(!i[t]){i[t]=[]
n[t]={}}var o=n[t]
if(e.name){var l=o[e.name]
if(l)r.unregister(l)
o[e.name]=e}i[t].push(e)
if(e.tabTrigger&&!e.trigger){if(!e.guard&&/^\w/.test(e.tabTrigger))e.guard="\\b"
e.trigger=s.escapeRegExp(e.tabTrigger)}e.startRe=a(e.trigger,e.guard,true)
e.triggerRe=new RegExp(e.trigger,"",true)
e.endRe=a(e.endTrigger,e.endGuard,true)
e.endTriggerRe=new RegExp(e.endTrigger,"",true)}if(e.content)l(e)
else if(Array.isArray(e))e.forEach(l)
this._signal("registerSnippets",{scope:t})}
this.unregister=function(e,t){var i=this.snippetMap
var n=this.snippetNameMap
function r(e){var r=n[e.scope||t]
if(r&&r[e.name]){delete r[e.name]
var s=i[e.scope||t]
var o=s&&s.indexOf(e)
if(o>=0)s.splice(o,1)}}if(e.content)r(e)
else if(Array.isArray(e))e.forEach(r)}
this.parseSnippetFile=function(e){e=e.replace(/\r/g,"")
var t=[],i={}
var n=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm
var r
while(r=n.exec(e)){if(r[1]){try{i=JSON.parse(r[1])
t.push(i)}catch(s){}}if(r[4]){i.content=r[4].replace(/^\t/gm,"")
t.push(i)
i={}}else{var o=r[2],a=r[3]
if(o=="regex"){var l=/\/((?:[^\/\\]|\\.)*)|$/g
i.guard=l.exec(a)[1]
i.trigger=l.exec(a)[1]
i.endTrigger=l.exec(a)[1]
i.endGuard=l.exec(a)[1]}else if(o=="snippet"){i.tabTrigger=a.match(/^\S*/)[0]
if(!i.name)i.name=a}else{i[o]=a}}}return t}
this.getSnippetByName=function(e,t){var i=this.snippetNameMap
var n
this.getActiveScopes(t).some(function(t){var r=i[t]
if(r)n=r[e]
return!!n},this)
return n}}).call(u.prototype)
var d=function(e){if(e.tabstopManager)return e.tabstopManager
e.tabstopManager=this
this.$onChange=this.onChange.bind(this)
this.$onChangeSelection=s.delayedCall(this.onChangeSelection.bind(this)).schedule
this.$onChangeSession=this.onChangeSession.bind(this)
this.$onAfterExec=this.onAfterExec.bind(this)
this.attach(e)};(function(){this.attach=function(e){this.index=0
this.ranges=[]
this.tabstops=[]
this.$openTabstops=null
this.selectedTabstop=null
this.editor=e
this.editor.on("change",this.$onChange)
this.editor.on("changeSelection",this.$onChangeSelection)
this.editor.on("changeSession",this.$onChangeSession)
this.editor.commands.on("afterExec",this.$onAfterExec)
this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}
this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this)
this.ranges=null
this.tabstops=null
this.selectedTabstop=null
this.editor.removeListener("change",this.$onChange)
this.editor.removeListener("changeSelection",this.$onChangeSelection)
this.editor.removeListener("changeSession",this.$onChangeSession)
this.editor.commands.removeListener("afterExec",this.$onAfterExec)
this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler)
this.editor.tabstopManager=null
this.editor=null}
this.onChange=function(e){var t=e.data.range
var i=e.data.action[0]=="r"
var n=t.start
var r=t.end
var s=n.row
var o=r.row
var a=o-s
var l=r.column-n.column
if(i){a=-a
l=-l}if(!this.$inChange&&i){var c=this.selectedTabstop
var u=c&&!c.some(function(e){return h(e.start,n)<=0&&h(e.end,r)>=0})
if(u)return this.detach()}var d=this.ranges
for(var f=0;f<d.length;f++){var g=d[f]
if(g.end.row<n.row)continue
if(i&&h(n,g.start)<0&&h(r,g.end)>0){this.removeRange(g)
f--
continue}if(g.start.row==s&&g.start.column>n.column)g.start.column+=l
if(g.end.row==s&&g.end.column>=n.column)g.end.column+=l
if(g.start.row>=s)g.start.row+=a
if(g.end.row>=s)g.end.row+=a
if(h(g.start,g.end)>0)this.removeRange(g)}if(!d.length)this.detach()}
this.updateLinkedFields=function(){var e=this.selectedTabstop
if(!e||!e.hasLinkedRanges)return
this.$inChange=true
var i=this.editor.session
var n=i.getTextRange(e.firstNonLinked)
for(var r=e.length;r--;){var s=e[r]
if(!s.linked)continue
var o=t.snippetManager.tmStrFormat(n,s.original)
i.replace(s,o)}this.$inChange=false}
this.onAfterExec=function(e){if(e.command&&!e.command.readOnly)this.updateLinkedFields()}
this.onChangeSelection=function(){if(!this.editor)return
var e=this.editor.selection.lead
var t=this.editor.selection.anchor
var i=this.editor.selection.isEmpty()
for(var n=this.ranges.length;n--;){if(this.ranges[n].linked)continue
var r=this.ranges[n].contains(e.row,e.column)
var s=i||this.ranges[n].contains(t.row,t.column)
if(r&&s)return}this.detach()}
this.onChangeSession=function(){this.detach()}
this.tabNext=function(e){var t=this.tabstops.length
var i=this.index+(e||1)
i=Math.min(Math.max(i,1),t)
if(i==t)i=0
this.selectTabstop(i)
if(i===0)this.detach()}
this.selectTabstop=function(e){this.$openTabstops=null
var t=this.tabstops[this.index]
if(t)this.addTabstopMarkers(t)
this.index=e
t=this.tabstops[this.index]
if(!t||!t.length)return
this.selectedTabstop=t
if(!this.editor.inVirtualSelectionMode){var i=this.editor.multiSelect
i.toSingleRange(t.firstNonLinked.clone())
for(var n=t.length;n--;){if(t.hasLinkedRanges&&t[n].linked)continue
i.addRange(t[n].clone(),true)}if(i.ranges[0])i.addRange(i.ranges[0].clone())}else{this.editor.selection.setRange(t.firstNonLinked)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}
this.addTabstops=function(e,t,i){if(!this.$openTabstops)this.$openTabstops=[]
if(!e[0]){var n=o.fromPoints(i,i)
m(n.start,t)
m(n.end,t)
e[0]=[n]
e[0].index=0}var r=this.index
var s=[r+1,0]
var a=this.ranges
e.forEach(function(e,i){var n=this.$openTabstops[i]||e
for(var r=e.length;r--;){var l=e[r]
var c=o.fromPoints(l.start,l.end||l.start)
g(c.start,t)
g(c.end,t)
c.original=l
c.tabstop=n
a.push(c)
if(n!=e)n.unshift(c)
else n[r]=c
if(l.fmtString){c.linked=true
n.hasLinkedRanges=true}else if(!n.firstNonLinked)n.firstNonLinked=c}if(!n.firstNonLinked)n.hasLinkedRanges=false
if(n===e){s.push(n)
this.$openTabstops[i]=n}this.addTabstopMarkers(n)},this)
if(s.length>2){if(this.tabstops.length)s.push(s.splice(2,1)[0])
this.tabstops.splice.apply(this.tabstops,s)}}
this.addTabstopMarkers=function(e){var t=this.editor.session
e.forEach(function(e){if(!e.markerId)e.markerId=t.addMarker(e,"ace_snippet-marker","text")})}
this.removeTabstopMarkers=function(e){var t=this.editor.session
e.forEach(function(e){t.removeMarker(e.markerId)
e.markerId=null})}
this.removeRange=function(e){var t=e.tabstop.indexOf(e)
e.tabstop.splice(t,1)
t=this.ranges.indexOf(e)
this.ranges.splice(t,1)
this.editor.session.removeMarker(e.markerId)
if(!e.tabstop.length){t=this.tabstops.indexOf(e.tabstop)
if(t!=-1)this.tabstops.splice(t,1)
if(!this.tabstops.length)this.detach()}}
this.keyboardHandler=new l
this.keyboardHandler.bindKeys({Tab:function(e){if(t.snippetManager&&t.snippetManager.expandWithTab(e)){return}e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(e){return false}})}).call(d.prototype)
var f={}
f.onChange=a.prototype.onChange
f.setPosition=function(e,t){this.pos.row=e
this.pos.column=t}
f.update=function(e,t,i){this.$insertRight=i
this.pos=e
this.onChange(t)}
var g=function(e,t){if(e.row==0)e.column+=t.column
e.row+=t.row}
var m=function(e,t){if(e.row==t.row)e.column-=t.column
e.row-=t.row}
e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}")
t.snippetManager=new u
var p=e("./editor").Editor;(function(){this.insertSnippet=function(e,i){return t.snippetManager.insertSnippet(this,e,i)}
this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(p.prototype)})
ace.define("ace/autocomplete/popup",["require","exports","module","ace/edit_session","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,i){"use strict"
var n=e("../edit_session").EditSession
var r=e("../virtual_renderer").VirtualRenderer
var s=e("../editor").Editor
var o=e("../range").Range
var a=e("../lib/event")
var l=e("../lib/lang")
var c=e("../lib/dom")
var h=function(e){var t=new r(e)
t.$maxLines=4
var i=new s(t)
i.setHighlightActiveLine(false)
i.setShowPrintMargin(false)
i.renderer.setShowGutter(false)
i.renderer.setHighlightGutterLine(false)
i.$mouseHandler.$focusWaitTimout=0
return i}
var u=function(e){var t=c.createElement("div")
var i=new h(t)
if(e)e.appendChild(t)
t.style.display="none"
i.renderer.content.style.cursor="default"
i.renderer.setStyle("ace_autocomplete")
i.setOption("displayIndentGuides",false)
var n=function(){}
i.focus=n
i.$isFocused=true
i.renderer.$cursorLayer.restartTimer=n
i.renderer.$cursorLayer.element.style.opacity=0
i.renderer.$maxLines=8
i.renderer.$keepTextAreaAtCursor=false
i.setHighlightActiveLine(false)
i.session.highlight("")
i.session.$searchHighlight.clazz="ace_highlight-marker"
i.on("mousedown",function(e){var t=e.getDocumentPosition()
i.selection.moveToPosition(t)
u.start.row=u.end.row=t.row
e.stop()})
var r
var s=new o(-1,0,-1,Infinity)
var u=new o(-1,0,-1,Infinity)
u.id=i.session.addMarker(u,"ace_active-line","fullLine")
i.setSelectOnHover=function(e){if(!e){s.id=i.session.addMarker(s,"ace_line-hover","fullLine")}else if(s.id){i.session.removeMarker(s.id)
s.id=null}}
i.setSelectOnHover(false)
i.on("mousemove",function(e){if(!r){r=e
return}if(r.x==e.x&&r.y==e.y){return}r=e
r.scrollTop=i.renderer.scrollTop
var t=r.getDocumentPosition().row
if(s.start.row!=t){if(!s.id)i.setRow(t)
f(t)}})
i.renderer.on("beforeRender",function(){if(r&&s.start.row!=-1){r.$pos=null
var e=r.getDocumentPosition().row
if(!s.id)i.setRow(e)
f(e,true)}})
i.renderer.on("afterRender",function(){var e=i.getRow()
var t=i.renderer.$textLayer
var n=t.element.childNodes[e-t.config.firstRow]
if(n==t.selectedNode)return
if(t.selectedNode)c.removeCssClass(t.selectedNode,"ace_selected")
t.selectedNode=n
if(n)c.addCssClass(n,"ace_selected")})
var d=function(){f(-1)}
var f=function(e,t){if(e!==s.start.row){s.start.row=s.end.row=e
if(!t)i.session._emit("changeBackMarker")
i._emit("changeHoverMarker")}}
i.getHoveredRow=function(){return s.start.row}
a.addListener(i.container,"mouseout",d)
i.on("hide",d)
i.on("changeSelection",d)
i.session.doc.getLength=function(){return i.data.length}
i.session.doc.getLine=function(e){var t=i.data[e]
if(typeof t=="string")return t
return t&&t.value||""}
var g=i.session.bgTokenizer
g.$tokenizeRow=function(e){var t=i.data[e]
var n=[]
if(!t)return n
if(typeof t=="string")t={value:t}
if(!t.caption)t.caption=t.value
var r=-1
var s,o
for(var e=0;e<t.caption.length;e++){o=t.caption[e]
s=t.matchMask&1<<e?1:0
if(r!==s){n.push({type:t.className||""+(s?"completion-highlight":""),value:o})
r=s}else{n[n.length-1].value+=o}}if(t.meta){var a=i.renderer.$size.scrollerWidth/i.renderer.layerConfig.characterWidth
if(t.meta.length+t.caption.length<a-2)n.push({type:"rightAlignedText",value:t.meta})}return n}
g.$updateOnChange=n
g.start=n
i.session.$computeWidth=function(){return this.screenWidth=0}
i.isOpen=false
i.isTopdown=false
i.data=[]
i.setData=function(e){i.data=e||[]
i.setValue(l.stringRepeat("\n",e.length),-1)
i.setRow(0)}
i.getData=function(e){return i.data[e]}
i.getRow=function(){return u.start.row}
i.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e))
if(u.start.row!=e){i.selection.clearSelection()
u.start.row=u.end.row=e||0
i.session._emit("changeBackMarker")
i.moveCursorTo(e||0,0)
if(i.isOpen)i._signal("select")}}
i.on("changeSelection",function(){if(i.isOpen)i.setRow(i.selection.lead.row)})
i.hide=function(){this.container.style.display="none"
this._signal("hide")
i.isOpen=false}
i.show=function(e,t,n){var s=this.container
var o=window.innerHeight
var a=window.innerWidth
var l=this.renderer
var c=l.$maxLines*t*1.4
var h=e.top+this.$borderSize
if(h+c>o-t&&!n){s.style.top=""
s.style.bottom=o-h+"px"
i.isTopdown=false}else{h+=t
s.style.top=h+"px"
s.style.bottom=""
i.isTopdown=true}s.style.display=""
this.renderer.$textLayer.checkForSizeChanges()
var u=e.left
if(u+s.offsetWidth>a)u=a-s.offsetWidth
s.style.left=u+"px"
this._signal("show")
r=null
i.isOpen=true}
i.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize}
i.$imageSize=0
i.$borderSize=1
return i}
c.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}")
t.AcePopup=u})
ace.define("ace/autocomplete/util",["require","exports","module"],function(e,t,i){"use strict"
t.parForEach=function(e,t,i){var n=0
var r=e.length
if(r===0)i()
for(var s=0;s<r;s++){t(e[s],function(e,t){n++
if(n===r)i(e,t)})}}
var n=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/
t.retrievePrecedingIdentifier=function(e,t,i){i=i||n
var r=[]
for(var s=t-1;s>=0;s--){if(i.test(e[s]))r.push(e[s])
else break}return r.reverse().join("")}
t.retrieveFollowingIdentifier=function(e,t,i){i=i||n
var r=[]
for(var s=t;s<e.length;s++){if(i.test(e[s]))r.push(e[s])
else break}return r}})
ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/snippets"],function(e,t,i){"use strict"
var n=e("./keyboard/hash_handler").HashHandler
var r=e("./autocomplete/popup").AcePopup
var s=e("./autocomplete/util")
var o=e("./lib/event")
var a=e("./lib/lang")
var l=e("./snippets").snippetManager
var c=function(){this.autoInsert=true
this.autoSelect=true
this.keyboardHandler=new n
this.keyboardHandler.bindKeys(this.commands)
this.blurListener=this.blurListener.bind(this)
this.changeListener=this.changeListener.bind(this)
this.mousedownListener=this.mousedownListener.bind(this)
this.mousewheelListener=this.mousewheelListener.bind(this)
this.changeTimer=a.delayedCall(function(){this.updateCompletions(true)}.bind(this))};(function(){this.gatherCompletionsId=0
this.$init=function(){this.popup=new r(document.body||document.documentElement)
this.popup.on("click",function(e){this.insertMatch()
e.stop()}.bind(this))
this.popup.focus=this.editor.focus.bind(this.editor)}
this.openPopup=function(e,t,i){if(!this.popup)this.$init()
this.popup.setData(this.completions.filtered)
var n=e.renderer
this.popup.setRow(this.autoSelect?0:-1)
if(!i){this.popup.setTheme(e.getTheme())
this.popup.setFontSize(e.getFontSize())
var r=n.layerConfig.lineHeight
var s=n.$cursorLayer.getPixelPosition(this.base,true)
s.left-=this.popup.getTextLeftOffset()
var o=e.container.getBoundingClientRect()
s.top+=o.top-n.layerConfig.offset
s.left+=o.left-e.renderer.scrollLeft
s.left+=n.$gutterLayer.gutterWidth
this.popup.show(s,r)}}
this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler)
this.editor.off("changeSelection",this.changeListener)
this.editor.off("blur",this.blurListener)
this.editor.off("mousedown",this.mousedownListener)
this.editor.off("mousewheel",this.mousewheelListener)
this.changeTimer.cancel()
if(this.popup&&this.popup.isOpen){this.gatherCompletionsId=this.gatherCompletionsId+1}if(this.popup)this.popup.hide()
this.activated=false
this.completions=this.base=null}
this.changeListener=function(e){var t=this.editor.selection.lead
if(t.row!=this.base.row||t.column<this.base.column){this.detach()}if(this.activated)this.changeTimer.schedule()
else this.detach()}
this.blurListener=function(){var e=document.activeElement
if(e!=this.editor.textInput.getElement()&&e.parentNode!=this.popup.container)this.detach()}
this.mousedownListener=function(e){this.detach()}
this.mousewheelListener=function(e){this.detach()}
this.goTo=function(e){var t=this.popup.getRow()
var i=this.popup.session.getLength()-1
switch(e){case"up":t=t<=0?i:t-1
break
case"down":t=t>=i?-1:t+1
break
case"start":t=0
break
case"end":t=i
break}this.popup.setRow(t)}
this.insertMatch=function(e){if(!e)e=this.popup.getData(this.popup.getRow())
if(!e)return false
if(e.completer&&e.completer.insertMatch){e.completer.insertMatch(this.editor)}else{if(this.completions.filterText){var t=this.editor.selection.getAllRanges()
for(var i=0,n;n=t[i];i++){n.start.column-=this.completions.filterText.length
this.editor.session.remove(n)}}if(e.snippet)l.insertSnippet(this.editor,e.snippet)
else this.editor.execCommand("insertstring",e.value||e)}this.detach()}
this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Space:function(e){e.completer.detach()
e.insert(" ")},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(true)},Tab:function(e){var t=e.completer.insertMatch()
if(!t&&!e.tabstopManager)e.completer.goTo("down")
else return t},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}}
this.gatherCompletions=function(e,t){var i=e.getSession()
var n=e.getCursorPosition()
var r=i.getLine(n.row)
var o=s.retrievePrecedingIdentifier(r,n.column)
this.base=e.getCursorPosition()
this.base.column-=o.length
var a=[]
var l=e.completers.length
e.completers.forEach(function(r,c){r.getCompletions(e,i,n,o,function(n,r){if(!n)a=a.concat(r)
var o=e.getCursorPosition()
var c=i.getLine(o.row)
t(null,{prefix:s.retrievePrecedingIdentifier(c,o.column,r[0]&&r[0].identifierRegex),matches:a,finished:--l===0})})})
return true}
this.showPopup=function(e){if(this.editor)this.detach()
this.activated=true
this.editor=e
if(e.completer!=this){if(e.completer)e.completer.detach()
e.completer=this}e.keyBinding.addKeyboardHandler(this.keyboardHandler)
e.on("changeSelection",this.changeListener)
e.on("blur",this.blurListener)
e.on("mousedown",this.mousedownListener)
e.on("mousewheel",this.mousewheelListener)
this.updateCompletions()}
this.updateCompletions=function(e){if(e&&this.base&&this.completions){var t=this.editor.getCursorPosition()
var i=this.editor.session.getTextRange({start:this.base,end:t})
if(i==this.completions.filterText)return
this.completions.setFilter(i)
if(!this.completions.filtered.length)return this.detach()
if(this.completions.filtered.length==1&&this.completions.filtered[0].value==i&&!this.completions.filtered[0].snippet)return this.detach()
this.openPopup(this.editor,i,e)
return}var n=this.gatherCompletionsId
this.gatherCompletions(this.editor,function(t,i){var r=function(){if(!i.finished)return
return this.detach()}.bind(this)
var s=i.prefix
var o=i&&i.matches
if(!o||!o.length)return r()
if(s.indexOf(i.prefix)!==0||n!=this.gatherCompletionsId)return
this.completions=new h(o)
this.completions.setFilter(s)
var a=this.completions.filtered
if(!a.length)return r()
if(a.length==1&&a[0].value==s&&!a[0].snippet)return r()
if(this.autoInsert&&a.length==1)return this.insertMatch(a[0])
this.openPopup(this.editor,s,e)}.bind(this))}
this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()}}).call(c.prototype)
c.startCommand={name:"startAutocomplete",exec:function(e){if(!e.completer)e.completer=new c
e.completer.autoInsert=e.completer.autoSelect=true
e.completer.showPopup(e)
e.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"}
var h=function(e,t,i){this.all=e
this.filtered=e
this.filterText=t||""};(function(){this.setFilter=function(e){if(e.length>this.filterText&&e.lastIndexOf(this.filterText,0)===0)var t=this.filtered
else var t=this.all
this.filterText=e
t=this.filterCompletions(t,this.filterText)
t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score})
var i=null
t=t.filter(function(e){var t=e.value||e.caption||e.snippet
if(t===i)return false
i=t
return true})
this.filtered=t}
this.filterCompletions=function(e,t){var i=[]
var n=t.toUpperCase()
var r=t.toLowerCase()
e:for(var s=0,o;o=e[s];s++){var a=o.value||o.caption||o.snippet
if(!a)continue
var l=-1
var c=0
var h=0
var u,d
for(var f=0;f<t.length;f++){var g=a.indexOf(r[f],l+1)
var m=a.indexOf(n[f],l+1)
u=g>=0?m<0||g<m?g:m:m
if(u<0)continue e
d=u-l-1
if(d>0){if(l===-1)h+=10
h+=d}c=c|1<<u
l=u}o.matchMask=c
o.exactMatch=h?0:1
o.score=(o.score||0)-h
i.push(o)}return i}}).call(h.prototype)
t.Autocomplete=c
t.FilteredList=h})
ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,i){var n=e("../range").Range
var r=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/
function s(e,t){var i=e.getTextRange(n.fromPoints({row:0,column:0},t))
return i.split(r).length-1}function o(e,t){var i=s(e,t)
var n=e.getValue().split(r)
var o=Object.create(null)
var a=n[i]
n.forEach(function(e,t){if(!e||e===a)return
var r=Math.abs(i-t)
var s=n.length-r
if(o[e]){o[e]=Math.max(s,o[e])}else{o[e]=s}})
return o}t.getCompletions=function(e,t,i,n,r){var s=o(t,i,n)
var a=Object.keys(s)
r(null,a.map(function(e){return{name:e,value:e,score:s[e],meta:"local"}}))}})
ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,i){"use strict"
var n=e("../snippets").snippetManager
var r=e("../autocomplete").Autocomplete
var s=e("../config")
var o=e("../autocomplete/util")
var a=e("../autocomplete/text_completer")
var l={getCompletions:function(e,t,i,n,r){var s=e.session.getState(i.row)
var o=t.$mode.getCompletions(s,t,i,n)
r(null,o)}}
var c={getCompletions:function(e,t,i,r,s){var o=n.snippetMap
var a=[]
n.getActiveScopes(e).forEach(function(e){var t=o[e]||[]
for(var i=t.length;i--;){var n=t[i]
var r=n.name||n.tabTrigger
if(!r)continue
a.push({caption:r,snippet:n.content,meta:n.tabTrigger&&!n.name?n.tabTrigger+"⇥ ":"snippet"})}},this)
s(null,a)}}
var h=[c,a,l]
t.addCompleter=function(e){h.push(e)}
t.textCompleter=a
t.keyWordCompleter=l
t.snippetCompleter=c
var u={name:"expandSnippet",exec:function(e){var t=n.expandWithTab(e)
if(!t)e.execCommand("indent")},bindKey:"Tab"}
var d=function(e,t){f(t.session.$mode)}
var f=function(e){var t=e.$id
if(!n.files)n.files={}
g(t)
if(e.modes)e.modes.forEach(f)}
var g=function(e){if(!e||n.files[e])return
var t=e.replace("mode","snippets")
n.files[e]={}
s.loadModule(t,function(t){if(t){n.files[e]=t
if(!t.snippets&&t.snippetText)t.snippets=n.parseSnippetFile(t.snippetText)
n.register(t.snippets||[],t.scope)
if(t.includeScopes){n.snippetMap[t.scope].includeScopes=t.includeScopes
t.includeScopes.forEach(function(e){g("ace/mode/"+e)})}}})}
function m(e){var t=e.getCursorPosition()
var i=e.session.getLine(t.row)
var n=o.retrievePrecedingIdentifier(i,t.column)
e.completers.forEach(function(e){if(e.identifierRegexps){e.identifierRegexps.forEach(function(e){if(!n&&e)n=o.retrievePrecedingIdentifier(i,t.column,e)})}})
return n}var p=function(e){var t=e.editor
var i=e.args||""
var n=t.completer&&t.completer.activated
if(e.command.name==="backspace"){if(n&&!m(t))t.completer.detach()}else if(e.command.name==="insertstring"){var s=m(t)
if(s&&!n){if(!t.completer){t.completer=new r}t.completer.autoSelect=false
t.completer.autoInsert=false
t.completer.showPopup(t)}else if(!s&&n){t.completer.detach()}}}
var v=e("../editor").Editor
e("../config").defineOptions(v.prototype,"editor",{enableBasicAutocompletion:{set:function(e){if(e){if(!this.completers)this.completers=Array.isArray(e)?e:h
this.commands.addCommand(r.startCommand)}else{this.commands.removeCommand(r.startCommand)}},value:false},enableLiveAutocompletion:{set:function(e){if(e){if(!this.completers)this.completers=Array.isArray(e)?e:h
this.commands.on("afterExec",p)}else{this.commands.removeListener("afterExec",p)}},value:false},enableSnippets:{set:function(e){if(e){this.commands.addCommand(u)
this.on("changeMode",d)
d(null,this)}else{this.commands.removeCommand(u)
this.off("changeMode",d)}},value:false}})});(function(){ace.require(["ace/ext/language_tools"],function(){})})()
__KA_module.exports = ace;
this.ace = ace;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_structured_blocks_deps.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/shared-package/i18n.js");
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../jqueryui/jquery.ui.sortable.js");
__KA_require("../../../jqueryui/jquery.ui.selectable.js");
__KA_require("../../../jqueryui/jquery.ui.droppable.js");
__KA_require("../../../../../javascript/node_modules/underscore/index.js");
__KA_require("../../../../../javascript/node_modules/backbone/index.js");
(function(e){e.support.touch="ontouchend"in document
if(!e.support.touch){return}var t=e.ui.mouse.prototype,r=t._mouseInit,n=t._mouseDestroy,a
function i(e,t){if(e.originalEvent.touches.length>1){return}e.preventDefault()
var r=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents")
n.initMouseEvent(t,true,true,window,1,r.screenX,r.screenY,r.clientX,r.clientY,false,false,false,false,0,null)
e.target.dispatchEvent(n)}t._touchStart=function(e){var t=this
if(e.originalEvent.target.localName=="textarea"||e.originalEvent.target.localName=="input"){return true}if(a||!t._mouseCapture(e.originalEvent.changedTouches[0])){return}a=true
t._touchMoved=false
i(e,"mouseover")
i(e,"mousemove")
i(e,"mousedown")}
t._touchMove=function(e){if(!a){return}this._touchMoved=true
i(e,"mousemove")}
t._touchEnd=function(e){if(!a){return}i(e,"mouseup")
i(e,"mouseout")
if(!this._touchMoved){i(e,"click")}a=false}
t._mouseInit=function(){var t=this
t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")})
r.call(t)}
t._mouseDestroy=function(){var t=this
t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")})
n.call(t)}})(jQuery);(function(e,t){"use strict"
if(typeof define==="function"&&define.amd){define(["exports"],t)}else if(typeof exports!=="undefined"){t(exports)}else{t(e.esprima={})}})(this,function(e){"use strict"
var t,r,n,a,i,o,s,l,u,c,f,p,d,m,h,g,v,b
t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}
r={}
r[t.BooleanLiteral]="Boolean"
r[t.EOF]="<end>"
r[t.Identifier]="Identifier"
r[t.Keyword]="Keyword"
r[t.NullLiteral]="Null"
r[t.NumericLiteral]="Numeric"
r[t.Punctuator]="Punctuator"
r[t.StringLiteral]="String"
r[t.RegularExpression]="RegularExpression"
n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="]
a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"}
i={Data:1,Get:2,Set:4}
o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"}
s={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")}
function S(e,t){if(!e){throw new Error("ASSERT: "+t)}}function y(e){return e>=48&&e<=57}function x(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function w(e){return"01234567".indexOf(e)>=0}function k(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&" ᠎             　﻿".indexOf(String.fromCharCode(e))>0}function C(e){return e===10||e===13||e===8232||e===8233}function E(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function I(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function A(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return true
default:return false}}function R(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true
default:return false}}function _(e){return e==="eval"||e==="arguments"}function L(e){if(c&&R(e)){return true}switch(e.length){case 2:return e==="if"||e==="in"||e==="do"
case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let"
case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum"
case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super"
case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import"
case 7:return e==="default"||e==="finally"||e==="extends"
case 8:return e==="function"||e==="continue"||e==="debugger"
case 10:return e==="instanceof"
default:return false}}function T(e,t,r,n,a){var i
S(typeof r==="number","Comment must have valid position")
if(v.lastCommentStart>=r){return}v.lastCommentStart=r
i={type:e,value:t}
if(b.range){i.range=[r,n]}if(b.loc){i.loc=a}b.comments.push(i)}function O(){var e,t,r,n
e=f-2
t={start:{line:p,column:f-d-2}}
while(f<m){r=u.charCodeAt(f);++f
if(C(r)){if(b.comments){n=u.slice(e+2,f-1)
t.end={line:p,column:f-d-1}
T("Line",n,e,f-1,t)}if(r===13&&u.charCodeAt(f)===10){++f}++p
d=f
return}}if(b.comments){n=u.slice(e+2,f)
t.end={line:p,column:f-d}
T("Line",n,e,f,t)}}function D(){var e,t,r,n
if(b.comments){e=f-2
t={start:{line:p,column:f-d-2}}}while(f<m){r=u.charCodeAt(f)
if(C(r)){if(r===13&&u.charCodeAt(f+1)===10){++f}++p;++f
d=f
if(f>=m){et({},o.UnexpectedToken,"ILLEGAL")}}else if(r===42){if(u.charCodeAt(f+1)===47){++f;++f
if(b.comments){n=u.slice(e+2,f-2)
t.end={line:p,column:f-d}
T("Block",n,e,f,t)}return}++f}else{++f}}et({},o.UnexpectedToken,"ILLEGAL")}function P(){var e
while(f<m){e=u.charCodeAt(f)
if(k(e)){++f}else if(C(e)){++f
if(e===13&&u.charCodeAt(f)===10){++f}++p
d=f}else if(e===47){e=u.charCodeAt(f+1)
if(e===47){++f;++f
O()}else if(e===42){++f;++f
D()}else{break}}else{break}}}function N(e){var t,r,n,a=0
r=e==="u"?4:2
for(t=0;t<r;++t){if(f<m&&x(u[f])){n=u[f++]
a=a*16+"0123456789abcdef".indexOf(n.toLowerCase())}else{return""}}return String.fromCharCode(a)}function j(){var e,t
e=u.charCodeAt(f++)
t=String.fromCharCode(e)
if(e===92){if(u.charCodeAt(f)!==117){et({},o.UnexpectedToken,"ILLEGAL")}++f
e=N("u")
if(!e||e==="\\"||!E(e.charCodeAt(0))){et({},o.UnexpectedToken,"ILLEGAL")}t=e}while(f<m){e=u.charCodeAt(f)
if(!I(e)){break}++f
t+=String.fromCharCode(e)
if(e===92){t=t.substr(0,t.length-1)
if(u.charCodeAt(f)!==117){et({},o.UnexpectedToken,"ILLEGAL")}++f
e=N("u")
if(!e||e==="\\"||!I(e.charCodeAt(0))){et({},o.UnexpectedToken,"ILLEGAL")}t+=e}}return t}function J(){var e,t
e=f++
while(f<m){t=u.charCodeAt(f)
if(t===92){f=e
return j()}if(I(t)){++f}else{break}}return u.slice(e,f)}function B(){var e,r,n
e=f
r=u.charCodeAt(f)===92?j():J()
if(r.length===1){n=t.Identifier}else if(L(r)){n=t.Keyword}else if(r==="null"){n=t.NullLiteral}else if(r==="true"||r==="false"){n=t.BooleanLiteral}else{n=t.Identifier}return{type:n,value:r,lineNumber:p,lineStart:d,range:[e,f]}}function U(){var e=f,r=u.charCodeAt(f),n,a=u[f],i,s,l
switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:++f
if(b.tokenize){if(r===40){b.openParenToken=b.tokens.length}else if(r===123){b.openCurlyToken=b.tokens.length}}return{type:t.Punctuator,value:String.fromCharCode(r),lineNumber:p,lineStart:d,range:[e,f]}
default:n=u.charCodeAt(f+1)
if(n===61){switch(r){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:f+=2
return{type:t.Punctuator,value:String.fromCharCode(r)+String.fromCharCode(n),lineNumber:p,lineStart:d,range:[e,f]}
case 33:case 61:f+=2
if(u.charCodeAt(f)===61){++f}return{type:t.Punctuator,value:u.slice(e,f),lineNumber:p,lineStart:d,range:[e,f]}
default:break}}break}i=u[f+1]
s=u[f+2]
l=u[f+3]
if(a===">"&&i===">"&&s===">"){if(l==="="){f+=4
return{type:t.Punctuator,value:">>>=",lineNumber:p,lineStart:d,range:[e,f]}}}if(a===">"&&i===">"&&s===">"){f+=3
return{type:t.Punctuator,value:">>>",lineNumber:p,lineStart:d,range:[e,f]}}if(a==="<"&&i==="<"&&s==="="){f+=3
return{type:t.Punctuator,value:"<<=",lineNumber:p,lineStart:d,range:[e,f]}}if(a===">"&&i===">"&&s==="="){f+=3
return{type:t.Punctuator,value:">>=",lineNumber:p,lineStart:d,range:[e,f]}}if(a===i&&"+-<>&|".indexOf(a)>=0){f+=2
return{type:t.Punctuator,value:a+i,lineNumber:p,lineStart:d,range:[e,f]}}if("<>=!+-*%&|^/".indexOf(a)>=0){++f
return{type:t.Punctuator,value:a,lineNumber:p,lineStart:d,range:[e,f]}}et({},o.UnexpectedToken,"ILLEGAL")}function F(e){var r=""
while(f<m){if(!x(u[f])){break}r+=u[f++]}if(r.length===0){et({},o.UnexpectedToken,"ILLEGAL")}if(E(u.charCodeAt(f))){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:p,lineStart:d,range:[e,f]}}function M(e){var r="0"+u[f++]
while(f<m){if(!w(u[f])){break}r+=u[f++]}if(E(u.charCodeAt(f))||y(u.charCodeAt(f))){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.NumericLiteral,value:parseInt(r,8),octal:true,lineNumber:p,lineStart:d,range:[e,f]}}function q(){var e,r,n
n=u[f]
S(y(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point")
r=f
e=""
if(n!=="."){e=u[f++]
n=u[f]
if(e==="0"){if(n==="x"||n==="X"){++f
return F(r)}if(w(n)){return M(r)}if(n&&y(n.charCodeAt(0))){et({},o.UnexpectedToken,"ILLEGAL")}}while(y(u.charCodeAt(f))){e+=u[f++]}n=u[f]}if(n==="."){e+=u[f++]
while(y(u.charCodeAt(f))){e+=u[f++]}n=u[f]}if(n==="e"||n==="E"){e+=u[f++]
n=u[f]
if(n==="+"||n==="-"){e+=u[f++]}if(y(u.charCodeAt(f))){while(y(u.charCodeAt(f))){e+=u[f++]}}else{et({},o.UnexpectedToken,"ILLEGAL")}}if(E(u.charCodeAt(f))){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.NumericLiteral,value:parseFloat(e),lineNumber:p,lineStart:d,range:[r,f]}}function V(){var e="",r,n,a,i,s,l,c=false
r=u[f]
S(r==="'"||r==='"',"String literal must starts with a quote")
n=f;++f
while(f<m){a=u[f++]
if(a===r){r=""
break}else if(a==="\\"){a=u[f++]
if(!a||!C(a.charCodeAt(0))){switch(a){case"n":e+="\n"
break
case"r":e+="\r"
break
case"t":e+="	"
break
case"u":case"x":l=f
s=N(a)
if(s){e+=s}else{f=l
e+=a}break
case"b":e+="\b"
break
case"f":e+="\f"
break
case"v":e+=""
break
default:if(w(a)){i="01234567".indexOf(a)
if(i!==0){c=true}if(f<m&&w(u[f])){c=true
i=i*8+"01234567".indexOf(u[f++])
if("0123".indexOf(a)>=0&&f<m&&w(u[f])){i=i*8+"01234567".indexOf(u[f++])}}e+=String.fromCharCode(i)}else{e+=a}break}}else{++p
if(a==="\r"&&u[f]==="\n"){++f}}}else if(C(a.charCodeAt(0))){break}else{e+=a}}if(r!==""){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.StringLiteral,value:e,octal:c,lineNumber:p,lineStart:d,range:[n,f]}}function W(){var e,r,n,a,i,s,l=false,c,h=false
g=null
P()
n=f
r=u[f]
S(r==="/","Regular expression literal must start with a slash")
e=u[f++]
while(f<m){r=u[f++]
e+=r
if(l){if(r==="]"){l=false}}else{if(r==="\\"){r=u[f++]
if(C(r.charCodeAt(0))){et({},o.UnterminatedRegExp)}e+=r}else if(r==="/"){h=true
break}else if(r==="["){l=true}else if(C(r.charCodeAt(0))){et({},o.UnterminatedRegExp)}}}if(!h){et({},o.UnterminatedRegExp)}a=e.substr(1,e.length-2)
i=""
while(f<m){r=u[f]
if(!I(r.charCodeAt(0))){break}++f
if(r==="\\"&&f<m){r=u[f]
if(r==="u"){++f
c=f
r=N("u")
if(r){i+=r
for(e+="\\u";c<f;++c){e+=u[c]}}else{f=c
i+="u"
e+="\\u"}}else{e+="\\"}}else{i+=r
e+=r}}try{s=new RegExp(a,i)}catch(v){et({},o.InvalidRegExp)}Z()
if(b.tokenize){return{type:t.RegularExpression,value:s,lineNumber:p,lineStart:d,range:[n,f]}}return{literal:e,value:s,range:[n,f]}}function z(){var e,t,r,n
P()
e=f
t={start:{line:p,column:f-d}}
r=W()
t.end={line:p,column:f-d}
if(!b.tokenize){if(b.tokens.length>0){n=b.tokens[b.tokens.length-1]
if(n.range[0]===e&&n.type==="Punctuator"){if(n.value==="/"||n.value==="/="){b.tokens.pop()}}}b.tokens.push({type:"RegularExpression",value:r.literal,range:[e,f],loc:t})}return r}function H(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function K(){var e,t
e=b.tokens[b.tokens.length-1]
if(!e){return z()}if(e.type==="Punctuator"){if(e.value===")"){t=b.tokens[b.openParenToken-1]
if(t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")){return z()}return U()}if(e.value==="}"){if(b.tokens[b.openCurlyToken-3]&&b.tokens[b.openCurlyToken-3].type==="Keyword"){t=b.tokens[b.openCurlyToken-4]
if(!t){return U()}}else if(b.tokens[b.openCurlyToken-4]&&b.tokens[b.openCurlyToken-4].type==="Keyword"){t=b.tokens[b.openCurlyToken-5]
if(!t){return z()}}else{return U()}if(n.indexOf(t.value)>=0){return U()}return z()}return z()}if(e.type==="Keyword"){return z()}return U()}function G(){var e
P()
if(f>=m){return{type:t.EOF,lineNumber:p,lineStart:d,range:[f,f]}}e=u.charCodeAt(f)
if(e===40||e===41||e===58){return U()}if(e===39||e===34){return V()}if(E(e)){return B()}if(e===46){if(y(u.charCodeAt(f+1))){return q()}return U()}if(y(e)){return q()}if(b.tokenize&&e===47){return K()}return U()}function Y(){var e,n,a,i,o
P()
e=f
n={start:{line:p,column:f-d}}
a=G()
n.end={line:p,column:f-d}
if(a.type!==t.EOF){i=[a.range[0],a.range[1]]
o=u.slice(a.range[0],a.range[1])
b.tokens.push({type:r[a.type],value:o,range:i,loc:n})}return a}function X(){var e
e=g
f=e.range[1]
p=e.lineNumber
d=e.lineStart
g=typeof b.tokens!=="undefined"?Y():G()
f=e.range[1]
p=e.lineNumber
d=e.lineStart
return e}function Z(){var e,t,r
e=f
t=p
r=d
g=typeof b.tokens!=="undefined"?Y():G()
f=e
p=t
d=r}l={name:"SyntaxTree",markStart:function(){if(b.loc){v.markerStack.push(f-d)
v.markerStack.push(p)}if(b.range){v.markerStack.push(f)}},markEnd:function(e){if(b.range){e.range=[v.markerStack.pop(),f]}if(b.loc){e.loc={start:{line:v.markerStack.pop(),column:v.markerStack.pop()},end:{line:p,column:f-d}}
this.postProcess(e)}return e},markEndIf:function(e){if(e.range||e.loc){if(b.loc){v.markerStack.pop()
v.markerStack.pop()}if(b.range){v.markerStack.pop()}}else{this.markEnd(e)}return e},postProcess:function(e){if(b.source){e.loc.source=b.source}return e},createArrayExpression:function(e){return{type:a.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:a.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){var n=e==="||"||e==="&&"?a.LogicalExpression:a.BinaryExpression
return{type:n,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:a.BlockStatement,body:e}},createBreakStatement:function(e){return{type:a.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:a.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:a.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:a.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:a.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:a.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(e){return{type:a.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:a.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:a.ForInStatement,left:e,right:t,body:r,each:false}},createFunctionDeclaration:function(e,t,r,n){return{type:a.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:false,expression:false}},createFunctionExpression:function(e,t,r,n){return{type:a.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:false,expression:false}},createIdentifier:function(e){return{type:a.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:a.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:a.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:a.Literal,value:e.value,raw:u.slice(e.range[0],e.range[1])}},createMemberExpression:function(e,t,r){return{type:a.MemberExpression,computed:e==="[",object:t,property:r}},createNewExpression:function(e,t){return{type:a.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:a.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:a.UpdateExpression,operator:e,argument:t,prefix:false}},createProgram:function(e){return{type:a.Program,body:e}},createProperty:function(e,t,r){return{type:a.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:a.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:a.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:a.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:a.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(e){return{type:a.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:a.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){if(e==="++"||e==="--"){return{type:a.UpdateExpression,operator:e,argument:t,prefix:true}}return{type:a.UnaryExpression,operator:e,argument:t,prefix:true}},createVariableDeclaration:function(e,t){return{type:a.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:a.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:a.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:a.WithStatement,object:e,body:t}}}
function Q(){var e,t,r,n
e=f
t=p
r=d
P()
n=p!==t
f=e
p=t
d=r
return n}function et(e,t){var r,n=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,function(e,t){S(t<n.length,"Message reference must be in range")
return n[t]})
if(typeof e.lineNumber==="number"){r=new Error("Line "+e.lineNumber+": "+a)
r.index=e.range[0]
r.lineNumber=e.lineNumber
r.column=e.range[0]-d+1}else{r=new Error("Line "+p+": "+a)
r.index=f
r.lineNumber=p
r.column=f-d+1}r.description=a
throw r}function tt(){try{et.apply(null,arguments)}catch(e){if(b.errors){b.errors.push(e)}else{throw e}}}function rt(e){if(e.type===t.EOF){et(e,o.UnexpectedEOS)}if(e.type===t.NumericLiteral){et(e,o.UnexpectedNumber)}if(e.type===t.StringLiteral){et(e,o.UnexpectedString)}if(e.type===t.Identifier){et(e,o.UnexpectedIdentifier)}if(e.type===t.Keyword){if(A(e.value)){et(e,o.UnexpectedReserved)}else if(c&&R(e.value)){tt(e,o.StrictReservedWord)
return}et(e,o.UnexpectedToken,e.value)}et(e,o.UnexpectedToken,e.value)}function nt(e){var r=X()
if(r.type!==t.Punctuator||r.value!==e){rt(r)}}function at(e){var r=X()
if(r.type!==t.Keyword||r.value!==e){rt(r)}}function it(e){return g.type===t.Punctuator&&g.value===e}function ot(e){return g.type===t.Keyword&&g.value===e}function st(){var e
if(g.type!==t.Punctuator){return false}e=g.value
return e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|="}function lt(){var e
if(u.charCodeAt(f)===59){X()
return}e=p
P()
if(p!==e){return}if(it(";")){X()
return}if(g.type!==t.EOF&&!it("}")){rt(g)}}function ut(e){return e.type===a.Identifier||e.type===a.MemberExpression}function ct(){var e=[]
nt("[")
while(!it("]")){if(it(",")){X()
e.push(null)}else{e.push(_t())
if(!it("]")){nt(",")}}}nt("]")
return h.createArrayExpression(e)}function ft(e,t){var r,n
r=c
P()
h.markStart()
n=rr()
if(t&&c&&_(e[0].name)){tt(t,o.StrictParamName)}c=r
return h.markEnd(h.createFunctionExpression(null,e,[],n))}function pt(){var e
P()
h.markStart()
e=X()
if(e.type===t.StringLiteral||e.type===t.NumericLiteral){if(c&&e.octal){tt(e,o.StrictOctalLiteral)}return h.markEnd(h.createLiteral(e))}return h.markEnd(h.createIdentifier(e.value))}function dt(){var e,r,n,a,i
e=g
P()
h.markStart()
if(e.type===t.Identifier){n=pt()
if(e.value==="get"&&!it(":")){r=pt()
nt("(")
nt(")")
a=ft([])
return h.markEnd(h.createProperty("get",r,a))}if(e.value==="set"&&!it(":")){r=pt()
nt("(")
e=g
if(e.type!==t.Identifier){nt(")")
tt(e,o.UnexpectedToken,e.value)
a=ft([])}else{i=[Ot()]
nt(")")
a=ft(i,e)}return h.markEnd(h.createProperty("set",r,a))}nt(":")
a=_t()
return h.markEnd(h.createProperty("init",n,a))}if(e.type===t.EOF||e.type===t.Punctuator){rt(e)}else{r=pt()
nt(":")
a=_t()
return h.markEnd(h.createProperty("init",r,a))}}function mt(){var e=[],t,r,n,s,l={},u=String
nt("{")
while(!it("}")){t=dt()
if(t.key.type===a.Identifier){r=t.key.name}else{r=u(t.key.value)}s=t.kind==="init"?i.Data:t.kind==="get"?i.Get:i.Set
n="$"+r
if(Object.prototype.hasOwnProperty.call(l,n)){if(l[n]===i.Data){if(c&&s===i.Data){tt({},o.StrictDuplicateProperty)}else if(s!==i.Data){tt({},o.AccessorDataProperty)}}else{if(s===i.Data){tt({},o.AccessorDataProperty)}else if(l[n]&s){tt({},o.AccessorGetSet)}}l[n]|=s}else{l[n]=s}e.push(t)
if(!it("}")){nt(",")}}nt("}")
return h.createObjectExpression(e)}function ht(){var e
nt("(")
e=$t()
nt(")")
return e}function gt(){var e,r,n
if(it("(")){return ht()}e=g.type
h.markStart()
if(e===t.Identifier){n=h.createIdentifier(X().value)}else if(e===t.StringLiteral||e===t.NumericLiteral){if(c&&g.octal){tt(g,o.StrictOctalLiteral)}n=h.createLiteral(X())}else if(e===t.Keyword){if(ot("this")){X()
n=h.createThisExpression()}else if(ot("function")){n=ir()}}else if(e===t.BooleanLiteral){r=X()
r.value=r.value==="true"
n=h.createLiteral(r)}else if(e===t.NullLiteral){r=X()
r.value=null
n=h.createLiteral(r)}else if(it("[")){n=ct()}else if(it("{")){n=mt()}else if(it("/")||it("/=")){if(typeof b.tokens!=="undefined"){n=h.createLiteral(z())}else{n=h.createLiteral(W())}}if(n){return h.markEnd(n)}rt(X())}function vt(){var e=[]
nt("(")
if(!it(")")){while(f<m){e.push(_t())
if(it(")")){break}nt(",")}}nt(")")
return e}function bt(){var e
h.markStart()
e=X()
if(!H(e)){rt(e)}return h.markEnd(h.createIdentifier(e.value))}function St(){nt(".")
return bt()}function yt(){var e
nt("[")
e=$t()
nt("]")
return e}function xt(){var e,t
h.markStart()
at("new")
e=kt()
t=it("(")?vt():[]
return h.markEnd(h.createNewExpression(e,t))}function wt(){var e,t,r,n
e=fr()
t=ot("new")?xt():gt()
while(it(".")||it("[")||it("(")){if(it("(")){r=vt()
t=h.createCallExpression(t,r)}else if(it("[")){n=yt()
t=h.createMemberExpression("[",t,n)}else{n=St()
t=h.createMemberExpression(".",t,n)}if(e){e.end()
e.apply(t)}}return t}function kt(){var e,t,r
e=fr()
t=ot("new")?xt():gt()
while(it(".")||it("[")){if(it("[")){r=yt()
t=h.createMemberExpression("[",t,r)}else{r=St()
t=h.createMemberExpression(".",t,r)}if(e){e.end()
e.apply(t)}}return t}function Ct(){var e,r
h.markStart()
e=wt()
if(g.type===t.Punctuator){if((it("++")||it("--"))&&!Q()){if(c&&e.type===a.Identifier&&_(e.name)){tt({},o.StrictLHSPostfix)}if(!ut(e)){et({},o.InvalidLHSInAssignment)}r=X()
e=h.createPostfixExpression(r.value,e)}}return h.markEndIf(e)}function Et(){var e,r
h.markStart()
if(g.type!==t.Punctuator&&g.type!==t.Keyword){r=Ct()}else if(it("++")||it("--")){e=X()
r=Et()
if(c&&r.type===a.Identifier&&_(r.name)){tt({},o.StrictLHSPrefix)}if(!ut(r)){et({},o.InvalidLHSInAssignment)}r=h.createUnaryExpression(e.value,r)}else if(it("+")||it("-")||it("~")||it("!")){e=X()
r=Et()
r=h.createUnaryExpression(e.value,r)}else if(ot("delete")||ot("void")||ot("typeof")){e=X()
r=Et()
r=h.createUnaryExpression(e.value,r)
if(c&&r.operator==="delete"&&r.argument.type===a.Identifier){tt({},o.StrictDelete)}}else{r=Ct()}return h.markEndIf(r)}function It(e,r){var n=0
if(e.type!==t.Punctuator&&e.type!==t.Keyword){return 0}switch(e.value){case"||":n=1
break
case"&&":n=2
break
case"|":n=3
break
case"^":n=4
break
case"&":n=5
break
case"==":case"!=":case"===":case"!==":n=6
break
case"<":case">":case"<=":case">=":case"instanceof":n=7
break
case"in":n=r?7:0
break
case"<<":case">>":case">>>":n=8
break
case"+":case"-":n=9
break
case"*":case"/":case"%":n=11
break
default:break}return n}function At(){var e,t,r,n,a,i,o,s,l,u,c
i=v.allowIn
v.allowIn=true
e=fr()
u=Et()
n=g
a=It(n,i)
if(a===0){return u}n.prec=a
X()
t=[e,fr()]
s=Et()
o=[u,n,s]
while((a=It(g,i))>0){while(o.length>2&&a<=o[o.length-2].prec){s=o.pop()
l=o.pop().value
u=o.pop()
r=h.createBinaryExpression(l,u,s)
t.pop()
e=t.pop()
if(e){e.end()
e.apply(r)}o.push(r)
t.push(e)}n=X()
n.prec=a
o.push(n)
t.push(fr())
r=Et()
o.push(r)}v.allowIn=i
c=o.length-1
r=o[c]
t.pop()
while(c>1){r=h.createBinaryExpression(o[c-1].value,o[c-2],r)
c-=2
e=t.pop()
if(e){e.end()
e.apply(r)}}return r}function Rt(){var e,t,r,n
h.markStart()
e=At()
if(it("?")){X()
t=v.allowIn
v.allowIn=true
r=_t()
v.allowIn=t
nt(":")
n=_t()
e=h.markEnd(h.createConditionalExpression(e,r,n))}else{h.markEnd({})}return e}function _t(){var e,t,r,n
e=g
h.markStart()
n=t=Rt()
if(st()){if(!ut(t)){et({},o.InvalidLHSInAssignment)}if(c&&t.type===a.Identifier&&_(t.name)){tt(e,o.StrictLHSAssignment)}e=X()
r=_t()
n=h.createAssignmentExpression(e.value,t,r)}return h.markEndIf(n)}function $t(){var e
h.markStart()
e=_t()
if(it(",")){e=h.createSequenceExpression([e])
while(f<m){if(!it(",")){break}X()
e.expressions.push(_t())}}return h.markEndIf(e)}function Lt(){var e=[],t
while(f<m){if(it("}")){break}t=or()
if(typeof t==="undefined"){break}e.push(t)}return e}function Tt(){var e
P()
h.markStart()
nt("{")
e=Lt()
nt("}")
return h.markEnd(h.createBlockStatement(e))}function Ot(){var e
P()
h.markStart()
e=X()
if(e.type!==t.Identifier){rt(e)}return h.markEnd(h.createIdentifier(e.value))}function Dt(e){var t=null,r
P()
h.markStart()
r=Ot()
if(c&&_(r.name)){tt({},o.StrictVarName)}if(e==="const"){nt("=")
t=_t()}else if(it("=")){X()
t=_t()}return h.markEnd(h.createVariableDeclarator(r,t))}function Pt(e){var t=[]
do{t.push(Dt(e))
if(!it(",")){break}X()}while(f<m)
return t}function Nt(){var e
at("var")
e=Pt()
lt()
return h.createVariableDeclaration(e,"var")}function jt(e){var t
P()
h.markStart()
at(e)
t=Pt(e)
lt()
return h.markEnd(h.createVariableDeclaration(t,e))}function Jt(){nt(";")
return h.createEmptyStatement()}function Bt(){var e=$t()
lt()
return h.createExpressionStatement(e)}function Ut(){var e,t,r
at("if")
nt("(")
e=$t()
nt(")")
t=tr()
if(ot("else")){X()
r=tr()}else{r=null}return h.createIfStatement(e,t,r)}function Ft(){var e,t,r
at("do")
r=v.inIteration
v.inIteration=true
e=tr()
v.inIteration=r
at("while")
nt("(")
t=$t()
nt(")")
if(it(";")){X()}return h.createDoWhileStatement(e,t)}function Mt(){var e,t,r
at("while")
nt("(")
e=$t()
nt(")")
r=v.inIteration
v.inIteration=true
t=tr()
v.inIteration=r
return h.createWhileStatement(e,t)}function qt(){var e,t
h.markStart()
e=X()
t=Pt()
return h.markEnd(h.createVariableDeclaration(t,e.value))}function Vt(){var e,t,r,n,a,i,s
e=t=r=null
at("for")
nt("(")
if(it(";")){X()}else{if(ot("var")||ot("let")){v.allowIn=false
e=qt()
v.allowIn=true
if(e.declarations.length===1&&ot("in")){X()
n=e
a=$t()
e=null}}else{v.allowIn=false
e=$t()
v.allowIn=true
if(ot("in")){if(!ut(e)){et({},o.InvalidLHSInForIn)}X()
n=e
a=$t()
e=null}}if(typeof n==="undefined"){nt(";")}}if(typeof n==="undefined"){if(!it(";")){t=$t()}nt(";")
if(!it(")")){r=$t()}}nt(")")
s=v.inIteration
v.inIteration=true
i=tr()
v.inIteration=s
return typeof n==="undefined"?h.createForStatement(e,t,r,i):h.createForInStatement(n,a,i)}function Wt(){var e=null,r
at("continue")
if(u.charCodeAt(f)===59){X()
if(!v.inIteration){et({},o.IllegalContinue)}return h.createContinueStatement(null)}if(Q()){if(!v.inIteration){et({},o.IllegalContinue)}return h.createContinueStatement(null)}if(g.type===t.Identifier){e=Ot()
r="$"+e.name
if(!Object.prototype.hasOwnProperty.call(v.labelSet,r)){et({},o.UnknownLabel,e.name)}}lt()
if(e===null&&!v.inIteration){et({},o.IllegalContinue)}return h.createContinueStatement(e)}function zt(){var e=null,r
at("break")
if(u.charCodeAt(f)===59){X()
if(!(v.inIteration||v.inSwitch)){et({},o.IllegalBreak)}return h.createBreakStatement(null)}if(Q()){if(!(v.inIteration||v.inSwitch)){et({},o.IllegalBreak)}return h.createBreakStatement(null)}if(g.type===t.Identifier){e=Ot()
r="$"+e.name
if(!Object.prototype.hasOwnProperty.call(v.labelSet,r)){et({},o.UnknownLabel,e.name)}}lt()
if(e===null&&!(v.inIteration||v.inSwitch)){et({},o.IllegalBreak)}return h.createBreakStatement(e)}function Ht(){var e=null
at("return")
if(!v.inFunctionBody){tt({},o.IllegalReturn)}if(u.charCodeAt(f)===32){if(E(u.charCodeAt(f+1))){e=$t()
lt()
return h.createReturnStatement(e)}}if(Q()){return h.createReturnStatement(null)}if(!it(";")){if(!it("}")&&g.type!==t.EOF){e=$t()}}lt()
return h.createReturnStatement(e)}function Kt(){var e,t
if(c){tt({},o.StrictModeWith)}at("with")
nt("(")
e=$t()
nt(")")
t=tr()
return h.createWithStatement(e,t)}function Gt(){var e,t=[],r
P()
h.markStart()
if(ot("default")){X()
e=null}else{at("case")
e=$t()}nt(":")
while(f<m){if(it("}")||ot("default")||ot("case")){break}r=tr()
t.push(r)}return h.markEnd(h.createSwitchCase(e,t))}function Yt(){var e,t,r,n,a
at("switch")
nt("(")
e=$t()
nt(")")
nt("{")
if(it("}")){X()
return h.createSwitchStatement(e)}t=[]
n=v.inSwitch
v.inSwitch=true
a=false
while(f<m){if(it("}")){break}r=Gt()
if(r.test===null){if(a){et({},o.MultipleDefaultsInSwitch)}a=true}t.push(r)}v.inSwitch=n
nt("}")
return h.createSwitchStatement(e,t)}function Xt(){var e
at("throw")
if(Q()){et({},o.NewlineAfterThrow)}e=$t()
lt()
return h.createThrowStatement(e)}function Zt(){var e,t
P()
h.markStart()
at("catch")
nt("(")
if(it(")")){rt(g)}e=Ot()
if(c&&_(e.name)){tt({},o.StrictCatchVariable)}nt(")")
t=Tt()
return h.markEnd(h.createCatchClause(e,t))}function Qt(){var e,t=[],r=null
at("try")
e=Tt()
if(ot("catch")){t.push(Zt())}if(ot("finally")){X()
r=Tt()}if(t.length===0&&!r){et({},o.NoCatchOrFinally)}return h.createTryStatement(e,[],t,r)}function er(){at("debugger")
lt()
return h.createDebuggerStatement()}function tr(){var e=g.type,r,n,i
if(e===t.EOF){rt(g)}P()
h.markStart()
if(e===t.Punctuator){switch(g.value){case";":return h.markEnd(Jt())
case"{":return h.markEnd(Tt())
case"(":return h.markEnd(Bt())
default:break}}if(e===t.Keyword){switch(g.value){case"break":return h.markEnd(zt())
case"continue":return h.markEnd(Wt())
case"debugger":return h.markEnd(er())
case"do":return h.markEnd(Ft())
case"for":return h.markEnd(Vt())
case"function":return h.markEnd(ar())
case"if":return h.markEnd(Ut())
case"return":return h.markEnd(Ht())
case"switch":return h.markEnd(Yt())
case"throw":return h.markEnd(Xt())
case"try":return h.markEnd(Qt())
case"var":return h.markEnd(Nt())
case"while":return h.markEnd(Mt())
case"with":return h.markEnd(Kt())
default:break}}r=$t()
if(r.type===a.Identifier&&it(":")){X()
i="$"+r.name
if(Object.prototype.hasOwnProperty.call(v.labelSet,i)){et({},o.Redeclaration,"Label",r.name)}v.labelSet[i]=true
n=tr()
delete v.labelSet[i]
return h.markEnd(h.createLabeledStatement(r,n))}lt()
return h.markEnd(h.createExpressionStatement(r))}function rr(){var e,r=[],n,i,s,l,p,d,b
P()
h.markStart()
nt("{")
while(f<m){if(g.type!==t.StringLiteral){break}n=g
e=or()
r.push(e)
if(e.expression.type!==a.Literal){break}i=u.slice(n.range[0]+1,n.range[1]-1)
if(i==="use strict"){c=true
if(s){tt(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}l=v.labelSet
p=v.inIteration
d=v.inSwitch
b=v.inFunctionBody
v.labelSet={}
v.inIteration=false
v.inSwitch=false
v.inFunctionBody=true
while(f<m){if(it("}")){break}e=or()
if(typeof e==="undefined"){break}r.push(e)}nt("}")
v.labelSet=l
v.inIteration=p
v.inSwitch=d
v.inFunctionBody=b
return h.markEnd(h.createBlockStatement(r))}function nr(e){var t,r=[],n,a,i,s,l
nt("(")
if(!it(")")){i={}
while(f<m){n=g
t=Ot()
s="$"+n.value
if(c){if(_(n.value)){a=n
l=o.StrictParamName}if(Object.prototype.hasOwnProperty.call(i,s)){a=n
l=o.StrictParamDupe}}else if(!e){if(_(n.value)){e=n
l=o.StrictParamName}else if(R(n.value)){e=n
l=o.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(i,s)){e=n
l=o.StrictParamDupe}}r.push(t)
i[s]=true
if(it(")")){break}nt(",")}}nt(")")
return{params:r,stricted:a,firstRestricted:e,message:l}}function ar(){var e,t=[],r,n,a,i,s,l,u
P()
h.markStart()
at("function")
n=g
e=Ot()
if(c){if(_(n.value)){tt(n,o.StrictFunctionName)}}else{if(_(n.value)){s=n
l=o.StrictFunctionName}else if(R(n.value)){s=n
l=o.StrictReservedWord}}i=nr(s)
t=i.params
a=i.stricted
s=i.firstRestricted
if(i.message){l=i.message}u=c
r=rr()
if(c&&s){et(s,l)}if(c&&a){tt(a,l)}c=u
return h.markEnd(h.createFunctionDeclaration(e,t,[],r))}function ir(){var e,t=null,r,n,a,i,s=[],l,u
h.markStart()
at("function")
if(!it("(")){e=g
t=Ot()
if(c){if(_(e.value)){tt(e,o.StrictFunctionName)}}else{if(_(e.value)){n=e
a=o.StrictFunctionName}else if(R(e.value)){n=e
a=o.StrictReservedWord}}}i=nr(n)
s=i.params
r=i.stricted
n=i.firstRestricted
if(i.message){a=i.message}u=c
l=rr()
if(c&&n){et(n,a)}if(c&&r){tt(r,a)}c=u
return h.markEnd(h.createFunctionExpression(t,s,[],l))}function or(){if(g.type===t.Keyword){switch(g.value){case"const":case"let":return jt(g.value)
case"function":return ar()
default:return tr()}}if(g.type!==t.EOF){return tr()}}function sr(){var e,r=[],n,i,s
while(f<m){n=g
if(n.type!==t.StringLiteral){break}e=or()
r.push(e)
if(e.expression.type!==a.Literal){break}i=u.slice(n.range[0]+1,n.range[1]-1)
if(i==="use strict"){c=true
if(s){tt(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}while(f<m){e=or()
if(typeof e==="undefined"){break}r.push(e)}return r}function lr(){var e
P()
h.markStart()
c=false
Z()
e=sr()
return h.markEnd(h.createProgram(e))}function ur(){var e,t,r,n=[]
for(e=0;e<b.tokens.length;++e){t=b.tokens[e]
r={type:t.type,value:t.value}
if(b.range){r.range=t.range}if(b.loc){r.loc=t.loc}n.push(r)}b.tokens=n}function cr(){this.marker=[f,p,f-d,0,0,0]}cr.prototype={constructor:cr,end:function(){this.marker[3]=f
this.marker[4]=p
this.marker[5]=f-d},apply:function(e){if(b.range){e.range=[this.marker[0],this.marker[3]]}if(b.loc){e.loc={start:{line:this.marker[1],column:this.marker[2]},end:{line:this.marker[4],column:this.marker[5]}}}e=h.postProcess(e)}}
function fr(){if(!b.loc&&!b.range){return null}P()
return new cr}function pr(e,r){var n,a,i
n=String
if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}h=l
u=e
f=0
p=u.length>0?1:0
d=0
m=u.length
g=null
v={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1}
b={}
r=r||{}
r.tokens=true
b.tokens=[]
b.tokenize=true
b.openParenToken=-1
b.openCurlyToken=-1
b.range=typeof r.range==="boolean"&&r.range
b.loc=typeof r.loc==="boolean"&&r.loc
if(typeof r.comment==="boolean"&&r.comment){b.comments=[]}if(typeof r.tolerant==="boolean"&&r.tolerant){b.errors=[]}if(m>0){if(typeof u[0]==="undefined"){if(e instanceof String){u=e.valueOf()}}}try{Z()
if(g.type===t.EOF){return b.tokens}a=X()
while(g.type!==t.EOF){try{a=X()}catch(o){a=g
if(b.errors){b.errors.push(o)
break}else{throw o}}}ur()
i=b.tokens
if(typeof b.comments!=="undefined"){i.comments=b.comments}if(typeof b.errors!=="undefined"){i.errors=b.errors}}catch(s){throw s}finally{b={}}return i}function dr(e,t){var r,n
n=String
if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}h=l
u=e
f=0
p=u.length>0?1:0
d=0
m=u.length
g=null
v={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,markerStack:[]}
b={}
if(typeof t!=="undefined"){b.range=typeof t.range==="boolean"&&t.range
b.loc=typeof t.loc==="boolean"&&t.loc
if(b.loc&&t.source!==null&&t.source!==undefined){b.source=n(t.source)}if(typeof t.tokens==="boolean"&&t.tokens){b.tokens=[]}if(typeof t.comment==="boolean"&&t.comment){b.comments=[]}if(typeof t.tolerant==="boolean"&&t.tolerant){b.errors=[]}}if(m>0){if(typeof u[0]==="undefined"){if(e instanceof String){u=e.valueOf()}}}try{r=lr()
if(typeof b.comments!=="undefined"){r.comments=b.comments}if(typeof b.tokens!=="undefined"){ur()
r.tokens=b.tokens}if(typeof b.errors!=="undefined"){r.errors=b.errors}}catch(a){throw a}finally{b={}}return r}e.version="1.1.0-dev"
e.tokenize=pr
e.parse=dr
e.Syntax=function(){var e,t={}
if(typeof Object.create==="function"){t=Object.create(null)}for(e in a){if(a.hasOwnProperty(e)){t[e]=a[e]}}if(typeof Object.freeze==="function"){Object.freeze(t)}return t}()});(function(e){var t
var r
var n
var a={}
var i
var o
if(typeof module!=="undefined"&&module.exports){t=module.exports={}
r=require("esprima")
n=require("underscore")}else{t=this.Structured={}
r=e.esprima
n=e._}if(!r||!n){throw"Error: Both Esprima and UnderscoreJS are required dependencies."}function s(e){var t=/^function [^\(]*\(([^\)]*)\)/.exec(e)[1]
var r=t.match(/[$_a-zA-z0-9]+/g)
for(var n in r){if(r[n][0]!=="$"){console.warn("Invalid parameter in constraint (should begin with a '$'): ",r[n])
return null}}return{variables:r,fn:e}}var l
function u(e,t,a){a=a||{}
var u=a.varCallbacks||[]
l=u
if(u instanceof Function||u.fn&&u.variables){u=[u]}if(u instanceof Array){for(var f in u){if(u[f]instanceof Function){u[f]=s(u[f])}}}else{var m=[]
for(var h in u){if(u.hasOwnProperty(h)&&h!=="failure"){m.push({variables:h.match(/[$_a-zA-z0-9]+/g),fn:u[h]})}}u=m}var g={order:[],skipData:{},values:{}}
var v=p(t,g)
var S=i===e?o:typeof e==="object"?k(e):r.parse(e)
i=e
o=S
d(S)
var y=v.body||v
var x=[]
if(n.isArray(v.body)){y=v.body[0]
x=v.body.slice(1)}var w
var C={_:[],vars:{}}
if(g.order.length===0||a.single){w=b(S,y,x,g,C,a)}else{w=E(0,g,u,C,a)}return w
function E(e,t,r,a,i){var o=t.order
t.skipData[o[e]]=0
do{for(var s=e+1;s<o.length;s+=1){t.skipData[o[s]]=0}if(e===o.length-1){n.each(t.values,function(e,r){n.each(t.values[r],function(e,n){delete t.values[r][n]})})
t.leftToSkip=n.extend({},t.skipData)
if(b(S,y,x.slice(),t,a,i)&&c(t,r)){return a}}else if(E(e+1,t,r,a,i)){return a}t.skipData[o[e]]+=1}while(!n.isEmpty(t.values[o[e]]))
return false}}function c(e,t){delete l.failure
for(var r in t){var a=t[r].variables
var i=n.map(a,function(t){t=s(t)
if(!n.has(e.values,t)){console.error("Callback var "+t+" doesn't exist")
return undefined}return k(e.values[t])})
var o=t[r].fn.apply(null,i)
if(!o||n.has(o,"failure")){if(n.has(o,"failure")){l.failure=o.failure}return false}}return true
function s(e){if(String.prototype.trim){return e.trim()}return e.replace(/^\s+|\s+$/g,"")}}function f(e){if(typeof e==="object"){return k(e)}if(a[e]){return JSON.parse(a[e])}var t=r.parse("("+e+")")
if(t.body[0].expression.type!=="FunctionExpression"||!t.body[0].expression.body){throw"Poorly formatted structure code"}var n=t.body[0].expression.body
a[e]=JSON.stringify(n)
return n}function p(e,t){var r=f(e)
d(r)
m(r,t)
return r}function d(e){for(var t in e){if(!e.hasOwnProperty(t)){continue}var a=e[t]
if(n.isObject(a)){d(a)
if(a.type==r.Syntax.UnaryExpression){var i=a.argument
if(i.type===r.Syntax.Literal&&n.isNumber(i.value)){if(a.operator==="-"){i.value=-i.value
e[t]=i}else if(a.operator==="+"){i.value=+i.value
e[t]=i}}}}}}function m(e,t){for(var a in e){if(!e.hasOwnProperty(a)){continue}if(n.isObject(e[a])){if(h(e[a])){e[a]=undefined}else if(g(e[a])){var i=e[a].name
if(!t.values[i]){t.values[i]={}
e[a]={wildcardVar:i}
t.order.push(i)
t.skipData[i]=0}else{e[a]=t.values[i]}}else if(e[a].type===r.Syntax.EmptyStatement){n.isArray(e)?e.splice(a,1):delete e[a]}else{m(e[a],t)}}}}function h(e){return e.name&&e.name==="_"}function g(e){return e.name&&n.isString(e.name)&&e.name.length>=2&&e.name[0]==="$"}function v(e){return e&&e.name&&(e.name==="glob_"&&"_"||e.name.indexOf("glob$")===0&&e.name.slice(5))||e&&e.expression&&v(e.expression)}function b(e,t,r,a,i,o){if(n.isArray(t)){console.error("toFind should never be an array.")
console.error(t)}if(e==undefined){if(t==undefined){i._.push(e)
return i}else{return false}}if(w(e,t,r,a,i,o)){return i}if(o.single){return false}for(var s in e){if(!e.hasOwnProperty(s)||!n.isObject(e[s])){continue}if(n.isArray(e[s])&&S(e[s],t,r,a,i,o)||!n.isArray(e[s])&&b(e[s],t,r,a,i,o)){return i}}return false}function S(e,t,r,n,a,i){var o
for(var s=0;s<e.length;s+=1){if(v(t)){if(!o){o=[]
var l=v(t)
if(l==="_"){a._.push(o)}else{a.vars[l]=o}}o.push(e[s])}else if(b(e[s],t,r,n,a,i)){if(!r||r.length===0){return a}else{t=r.shift()}}}if(o){return a}else if(v(t)){var l=v(t)
if(l==="_"){a._.push([])}else{a.vars[l]=[]}return a}return false}function y(e){return function(t,r,a,i,o,s){var l
for(l=0;l<i.order.length;l++){var u=i.values[i.order[l]]
if(n.isEmpty(u)){break}}var c=e(t,r,a,i,o,s)
if(!c){for(;l<i.order.length;l++){var u=i.values[i.order[l]]
if(!n.isEmpty(u)){n.each(u,function(e,t){delete u[t]})}else{break}}i._last=l}return c}}var x=y(function(e,t,r,n,a,i){var o
for(var s=0;s<e.length;s+=1){if(v(t)){if(!o){o=[]
var l=v(t)
if(l==="_"){a._.push(o)}else{a.vars[l]=o}}o.push(e[s])}else{if(b(e[s],t,r,n,a,i)){if(!r||r.length===0){return a}else{t=r.shift()}}else{return false}}}if(o){return a}else if(v(t)){var l=v(t)
if(l==="_"){a._.push([])}else{a.vars[l]=[]}return a}return false})
function w(e,t,r,a,i,o){var s
if(!i.root&&e.type!=="Program"){s=e}for(var l in t){if(!t.hasOwnProperty(l)||t[l]===null){continue}var u=t[l]
var c=e[l]
if(u===undefined){if(c==undefined){return false}else{i._.push(c)
continue}}if(c==null){if(l==="wildcardVar"){if(a.leftToSkip&&a.leftToSkip[u]>0){a.leftToSkip[u]-=1
return false}n.extend(a.values[u],e)
i.vars[u.slice(1)]=e
if(s){i.root=s}return i}return false}if(n.isObject(c)!==n.isObject(u)||n.isArray(c)!==n.isArray(u)||typeof c!==typeof u){return false}else if(n.isArray(c)){if(u.length===0){continue}var f=u[0]
var p=u.slice(1)
if(l==="params"||l==="arguments"){if(!x(c,f,p,a,i,o)){return false}}else if(!S(c,f,p,a,i,o)){return false}}else if(n.isObject(c)){if(!b(c,u,r,a,i,o)){return false}}else{if(c!==u){return false}}}if(t===undefined){i._.push(e)}if(s){i.root=s}return i}function k(e){return JSON.parse(JSON.stringify(e))}function C(e,t){if(!Rainbow){return e}Rainbow.color(e,"javascript",function(e){var r="<pre class='rainbowjs'>"+E(e)+"</pre>"
t(r)})}function E(e,t){if(!t){E.styleMap={}
E.counter=0}e=e.replace(/(^|[^A-Za-z0-9])_(?![A-Za-z0-9])/g,"$1<span class='structuredjs_blank'></span>")
var r=/(?:(^|[^\w])\$(\w+))|(?:\$<span class="function call">(\w+)<\/span>)/g
return e.replace(r,function(e,t,r,n){t=t||""
r=r||n
var a=E
if(!(r in a.styleMap)){a.styleMap[r]=a.counter<a.styles.length?a.styles[a.counter]:"extra"
a.counter+=1}return t+"<span class='structuredjs_var "+a.styleMap[r]+"'>"+"</span>"})}E.styles=["one","two","three","four","five","six","seven"]
E.styleMap={}
E.counter=0
function I(e,t){if(!e||e.type!=="Identifier"){return}if(e.name==="_"){if(!t._||t._.length===0){throw"No _ data available."}return t._.shift()}else if(e.name&&e.name.indexOf("$")===0){var r=e.name.slice(1)
if(!t.vars||!(r in t.vars)){throw"No vars available."}return t.vars[r]}}function A(e,t){var r=e&&e.expression||e
if(!r||r.type!=="Identifier"){return}if(r.name==="glob_"){if(!t._||t._.length===0){throw"No _ data available."}return t._.shift()}else if(r.name&&r.name.indexOf("glob$")===0){var n=r.name.slice(5)
if(!t.vars||!(n in t.vars)){throw"No vars available."}return t.vars[n]}}function R(e,t){if(!e){return e}for(var r in e){if(!e.hasOwnProperty(r)){continue}if(e[r]&&typeof e[r]==="object"&&"length"in e[r]){for(var n=0;n<e[r].length;n++){var a=A(e[r][n],t)
if(a){e[r].splice.apply(e[r],[n,1].concat(a))
break}else if(typeof e[r][n]==="object"){var i=I(e[r][n],t)
if(i){e[r][n]=i}else if(typeof e[r][n]==="object"){R(e[r][n],t)}}}}else{var i=I(e[r],t)
if(i){e[r]=i}else if(typeof e[r]==="object"){R(e[r],t)}}}return e}t.match=u
t.matchNode=function(e,t,r){r=r||{}
r.single=true
return u(e,t,r)}
t.injectData=function(e,t){e=f(e)
t=k(t)
return R(e,t)}
t.prettify=C})(typeof window!=="undefined"?window:global);(function(){var e=function(t,r){var n=e.resolve(t,r||"/")
var a=e.modules[n]
if(!a)throw new Error("Failed to resolve module "+t+", tried "+n)
var i=e.cache[n]
var o=i?i.exports:a()
return o}
e.paths=[]
e.modules={}
e.cache={}
e.extensions=[".js",".coffee",".json"]
e._core={assert:true,events:true,fs:true,path:true,vm:true}
e.resolve=function(){return function(t,r){if(!r)r="/"
if(e._core[t])return t
var n=e.modules.path()
r=n.resolve("/",r)
var a=r||"/"
if(t.match(/^(?:\.\.?\/|\/)/)){var i=s(n.resolve(a,t))||l(n.resolve(a,t))
if(i)return i}var o=u(t,a)
if(o)return o
throw new Error("Cannot find module '"+t+"'")
function s(t){t=n.normalize(t)
if(e.modules[t]){return t}for(var r=0;r<e.extensions.length;r++){var a=e.extensions[r]
if(e.modules[t+a])return t+a}}function l(t){t=t.replace(/\/+$/,"")
var r=n.normalize(t+"/package.json")
if(e.modules[r]){var a=e.modules[r]()
var i=a.browserify
if(typeof i==="object"&&i.main){var o=s(n.resolve(t,i.main))
if(o)return o}else if(typeof i==="string"){var o=s(n.resolve(t,i))
if(o)return o}else if(a.main){var o=s(n.resolve(t,a.main))
if(o)return o}}return s(t+"/index")}function u(e,t){var r=c(t)
for(var n=0;n<r.length;n++){var a=r[n]
var i=s(a+"/"+e)
if(i)return i
var o=l(a+"/"+e)
if(o)return o}var i=s(e)
if(i)return i}function c(e){var t
if(e==="/")t=[""]
else t=n.normalize(e).split("/")
var r=[]
for(var a=t.length-1;a>=0;a--){if(t[a]==="node_modules")continue
var i=t.slice(0,a+1).join("/")+"/node_modules"
r.push(i)}return r}}}()
e.alias=function(t,r){var n=e.modules.path()
var a=null
try{a=e.resolve(t+"/package.json","/")}catch(i){a=e.resolve(t,"/")}var o=n.dirname(a)
var s=(Object.keys||function(e){var t=[]
for(var r in e)t.push(r)
return t})(e.modules)
for(var l=0;l<s.length;l++){var u=s[l]
if(u.slice(0,o.length+1)===o+"/"){var c=u.slice(o.length)
e.modules[r+c]=e.modules[o+c]}else if(u===o){e.modules[r]=e.modules[o]}}};(function(){var t={}
var r=typeof window!=="undefined"?window:{}
var n=false
e.define=function(a,i){if(!n&&e.modules.__browserify_process){t=e.modules.__browserify_process()
n=true}var o=e._core[a]?"":e.modules.path().dirname(a)
var s=function(t){var r=e(t,o)
var n=e.cache[e.resolve(t,o)]
if(n&&n.parent===null){n.parent=l}return r}
s.resolve=function(t){return e.resolve(t,o)}
s.modules=e.modules
s.define=e.define
s.cache=e.cache
var l={id:a,filename:a,exports:{},loaded:false,parent:null}
e.modules[a]=function(){e.cache[a]=l
i.call(l.exports,s,l,l.exports,o,a,t,r)
l.loaded=true
return l.exports}}})()
e.define("path",function(e,t,r,n,a,i,o){function s(e,t){var r=[]
for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}function l(e,t){var r=0
for(var n=e.length;n>=0;n--){var a=e[n]
if(a=="."){e.splice(n,1)}else if(a===".."){e.splice(n,1)
r++}else if(r){e.splice(n,1)
r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/
r.resolve=function(){var e="",t=false
for(var r=arguments.length;r>=-1&&!t;r--){var n=r>=0?arguments[r]:i.cwd()
if(typeof n!=="string"||!n){continue}e=n+"/"+e
t=n.charAt(0)==="/"}e=l(s(e.split("/"),function(e){return!!e}),!t).join("/")
return(t?"/":"")+e||"."}
r.normalize=function(e){var t=e.charAt(0)==="/",r=e.slice(-1)==="/"
e=l(s(e.split("/"),function(e){return!!e}),!t).join("/")
if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e}
r.join=function(){var e=Array.prototype.slice.call(arguments,0)
return r.normalize(s(e,function(e,t){return e&&typeof e==="string"}).join("/"))}
r.dirname=function(e){var t=u.exec(e)[1]||""
var r=false
if(!t){return"."}else if(t.length===1||r&&t.length<=3&&t.charAt(1)===":"){return t}else{return t.substring(0,t.length-1)}}
r.basename=function(e,t){var r=u.exec(e)[2]||""
if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r}
r.extname=function(e){return u.exec(e)[3]||""}
r.relative=function(e,t){e=r.resolve(e).substr(1)
t=r.resolve(t).substr(1)
function n(e){var t=0
for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1
for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[]
return e.slice(t,r-t+1)}var a=n(e.split("/"))
var i=n(t.split("/"))
var o=Math.min(a.length,i.length)
var s=o
for(var l=0;l<o;l++){if(a[l]!==i[l]){s=l
break}}var u=[]
for(var l=s;l<a.length;l++){u.push("..")}u=u.concat(i.slice(s))
return u.join("/")}})
e.define("__browserify_process",function(e,t,r,n,a,i,o){var i=t.exports={}
i.nextTick=function(){var e=typeof window!=="undefined"&&window.setImmediate
var t=typeof window!=="undefined"&&window.postMessage&&window.addEventListener
if(e){return function(e){return window.setImmediate(e)}}if(t){var r=[]
window.addEventListener("message",function(e){if(e.source===window&&e.data==="browserify-tick"){e.stopPropagation()
if(r.length>0){var t=r.shift()
t()}}},true)
return function n(e){r.push(e)
window.postMessage("browserify-tick","*")}}return function a(e){setTimeout(e,0)}}()
i.title="browser"
i.browser=true
i.env={}
i.argv=[]
i.binding=function(t){if(t==="evals")return e("vm")
else throw new Error("No such module. (Possibly not yet loaded)")};(function(){var t="/"
var r
i.cwd=function(){return t}
i.chdir=function(n){if(!r)r=e("path")
t=r.resolve(n,t)}})()})
e.define("/package.json",function(e,t,r,n,a,i,o){t.exports={main:"escodegen.js"}})
e.define("/escodegen.js",function(e,t,r,n,a,i,o){(function(){"use strict"
var t,n,a,i,s,l,u,c,f,p,d,m,h,g,v,b,S,y,x,w,k,C,E,I,A
A=e("estraverse").traverse
t={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}
n={Sequence:0,Assignment:1,Conditional:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18}
a={"||":n.LogicalOR,"&&":n.LogicalAND,"|":n.BitwiseOR,"^":n.BitwiseXOR,"&":n.BitwiseAND,"==":n.Equality,"!=":n.Equality,"===":n.Equality,"!==":n.Equality,is:n.Equality,isnt:n.Equality,"<":n.Relational,">":n.Relational,"<=":n.Relational,">=":n.Relational,"in":n.Relational,"instanceof":n.Relational,"<<":n.BitwiseSHIFT,">>":n.BitwiseSHIFT,">>>":n.BitwiseSHIFT,"+":n.Additive,"-":n.Additive,"*":n.Multiplicative,"%":n.Multiplicative,"/":n.Multiplicative}
i={NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")}
function R(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false},moz:{starlessGenerator:false,parenthesizedComprehensionBlock:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,verbatim:null}}function _(e){var t=e.length,r=[],n
for(n=0;n<t;n+=1){r[n]=e.charAt(n)}return r}function L(e,t){var r=""
for(t|=0;t>0;t>>>=1,e+=e){if(t&1){r+=e}}return r}c=Array.isArray
if(!c){c=function pt(e){return Object.prototype.toString.call(e)==="[object Array]"}}function T(e,t,r,n){var a=[]
function i(e){var t,r
if(c(e)){for(t=0,r=e.length;t<r;++t){i(e[t])}}else if(e instanceof T){a.push(e)}else if(typeof e==="string"&&e){a.push(e)}}i(n)
this.children=a}T.prototype.toString=function dt(){var e="",t,r,n
for(t=0,r=this.children.length;t<r;++t){n=this.children[t]
if(n instanceof T){e+=n.toString()}else{e+=n}}return e}
T.prototype.replaceRight=function mt(e,t){var r=this.children[this.children.length-1]
if(r instanceof T){r.replaceRight(e,t)}else if(typeof r==="string"){this.children[this.children.length-1]=r.replace(e,t)}else{this.children.push("".replace(e,t))}return this}
T.prototype.join=function ht(e){var t,r,n
n=[]
r=this.children.length
if(r>0){for(t=0,r-=1;t<r;++t){n.push(this.children[t],e)}n.push(this.children[r])
this.children=n}return this}
function O(e){return/[\r\n]/g.test(e)}function D(e){var t=e.charAt(e.length-1)
return t==="\r"||t==="\n"}function P(e){var t={},r
for(r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t}function N(e){var t={},r,n
for(r in e){if(e.hasOwnProperty(r)){n=e[r]
if(typeof n==="object"&&n!==null){t[r]=N(n)}else{t[r]=n}}}return t}function j(e,t){var r,n
function a(e){return typeof e==="object"&&e instanceof Object&&!(e instanceof RegExp)}for(r in t){if(t.hasOwnProperty(r)){n=t[r]
if(a(n)){if(a(e[r])){j(e[r],n)}else{e[r]=j({},n)}}else{e[r]=n}}}return e}function J(e){var t,r,n,a,i
if(e!==e){throw new Error("Numeric literal whose value is NaN")}if(e<0||e===0&&1/e<0){throw new Error("Numeric literal whose value is negative")}if(e===1/0){return d?"null":m?"1e400":"1e+400"}t=""+e
if(!m||t.length<3){return t}r=t.indexOf(".")
if(!d&&t.charAt(0)==="0"&&r===1){r=0
t=t.slice(1)}n=t
t=t.replace("e+","e")
a=0
if((i=n.indexOf("e"))>0){a=+n.slice(i+1)
n=n.slice(0,i)}if(r>=0){a-=n.length-r-1
n=+(n.slice(0,r)+n.slice(r+1))+""}i=0
while(n.charAt(n.length+i-1)==="0"){i-=1}if(i!==0){a-=i
n=n.slice(0,i)}if(a!==0){n+="e"+a}if((n.length<t.length||h&&e>1e12&&Math.floor(e)===e&&(n="0x"+e.toString(16)).length<t.length)&&+n===e){t=n}return t}function B(e,t){var r=e.charCodeAt(0),n=r.toString(16),a="\\"
switch(e){case"\b":a+="b"
break
case"\f":a+="f"
break
case"	":a+="t"
break
default:if(d||r>255){a+="u"+"0000".slice(n.length)+n}else if(e==="\x00"&&"0123456789".indexOf(t)<0){a+="0"}else if(e===""){a+="v"}else{a+="x"+"00".slice(n.length)+n}break}return a}function U(e){var t="\\"
switch(e){case"\\":t+="\\"
break
case"\n":t+="n"
break
case"\r":t+="r"
break
case"\u2028":t+="u2028"
break
case"\u2029":t+="u2029"
break
default:throw new Error("Incorrectly classified character")}return t}function F(e){var t,r,n,a,i,o
i=e
if(typeof i[0]==="undefined"){i=_(i)}o=g==="double"?'"':"'"
for(t=0,r=i.length;t<r;t+=1){n=i[t]
if(n==="'"){o='"'
break}else if(n==='"'){o="'"
break}else if(n==="\\"){t+=1}}return o+e+o}function M(e){var t="",r,n,a,i,o=0,s=0,l
if(typeof e[0]==="undefined"){e=_(e)}for(r=0,n=e.length;r<n;r+=1){a=e[r]
if(a==="'"){o+=1}else if(a==='"'){s+=1}else if(a==="/"&&d){t+="\\"}else if("\\\n\r\u2028\u2029".indexOf(a)>=0){t+=U(a)
continue}else if(d&&a<" "||!(d||v||a>=" "&&a<="~")){t+=B(a,e[r+1])
continue}t+=a}l=!(g==="double"||g==="auto"&&s<o)
e=t
t=l?"'":'"'
if(typeof e[0]==="undefined"){e=_(e)}for(r=0,n=e.length;r<n;r+=1){a=e[r]
if(a==="'"&&l||a==='"'&&!l){t+="\\"}t+=a}return t+(l?"'":'"')}function q(e){return"	\f  ".indexOf(e)>=0||e.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(e)>=0}function V(e){return"\n\r\u2028\u2029".indexOf(e)>=0}function W(e){return e==="$"||e==="_"||e==="\\"||e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e.charCodeAt(0)>=128&&i.NonAsciiIdentifierPart.test(e)}function z(e,t){if(t==null){if(e instanceof u){return e}else{t={}}}if(t.loc==null){return new u(null,null,I,e)}return new u(t.loc.start.line,t.loc.start.column,I===true?t.loc.source||null:I,e)}function H(e,t){var r=z(e).toString(),n=z(t).toString(),a=r.charAt(r.length-1),i=n.charAt(0)
if((a==="+"||a==="-")&&a===i||W(a)&&W(i)){return[e," ",t]}else if(q(a)||V(a)||q(i)||V(i)){return[e,t]}return[e,S,t]}function K(e){return[f,e]}function G(e){var t,r
t=f
f+=p
r=e.call(this,f)
f=t
return r}function Y(e){var t
for(t=e.length-1;t>=0;t-=1){if(V(e.charAt(t))){break}}return e.length-1-t}function X(e,t){var r,n,a,i,o,s,l,u
r=e.split(/\r\n|[\r\n]/)
l=Number.MAX_VALUE
for(n=1,a=r.length;n<a;n+=1){i=r[n]
o=0
while(o<i.length&&q(i[o])){o+=1}if(l>o){l=o}}if(typeof t!=="undefined"){u=f
if(r[1][l]==="*"){t+=" "}f=t}else{if(l&1){l-=1}u=f}for(n=1,a=r.length;n<a;n+=1){r[n]=z(K(r[n].slice(l))).join("")}f=u
return r.join("\n")}function Z(e,t){if(e.type==="Line"){if(D(e.value)){return"//"+e.value}else{return"//"+e.value+"\n"}}if(C.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)){return X("/*"+e.value+"*/",t)}return"/*"+e.value+"*/"}function Q(e,r){var n,a,i,o,s,l,u,c
if(e.leadingComments&&e.leadingComments.length>0){o=r
i=e.leadingComments[0]
r=[]
if(w&&e.type===t.Program&&e.body.length===0){r.push("\n")}r.push(Z(i))
if(!D(z(r).toString())){r.push("\n")}for(n=1,a=e.leadingComments.length;n<a;n+=1){i=e.leadingComments[n]
c=[Z(i)]
if(!D(z(c).toString())){c.push("\n")}r.push(K(c))}r.push(K(o))}if(e.trailingComments){l=!D(z(r).toString())
u=L(" ",Y(z([f,r,p]).toString()))
for(n=0,a=e.trailingComments.length;n<a;n+=1){i=e.trailingComments[n]
if(l){if(n===0){r=[r,p]}else{r=[r,u]}r.push(Z(i,u))}else{r=[r,K(Z(i))]}if(n!==a-1&&!D(z(r).toString())){r=[r,"\n"]}}}return r}function et(e,t,r){if(t<r){return["(",e,")"]}return e}function tt(e,r,n){var a,i
i=!C.comment||!e.leadingComments
if(e.type===t.BlockStatement&&i){return[S,ot(e,{functionBody:n})]}if(e.type===t.EmptyStatement&&i){return";"}G(function(){a=[b,K(ot(e,{semicolonOptional:r,functionBody:n}))]})
return a}function rt(e,r){var n=D(z(r).toString())
if(e.type===t.BlockStatement&&(!C.comment||!e.leadingComments)&&!n){return[r,S]}if(n){return[r,f]}return[r,b,f]}function nt(e,t){var r,a
a=e[C.verbatim].split(/\r\n|\n/)
for(r=1;r<a.length;r++){a[r]=b+f+a[r]}a=et(a,n.Sequence,t.precedence)
return z(a,e)}function at(e){var t,r,a,i
t=["("]
for(r=0,a=e.params.length;r<a;r+=1){t.push(e.params[r].name)
if(r+1<a){t.push(","+S)}}t.push(")")
if(e.expression){t.push(S)
i=it(e.body,{precedence:n.Assignment,allowIn:true,allowCall:true})
if(i.toString().charAt(0)==="{"){i=["(",i,")"]}t.push(i)}else{t.push(tt(e.body,false,true))}return t}function it(e,r){var i,o,s,l,u,c,p,d,m,h,g,v,x,w,k,I,A,R,_
o=r.precedence
w=r.allowIn
k=r.allowCall
s=e.type||r.type
if(C.verbatim&&e.hasOwnProperty(C.verbatim)){return nt(e,r)}switch(s){case t.SequenceExpression:i=[]
w|=n.Sequence<o
for(u=0,c=e.expressions.length;u<c;u+=1){i.push(it(e.expressions[u],{precedence:n.Assignment,allowIn:w,allowCall:true}))
if(u+1<c){i.push(","+S)}}i=et(i,n.Sequence,o)
break
case t.AssignmentExpression:w|=n.Assignment<o
i=et([it(e.left,{precedence:n.Call,allowIn:w,allowCall:true}),S+e.operator+S,it(e.right,{precedence:n.Assignment,allowIn:w,allowCall:true})],n.Assignment,o)
break
case t.ConditionalExpression:w|=n.Conditional<o
i=et([it(e.test,{precedence:n.LogicalOR,allowIn:w,allowCall:true}),S+"?"+S,it(e.consequent,{precedence:n.Assignment,allowIn:w,allowCall:true}),S+":"+S,it(e.alternate,{precedence:n.Assignment,allowIn:w,allowCall:true})],n.Conditional,o)
break
case t.LogicalExpression:case t.BinaryExpression:l=a[e.operator]
w|=l<o
i=H(it(e.left,{precedence:l,allowIn:w,allowCall:true}),e.operator)
d=it(e.right,{precedence:l+1,allowIn:w,allowCall:true})
if(e.operator==="/"&&d.toString().charAt(0)==="/"){i.push(" ",d)}else{i=H(i,d)}if(e.operator==="in"&&!w){i=["(",i,")"]}else{i=et(i,l,o)}break
case t.CallExpression:i=[it(e.callee,{precedence:n.Call,allowIn:true,allowCall:true,allowUnparenthesizedNew:false})]
i.push("(")
for(u=0,c=e["arguments"].length;u<c;u+=1){i.push(it(e["arguments"][u],{precedence:n.Assignment,allowIn:true,allowCall:true}))
if(u+1<c){i.push(","+S)}}i.push(")")
if(!k){i=["(",i,")"]}else{i=et(i,n.Call,o)}break
case t.NewExpression:c=e["arguments"].length
I=r.allowUnparenthesizedNew===undefined||r.allowUnparenthesizedNew
i=H("new",it(e.callee,{precedence:n.New,allowIn:true,allowCall:false,allowUnparenthesizedNew:I&&!y&&c===0}))
if(!I||y||c>0){i.push("(")
for(u=0;u<c;u+=1){i.push(it(e["arguments"][u],{precedence:n.Assignment,allowIn:true,allowCall:true}))
if(u+1<c){i.push(","+S)}}i.push(")")}i=et(i,n.New,o)
break
case t.MemberExpression:i=[it(e.object,{precedence:n.Call,allowIn:true,allowCall:k,allowUnparenthesizedNew:false})]
if(e.computed){i.push("[",it(e.property,{precedence:n.Sequence,allowIn:true,allowCall:k}),"]")}else{if(e.object.type===t.Literal&&typeof e.object.value==="number"){if(i.indexOf(".")<0){if(!/[eExX]/.test(i)&&!(i.length>=2&&i[0]==="0")){i.push(".")}}}i.push("."+e.property.name)}i=et(i,n.Member,o)
break
case t.UnaryExpression:d=it(e.argument,{precedence:n.Unary,allowIn:true,allowCall:true})
if(S===""){i=H(e.operator,d)}else{i=[e.operator]
if(e.operator.length>2){i=H(i,d)}else{g=z(i).toString()
h=g.charAt(g.length-1)
v=d.toString().charAt(0)
if((h==="+"||h==="-")&&h===v||W(h)&&W(v)){i.push(" ",d)}else{i.push(d)}}}i=et(i,n.Unary,o)
break
case t.YieldExpression:if(e.delegate){i="yield*"}else{i="yield"}if(e.argument){i=H(i,it(e.argument,{precedence:n.Assignment,allowIn:true,allowCall:true}))}break
case t.UpdateExpression:if(e.prefix){i=et([e.operator,it(e.argument,{precedence:n.Unary,allowIn:true,allowCall:true})],n.Unary,o)}else{i=et([it(e.argument,{precedence:n.Postfix,allowIn:true,allowCall:true}),e.operator],n.Postfix,o)}break
case t.FunctionExpression:i="function"
if(e.id){i+=" "+e.id.name}else{i+=S}i=[i,at(e)]
break
case t.ArrayPattern:case t.ArrayExpression:if(!e.elements.length){i="[]"
break}m=e.elements.length>1
i=["[",m?b:""]
G(function(t){for(u=0,c=e.elements.length;u<c;u+=1){if(!e.elements[u]){if(m){i.push(t)}if(u+1===c){i.push(",")}}else{i.push(m?t:"",it(e.elements[u],{precedence:n.Assignment,allowIn:true,allowCall:true}))}if(u+1<c){i.push(","+(m?b:S))}}})
if(m&&!D(z(i).toString())){i.push(b)}i.push(m?f:"","]")
break
case t.Property:if(e.kind==="get"||e.kind==="set"){i=[e.kind+" ",it(e.key,{precedence:n.Sequence,allowIn:true,allowCall:true}),at(e.value)]}else{if(e.shorthand){i=it(e.key,{precedence:n.Sequence,allowIn:true,allowCall:true})}else if(e.method){i=[]
if(e.value.generator){i.push("*")}i.push(it(e.key,{precedence:n.Sequence,allowIn:true,allowCall:true}),at(e.value))}else{i=[it(e.key,{precedence:n.Sequence,allowIn:true,allowCall:true}),":"+S,it(e.value,{precedence:n.Assignment,allowIn:true,allowCall:true})]}}break
case t.ObjectExpression:if(!e.properties.length){i="{}"
break}m=e.properties.length>1
G(function(r){d=it(e.properties[0],{precedence:n.Sequence,allowIn:true,allowCall:true,type:t.Property})})
if(!m){if(!O(z(d).toString())){i=["{",S,d,S,"}"]
break}}G(function(r){i=["{",b,r,d]
if(m){i.push(","+b)
for(u=1,c=e.properties.length;u<c;u+=1){i.push(r,it(e.properties[u],{precedence:n.Sequence,allowIn:true,allowCall:true,type:t.Property}))
if(u+1<c){i.push(","+b)}}}})
if(!D(z(i).toString())){i.push(b)}i.push(f,"}")
break
case t.ObjectPattern:if(!e.properties.length){i="{}"
break}m=false
if(e.properties.length===1){A=e.properties[0]
if(A.value.type!==t.Identifier){m=true}}else{for(u=0,c=e.properties.length;u<c;u+=1){A=e.properties[u]
if(!A.shorthand){m=true
break}}}i=["{",m?b:""]
G(function(t){for(u=0,c=e.properties.length;u<c;u+=1){i.push(m?t:"",it(e.properties[u],{precedence:n.Sequence,allowIn:true,allowCall:true}))
if(u+1<c){i.push(","+(m?b:S))}}})
if(m&&!D(z(i).toString())){i.push(b)}i.push(m?f:"","}")
break
case t.ThisExpression:i="this"
break
case t.Identifier:i=e.name
break
case t.Literal:if(e.hasOwnProperty("raw")&&E){try{p=E(e.raw).body[0].expression
if(p.type===t.Literal){if(p.value===e.value){i=e.raw
break}}}catch(L){}}if(e.value===null){i="null"
break}if(typeof e.value==="string"){i=M(e.value)
break}if(typeof e.value==="number"){i=J(e.value)
break}i=e.value.toString()
break
case t.ComprehensionExpression:i=["[",it(e.body,{precedence:n.Assignment,allowIn:true,allowCall:true})]
if(e.blocks){for(u=0,c=e.blocks.length;u<c;u+=1){d=it(e.blocks[u],{precedence:n.Sequence,allowIn:true,allowCall:true})
i=H(i,d)}}if(e.filter){i=H(i,"if"+S)
d=it(e.filter,{precedence:n.Sequence,allowIn:true,allowCall:true})
if(C.moz.parenthesizedComprehensionBlock){i=H(i,["(",d,")"])}else{i=H(i,d)}}i.push("]")
break
case t.ComprehensionBlock:if(e.left.type===t.VariableDeclaration){d=[e.left.kind+" ",ot(e.left.declarations[0],{allowIn:false})]}else{d=it(e.left,{precedence:n.Call,allowIn:true,allowCall:true})}d=H(d,e.of?"of":"in")
d=H(d,it(e.right,{precedence:n.Sequence,allowIn:true,allowCall:true}))
if(C.moz.parenthesizedComprehensionBlock){i=["for"+S+"(",d,")"]}else{i=H("for"+S,d)}break
default:throw new Error("Unknown expression type: "+e.type)}return z(i,e)}function ot(e,r){var a,i,o,s,l,u,c,f,p
l=true
p=";"
u=false
c=false
if(r){l=r.allowIn===undefined||r.allowIn
if(!x&&r.semicolonOptional===true){p=""}u=r.functionBody
c=r.directiveContext}switch(e.type){case t.BlockStatement:o=["{",b]
G(function(){for(a=0,i=e.body.length;a<i;a+=1){f=K(ot(e.body[a],{semicolonOptional:a===i-1,directiveContext:u}))
o.push(f)
if(!D(z(f).toString())){o.push(b)}}})
o.push(K("}"))
break
case t.BreakStatement:if(e.label){o="break "+e.label.name+p}else{o="break"+p}break
case t.ContinueStatement:if(e.label){o="continue "+e.label.name+p}else{o="continue"+p}break
case t.DirectiveStatement:if(e.raw){o=e.raw+p}else{o=F(e.directive)+p}break
case t.DoWhileStatement:o=H("do",tt(e.body))
o=rt(e.body,o)
o=H(o,["while"+S+"(",it(e.test,{precedence:n.Sequence,allowIn:true,allowCall:true}),")"+p])
break
case t.CatchClause:G(function(){o=["catch"+S+"(",it(e.param,{precedence:n.Sequence,allowIn:true,allowCall:true}),")"]})
o.push(tt(e.body))
break
case t.DebuggerStatement:o="debugger"+p
break
case t.EmptyStatement:o=";"
break
case t.ExpressionStatement:o=[it(e.expression,{precedence:n.Sequence,allowIn:true,allowCall:true})]
if(o.toString().charAt(0)==="{"||o.toString().slice(0,8)==="function"&&" (".indexOf(o.toString().charAt(8))>=0||k&&c&&e.expression.type===t.Literal&&typeof e.expression.value==="string"){o=["(",o,")"+p]}else{o.push(p)}break
case t.VariableDeclarator:if(e.init){o=[it(e.id,{precedence:n.Assignment,allowIn:l,allowCall:true})+S+"="+S,it(e.init,{precedence:n.Assignment,allowIn:l,allowCall:true})]}else{o=e.id.name}break
case t.VariableDeclaration:o=[e.kind]
if(e.declarations.length===1&&e.declarations[0].init&&e.declarations[0].init.type===t.FunctionExpression){o.push(" ",ot(e.declarations[0],{allowIn:l}))}else{G(function(){s=e.declarations[0]
if(C.comment&&s.leadingComments){o.push("\n",K(ot(s,{allowIn:l})))}else{o.push(" ",ot(s,{allowIn:l}))}for(a=1,i=e.declarations.length;a<i;a+=1){s=e.declarations[a]
if(C.comment&&s.leadingComments){o.push(","+b,K(ot(s,{allowIn:l})))}else{o.push(","+S,ot(s,{allowIn:l}))}}})}o.push(p)
break
case t.ThrowStatement:o=[H("throw",it(e.argument,{precedence:n.Sequence,allowIn:true,allowCall:true})),p]
break
case t.TryStatement:o=["try",tt(e.block)]
o=rt(e.block,o)
for(a=0,i=e.handlers.length;a<i;a+=1){o=H(o,ot(e.handlers[a]))
if(e.finalizer||a+1!==i){o=rt(e.handlers[a].body,o)}}if(e.finalizer){o=H(o,["finally",tt(e.finalizer)])}break
case t.SwitchStatement:G(function(){o=["switch"+S+"(",it(e.discriminant,{precedence:n.Sequence,allowIn:true,allowCall:true}),")"+S+"{"+b]})
if(e.cases){for(a=0,i=e.cases.length;a<i;a+=1){f=K(ot(e.cases[a],{semicolonOptional:a===i-1}))
o.push(f)
if(!D(z(f).toString())){o.push(b)}}}o.push(K("}"))
break
case t.SwitchCase:G(function(){if(e.test){o=[H("case",it(e.test,{precedence:n.Sequence,allowIn:true,allowCall:true})),":"]}else{o=["default:"]}a=0
i=e.consequent.length
if(i&&e.consequent[0].type===t.BlockStatement){f=tt(e.consequent[0])
o.push(f)
a=1}if(a!==i&&!D(z(o).toString())){o.push(b)}for(;a<i;a+=1){f=K(ot(e.consequent[a],{semicolonOptional:a===i-1&&p===""}))
o.push(f)
if(a+1!==i&&!D(z(f).toString())){o.push(b)}}})
break
case t.IfStatement:G(function(){o=["if"+S+"(",it(e.test,{precedence:n.Sequence,allowIn:true,allowCall:true}),")"]})
if(e.alternate){o.push(tt(e.consequent))
o=rt(e.consequent,o)
if(e.alternate.type===t.IfStatement){o=H(o,["else ",ot(e.alternate,{semicolonOptional:p===""})])}else{o=H(o,H("else",tt(e.alternate,p==="")))}}else{o.push(tt(e.consequent,p===""))}break
case t.ForStatement:G(function(){o=["for"+S+"("]
if(e.init){if(e.init.type===t.VariableDeclaration){o.push(ot(e.init,{allowIn:false}))}else{o.push(it(e.init,{precedence:n.Sequence,allowIn:false,allowCall:true}),";")}}else{o.push(";")}if(e.test){o.push(S,it(e.test,{precedence:n.Sequence,allowIn:true,allowCall:true}),";")}else{o.push(";")}if(e.update){o.push(S,it(e.update,{precedence:n.Sequence,allowIn:true,allowCall:true}),")")}else{o.push(")")}})
o.push(tt(e.body,p===""))
break
case t.ForInStatement:o=["for"+S+"("]
G(function(){if(e.left.type===t.VariableDeclaration){G(function(){o.push(e.left.kind+" ",ot(e.left.declarations[0],{allowIn:false}))})}else{o.push(it(e.left,{precedence:n.Call,allowIn:true,allowCall:true}))}o=H(o,"in")
o=[H(o,it(e.right,{precedence:n.Sequence,allowIn:true,allowCall:true})),")"]})
o.push(tt(e.body,p===""))
break
case t.LabeledStatement:o=[e.label.name+":",tt(e.body,p==="")]
break
case t.Program:i=e.body.length
o=[w&&i>0?"\n":""]
for(a=0;a<i;a+=1){f=K(ot(e.body[a],{semicolonOptional:!w&&a===i-1,directiveContext:true}))
o.push(f)
if(a+1<i&&!D(z(f).toString())){o.push(b)}}break
case t.FunctionDeclaration:o=[(e.generator&&!C.moz.starlessGenerator?"function* ":"function ")+e.id.name,at(e)]
break
case t.ReturnStatement:if(e.argument){o=[H("return",it(e.argument,{precedence:n.Sequence,allowIn:true,allowCall:true})),p]}else{o=["return"+p]}break
case t.WhileStatement:G(function(){o=["while"+S+"(",it(e.test,{precedence:n.Sequence,allowIn:true,allowCall:true}),")"]})
o.push(tt(e.body,p===""))
break
case t.WithStatement:G(function(){o=["with"+S+"(",it(e.object,{precedence:n.Sequence,allowIn:true,allowCall:true}),")"]})
o.push(tt(e.body,p===""))
break
default:throw new Error("Unknown statement type: "+e.type)}if(C.comment){o=Q(e,o)}f=z(o).toString()
if(e.type===t.Program&&!w&&b===""&&f.charAt(f.length-1)==="\n"){o=z(o).replaceRight(/\s+$/,"")}return z(o,e)}function st(a,i){var s=R(),l,c
if(i!=null){if(typeof i.indent==="string"){s.format.indent.style=i.indent}if(typeof i.base==="number"){s.format.indent.base=i.base}i=j(s,i)
p=i.format.indent.style
if(typeof i.base==="string"){f=i.base}else{f=L(p,i.format.indent.base)}}else{i=s
p=i.format.indent.style
f=L(p,i.format.indent.base)}d=i.format.json
m=i.format.renumber
h=d?false:i.format.hexadecimal
g=d?"double":i.format.quotes
v=i.format.escapeless
if(i.format.compact){b=S=p=f=""}else{b="\n"
S=" "}y=i.format.parentheses
x=i.format.semicolons
w=i.format.safeConcatenation
k=i.directive
E=d?null:i.parse
I=i.sourceMap
C=i
if(I){if(!r.browser){u=e("source-map").SourceNode}else{u=o.sourceMap.SourceNode}}else{u=T}switch(a.type){case t.BlockStatement:case t.BreakStatement:case t.CatchClause:case t.ContinueStatement:case t.DirectiveStatement:case t.DoWhileStatement:case t.DebuggerStatement:case t.EmptyStatement:case t.ExpressionStatement:case t.ForStatement:case t.ForInStatement:case t.FunctionDeclaration:case t.IfStatement:case t.LabeledStatement:case t.Program:case t.ReturnStatement:case t.SwitchStatement:case t.SwitchCase:case t.ThrowStatement:case t.TryStatement:case t.VariableDeclaration:case t.VariableDeclarator:case t.WhileStatement:case t.WithStatement:l=ot(a)
break
case t.AssignmentExpression:case t.ArrayExpression:case t.ArrayPattern:case t.BinaryExpression:case t.CallExpression:case t.ConditionalExpression:case t.FunctionExpression:case t.Identifier:case t.Literal:case t.LogicalExpression:case t.MemberExpression:case t.NewExpression:case t.ObjectExpression:case t.ObjectPattern:case t.Property:case t.SequenceExpression:case t.ThisExpression:case t.UnaryExpression:case t.UpdateExpression:case t.YieldExpression:l=it(a,{precedence:n.Sequence,allowIn:true,allowCall:true})
break
default:throw new Error("Unknown node type: "+a.type)}if(!I){return l.toString()}c=l.toStringWithSourceMap({file:i.sourceMap,sourceRoot:i.sourceMapRoot})
if(i.sourceMapWithCode){return c}return c.map.toString()}s={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DirectiveStatement:[],DoWhileStatement:["body","test"],DebuggerStatement:[],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]}
l={Break:1,Skip:2}
function lt(e,t){var r,n,a,i
n=e.length
a=0
while(n){r=n>>>1
i=a+r
if(t(e[i])){n=r}else{a=i+1
n-=r+1}}return a}function ut(e,t){var r,n,a,i
n=e.length
a=0
while(n){r=n>>>1
i=a+r
if(t(e[i])){a=i+1
n-=r+1}else{n=r}}return a}function ct(e,t){var r,n
r=lt(t,function a(t){return t.range[0]>e.range[0]})
e.extendedRange=[e.range[0],e.range[1]]
if(r!==t.length){e.extendedRange[1]=t[r].range[0]}r-=1
if(r>=0){if(r<t.length){e.extendedRange[0]=t[r].range[1]}else if(n.length){e.extendedRange[1]=t[t.length-1].range[0]}}return e}function ft(e,t,r){var n=[],a,i,o
if(!e.range){throw new Error("attachComments needs range information")}if(!r.length){if(t.length){for(o=0,i=t.length;o<i;o+=1){a=N(t[o])
a.extendedRange=[0,e.range[0]]
n.push(a)}e.leadingComments=n}return e}for(o=0,i=t.length;o<i;o+=1){n.push(ct(N(t[o]),r))}A(e,{cursor:0,enter:function(e){var t
while(this.cursor<n.length){t=n[this.cursor]
if(t.extendedRange[1]>e.range[0]){break}if(t.extendedRange[1]===e.range[0]){if(!e.leadingComments){e.leadingComments=[]}e.leadingComments.push(t)
n.splice(this.cursor,1)}else{this.cursor+=1}}if(this.cursor===n.length){return l.Break}if(n[this.cursor].extendedRange[0]>e.range[1]){return l.Skip}}})
A(e,{cursor:0,leave:function(e){var t
while(this.cursor<n.length){t=n[this.cursor]
if(e.range[1]<t.extendedRange[0]){break}if(e.range[1]===t.extendedRange[0]){if(!e.trailingComments){e.trailingComments=[]}e.trailingComments.push(t)
n.splice(this.cursor,1)}else{this.cursor+=1}}if(this.cursor===n.length){return l.Break}if(n[this.cursor].extendedRange[0]>e.range[1]){return l.Skip}}})
return e}r.version="0.0.16-dev"
r.generate=st
r.attachComments=ft
r.browser=false})()})
e.define("/node_modules/estraverse/package.json",function(e,t,r,n,a,i,o){t.exports={main:"estraverse.js"}})
e.define("/node_modules/estraverse/estraverse.js",function(e,t,r,n,a,i,o){(function(e){"use strict"
if(typeof define==="function"&&define.amd){define(["exports"],e)}else if(typeof r!=="undefined"){e(r)}else{e(window.estraverse={})}})(function(e){"use strict"
var t,r,n,a,i
t={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"}
r=Array.isArray
if(!r){r=function l(e){return Object.prototype.toString.call(e)==="[object Array]"}}a={AssignmentExpression:["left","right"],ArrayExpression:["elements"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"]}
n={Break:1,Skip:2}
i={PropertyWrapper:"Property"}
function o(e,o){var s,l,u,c,f,p,d,m,h,g={}
s=[e]
l=[null]
while(s.length){u=s.pop()
c=u.type
if(u===g){u=l.pop()
if(o.leave){f=o.leave(u,l[l.length-1])}else{f=undefined}if(f===n.Break){return}}else if(u){if(i.hasOwnProperty(c)){u=u.node
c=i[c]}if(o.enter){f=o.enter(u,l[l.length-1])}else{f=undefined}if(f===n.Break){return}s.push(g)
l.push(u)
if(f!==n.Skip){m=a[c]
p=m.length
while((p-=1)>=0){h=u[m[p]]
if(h){if(r(h)){d=h.length
while((d-=1)>=0){if(h[d]){if(c===t.ObjectExpression&&"properties"===m[p]&&null==m[p].type){s.push({type:"PropertyWrapper",node:h[d]})}else{s.push(h[d])}}}}else{s.push(h)}}}}}}}function s(e,o){var s,l,u,c,f,p,d,m,h,g,v,b={},S
S={top:e}
p=[e,S,"top"]
s=[p]
l=[p]
function y(e){d=e}while(s.length){p=s.pop()
if(p===b){p=l.pop()
d=undefined
if(o.leave){u=p[0]
f=o.leave(p[0],l[l.length-1][0],y)
if(f!==undefined){u=f}p[1][p[2]]=u}if(d===n.Break){return S.top}}else if(p[0]){d=undefined
u=p[0]
c=u.type
if(i.hasOwnProperty(c)){p[0]=u=u.node
c=i[c]}if(o.enter){f=o.enter(p[0],l[l.length-1][0],y)
if(f!==undefined){u=f}p[1][p[2]]=u
p[0]=u}if(d===n.Break){return S.top}if(p[0]){s.push(b)
l.push(p)
if(d!==n.Skip){g=a[c]
m=g.length
while((m-=1)>=0){v=u[g[m]]
if(v){if(r(v)){h=v.length
while((h-=1)>=0){if(v[h]){if(c===t.ObjectExpression&&"properties"===g[m]&&null==g[m].type){s.push([{type:"PropertyWrapper",node:v[h]},v,h])}else{s.push([v[h],v,h])}}}}else{s.push([v,u,g[m]])}}}}}}}return S.top}e.version="0.0.4"
e.Syntax=t
e.traverse=o
e.replace=s
e.VisitorKeys=a
e.VisitorOption=n})})
e.define("/tools/entry-point.js",function(e,t,r,n,a,i,o){(function(){"use strict"
var t
t=o.escodegen=e("../escodegen")
t.browser=true})()})
e("/tools/entry-point.js")})()
var JSEditor=Backbone.View.extend({className:"block-editor",initialize:function(e){this.setCode(e.code)},setCode:function(e){if(typeof e==="string"){e=JSRules.parseProgram(e)}this.code=e
this.code.on({updated:function(){this.trigger("updated")}.bind(this)})
this.trigger("updated")},toScript:function(){return this.code.toScript()},render:function(){this.$el.html(this.code.render().$el)
return this}})
var JSToolbox=Backbone.View.extend({className:"block-toolbox",initialize:function(e){var t=e.toolbox||{}
_.keys(t).forEach(function(r){t[r]=t[r].map(function(t){if(typeof t==="function"){t=JSRules.parseStructure(t)}var r=JSRules.findRule(t)
r.imagesDir=e.imagesDir
return r})})
this.toolbox=t},scroll:function(e){this.el.style.top=e+"px"},render:function(){var e=[]
var t=this.toolbox
_.keys(t).forEach(function(r){var n=[]
n.push("<h3>"+r+"</h3>")
t[r].forEach(function(e){var t=e.render().$el
t.data("drag-data",e.toAST())
t.draggable({appendTo:".block-toolbox-editor",connectToSortable:".block-statements",helper:function(){return t.clone(true)},revert:false})
n.push(t)})
e.push($("<div>").addClass("toolbox-group").html(n))})
var r=function(e){return e.draggable.parent().children(".ui-sortable-placeholder")}
var n=$("<div>").addClass("block-trash").droppable({over:function(e,t){t.draggable.data("trash-over",true)
var n=t.draggable.data("multi")
if(n){n.triggerHandler("overTrash")}else{t.draggable.triggerHandler("overTrash")}t.helper.addClass("trash-over")
t.draggable.addClass("trash-over")
r(t).addClass("trash-over")
$(this).addClass("over")},out:function(e,t){t.draggable.data("trash-over",false)
var n=t.draggable.data("multi")
if(n){n.triggerHandler("outTrash")}else{t.draggable.triggerHandler("outTrash")}t.helper.removeClass("trash-over")
t.draggable.removeClass("trash-over")
r(t).removeClass("trash-over")
$(this).removeClass("over")},drop:function(e,t){var n=t.draggable.data("multi")
var a=r(t)
var i=t.draggable.parent().children().not(".ui-sortable-helper").not(n||t.draggable).index(a)
if(n){n.each(function(){$(this).trigger("sort-removed",i)
$(this).remove()})}else{t.draggable.trigger("sort-removed",i)
t.draggable.remove()}$(this).removeClass("over")}})
e.push(n)
this.$el.html(e)
this.$el.on("mousedown touchstart",".block-statement .block-wrapper",function(e){$(".input.active, .block-statement.active").removeClass("active")
$(".block-statement.ui-selected").removeClass("ui-selected")
$(this).closest(".block-statement").addClass("active")})
this.$el.on("mouseup mouseleave touchend touchleave",".block-statement .block-wrapper",function(e){$(this).closest(".block-statement").removeClass("active")})
return this}})
var JSToolboxEditor=Backbone.View.extend({events:{scroll:"scroll"},initialize:function(e){this.imagesDir=e.imagesDir
this.editor=new JSEditor({code:e.code})
this.editor.on("updated",function(e){this.trigger("updated",e)}.bind(this))
this.toolbox=new JSToolbox({toolbox:e.toolbox,imagesDir:e.imagesDir})
this.render()},scroll:function(){this.el.scrollLeft=0
this.toolbox.scroll(this.el.scrollTop)},setCode:function(e){this.editor.setCode(e)
this.editor.render()},toScript:function(){return this.editor.toScript()},codeToHTML:function(e){if(typeof e==="function"){e=e.toString()}if(typeof e==="string"){e=e.replace(/^function\s*\(\s*\)\s*{([\s\S]*)}$/,"$1")
e=JSRules.parseCode(e).body}var t=$("<div>")
var r={}
var n=["one","two","three","four","five","six","seven"]
e.forEach(function(e){var r=JSRules.findRule(e)
r.render().$el.appendTo(t)})
t.find("input").each(function(){var e=this.value
var t="input "+this.className
if(e==="_"){e="&nbsp;"}else if(e.indexOf("$")===0){e="&nbsp;"
var a=e.slice(1)
if(!(a in r)){r[a]=n[_.keys(r).length]||"extra"}t+=" "+r[a]}$(this).replaceWith($("<span>").html(e).addClass(t))})
return t[0].outerHTML},render:function(){this.$el.on("touchstart",function(e){var t=this.scrollTop
var r=this.scrollHeight
var n=t+this.offsetHeight
if(r===this.offsetHeight){if(e.target.nodeName.toLowerCase()!=="input"){e.preventDefault()}}else if(t<=0){this.scrollTop=1}else if(n>=r){this.scrollTop=t-1}})
this.$el.addClass("block-toolbox-editor")
this.$el.children().detach()
this.$el.append([this.toolbox.render().$el,this.editor.render().$el])}})
var JSRules={rules:[],isTouchDevice:!!("ontouchstart"in window),findRule:function(e,t){if(typeof e!=="object"){return}for(var r=0;r<this.rules.length;r++){var n=this.rules[r]
var a=Structured.matchNode(e,n.prototype.structure)
if(a){return new n({node:e,match:a,parent:t})}}throw new Error("No rule found for: "+JSON.stringify(e))},addRule:function(e){e.prototype.tokens=this.tokenize(e.prototype.structure)
if(typeof e.prototype.structure==="function"){e.prototype.structure=this.parseStructure(e.prototype.structure)}this.rules.push(e)
return e},textWidth:function(e){if(!this.$textSize){this.$textSize=$("<span>").hide().addClass("block").appendTo("body")}this.$textSize.text(e.replace(/\s/g," "))
return Math.max(this.$textSize.outerWidth(),10)+10},tokenize:function(e){if(typeof e==="object"){return[]}if(typeof e==="function"){e=e.toString().replace(/function.*?{\s*/,"").replace(/\s*}$/,"")}return esprima.tokenize(e)},parseCode:function(e){var t=esprima.parse(e,{range:true,tokens:true,comment:true})
return escodegen.attachComments(t,t.comments,t.tokens)},parseProgram:function(e){return new JSProgram({node:this.parseCode(e)})},parseStructure:function(e){return this.parseCode("("+e+")").body[0].expression.body.body[0]}}
var JSStatements=Backbone.Collection.extend({_prepareModel:function(e,t){if(e instanceof JSRule){e.collection=this
return e}var r=JSRules.findRule(e,t.parent)
r.collection=this
return r}})
var JSRule=Backbone.View.extend({baseEvents:{"sort-update":"sortUpdate","sort-added":"sortAdded","sort-removed":"sortRemoved",trashOut:"trashOut",trashOver:"trashOver",drop:"drop"},events:function(){return _.extend({},this.baseEvents,this.additionalEvents)},initialize:function(e){this.node=e.node
this.match=_.defaults(this.genMatch(e),{_:[],vars:{}})
this.children=this.getChildModels()
this.parent=e.parent},isComment:function(){return false},trashOut:function(){this.$el.removeClass("trash-over")},trashOver:function(){this.$el.addClass("trash-over")},drop:function(){if(!this.$el.hasClass("ui-draggable")){return}this.$el.removeClass("ui-draggable ui-draggable-handle active").css({width:"",height:""})
var e=this.$el
setTimeout(function(){e.addClass("ui-selectee")},0)
this.render()
this.$el.parent().sortable("refresh")},sortUpdate:function(e,t){var r=this.collection
if(this.collection){if(r.models.indexOf(this)<0){return}r.remove(this)
r.add(this,{at:t})}this.triggerUpdate()},sortAdded:function(e,t,r,n){var a=this.findChildCollection()
if(a){var i=JSRules.findRule(t,this)
i.setElement(n)
a.add(i,{at:r})}this.triggerUpdate()},sortRemoved:function(e,t){var r=this.findChildCollection()
if(r){var n=r.at(t)
r.remove(n)
this.triggerUpdate()}},triggerUpdate:function(){if(this.parent){this.parent.triggerUpdate()}},findChildCollection:function(){var e=this.children
for(var t=0,r=e._.length;t<r;t++){if(e._[t]instanceof JSStatements){return e._[t]}}for(var n in e.vars){if(e.vars[n]instanceof JSStatements){return e.vars[n]}}},getChildModels:function(e){e=e||this.match
var t={_:[],vars:{}}
for(var r=0;r<e._.length;r++){var n=e._[r]
t._[r]=_.isArray(n)?this.modelMatchArray(n):this.modelMatch(n)}for(var a in e.vars){var n=e.vars[a]
t.vars[a]=_.isArray(n)?this.modelMatchArray(n):this.modelMatch(n)}return t},modelMatch:function(e){return JSRules.findRule(e,this)},modelMatchArray:function(e){var t=[]
e.forEach(function(e){if(e.leadingComments){t=t.concat(e.leadingComments)}t.push(e)
if(e.trailingComments){t=t.concat(e.trailingComments)}})
return new JSStatements(t,{parent:this})},genMatch:function(){throw new Error("No genMatch method implemented.")},toAST:function(){throw new Error("No toAST method implemented.")},toScript:function(){var e=escodegen.generate(this.toAST(),{comment:true})
e=e.replace(/;    \/\//g,";\n\n//")
return e},getAST:function(){var e=this.match
var t={_:[],vars:{},leadingComments:[]}
for(var r=0;r<e._.length;r++){var n=e._[r]
if(_.isArray(n)){var a=this.astComponentArray(n,"_",r)
t.leadingComments=t.leadingComments.concat(a.leadingComments)
t._[r]=a.data}else{t._[r]=this.astComponent(n,"_",r)}}for(var i in e.vars){var n=e.vars[i]
if(_.isArray(n)){var a=this.astComponentArray(n,"vars",i)
t.leadingComments=t.leadingComments.concat(a.leadingComments)
t.vars[i]=a.data}else{t.vars[i]=this.astComponent(n,"vars",i)}}return t},astComponent:function(e,t,r){return this.children[t][r].toAST()},astComponentArray:function(e,t,r){var n={data:[],leadingComments:[]}
this.children[t][r].forEach(function(e){var t=e.toAST()
if(e.isComment()){if(n.data.length>0){var r=n.data[n.data.length-1]
if(!r.trailingComments){r.trailingComments=[]}r.trailingComments.push(t)}else{n.leadingComments.push(t)}}else{n.data.push(t)}})
return n},renderStatements:function(e){var t=$("<div>").addClass("block block-statements")
t.html(e.map(function(e){return e.render().el}))
var r=function(e){if(e.helper){var t=e.item.data("multi")||e.item
return e.placeholder.parent().children().not(".ui-sortable-helper").not(t).index(e.placeholder)}else{return e.item.index()}}
if(!JSRules.isTouchDevice){}t.on("mousedown focusin touchstart",function(e){var t=$(".input.active")
var r=t.parent()
var n=$(e.target)
if(n.closest(".block-wrapper").length===0){$(".ui-selected").removeClass("ui-selected")
t.removeClass("active").blur()}else if(!r[0]||!$.contains(n[0],r[0])&&!$.contains(r[0],n[0])){t.removeClass("active").blur()
if(n.hasClass("input")){n.addClass("active")}var a=n.closest(".block-statement")
var i=a.siblings(".ui-selected")
i.removeClass("ui-selected")
a.addClass("ui-selected")}})
t.on("click",".block-statement .block-wrapper",function(e){var t=$(this).closest(".block-statement")
var r=t.siblings(".ui-selected")
if(e.metaKey||e.ctrlKey){t.toggleClass("ui-selected")}else if(t.hasClass("ui-selected")){if(r.length>0){r.removeClass("ui-selected")}}else{r.removeClass("ui-selected")
t.addClass("ui-selected")}})
$(document).on("keydown",function(e){if($(e.target).is("input, textarea")){return}if(e.which===27){t.children().removeClass("ui-selected")
e.preventDefault()}else if(e.which===8||e.which===46){e.preventDefault()}})
var n=false
var a=true
var i=false
t.sortable({appendTo:".block-toolbox-editor",revert:false,handle:".block-wrapper > .grab-handle",scroll:true,scrollSensitivity:10,scrollSpeed:10,helper:function(e,r){if(!r.hasClass("ui-selected")){r.parent().children().removeClass("ui-selected")
r.addClass("ui-selected")}var n=r.parent().children(".ui-selected")
var a=n.clone(true)
r.data("multi",n)
r.data("multi-curIndex",n.first().index())
var i=0
n.each(function(){var e=$(this).children().outerWidth(true)
i=Math.max(e,i)})
n.not(r[0]).hide()
t.sortable("refresh")
return $("<div>").addClass("block-wrapper").html(a).width(i)},start:function(e,t){n=false
a=t.helper.hasClass("ui-draggable")
i=!a
if(a){t.item.parent().children().removeClass("ui-selected")}else{var r=$(".block-trash").show()
setTimeout(function(){r.addClass("visible")
t.placeholder.addClass("inline")},0)}},change:function(e,t){var n=t.item.data("multi")
var a=r(t)
if(!n){t.item.trigger("sort-update",a)
return}var i=t.item.data("multi-curIndex")
var o=a>i
t.item.data("multi-curIndex",a)
if(o){a+=n.length-1}n.each(function(){$(this).trigger("sort-update",a)
if(!o){a+=1}})},over:function(e,t){if(!a||i){return}n=true
i=true
var o=t.helper.data("drag-data")
t.placeholder.trigger("sort-added",[o,r(t),t.item])
setTimeout(function(){n=false},0)},out:function(e,t){if(n){n=false
return}if(!a||!i){return}i=false
t.item.trigger("sort-removed",r(t))},beforeStop:function(e,t){n=true
var r=t.item.data("multi")
if(r){r.show().insertAfter(t.placeholder)}},stop:function(e,t){var r=t.item.data("multi")
if(r){r.triggerHandler("drop")
r.removeClass("ui-selected")}else{t.item.triggerHandler("drop")
t.item.removeClass("ui-selected")}t.item.removeData("multi")
var n=$(".block-trash").removeClass("visible")
setTimeout(function(){n.hide()},500)}})
return t[0]},renderInput:function(e){var t=$("<div>").addClass("block block-input")
t.html(e.render().el)
return t[0]}})
var JSASTRule=JSRule.extend({className:"block block-statement",genMatch:function(e){return e.match},toAST:function(){return Structured.injectData(this.structure,this.getAST())},render:function(){var e=this.children
var t=this.tokens
var r=0
var n=0
var a=function(e,t){return $("<span class='"+e+"'>"+(t?t.value:"")+"</span>")[0]}
t=t.map(function(t){if(t.type==="Identifier"){if(t.value==="_"){return e._[r++].render().el}else if(t.value.indexOf("$")===0){var n=e.vars[t.value.slice(1)].render().el
var i=t.value.indexOf("_")
if(i>0){var o=t.value.slice(i+1)
var s=t.value.slice(1,i)
var l=a("block block-blank block-"+o+" block-name-"+s)
l.appendChild(n)
var u=a("block-name")
u.appendChild(a("block-text",{value:s}))
l.appendChild(u)
n=l}return n}else{return a("entity name function call show-toolbox",t)}}else if(t.type==="Punctuator"){switch(t.value){case".":return a("keyword dot",t)
case"=":case"+":case"!":case"-":case"|":case"*":case"/":t.value=" "+t.value+" "
return a("keyword operator",t)
case",":return", "}}else if(t.type==="Keyword"){t.value+=" "
return a("keyword",t)}else if(t.type==="Boolean"){return a("constant language",t)}else if(t.type==="Numeric"){return a("constant numeric",t)}return t.value}).map(function(e){if(typeof e==="string"&&e.indexOf("<")===-1){return a("text",{value:e})}return e})
t.unshift($(a("grab-handle")).html([a("grabber"),t.shift()]))
if(this.image&&this.imagesDir){t.unshift("<img src='"+this.imagesDir+"toolbox/"+this.image+"' class='show-toolbox show-only-toolbox toolbox-image'/>")}this.$el.html($("<div>").addClass("block-wrapper").append(t))
if(this.postRender){this.postRender()}return this}})
var JSASTColorRule=JSASTRule.extend({additionalEvents:{updateColor:"updateColor"},updateColor:function(e,t){this.children.vars.r_rgb.setValue(t.r)
this.children.vars.g_rgb.setValue(t.g)
this.children.vars.b_rgb.setValue(t.b)
this.postRender()},postRender:function(){var e
try{e={r:this.children.vars.r_rgb.getValue(),g:this.children.vars.g_rgb.getValue(),b:this.children.vars.b_rgb.getValue()}}catch(t){e={r:255,g:255,b:255}}this.$el.data("color",e)
this.children.vars.r_rgb.$el.parent().css("background","rgb("+[e.r,e.g,e.b].join(",")+")")}})
var JSProgram=JSRules.addRule(JSRule.extend({structure:{type:"Program"},className:"program",triggerUpdate:function(){if(this.updateDelay){return}this.updateDelay=setTimeout(function(){this.updateDelay=null
this.trigger("updated")}.bind(this),0)},genMatch:function(){var e=this.node.leadingComments||[]
return{_:[e.concat(this.node.body)]}},toAST:function(){var e=this.getAST()
return{type:"Program",leadingComments:e.leadingComments,body:e._[0]}},render:function(){this.$el.html(this.renderStatements(this.children._[0]))
return this}}))
var JSComment=JSRules.addRule(JSRule.extend({structure:{type:"Line"},className:"block block-statement block-comment",additionalEvents:{"input input":"onInput"},defaultValue:i18n._("Your comment..."),isComment:function(){return true},genMatch:function(){return{_:[this.node.value]}},toAST:function(){return{type:"Line",value:this.match._[0].replace(/^\s*/," ")}},onInput:function(e){this.match._[0]=e.target.value
var t=e.target.value||this.defaultValue
$(e.target).width(Math.max(JSRules.textWidth(t)-3,40))
this.triggerUpdate()},render:function(){var e=this.match._[0].replace(/^\s*/,"")
this.$el.html($("<div>").addClass("block-wrapper").html(["<span class='grab-handle'><span class='grabber'></span>"+"<span class='show-toolbox comment'>//&nbsp;"+"<span class='show-only-toolbox'>Comment</span></span></span>",$("<input>").attr({type:"text",value:e,placeholder:this.defaultValue,"class":"comment input"}).width(Math.max(JSRules.textWidth(e||this.defaultValue)+4,40))]))
return this}}))
JSRules.addRule(JSASTRule.extend({structure:function(){var e=e}}))
JSRules.addRule(JSRule.extend({structure:{type:"Identifier"},className:"block block-inline block-variable",additionalEvents:{"input input":"onInput"},genMatch:function(){return{vars:{name:this.node.name}}},toAST:function(){return{type:"Identifier",name:this.match.vars.name}},onInput:function(e){this.match.vars.name=e.target.value
$(e.target).width(Math.max(JSRules.textWidth(e.target.value)-2,40))
this.triggerUpdate()},render:function(){var e=this.match.vars.name.toString()
this.$el.html($("<input>").width(Math.max(JSRules.textWidth(e),40)).attr({type:"text",value:e}))
return this}}))
JSRules.addRule(JSRule.extend({structure:{type:"Literal"},className:"block block-inline",additionalEvents:{"input input":"onInput","keydown input":"onKeyDown",updateValue:"updateValue"},getType:function(){return typeof this.node.value},genMatch:function(){return{vars:{value:this.node.value}}},toAST:function(){var e=this.match.vars.value
if(this.getType()==="number"&&e<0){return{type:"UnaryExpression",operator:"-",prefix:true,argument:{type:"Literal",value:Math.abs(e)}}}return{type:"Literal",value:e}},getValue:function(){return this.match.vars.value},setValue:function(e){var t=this.getType()
if(t==="boolean"){e=e==="true"}else if(t==="number"){e=parseFloat(e)||0}var r=e.toString()
if(r!==this.getInputValue()){this.setInputValue(r)}this.match.vars.value=e
this.getInput().width(Math.max(JSRules.textWidth(r)-2,40))
this.$el.data("value",e)
this.triggerUpdate()},getInput:function(){return this.$el.find(".input")},getInputValue:function(){var e=this.getInput()
return e.is("input")?e.val():e.text()},setInputValue:function(e){var t=this.getInput()
if(t.is("input")){t.val(e)}else{t.text(e)}},updateValue:function(e,t){this.setValue(t)},onInput:function(e){this.setValue(e.target.value)},onKeyDown:function(e){if(e.keyCode===13){e.preventDefault()
this.deactivate()}},render:function(){var e=this.getType()
var t=this.match.vars.value.toString()
this.$el.addClass("block-"+e)
var r=$("<input>").attr({type:"text",value:t})
if(JSRules.isTouchDevice){r=$("<span>").text(t)}r.width(Math.max(JSRules.textWidth(t),40)).addClass("input constant numeric")
this.$el.html(r)
this.$el.data("value",t)
return this}}))
JSRules.addRule(JSASTRule.extend({image:"rect.png",structure:function(){rect($x_number,$y_number,$width_number,$height_number)}}))
JSRules.addRule(JSASTRule.extend({image:"line.png",structure:function(){line($x1_number,$y1_number,$x2_number,$y2_number)}}))
JSRules.addRule(JSASTRule.extend({image:"bezier.png",structure:function(){bezier($x1_number,$y1_number,$cx1_number,$cy1_number,$cx2_number,$cy2_number,$x2_number,$y2_number)}}))
JSRules.addRule(JSASTRule.extend({image:"ellipse.png",structure:function(){ellipse($x_number,$y_number,$width_number,$height_number)}}))
JSRules.addRule(JSASTRule.extend({image:"point.png",structure:function(){point($x_number,$y_number)}}))
JSRules.addRule(JSASTRule.extend({image:"quad.png",structure:function(){quad($x1_number,$y1_number,$x2_number,$y2_number,$x3_number,$y3_number,$x4_number,$y4_number)}}))
JSRules.addRule(JSASTRule.extend({image:"triangle.png",structure:function(){triangle($x1_number,$y1_number,$x2_number,$y2_number,$x3_number,$y3_number)}}))
JSRules.addRule(JSASTRule.extend({image:"arc.png",structure:function(){arc($x_number,$y_number,$width_number,$height_number,$start_number,$stop_number)}}))
JSRules.addRule(JSASTRule.extend({image:"image.png",structure:function(){image($image_image,$x_number,$y_number)}}))
JSRules.addRule(JSASTColorRule.extend({structure:function(){background($r_rgb,$g_rgb,$b_rgb)}}))
JSRules.addRule(JSASTColorRule.extend({structure:function(){fill($r_rgb,$g_rgb,$b_rgb)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){noFill()}}))
JSRules.addRule(JSASTColorRule.extend({structure:function(){stroke($r_rgb,$g_rgb,$b_rgb)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){strokeWeight($size_number)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){noStroke()}}))
JSRules.addRule(JSASTColorRule.extend({structure:function(){color($r_rgb,$g_rgb,$b_rgb)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){blendColor($c1_color,$c2_color,$mode_number)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){lerpColor($c1_color,$c2_color,$amount_number)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){text($text_string,$x_number,$y_number)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){textFont($font_string)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){textSize($size_number)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){rotate($angle_number)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){scale($amount_number)}}))
JSRules.addRule(JSASTRule.extend({structure:function(){translate($x_number,$y_number)}}))
__KA_module.exports = JSToolboxEditor;
this.JSToolboxEditor = JSToolboxEditor;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.audio.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../handlebars/handlebars.runtime.js");
(function(e,t){"use strict"
if(!e||!e.document){throw new Error("SoundManager requires a browser with window and document objects.")}var i=null
function n(i,n){this.setupOptions={url:i||null,flashVersion:8,debugMode:true,debugFlash:false,useConsole:true,consoleOnly:true,waitForWindowLoad:false,bgColor:"#ffffff",useHighPerformance:false,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:false,useHTML5Audio:true,html5Test:/^(probably|maybe)$/i,preferFlash:false,noSWFCache:false,idPrefix:"sound"}
this.defaultOptions={autoLoad:false,autoPlay:false,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:true,multiShotEvents:false,position:null,pan:0,stream:true,to:null,type:null,usePolicyFile:false,volume:100}
this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null}
this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null}
this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}}
this.movieID="sm2-container"
this.id=n||"sm2movie"
this.debugID="soundmanager-debug"
this.debugURLParam=/([#?&])debug=1/i
this.versionNumber="V2.97a.20140901"
this.version=null
this.movieURL=null
this.altURL=null
this.swfLoaded=false
this.enabled=false
this.oMC=null
this.sounds={}
this.soundIDs=[]
this.muted=false
this.didFlashBlock=false
this.filePattern=null
this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i}
this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false}
this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null}
this.html5={usingFlash:null}
this.flash={}
this.html5Only=false
this.ignoreFlash=false
var o,a=this,s=null,r=null,l="soundManager",u=l+": ",f="HTML5::",d,c=navigator.userAgent,h=e.location.href.toString(),p=document,m,g,_,y,v=[],w=true,b,O=false,D=false,M=false,L=false,T=false,S,P=0,F,I,k,C,H,A,E,R,x,U,N,B,j,W,q,V,Q,K,J,X,G,z,Y,Z=["log","info","warn","error"],et=8,tt,it,nt,ot=null,at=null,st,rt,lt,ut,ft,dt,ct,ht,pt,mt=false,gt=false,_t,yt,vt,wt=0,bt=null,Ot,Dt=[],Mt,Lt=null,Tt,St,Pt,Ft,It,kt,Ct,Ht,At=Array.prototype.slice,Et=false,Rt,xt,Ut,Nt,Bt,jt,Wt,qt,Vt=0,$t=c.match(/(ipad|iphone|ipod)/i),Qt=c.match(/android/i),Kt=c.match(/msie/i),Jt=c.match(/webkit/i),Xt=c.match(/safari/i)&&!c.match(/chrome/i),Gt=c.match(/opera/i),zt=c.match(/(mobile|pre\/|xoom)/i)||$t||Qt,Yt=!h.match(/usehtml5audio/i)&&!h.match(/sm2\-ignorebadua/i)&&Xt&&!c.match(/silk/i)&&c.match(/OS X 10_6_([3-7])/i),Zt=e.console!==t&&console.log!==t,ei=p.hasFocus!==t?p.hasFocus():null,ti=Xt&&(p.hasFocus===t||!p.hasFocus()),ii=!ti,ni=/(mp3|mp4|mpa|m4a|m4b)/i,oi=1e3,ai="about:blank",si="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",ri=p.location?p.location.protocol.match(/http/i):null,li=!ri?"http:/"+"/":"",ui=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,fi=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],di=new RegExp("\\.("+fi.join("|")+")(\\?.*)?$","i")
this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i
this.useAltURL=!ri
ut={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"}
this.hasHTML5=function(){try{return Audio!==t&&(Gt&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return false}}()
this.setup=function(e){var i=!a.url
if(e!==t&&M&&Lt&&a.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)){ht(st("setupLate"))}k(e)
if(e){if(i&&K&&e.url!==t){a.beginDelayedInit()}if(!K&&e.url!==t&&p.readyState==="complete"){setTimeout(V,1)}}return a}
this.ok=function(){return Lt?M&&!L:a.useHTML5Audio&&a.hasHTML5}
this.supported=this.ok
this.getMovie=function(t){return d(t)||p[t]||e[t]}
this.createSound=function(e,i){var n,s,u,f=null
n=l+".createSound(): "
s=n+st(!M?"notReady":"notOK")
if(!M||!a.ok()){ht(s)
return false}if(i!==t){e={id:e,url:i}}u=I(e)
u.url=Ot(u.url)
if(u.id===undefined){u.id=a.setupOptions.idPrefix+Vt++}if(u.id.toString().charAt(0).match(/^[0-9]$/)){a._wD(n+st("badID",u.id),2)}a._wD(n+u.id+(u.url?" ("+u.url+")":""),1)
if(pt(u.id,true)){a._wD(n+u.id+" exists",1)
return a.sounds[u.id]}function d(){u=dt(u)
a.sounds[u.id]=new o(u)
a.soundIDs.push(u.id)
return a.sounds[u.id]}if(St(u)){f=d()
a._wD(u.id+": Using HTML5")
f._setup_html5(u)}else{if(a.html5Only){a._wD(u.id+": No HTML5 support for this sound, and no Flash. Exiting.")
return d()}if(a.html5.usingFlash&&u.url&&u.url.match(/data\:/i)){a._wD(u.id+": data: URIs not supported via Flash. Exiting.")
return d()}if(y>8){if(u.isMovieStar===null){u.isMovieStar=!!(u.serverURL||(u.type?u.type.match(ui):false)||u.url&&u.url.match(di))}if(u.isMovieStar){a._wD(n+"using MovieStar handling")
if(u.loops>1){S("noNSLoop")}}}u=ct(u,n)
f=d()
if(y===8){r._createSound(u.id,u.loops||1,u.usePolicyFile)}else{r._createSound(u.id,u.url,u.usePeakData,u.useWaveformData,u.useEQData,u.isMovieStar,u.isMovieStar?u.bufferTime:false,u.loops||1,u.serverURL,u.duration||null,u.autoPlay,true,u.autoLoad,u.usePolicyFile)
if(!u.serverURL){f.connected=true
if(u.onconnect){u.onconnect.apply(f)}}}if(!u.serverURL&&(u.autoLoad||u.autoPlay)){f.load(u)}}if(!u.serverURL&&u.autoPlay){f.play()}return f}
this.destroySound=function(e,t){if(!pt(e)){return false}var i=a.sounds[e],n
i._iO={}
i.stop()
i.unload()
for(n=0;n<a.soundIDs.length;n++){if(a.soundIDs[n]===e){a.soundIDs.splice(n,1)
break}}if(!t){i.destruct(true)}i=null
delete a.sounds[e]
return true}
this.load=function(e,t){if(!pt(e)){return false}return a.sounds[e].load(t)}
this.unload=function(e){if(!pt(e)){return false}return a.sounds[e].unload()}
this.onPosition=function(e,t,i,n){if(!pt(e)){return false}return a.sounds[e].onposition(t,i,n)}
this.onposition=this.onPosition
this.clearOnPosition=function(e,t,i){if(!pt(e)){return false}return a.sounds[e].clearOnPosition(t,i)}
this.play=function(e,t){var i=null,n=t&&!(t instanceof Object)
if(!M||!a.ok()){ht(l+".play(): "+st(!M?"notReady":"notOK"))
return false}if(!pt(e,n)){if(!n){return false}if(n){t={url:t}}if(t&&t.url){a._wD(l+'.play(): Attempting to create "'+e+'"',1)
t.id=e
i=a.createSound(t).play()}}else if(n){t={url:t}}if(i===null){i=a.sounds[e].play(t)}return i}
this.start=this.play
this.setPosition=function(e,t){if(!pt(e)){return false}return a.sounds[e].setPosition(t)}
this.stop=function(e){if(!pt(e)){return false}a._wD(l+".stop("+e+")",1)
return a.sounds[e].stop()}
this.stopAll=function(){var e
a._wD(l+".stopAll()",1)
for(e in a.sounds){if(a.sounds.hasOwnProperty(e)){a.sounds[e].stop()}}}
this.pause=function(e){if(!pt(e)){return false}return a.sounds[e].pause()}
this.pauseAll=function(){var e
for(e=a.soundIDs.length-1;e>=0;e--){a.sounds[a.soundIDs[e]].pause()}}
this.resume=function(e){if(!pt(e)){return false}return a.sounds[e].resume()}
this.resumeAll=function(){var e
for(e=a.soundIDs.length-1;e>=0;e--){a.sounds[a.soundIDs[e]].resume()}}
this.togglePause=function(e){if(!pt(e)){return false}return a.sounds[e].togglePause()}
this.setPan=function(e,t){if(!pt(e)){return false}return a.sounds[e].setPan(t)}
this.setVolume=function(e,t){if(!pt(e)){return false}return a.sounds[e].setVolume(t)}
this.mute=function(e){var t=0
if(e instanceof String){e=null}if(!e){a._wD(l+".mute(): Muting all sounds")
for(t=a.soundIDs.length-1;t>=0;t--){a.sounds[a.soundIDs[t]].mute()}a.muted=true}else{if(!pt(e)){return false}a._wD(l+'.mute(): Muting "'+e+'"')
return a.sounds[e].mute()}return true}
this.muteAll=function(){a.mute()}
this.unmute=function(e){var t
if(e instanceof String){e=null}if(!e){a._wD(l+".unmute(): Unmuting all sounds")
for(t=a.soundIDs.length-1;t>=0;t--){a.sounds[a.soundIDs[t]].unmute()}a.muted=false}else{if(!pt(e)){return false}a._wD(l+'.unmute(): Unmuting "'+e+'"')
return a.sounds[e].unmute()}return true}
this.unmuteAll=function(){a.unmute()}
this.toggleMute=function(e){if(!pt(e)){return false}return a.sounds[e].toggleMute()}
this.getMemoryUse=function(){var e=0
if(r&&y!==8){e=parseInt(r._getMemoryUse(),10)}return e}
this.disable=function(i){var n
if(i===t){i=false}if(L){return false}L=true
S("shutdown",1)
for(n=a.soundIDs.length-1;n>=0;n--){tt(a.sounds[a.soundIDs[n]])}F(i)
Ht.remove(e,"load",E)
return true}
this.canPlayMIME=function(e){var t
if(a.hasHTML5){t=Pt({type:e})}if(!t&&Lt){t=e&&a.ok()?!!((y>8?e.match(ui):null)||e.match(a.mimePattern)):null}return t}
this.canPlayURL=function(e){var t
if(a.hasHTML5){t=Pt({url:e})}if(!t&&Lt){t=e&&a.ok()?!!e.match(a.filePattern):null}return t}
this.canPlayLink=function(e){if(e.type!==t&&e.type){if(a.canPlayMIME(e.type)){return true}}return a.canPlayURL(e.href)}
this.getSoundById=function(e,t){if(!e){return null}var i=a.sounds[e]
if(!i&&!t){a._wD(l+'.getSoundById(): Sound "'+e+'" not found.',2)}return i}
this.onready=function(t,i){var n="onready",o=false
if(typeof t==="function"){if(M){a._wD(st("queue",n))}if(!i){i=e}H(n,t,i)
A()
o=true}else{throw st("needFunction",n)}return o}
this.ontimeout=function(t,i){var n="ontimeout",o=false
if(typeof t==="function"){if(M){a._wD(st("queue",n))}if(!i){i=e}H(n,t,i)
A({type:n})
o=true}else{throw st("needFunction",n)}return o}
this._writeDebug=function(e,i){var n="soundmanager-debug",o,s
if(!a.debugMode){return false}if(Zt&&a.useConsole){if(i&&typeof i==="object"){console.log(e,i)}else if(Z[i]!==t){console[Z[i]](e)}else{console.log(e)}if(a.consoleOnly){return true}}o=d(n)
if(!o){return false}s=p.createElement("div")
if(++P%2===0){s.className="sm2-alt"}if(i===t){i=0}else{i=parseInt(i,10)}s.appendChild(p.createTextNode(e))
if(i){if(i>=2){s.style.fontWeight="bold"}if(i===3){s.style.color="#ff3333"}}o.insertBefore(s,o.firstChild)
o=null
return true}
if(h.indexOf("sm2-debug=alert")!==-1){this._writeDebug=function(t){e.alert(t)}}this._wD=this._writeDebug
this._debug=function(){var e,t
S("currentObj",1)
for(e=0,t=a.soundIDs.length;e<t;e++){a.sounds[a.soundIDs[e]]._debug()}}
this.reboot=function(t,i){if(a.soundIDs.length){a._wD("Destroying "+a.soundIDs.length+" SMSound object"+(a.soundIDs.length!==1?"s":"")+"...")}var n,o,s
for(n=a.soundIDs.length-1;n>=0;n--){a.sounds[a.soundIDs[n]].destruct()}if(r){try{if(Kt){at=r.innerHTML}ot=r.parentNode.removeChild(r)}catch(u){S("badRemove",2)}}at=ot=Lt=r=null
a.enabled=K=M=mt=gt=O=D=L=Et=a.swfLoaded=false
a.soundIDs=[]
a.sounds={}
Vt=0
if(!t){for(n in v){if(v.hasOwnProperty(n)){for(o=0,s=v[n].length;o<s;o++){v[n][o].fired=false}}}}else{v=[]}if(!i){a._wD(l+": Rebooting...")}a.html5={usingFlash:null}
a.flash={}
a.html5Only=false
a.ignoreFlash=false
e.setTimeout(function(){q()
if(!i){a.beginDelayedInit()}},20)
return a}
this.reset=function(){S("reset")
return a.reboot(true,true)}
this.getMoviePercent=function(){return r&&"PercentLoaded"in r?r.PercentLoaded():null}
this.beginDelayedInit=function(){T=true
V()
setTimeout(function(){if(gt){return false}X()
W()
gt=true
return true},20)
R()}
this.destruct=function(){a._wD(l+".destruct()")
a.disable(true)}
o=function(e){var i=this,n,o,l,u,f,d,c=false,h=[],p=0,m,g,_=null,v,w
v={duration:null,time:null}
this.id=e.id
this.sID=this.id
this.url=e.url
this.options=I(e)
this.instanceOptions=this.options
this._iO=this.instanceOptions
this.pan=this.options.pan
this.volume=this.options.volume
this.isHTML5=false
this._a=null
w=this.url?false:true
this.id3={}
this._debug=function(){a._wD(i.id+": Merged options:",i.options)}
this.load=function(e){var n=null,o
if(e!==t){i._iO=I(e,i.options)}else{e=i.options
i._iO=e
if(_&&_!==i.url){S("manURL")
i._iO.url=i.url
i.url=null}}if(!i._iO.url){i._iO.url=i.url}i._iO.url=Ot(i._iO.url)
i.instanceOptions=i._iO
o=i._iO
a._wD(i.id+": load ("+o.url+")")
if(!o.url&&!i.url){a._wD(i.id+": load(): url is unassigned. Exiting.",2)
return i}if(!i.isHTML5&&y===8&&!i.url&&!o.autoPlay){a._wD(i.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1)}if(o.url===i.url&&i.readyState!==0&&i.readyState!==2){S("onURL",1)
if(i.readyState===3&&o.onload){qt(i,function(){o.onload.apply(i,[!!i.duration])})}return i}i.loaded=false
i.readyState=1
i.playState=0
i.id3={}
if(St(o)){n=i._setup_html5(o)
if(!n._called_load){i._html5_canplay=false
if(i.url!==o.url){a._wD(S("manURL")+": "+o.url)
i._a.src=o.url
i.setPosition(0)}i._a.autobuffer="auto"
i._a.preload="auto"
i._a._called_load=true}else{a._wD(i.id+": Ignoring request to load again")}}else{if(a.html5Only){a._wD(i.id+": No flash support. Exiting.")
return i}if(i._iO.url&&i._iO.url.match(/data\:/i)){a._wD(i.id+": data: URIs not supported via Flash. Exiting.")
return i}try{i.isHTML5=false
i._iO=ct(dt(o))
if(i._iO.autoPlay&&(i._iO.position||i._iO.from)){a._wD(i.id+": Disabling autoPlay because of non-zero offset case")
i._iO.autoPlay=false}o=i._iO
if(y===8){r._load(i.id,o.url,o.stream,o.autoPlay,o.usePolicyFile)}else{r._load(i.id,o.url,!!o.stream,!!o.autoPlay,o.loops||1,!!o.autoLoad,o.usePolicyFile)}}catch(s){S("smError",2)
b("onload",false)
G({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}i.url=o.url
return i}
this.unload=function(){if(i.readyState!==0){a._wD(i.id+": unload()")
if(!i.isHTML5){if(y===8){r._unload(i.id,ai)}else{r._unload(i.id)}}else{u()
if(i._a){i._a.pause()
_=It(i._a)}}n()}return i}
this.destruct=function(e){a._wD(i.id+": Destruct")
if(!i.isHTML5){i._iO.onfailure=null
r._destroySound(i.id)}else{u()
if(i._a){i._a.pause()
It(i._a)
if(!Et){l()}i._a._s=null
i._a=null}}if(!e){a.destroySound(i.id,true)}}
this.play=function(e,n){var o,s,l,u,h,p,m,_=true,v=null
o=i.id+": play(): "
n=n===t?true:n
if(!e){e={}}if(i.url){i._iO.url=i.url}i._iO=I(i._iO,i.options)
i._iO=I(e,i._iO)
i._iO.url=Ot(i._iO.url)
i.instanceOptions=i._iO
if(!i.isHTML5&&i._iO.serverURL&&!i.connected){if(!i.getAutoPlay()){a._wD(o+" Netstream not connected yet - setting autoPlay")
i.setAutoPlay(true)}return i}if(St(i._iO)){i._setup_html5(i._iO)
f()}if(i.playState===1&&!i.paused){s=i._iO.multiShot
if(!s){a._wD(o+"Already playing (one-shot)",1)
if(i.isHTML5){i.setPosition(i._iO.position)}v=i}else{a._wD(o+"Already playing (multi-shot)",1)}}if(v!==null){return v}if(e.url&&e.url!==i.url){if(!i.readyState&&!i.isHTML5&&y===8&&w){w=false}else{i.load(i._iO)}}if(!i.loaded){if(i.readyState===0){a._wD(o+"Attempting to load")
if(!i.isHTML5&&!a.html5Only){i._iO.autoPlay=true
i.load(i._iO)}else if(i.isHTML5){i.load(i._iO)}else{a._wD(o+"Unsupported type. Exiting.")
v=i}i.instanceOptions=i._iO}else if(i.readyState===2){a._wD(o+"Could not load - exiting",2)
v=i}else{a._wD(o+"Loading - attempting to play...")}}else{a._wD(o.substr(0,o.lastIndexOf(":")))}if(v!==null){return v}if(!i.isHTML5&&y===9&&i.position>0&&i.position===i.duration){a._wD(o+"Sound at end, resetting to position:0")
e.position=0}if(i.paused&&i.position>=0&&(!i._iO.serverURL||i.position>0)){a._wD(o+"Resuming from paused state",1)
i.resume()}else{i._iO=I(e,i._iO)
if((!i.isHTML5&&i._iO.position!==null&&i._iO.position>0||i._iO.from!==null&&i._iO.from>0||i._iO.to!==null)&&i.instanceCount===0&&i.playState===0&&!i._iO.serverURL){u=function(){i._iO=I(e,i._iO)
i.play(i._iO)}
if(i.isHTML5&&!i._html5_canplay){a._wD(o+"Beginning load for non-zero offset case")
i.load({_oncanplay:u})
v=false}else if(!i.isHTML5&&!i.loaded&&(!i.readyState||i.readyState!==2)){a._wD(o+"Preloading for non-zero offset case")
i.load({onload:u})
v=false}if(v!==null){return v}i._iO=g()}if(!i.instanceCount||i._iO.multiShotEvents||i.isHTML5&&i._iO.multiShot&&!Et||!i.isHTML5&&y>8&&!i.getAutoPlay()){i.instanceCount++}if(i._iO.onposition&&i.playState===0){d(i)}i.playState=1
i.paused=false
i.position=i._iO.position!==t&&!isNaN(i._iO.position)?i._iO.position:0
if(!i.isHTML5){i._iO=ct(dt(i._iO))}if(i._iO.onplay&&n){i._iO.onplay.apply(i)
c=true}i.setVolume(i._iO.volume,true)
i.setPan(i._iO.pan,true)
if(!i.isHTML5){_=r._start(i.id,i._iO.loops||1,y===9?i.position:i.position/oi,i._iO.multiShot||false)
if(y===9&&!_){a._wD(o+"No sound hardware, or 32-sound ceiling hit",2)
if(i._iO.onplayerror){i._iO.onplayerror.apply(i)}}}else{if(i.instanceCount<2){f()
l=i._setup_html5()
i.setPosition(i._iO.position)
l.play()}else{a._wD(i.id+": Cloning Audio() for instance #"+i.instanceCount+"...")
h=new Audio(i._iO.url)
p=function(){Ht.remove(h,"ended",p)
i._onfinish(i)
It(h)
h=null}
m=function(){Ht.remove(h,"canplay",m)
try{h.currentTime=i._iO.position/oi}catch(e){ht(i.id+": multiShot play() failed to apply position of "+i._iO.position/oi)}h.play()}
Ht.add(h,"ended",p)
if(i._iO.volume!==undefined){h.volume=Math.max(0,Math.min(1,i._iO.volume/100))}if(i.muted){h.muted=true}if(i._iO.position){Ht.add(h,"canplay",m)}else{h.play()}}}}return i}
this.start=this.play
this.stop=function(e){var t=i._iO,n
if(i.playState===1){a._wD(i.id+": stop()")
i._onbufferchange(0)
i._resetOnPosition(0)
i.paused=false
if(!i.isHTML5){i.playState=0}m()
if(t.to){i.clearOnPosition(t.to)}if(!i.isHTML5){r._stop(i.id,e)
if(t.serverURL){i.unload()}}else{if(i._a){n=i.position
i.setPosition(0)
i.position=n
i._a.pause()
i.playState=0
i._onTimer()
u()}}i.instanceCount=0
i._iO={}
if(t.onstop){t.onstop.apply(i)}}return i}
this.setAutoPlay=function(e){a._wD(i.id+": Autoplay turned "+(e?"on":"off"))
i._iO.autoPlay=e
if(!i.isHTML5){r._setAutoPlay(i.id,e)
if(e){if(!i.instanceCount&&i.readyState===1){i.instanceCount++
a._wD(i.id+": Incremented instance count to "+i.instanceCount)}}}}
this.getAutoPlay=function(){return i._iO.autoPlay}
this.setPosition=function(e){if(e===t){e=0}var n,o,s=i.isHTML5?Math.max(e,0):Math.min(i.duration||i._iO.duration,Math.max(e,0))
i.position=s
o=i.position/oi
i._resetOnPosition(i.position)
i._iO.position=s
if(!i.isHTML5){n=y===9?i.position:o
if(i.readyState&&i.readyState!==2){r._setPosition(i.id,n,i.paused||!i.playState,i._iO.multiShot)}}else if(i._a){if(i._html5_canplay){if(i._a.currentTime!==o){a._wD(i.id+": setPosition("+o+")")
try{i._a.currentTime=o
if(i.playState===0||i.paused){i._a.pause()}}catch(l){a._wD(i.id+": setPosition("+o+") failed: "+l.message,2)}}}else if(o){a._wD(i.id+": setPosition("+o+"): Cannot seek yet, sound not ready",2)
return i}if(i.paused){i._onTimer(true)}}return i}
this.pause=function(e){if(i.paused||i.playState===0&&i.readyState!==1){return i}a._wD(i.id+": pause()")
i.paused=true
if(!i.isHTML5){if(e||e===t){r._pause(i.id,i._iO.multiShot)}}else{i._setup_html5().pause()
u()}if(i._iO.onpause){i._iO.onpause.apply(i)}return i}
this.resume=function(){var e=i._iO
if(!i.paused){return i}a._wD(i.id+": resume()")
i.paused=false
i.playState=1
if(!i.isHTML5){if(e.isMovieStar&&!e.serverURL){i.setPosition(i.position)}r._pause(i.id,e.multiShot)}else{i._setup_html5().play()
f()}if(!c&&e.onplay){e.onplay.apply(i)
c=true}else if(e.onresume){e.onresume.apply(i)}return i}
this.togglePause=function(){a._wD(i.id+": togglePause()")
if(i.playState===0){i.play({position:y===9&&!i.isHTML5?i.position:i.position/oi})
return i}if(i.paused){i.resume()}else{i.pause()}return i}
this.setPan=function(e,n){if(e===t){e=0}if(n===t){n=false}if(!i.isHTML5){r._setPan(i.id,e)}i._iO.pan=e
if(!n){i.pan=e
i.options.pan=e}return i}
this.setVolume=function(e,n){if(e===t){e=100}if(n===t){n=false}if(!i.isHTML5){r._setVolume(i.id,a.muted&&!i.muted||i.muted?0:e)}else if(i._a){if(a.muted&&!i.muted){i.muted=true
i._a.muted=true}i._a.volume=Math.max(0,Math.min(1,e/100))}i._iO.volume=e
if(!n){i.volume=e
i.options.volume=e}return i}
this.mute=function(){i.muted=true
if(!i.isHTML5){r._setVolume(i.id,0)}else if(i._a){i._a.muted=true}return i}
this.unmute=function(){i.muted=false
var e=i._iO.volume!==t
if(!i.isHTML5){r._setVolume(i.id,e?i._iO.volume:i.options.volume)}else if(i._a){i._a.muted=false}return i}
this.toggleMute=function(){return i.muted?i.unmute():i.mute()}
this.onPosition=function(e,n,o){h.push({position:parseInt(e,10),method:n,scope:o!==t?o:i,fired:false})
return i}
this.onposition=this.onPosition
this.clearOnPosition=function(e,t){var i
e=parseInt(e,10)
if(isNaN(e)){return false}for(i=0;i<h.length;i++){if(e===h[i].position){if(!t||t===h[i].method){if(h[i].fired){p--}h.splice(i,1)}}}}
this._processOnPosition=function(){var e,t,n=h.length
if(!n||!i.playState||p>=n){return false}for(e=n-1;e>=0;e--){t=h[e]
if(!t.fired&&i.position>=t.position){t.fired=true
p++
t.method.apply(t.scope,[t.position])
n=h.length}}return true}
this._resetOnPosition=function(e){var t,i,n=h.length
if(!n){return false}for(t=n-1;t>=0;t--){i=h[t]
if(i.fired&&e<=i.position){i.fired=false
p--}}return true}
g=function(){var e=i._iO,t=e.from,n=e.to,o,s
s=function(){a._wD(i.id+': "To" time of '+n+" reached.")
i.clearOnPosition(n,s)
i.stop()}
o=function(){a._wD(i.id+': Playing "from" '+t)
if(n!==null&&!isNaN(n)){i.onPosition(n,s)}}
if(t!==null&&!isNaN(t)){e.position=t
e.multiShot=false
o()}return e}
d=function(){var e,t=i._iO.onposition
if(t){for(e in t){if(t.hasOwnProperty(e)){i.onPosition(parseInt(e,10),t[e])}}}}
m=function(){var e,t=i._iO.onposition
if(t){for(e in t){if(t.hasOwnProperty(e)){i.clearOnPosition(parseInt(e,10))}}}}
f=function(){if(i.isHTML5){_t(i)}}
u=function(){if(i.isHTML5){yt(i)}}
n=function(e){if(!e){h=[]
p=0}c=false
i._hasTimer=null
i._a=null
i._html5_canplay=false
i.bytesLoaded=null
i.bytesTotal=null
i.duration=i._iO&&i._iO.duration?i._iO.duration:null
i.durationEstimate=null
i.buffered=[]
i.eqData=[]
i.eqData.left=[]
i.eqData.right=[]
i.failures=0
i.isBuffering=false
i.instanceOptions={}
i.instanceCount=0
i.loaded=false
i.metadata={}
i.readyState=0
i.muted=false
i.paused=false
i.peakData={left:0,right:0}
i.waveformData={left:[],right:[]}
i.playState=0
i.position=null
i.id3={}}
n()
this._onTimer=function(e){var t,n=false,o,a={}
if(i._hasTimer||e){if(i._a&&(e||(i.playState>0||i.readyState===1)&&!i.paused)){t=i._get_html5_duration()
if(t!==v.duration){v.duration=t
i.duration=t
n=true}i.durationEstimate=i.duration
o=i._a.currentTime*oi||0
if(o!==v.time){v.time=o
n=true}if(n||e){i._whileplaying(o,a,a,a,a)}}return n}}
this._get_html5_duration=function(){var e=i._iO,t=i._a&&i._a.duration?i._a.duration*oi:e&&e.duration?e.duration:null,n=t&&!isNaN(t)&&t!==Infinity?t:null
return n}
this._apply_loop=function(e,t){if(!e.loop&&t>1){a._wD("Note: Native HTML5 looping is infinite.",1)}e.loop=t>1?"loop":""}
this._setup_html5=function(e){var t=I(i._iO,e),a=Et?s:i._a,r=decodeURI(t.url),l
if(Et){if(r===decodeURI(Rt)){l=true}}else if(r===decodeURI(_)){l=true}if(a){if(a._s){if(Et){if(a._s&&a._s.playState&&!l){a._s.stop()}}else if(!Et&&r===decodeURI(_)){i._apply_loop(a,t.loops)
return a}}if(!l){if(_){n(false)}a.src=t.url
i.url=t.url
_=t.url
Rt=t.url
a._called_load=false}}else{if(t.autoLoad||t.autoPlay){i._a=new Audio(t.url)
i._a.load()}else{i._a=Gt&&opera.version()<10?new Audio(null):new Audio}a=i._a
a._called_load=false
if(Et){s=a}}i.isHTML5=true
i._a=a
a._s=i
o()
i._apply_loop(a,t.loops)
if(t.autoLoad||t.autoPlay){i.load()}else{a.autobuffer=false
a.preload="auto"}return a}
o=function(){if(i._a._added_events){return false}var e
function t(e,t,n){return i._a?i._a.addEventListener(e,t,n||false):null}i._a._added_events=true
for(e in Bt){if(Bt.hasOwnProperty(e)){t(e,Bt[e])}}return true}
l=function(){var e
function t(e,t,n){return i._a?i._a.removeEventListener(e,t,n||false):null}a._wD(i.id+": Removing event listeners")
i._a._added_events=false
for(e in Bt){if(Bt.hasOwnProperty(e)){t(e,Bt[e])}}}
this._onload=function(e){var t,n=!!e||!i.isHTML5&&y===8&&i.duration
t=i.id+": "
a._wD(t+(n?"onload()":"Failed to load / invalid sound?"+(!i.duration?" Zero-length duration reported.":" -")+" ("+i.url+")"),n?1:2)
if(!n&&!i.isHTML5){if(a.sandbox.noRemote===true){a._wD(t+st("noNet"),1)}if(a.sandbox.noLocal===true){a._wD(t+st("noLocal"),1)}}i.loaded=n
i.readyState=n?3:2
i._onbufferchange(0)
if(i._iO.onload){qt(i,function(){i._iO.onload.apply(i,[n])})}return true}
this._onbufferchange=function(e){if(i.playState===0){return false}if(e&&i.isBuffering||!e&&!i.isBuffering){return false}i.isBuffering=e===1
if(i._iO.onbufferchange){a._wD(i.id+": Buffer state change: "+e)
i._iO.onbufferchange.apply(i,[e])}return true}
this._onsuspend=function(){if(i._iO.onsuspend){a._wD(i.id+": Playback suspended")
i._iO.onsuspend.apply(i)}return true}
this._onfailure=function(e,t,n){i.failures++
a._wD(i.id+": Failure ("+i.failures+"): "+e)
if(i._iO.onfailure&&i.failures===1){i._iO.onfailure(e,t,n)}else{a._wD(i.id+": Ignoring failure")}}
this._onwarning=function(e,t,n){if(i._iO.onwarning){i._iO.onwarning(e,t,n)}}
this._onfinish=function(){var e=i._iO.onfinish
i._onbufferchange(0)
i._resetOnPosition(0)
if(i.instanceCount){i.instanceCount--
if(!i.instanceCount){m()
i.playState=0
i.paused=false
i.instanceCount=0
i.instanceOptions={}
i._iO={}
u()
if(i.isHTML5){i.position=0}}if(!i.instanceCount||i._iO.multiShotEvents){if(e){a._wD(i.id+": onfinish()")
qt(i,function(){e.apply(i)})}}}}
this._whileloading=function(e,t,n,o){var a=i._iO
i.bytesLoaded=e
i.bytesTotal=t
i.duration=Math.floor(n)
i.bufferLength=o
if(!i.isHTML5&&!a.isMovieStar){if(a.duration){i.durationEstimate=i.duration>a.duration?i.duration:a.duration}else{i.durationEstimate=parseInt(i.bytesTotal/i.bytesLoaded*i.duration,10)}}else{i.durationEstimate=i.duration}if(!i.isHTML5){i.buffered=[{start:0,end:i.duration}]}if((i.readyState!==3||i.isHTML5)&&a.whileloading){a.whileloading.apply(i)}}
this._whileplaying=function(e,n,o,a,s){var r=i._iO,l
if(isNaN(e)||e===null){return false}i.position=Math.max(0,e)
i._processOnPosition()
if(!i.isHTML5&&y>8){if(r.usePeakData&&n!==t&&n){i.peakData={left:n.leftPeak,right:n.rightPeak}}if(r.useWaveformData&&o!==t&&o){i.waveformData={left:o.split(","),right:a.split(",")}}if(r.useEQData){if(s!==t&&s&&s.leftEQ){l=s.leftEQ.split(",")
i.eqData=l
i.eqData.left=l
if(s.rightEQ!==t&&s.rightEQ){i.eqData.right=s.rightEQ.split(",")}}}}if(i.playState===1){if(!i.isHTML5&&y===8&&!i.position&&i.isBuffering){i._onbufferchange(0)}if(r.whileplaying){r.whileplaying.apply(i)}}return true}
this._oncaptiondata=function(e){a._wD(i.id+": Caption data received.")
i.captiondata=e
if(i._iO.oncaptiondata){i._iO.oncaptiondata.apply(i,[e])}}
this._onmetadata=function(e,t){a._wD(i.id+": Metadata received.")
var n={},o,s
for(o=0,s=e.length;o<s;o++){n[e[o]]=t[o]}i.metadata=n
console.log("updated metadata",i.metadata)
if(i._iO.onmetadata){i._iO.onmetadata.call(i,i.metadata)}}
this._onid3=function(e,t){a._wD(i.id+": ID3 data received.")
var n=[],o,s
for(o=0,s=e.length;o<s;o++){n[e[o]]=t[o]}i.id3=I(i.id3,n)
if(i._iO.onid3){i._iO.onid3.apply(i)}}
this._onconnect=function(e){e=e===1
a._wD(i.id+": "+(e?"Connected.":"Failed to connect? - "+i.url),e?1:2)
i.connected=e
if(e){i.failures=0
if(pt(i.id)){if(i.getAutoPlay()){i.play(t,i.getAutoPlay())}else if(i._iO.autoLoad){i.load()}}if(i._iO.onconnect){i._iO.onconnect.apply(i,[e])}}}
this._ondataerror=function(e){if(i.playState>0){a._wD(i.id+": Data error: "+e)
if(i._iO.ondataerror){i._iO.ondataerror.apply(i)}}}
this._debug()}
J=function(){return p.body||p.getElementsByTagName("div")[0]}
d=function(e){return p.getElementById(e)}
I=function(e,i){var n=e||{},o,s
o=i===t?a.defaultOptions:i
for(s in o){if(o.hasOwnProperty(s)&&n[s]===t){if(typeof o[s]!=="object"||o[s]===null){n[s]=o[s]}else{n[s]=I(n[s],o[s])}}}return n}
qt=function(t,i){if(!t.isHTML5&&y===8){e.setTimeout(i,0)}else{i()}}
C={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1}
k=function(e,i){var n,o=true,s=i!==t,r=a.setupOptions,l=C
if(e===t){o=[]
for(n in r){if(r.hasOwnProperty(n)){o.push(n)}}for(n in l){if(l.hasOwnProperty(n)){if(typeof a[n]==="object"){o.push(n+": {...}")}else if(a[n]instanceof Function){o.push(n+": function() {...}")}else{o.push(n)}}}a._wD(st("setup",o.join(", ")))
return false}for(n in e){if(e.hasOwnProperty(n)){if(typeof e[n]!=="object"||e[n]===null||e[n]instanceof Array||e[n]instanceof RegExp){if(s&&l[i]!==t){a[i][n]=e[n]}else if(r[n]!==t){a.setupOptions[n]=e[n]
a[n]=e[n]}else if(l[n]===t){ht(st(a[n]===t?"setupUndef":"setupError",n),2)
o=false}else{if(a[n]instanceof Function){a[n].apply(a,e[n]instanceof Array?e[n]:[e[n]])}else{a[n]=e[n]}}}else{if(l[n]===t){ht(st(a[n]===t?"setupUndef":"setupError",n),2)
o=false}else{return k(e[n],n)}}}}return o}
function ci(e){return a.preferFlash&&xt&&!a.ignoreFlash&&(a.flash[e]!==t&&a.flash[e])}Ht=function(){var t=e.attachEvent,i={add:t?"attachEvent":"addEventListener",remove:t?"detachEvent":"removeEventListener"}
function n(e){var i=At.call(e),n=i.length
if(t){i[1]="on"+i[1]
if(n>3){i.pop()}}else if(n===3){i.push(false)}return i}function o(e,n){var o=e.shift(),a=[i[n]]
if(t){o[a](e[0],e[1])}else{o[a].apply(o,e)}}function a(){o(n(arguments),"add")}function s(){o(n(arguments),"remove")}return{add:a,remove:s}}()
function hi(e){return function(t){var i=this._s,n
if(!i||!i._a){if(i&&i.id){a._wD(i.id+": Ignoring "+t.type)}else{a._wD(f+"Ignoring "+t.type)}n=null}else{n=e.call(this,t)}return n}}Bt={abort:hi(function(){a._wD(this._s.id+": abort")}),canplay:hi(function(){var e=this._s,i
if(e._html5_canplay){return true}e._html5_canplay=true
a._wD(e.id+": canplay")
e._onbufferchange(0)
i=e._iO.position!==t&&!isNaN(e._iO.position)?e._iO.position/oi:null
if(this.currentTime!==i){a._wD(e.id+": canplay: Setting position to "+i)
try{this.currentTime=i}catch(n){a._wD(e.id+": canplay: Setting position of "+i+" failed: "+n.message,2)}}if(e._iO._oncanplay){e._iO._oncanplay()}}),canplaythrough:hi(function(){var e=this._s
if(!e.loaded){e._onbufferchange(0)
e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration())
e._onload(true)}}),durationchange:hi(function(){var e=this._s,t
t=e._get_html5_duration()
if(!isNaN(t)&&t!==e.duration){a._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:""))
e.durationEstimate=e.duration=t}}),ended:hi(function(){var e=this._s
a._wD(e.id+": ended")
e._onfinish()}),error:hi(function(){a._wD(this._s.id+": HTML5 error, code "+this.error.code)
this._s._onload(false)}),loadeddata:hi(function(){var e=this._s
a._wD(e.id+": loadeddata")
if(!e._loaded&&!Xt){e.duration=e._get_html5_duration()}}),loadedmetadata:hi(function(){a._wD(this._s.id+": loadedmetadata")}),loadstart:hi(function(){a._wD(this._s.id+": loadstart")
this._s._onbufferchange(1)}),play:hi(function(){this._s._onbufferchange(0)}),playing:hi(function(){a._wD(this._s.id+": playing "+String.fromCharCode(9835))
this._s._onbufferchange(0)}),progress:hi(function(e){var t=this._s,i,n,o,s=0,r=e.type==="progress",l=e.target.buffered,u=e.loaded||0,f=e.total||1
t.buffered=[]
if(l&&l.length){for(i=0,n=l.length;i<n;i++){t.buffered.push({start:l.start(i)*oi,end:l.end(i)*oi})}s=(l.end(0)-l.start(0))*oi
u=Math.min(1,s/(e.target.duration*oi))
if(r&&l.length>1){o=[]
n=l.length
for(i=0;i<n;i++){o.push(e.target.buffered.start(i)*oi+"-"+e.target.buffered.end(i)*oi)}a._wD(this._s.id+": progress, timeRanges: "+o.join(", "))}if(r&&!isNaN(u)){a._wD(this._s.id+": progress, "+Math.floor(u*100)+"% loaded")}}if(!isNaN(u)){t._whileloading(u,f,t._get_html5_duration())
if(u&&f&&u===f){Bt.canplaythrough.call(this,e)}}}),ratechange:hi(function(){a._wD(this._s.id+": ratechange")}),suspend:hi(function(e){var t=this._s
a._wD(this._s.id+": suspend")
Bt.progress.call(this,e)
t._onsuspend()}),stalled:hi(function(){a._wD(this._s.id+": stalled")}),timeupdate:hi(function(){this._s._onTimer()}),waiting:hi(function(){var e=this._s
a._wD(this._s.id+": waiting")
e._onbufferchange(1)})}
St=function(e){var t
if(!e||!e.type&&!e.url&&!e.serverURL){t=false}else if(e.serverURL||e.type&&ci(e.type)){t=false}else{t=e.type?Pt({type:e.type}):Pt({url:e.url})||a.html5Only||e.url.match(/data\:/i)}return t}
It=function(e){var t
if(e){t=Xt?ai:a.html5.canPlayType("audio/wav")?si:ai
e.src=t
if(e._called_unload!==undefined){e._called_load=false}}if(Et){Rt=null}return t}
Pt=function(e){if(!a.useHTML5Audio||!a.hasHTML5){return false}var i=e.url||null,n=e.type||null,o=a.audioFormats,s,r,l,u
if(n&&a.html5[n]!==t){return a.html5[n]&&!ci(n)}if(!Ft){Ft=[]
for(u in o){if(o.hasOwnProperty(u)){Ft.push(u)
if(o[u].related){Ft=Ft.concat(o[u].related)}}}Ft=new RegExp("\\.("+Ft.join("|")+")(\\?.*)?$","i")}l=i?i.toLowerCase().match(Ft):null
if(!l||!l.length){if(!n){s=false}else{r=n.indexOf(";")
l=(r!==-1?n.substr(0,r):n).substr(6)}}else{l=l[1]}if(l&&a.html5[l]!==t){s=a.html5[l]&&!ci(l)}else{n="audio/"+l
s=a.html5.canPlayType({type:n})
a.html5[l]=s
s=s&&a.html5[n]&&!ci(n)}return s}
Ct=function(){if(!a.useHTML5Audio||!a.hasHTML5){a.html5.usingFlash=true
Lt=true
return false}var e=Audio!==t?Gt&&opera.version()<10?new Audio(null):new Audio:null,i,n,o={},s,r
function l(t){var i,n,o=false,s=false
if(!e||typeof e.canPlayType!=="function"){return o}if(t instanceof Array){for(r=0,n=t.length;r<n;r++){if(a.html5[t[r]]||e.canPlayType(t[r]).match(a.html5Test)){s=true
a.html5[t[r]]=true
a.flash[t[r]]=!!t[r].match(ni)}}o=s}else{i=e&&typeof e.canPlayType==="function"?e.canPlayType(t):false
o=!!(i&&i.match(a.html5Test))}return o}s=a.audioFormats
for(i in s){if(s.hasOwnProperty(i)){n="audio/"+i
o[i]=l(s[i].type)
o[n]=o[i]
if(i.match(ni)){a.flash[i]=true
a.flash[n]=true}else{a.flash[i]=false
a.flash[n]=false}if(s[i]&&s[i].related){for(r=s[i].related.length-1;r>=0;r--){o["audio/"+s[i].related[r]]=o[i]
a.html5[s[i].related[r]]=o[i]
a.flash[s[i].related[r]]=o[i]}}}}o.canPlayType=e?l:null
a.html5=I(a.html5,o)
a.html5.usingFlash=Tt()
Lt=a.html5.usingFlash
return true}
j={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:l+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:u+"Verify that %s is a valid path.",tryDebug:"Try "+l+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:u+"Non-HTTP page ("+p.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:u+"Special case: Waiting for SWF to load with window focus...",waitForever:u+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:u+"Waiting for 100% SWF load...",needFunction:u+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:u+"_debug(): Current sound objects",waitOnload:u+"Waiting for window.onload()",docLoaded:u+"Document already loaded",onload:u+"initComplete(): calling soundManager.onload()",onloadOK:l+".onload() complete",didInit:u+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:u+"Failed to remove Flash node.",shutdown:l+".disable(): Shutting down",queue:u+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+ut.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:u+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:l+".load(): current URL already assigned.",badFV:l+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:u+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:u+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:l+".setup(): allowed parameters: %s",setupError:l+'.setup(): "%s" cannot be assigned with this method.',setupUndef:l+'.setup(): Could not find option "%s"',setupLate:l+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:u+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:l+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."}
st=function(){var e,t,i,n,o
e=At.call(arguments)
n=e.shift()
o=j&&j[n]?j[n]:""
if(o&&e&&e.length){for(t=0,i=e.length;t<i;t++){o=o.replace("%s",e[t])}}return o}
dt=function(e){if(y===8&&e.loops>1&&e.stream){S("as2loop")
e.stream=false}return e}
ct=function(e,t){if(e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)){a._wD((t||"")+st("policy"))
e.usePolicyFile=true}return e}
ht=function(e){if(Zt&&console.warn!==t){console.warn(e)}else{a._wD(e)}}
m=function(){return false}
tt=function(e){var t
for(t in e){if(e.hasOwnProperty(t)&&typeof e[t]==="function"){e[t]=m}}t=null}
it=function(e){if(e===t){e=false}if(L||e){a.disable(e)}}
nt=function(e){var t=null,i
if(e){if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4)
if(t){return e}}else if(e.lastIndexOf("/")!==e.length-1){e+="/"}}i=(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+a.movieURL
if(a.noSWFCache){i+="?ts="+(new Date).getTime()}return i}
N=function(){y=parseInt(a.flashVersion,10)
if(y!==8&&y!==9){a._wD(st("badFV",y,et))
a.flashVersion=y=et}var e=a.debugMode||a.debugFlash?"_debug.swf":".swf"
if(a.useHTML5Audio&&!a.html5Only&&a.audioFormats.mp4.required&&y<9){a._wD(st("needfl9"))
a.flashVersion=y=9}a.version=a.versionNumber+(a.html5Only?" (HTML5-only mode)":y===9?" (AS3/Flash 9)":" (AS2/Flash 8)")
if(y>8){a.defaultOptions=I(a.defaultOptions,a.flash9Options)
a.features.buffering=true
a.defaultOptions=I(a.defaultOptions,a.movieStarOptions)
a.filePatterns.flash9=new RegExp("\\.(mp3|"+fi.join("|")+")(\\?.*)?$","i")
a.features.movieStar=true}else{a.features.movieStar=false}a.filePattern=a.filePatterns[y!==8?"flash9":"flash8"]
a.movieURL=(y===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e)
a.features.peakData=a.features.waveformData=a.features.eqData=y>8}
z=function(e,t){if(!r){return false}r._setPolling(e,t)}
Y=function(){if(a.debugURLParam.test(h)){a.debugMode=true}if(d(a.debugID)){return false}var e,t,i,n,o
if(a.debugMode&&!d(a.debugID)&&(!Zt||!a.useConsole||!a.consoleOnly)){e=p.createElement("div")
e.id=a.debugID+"-toggle"
n={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001}
e.appendChild(p.createTextNode("-"))
e.onclick=ft
e.title="Toggle SM2 debug console"
if(c.match(/msie 6/i)){e.style.position="absolute"
e.style.cursor="hand"}for(o in n){if(n.hasOwnProperty(o)){e.style[o]=n[o]}}t=p.createElement("div")
t.id=a.debugID
t.style.display=a.debugMode?"block":"none"
if(a.debugMode&&!d(e.id)){try{i=J()
i.appendChild(e)}catch(s){throw new Error(st("domError")+" \n"+s.toString())}i.appendChild(t)}}i=null}
pt=this.getSoundById
S=function(e,t){return!e?"":a._wD(st(e),t)}
ft=function(){var e=d(a.debugID),t=d(a.debugID+"-toggle")
if(!e){return false}if(w){t.innerHTML="+"
e.style.display="none"}else{t.innerHTML="-"
e.style.display="block"}w=!w}
b=function(i,n,o){if(e.sm2Debugger!==t){try{sm2Debugger.handleEvent(i,n,o)}catch(a){return false}}return true}
lt=function(){var e=[]
if(a.debugMode){e.push(ut.sm2Debug)}if(a.debugFlash){e.push(ut.flashDebug)}if(a.useHighPerformance){e.push(ut.highPerf)}return e.join(" ")}
rt=function(){var e=st("fbHandler"),t=a.getMoviePercent(),i=ut,n={type:"FLASHBLOCK"}
if(a.html5Only){return false}if(!a.ok()){if(Lt){a.oMC.className=lt()+" "+i.swfDefault+" "+(t===null?i.swfTimedout:i.swfError)
a._wD(e+": "+st("fbTimeout")+(t?" ("+st("fbLoaded")+")":""))}a.didFlashBlock=true
A({type:"ontimeout",ignoreInit:true,error:n})
G(n)}else{if(a.didFlashBlock){a._wD(e+": Unblocked")}if(a.oMC){a.oMC.className=[lt(),i.swfDefault,i.swfLoaded+(a.didFlashBlock?" "+i.swfUnblocked:"")].join(" ")}}}
H=function(e,i,n){if(v[e]===t){v[e]=[]}v[e].push({method:i,scope:n||null,fired:false})}
A=function(e){if(!e){e={type:a.ok()?"onready":"ontimeout"}}if(!M&&e&&!e.ignoreInit){return false}if(e.type==="ontimeout"&&(a.ok()||L&&!e.ignoreInit)){return false}var t={success:e&&e.ignoreInit?a.ok():!L},i=e&&e.type?v[e.type]||[]:[],n=[],o,s,r=[t],l=Lt&&!a.ok()
if(e.error){r[0].error=e.error}for(o=0,s=i.length;o<s;o++){if(i[o].fired!==true){n.push(i[o])}}if(n.length){for(o=0,s=n.length;o<s;o++){if(n[o].scope){n[o].method.apply(n[o].scope,r)}else{n[o].method.apply(this,r)}if(!l){n[o].fired=true}}}return true}
E=function(){e.setTimeout(function(){if(a.useFlashBlock){rt()}A()
if(typeof a.onload==="function"){S("onload",1)
a.onload.apply(e)
S("onloadOK",1)}if(a.waitForWindowLoad){Ht.add(e,"load",E)}},1)}
Ut=function(){if(xt!==t){return xt}var i=false,n=navigator,o=n.plugins,a,s,r,l=e.ActiveXObject
if(o&&o.length){s="application/x-shockwave-flash"
r=n.mimeTypes
if(r&&r[s]&&r[s].enabledPlugin&&r[s].enabledPlugin.description){i=true}}else if(l!==t&&!c.match(/MSAppHost/i)){try{a=new l("ShockwaveFlash.ShockwaveFlash")}catch(u){a=null}i=!!a
a=null}xt=i
return i}
Tt=function(){var e,t,i=a.audioFormats,n=$t&&!!c.match(/os (1|2|3_0|3_1)\s/i)
if(n){a.hasHTML5=false
a.html5Only=true
if(a.oMC){a.oMC.style.display="none"}}else{if(a.useHTML5Audio){if(!a.html5||!a.html5.canPlayType){a._wD("SoundManager: No HTML5 Audio() support detected.")
a.hasHTML5=false}if(Yt){a._wD(u+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!xt?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}}}if(a.useHTML5Audio&&a.hasHTML5){Mt=true
for(t in i){if(i.hasOwnProperty(t)){if(i[t].required){if(!a.html5.canPlayType(i[t].type)){Mt=false
e=true}else if(a.preferFlash&&(a.flash[t]||a.flash[i[t].type])){e=true}}}}}if(a.ignoreFlash){e=false
Mt=true}a.html5Only=a.hasHTML5&&a.useHTML5Audio&&!e
return!a.html5Only}
Ot=function(e){var t,i,n=0,o
if(e instanceof Array){for(t=0,i=e.length;t<i;t++){if(e[t]instanceof Object){if(a.canPlayMIME(e[t].type)){n=t
break}}else if(a.canPlayURL(e[t])){n=t
break}}if(e[n].url){e[n]=e[n].url}o=e[n]}else{o=e}return o}
_t=function(e){if(!e._hasTimer){e._hasTimer=true
if(!zt&&a.html5PollingInterval){if(bt===null&&wt===0){bt=setInterval(vt,a.html5PollingInterval)}wt++}}}
yt=function(e){if(e._hasTimer){e._hasTimer=false
if(!zt&&a.html5PollingInterval){wt--}}}
vt=function(){var e
if(bt!==null&&!wt){clearInterval(bt)
bt=null
return false}for(e=a.soundIDs.length-1;e>=0;e--){if(a.sounds[a.soundIDs[e]].isHTML5&&a.sounds[a.soundIDs[e]]._hasTimer){a.sounds[a.soundIDs[e]]._onTimer()}}}
G=function(i){i=i!==t?i:{}
if(typeof a.onerror==="function"){a.onerror.apply(e,[{type:i.type!==t?i.type:null}])}if(i.fatal!==t&&i.fatal){a.disable()}}
Nt=function(){if(!Yt||!Ut()){return false}var e=a.audioFormats,t,i
for(i in e){if(e.hasOwnProperty(i)){if(i==="mp3"||i==="mp4"){a._wD(l+": Using flash fallback for "+i+" format")
a.html5[i]=false
if(e[i]&&e[i].related){for(t=e[i].related.length-1;t>=0;t--){a.html5[e[i].related[t]]=false}}}}}}
this._setSandboxType=function(e){var i=a.sandbox
i.type=e
i.description=i.types[i.types[e]!==t?e:"unknown"]
if(i.type==="localWithFile"){i.noRemote=true
i.noLocal=false
S("secNote",2)}else if(i.type==="localWithNetwork"){i.noRemote=false
i.noLocal=true}else if(i.type==="localTrusted"){i.noRemote=false
i.noLocal=false}}
this._externalInterfaceOK=function(e){if(a.swfLoaded){return false}var t
b("swf",true)
b("flashtojs",true)
a.swfLoaded=true
ti=false
if(Yt){Nt()}if(!e||e.replace(/\+dev/i,"")!==a.versionNumber.replace(/\+dev/i,"")){t=l+': Fatal: JavaScript file build "'+a.versionNumber+'" does not match Flash SWF build "'+e+'" at '+a.url+". Ensure both are up-to-date."
setTimeout(function i(){throw new Error(t)},0)
return false}setTimeout(_,Kt?100:1)}
X=function(e,i){if(O&&D){return false}function n(){var e=[],t,i=[],n=" + "
t="SoundManager "+a.version+(!a.html5Only&&a.useHTML5Audio?a.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")
if(!a.html5Only){if(a.preferFlash){e.push("preferFlash")}if(a.useHighPerformance){e.push("useHighPerformance")}if(a.flashPollingInterval){e.push("flashPollingInterval ("+a.flashPollingInterval+"ms)")}if(a.html5PollingInterval){e.push("html5PollingInterval ("+a.html5PollingInterval+"ms)")}if(a.wmode){e.push("wmode ("+a.wmode+")")}if(a.debugFlash){e.push("debugFlash")}if(a.useFlashBlock){e.push("flashBlock")}}else{if(a.html5PollingInterval){e.push("html5PollingInterval ("+a.html5PollingInterval+"ms)")}}if(e.length){i=i.concat([e.join(n)])}a._wD(t+(i.length?n+i.join(", "):""),1)
jt()}if(a.html5Only){N()
n()
a.oMC=d(a.movieID)
_()
O=true
D=true
return false}var o=i||a.url,s=a.altURL||o,r="JS/Flash audio component (SoundManager 2)",l=J(),u=lt(),f=null,h=p.getElementsByTagName("html")[0],m,g,y,v,w,b,M,L
f=h&&h.dir&&h.dir.match(/rtl/i)
e=e===t?a.id:e
function T(e,t){return'<param name="'+e+'" value="'+t+'" />'}N()
a.url=nt(ri?o:s)
i=a.url
a.wmode=!a.wmode&&a.useHighPerformance?"transparent":a.wmode
if(a.wmode!==null&&(c.match(/msie 8/i)||!Kt&&!a.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){Dt.push(j.spcWmode)
a.wmode=null}m={name:e,id:e,src:i,quality:"high",allowScriptAccess:a.allowScriptAccess,bgcolor:a.bgColor,pluginspage:li+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:a.wmode,hasPriority:"true"}
if(a.debugFlash){m.FlashVars="debug=1"}if(!a.wmode){delete m.wmode}if(Kt){g=p.createElement("div")
v=['<object id="'+e+'" data="'+i+'" type="'+m.type+'" title="'+m.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+li+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',T("movie",i),T("AllowScriptAccess",a.allowScriptAccess),T("quality",m.quality),a.wmode?T("wmode",a.wmode):"",T("bgcolor",a.bgColor),T("hasPriority","true"),a.debugFlash?T("FlashVars",m.FlashVars):"","</object>"].join("")}else{g=p.createElement("embed")
for(y in m){if(m.hasOwnProperty(y)){g.setAttribute(y,m[y])}}}Y()
u=lt()
l=J()
if(l){a.oMC=d(a.movieID)||p.createElement("div")
if(!a.oMC.id){a.oMC.id=a.movieID
a.oMC.className=ut.swfDefault+" "+u
b=null
w=null
if(!a.useFlashBlock){if(a.useHighPerformance){b={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{b={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"}
if(f){b.left=Math.abs(parseInt(b.left,10))+"px"}}}if(Jt){a.oMC.style.zIndex=1e4}if(!a.debugFlash){for(M in b){if(b.hasOwnProperty(M)){a.oMC.style[M]=b[M]}}}try{if(!Kt){a.oMC.appendChild(g)}l.appendChild(a.oMC)
if(Kt){w=a.oMC.appendChild(p.createElement("div"))
w.className=ut.swfBox
w.innerHTML=v}D=true}catch(S){throw new Error(st("domError")+" \n"+S.toString())}}else{L=a.oMC.className
a.oMC.className=(L?L+" ":ut.swfDefault)+(u?" "+u:"")
a.oMC.appendChild(g)
if(Kt){w=a.oMC.appendChild(p.createElement("div"))
w.className=ut.swfBox
w.innerHTML=v}D=true}}O=true
n()
return true}
W=function(){if(a.html5Only){X()
return false}if(r){return false}if(!a.url){S("noURL")
return false}r=a.getMovie(a.id)
if(!r){if(!ot){X(a.id,a.url)}else{if(!Kt){a.oMC.appendChild(ot)}else{a.oMC.innerHTML=at}ot=null
O=true}r=a.getMovie(a.id)}if(typeof a.oninitmovie==="function"){setTimeout(a.oninitmovie,1)}Wt()
return true}
R=function(){setTimeout(x,1e3)}
U=function(){e.setTimeout(function(){ht(u+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...")
a.setup({preferFlash:false}).reboot()
a.didFlashBlock=true
a.beginDelayedInit()},1)}
x=function(){var t,i=false
if(!a.url){return false}if(mt){return false}mt=true
Ht.remove(e,"load",R)
if(xt&&ti&&!ei){S("waitFocus")
return false}if(!M){t=a.getMoviePercent()
if(t>0&&t<100){i=true}}setTimeout(function(){t=a.getMoviePercent()
if(i){mt=false
a._wD(st("waitSWF"))
e.setTimeout(R,1)
return false}if(!M){a._wD(l+": No Flash response within expected time. Likely causes: "+(t===0?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(a.debugFlash?" "+st("checkSWF"):""),2)
if(!ri&&t){S("localFail",2)
if(!a.debugFlash){S("tryDebug",2)}}if(t===0){a._wD(st("swf404",a.url),1)}b("flashtojs",false,": Timed out"+ri?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!M&&ii){if(t===null){if(a.useFlashBlock||a.flashLoadTimeout===0){if(a.useFlashBlock){rt()}S("waitForever")}else{if(!a.useFlashBlock&&Mt){U()}else{S("waitForever")
A({type:"ontimeout",ignoreInit:true,error:{type:"INIT_FLASHBLOCK"}})}}}else{if(a.flashLoadTimeout===0){S("waitForever")}else{if(!a.useFlashBlock&&Mt){U()}else{it(true)}}}}},a.flashLoadTimeout)}
B=function(){function t(){Ht.remove(e,"focus",B)}if(ei||!ti){t()
return true}ii=true
ei=true
S("gotFocus")
mt=false
R()
t()
return true}
Wt=function(){if(Dt.length){a._wD("SoundManager 2: "+Dt.join(" "),1)
Dt=[]}}
jt=function(){Wt()
var e,t=[]
if(a.useHTML5Audio&&a.hasHTML5){for(e in a.audioFormats){if(a.audioFormats.hasOwnProperty(e)){t.push(e+" = "+a.html5[e]+(!a.html5[e]&&Lt&&a.flash[e]?" (using flash)":a.preferFlash&&a.flash[e]&&Lt?" (preferring flash)":!a.html5[e]?" ("+(a.audioFormats[e].required?"required, ":"")+"and no flash support)":""))}}a._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}}
F=function(t){if(M){return false}if(a.html5Only){S("sm2Loaded",1)
M=true
E()
b("onload",true)
return true}var i=a.useFlashBlock&&a.flashLoadTimeout&&!a.getMoviePercent(),n=true,o
if(!i){M=true}o={type:!xt&&Lt?"NO_FLASH":"INIT_TIMEOUT"}
a._wD("SoundManager 2 "+(L?"failed to load":"loaded")+" ("+(L?"Flash security/load error":"OK")+") "+String.fromCharCode(L?10006:10003),L?2:1)
if(L||t){if(a.useFlashBlock&&a.oMC){a.oMC.className=lt()+" "+(a.getMoviePercent()===null?ut.swfTimedout:ut.swfError)}A({type:"ontimeout",error:o,ignoreInit:true})
b("onload",false)
G(o)
n=false}else{b("onload",true)}if(!L){if(a.waitForWindowLoad&&!T){S("waitOnload")
Ht.add(e,"load",E)}else{if(a.waitForWindowLoad&&T){S("docLoaded")}E()}}return n}
g=function(){var e,i=a.setupOptions
for(e in i){if(i.hasOwnProperty(e)){if(a[e]===t){a[e]=i[e]}else if(a[e]!==i[e]){a.setupOptions[e]=a[e]}}}}
_=function(){if(M){S("didInit")
return false}function t(){Ht.remove(e,"load",a.beginDelayedInit)}if(a.html5Only){if(!M){t()
a.enabled=true
F()}return true}W()
try{r._externalInterfaceTest(false)
z(true,a.flashPollingInterval||(a.useHighPerformance?10:50))
if(!a.debugMode){r._disableDebug()}a.enabled=true
b("jstoflash",true)
if(!a.html5Only){Ht.add(e,"unload",m)}}catch(i){a._wD("js/flash exception: "+i.toString())
b("jstoflash",false)
G({type:"JS_TO_FLASH_EXCEPTION",fatal:true})
it(true)
F()
return false}F()
t()
return true}
V=function(){if(K){return false}K=true
g()
Y();(function(){var e="sm2-usehtml5audio=",t="sm2-preferflash=",i=null,n=null,o=h.toLowerCase()
if(o.indexOf(e)!==-1){i=o.charAt(o.indexOf(e)+e.length)==="1"
if(Zt){console.log((i?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}a.setup({useHTML5Audio:i})}if(o.indexOf(t)!==-1){n=o.charAt(o.indexOf(t)+t.length)==="1"
if(Zt){console.log((n?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}a.setup({preferFlash:n})}})()
if(!xt&&a.hasHTML5){a._wD("SoundManager 2: No Flash detected"+(!a.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."),1)
a.setup({useHTML5Audio:true,preferFlash:false})}Ct()
if(!xt&&Lt){Dt.push(j.needFlash)
a.setup({flashLoadTimeout:1})}if(p.removeEventListener){p.removeEventListener("DOMContentLoaded",V,false)}W()
return true}
kt=function(){if(p.readyState==="complete"){V()
p.detachEvent("onreadystatechange",kt)}return true}
Q=function(){T=true
V()
Ht.remove(e,"load",Q)}
q=function(){if(zt){if(!a.setupOptions.useHTML5Audio||a.setupOptions.preferFlash){Dt.push(j.mobileUA)}a.setupOptions.useHTML5Audio=true
a.setupOptions.preferFlash=false
if($t||Qt&&!c.match(/android\s2\.3/i)){Dt.push(j.globalHTML5)
if($t){a.ignoreFlash=true}Et=true}}}
q()
Ut()
Ht.add(e,"focus",B)
Ht.add(e,"load",R)
Ht.add(e,"load",Q)
if(p.addEventListener){p.addEventListener("DOMContentLoaded",V,false)}else if(p.attachEvent){p.attachEvent("onreadystatechange",kt)}else{b("onload",false)
G({type:"NO_DOM2_EVENTS",fatal:true})}}if(e.SM2_DEFER===undefined||!SM2_DEFER){i=new n}if(typeof module==="object"&&module&&typeof module.exports==="object"){e.soundManager=i
module.exports.SoundManager=n
module.exports.soundManager=i}else if(typeof define==="function"&&define.amd){define("SoundManager",[],function(){return{SoundManager:n,soundManager:i}})}else{e.SoundManager=n
e.soundManager=i}})(window);(function(e){var t="./multirecorder-worker.js"
var i=function(i,n){var o=n||{}
var a=o.bufferLen||4096
this.context=i.context
this.pausePoints=[]
this.node=this.context.createScriptProcessor(a,2,2)
var s=new Worker(o.workerPath||t)
s.postMessage({command:"init",config:{sampleRate:this.context.sampleRate}})
var r=false
function l(t){if(!t){throw new Error("Callback not set")}var i="RecorderCallback"+Math.round(Math.random()*1000001)
e[i]=function(n){t(n)
delete e[i]}
return i}function u(e,t){if(t){e.callbackId=l(t)}s.postMessage(e)}this.node.onaudioprocess=function(e){if(!r){return}u({command:"record",buffer:[e.inputBuffer.getChannelData(0),e.inputBuffer.getChannelData(1)]})}
this.configure=function(e){for(var t in e){if(e.hasOwnProperty(t)){o[t]=e[t]}}}
this.record=function(){r=true}
this.stop=function(){r=false}
this.isRecording=function(){return r}
this.clear=function(){u({command:"clear"})}
this.finishRecording=function(e){var t=this
var i=function(i){t.wav=i.wav
t.samples=i.samples
e(t)}
u({command:"finishRecording"},i)}
this.combineRecordings=function(e,t){var i=this
var n=[]
for(var o=0;o<t.length;o++){n.push(t[o].samples)}var a=function(t){i.wav=t.wav
i.samples=t.samples
e(i)}
u({command:"combineRecordings",samples:n},a)}
this.createAudioPlayer=function(){var e=URL.createObjectURL(this.wav)
var t=document.createElement("audio")
t.controls=true
t.src=e
return t}
this.createDownloadLink=function(){var e=URL.createObjectURL(this.wav)
var t=document.createElement("a")
t.href=e
t.download=(new Date).toISOString()+".wav"
t.innerHTML=t.download
return t}
s.onmessage=function(t){var i=t.data.callbackId
if(i){e[i](t.data.result)}}
i.connect(this.node)
this.node.connect(this.context.destination)}
function n(n){var o
var a
var s
n=n||{}
e.AudioContext=e.AudioContext||e.webkitAudioContext
navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia
e.URL=e.URL||e.webkitURL
this.isRecording=function(){return s&&s.isRecording()}
this.startRecording=function(r){var l=jQuery.Deferred()
if(!e.AudioContext||!navigator.getUserMedia){l.reject("Audio recording does not work in this browser")}function u(){s=new i(a,{workerPath:n.workerPath||t})
if(r){var o=e.setInterval(function(){if(r===0){l.resolve(s)
s.record()
e.clearInterval(o)}else{l.notify(r)
r--}},1e3)}else{s.record()}}if(!o){o=new AudioContext
navigator.getUserMedia({audio:true},function(e){a=o.createMediaStreamSource(e)
a.connect(o.destination)
u()},function(){l.reject("Error getting mic input")})}else{u()}return l}
this.stopRecording=function(){var e=jQuery.Deferred()
s.stop()
s.finishRecording(function(){e.resolve(s)})
return e}
this.combineRecordings=function(e){var o=jQuery.Deferred()
var s=new i(a,{workerPath:n.workerPath||t})
s.combineRecordings(function(){o.resolve(s)},e)
return o}}e.MultiRecorder=n})(window);(function(e){function t(e){this.authKey=e.authKey
this.templateId=e.templateId
this.successCb=e.successCb||null
this.errorCb=e.errorCb||null
this.steps=e.steps||{}}t.prototype.checkAssemblyStatus=function(e){var t=this
e=e.replace(/^http:/,"https:")
e=e.replace(/api2.[^.]*.transloadit/,"api2.transloadit")
$.ajax({url:e,type:"GET",dataType:"json",success:function(i,n){if(i.ok&&i.ok=="ASSEMBLY_COMPLETED"){if(typeof t.successCb==="function"){t.successCb(i.results)}return}if(i.error||i.ok!="ASSEMBLY_EXECUTING"&&i.ok!="ASSEMBLY_UPLOADING"){if(typeof t.errorCb==="function"){t.errorCb("Failed to check assembly ("+n+")")}return}setTimeout(function(){t.checkAssemblyStatus(e)},1e3)},error:function(e,i){if(typeof t.errorCb==="function"){t.errorCb("Failed to check assembly ("+i+")")}}})}
t.prototype.uploadFile=function(e){var t={auth:{key:this.authKey},template_id:this.templateId,steps:this.steps}
var i=this
var n=new FormData
n.append("params",JSON.stringify(t))
n.append("file",e)
var o=new XMLHttpRequest
o.open("POST","https://api2.transloadit.com/assemblies",true)
o.onreadystatechange=function(e){var t=e.target
if(t.readyState===4){if(t.status===200){var n=jQuery.parseJSON(t.responseText)
i.checkAssemblyStatus(n.assembly_url)}else if(typeof i.errorCb==="function"){i.errorCb("Failed to upload file")}}}
o.send(n)}
e.TransloaditXhr=t})(window)
this["Handlebars"]=this["Handlebars"]||{}
this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{}
this["Handlebars"]["templates"]["dev-record"]=Handlebars.template(function(e,t,i,n,o){i=i||e.helpers
var a="",s,r,l,u=this,f="function",d=i.blockHelperMissing
function c(e,t){return"Start New Chunk"}function h(e,t){return"Discard Recorded Chunk"}function p(e,t){return"Save Recorded Chunk"}function m(e,t){return"Refresh Editor State"}function g(e,t){return"Last audio chunk recorded: "}function _(e,t){return"Empty"}function y(e,t){return"All saved audio chunks: "}function v(e,t){return"Empty"}a+='<div class="scratchpad-dev-record">\n    <div class="scratchpad-dev-record-buttons">\n        <button class="scratchpad-dev-new-chunk simple-button">'
r=i["_"]
s=r||t["_"]
l=u.program(1,c,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+='</button>\n        <button class="scratchpad-dev-discard-chunk simple-button">'
r=i["_"]
s=r||t["_"]
l=u.program(3,h,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+='</button>\n        <button class="scratchpad-dev-save-chunk simple-button">'
r=i["_"]
s=r||t["_"]
l=u.program(5,p,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+='</button>\n        <button class="scratchpad-dev-refresh-editor-state simple-button">'
r=i["_"]
s=r||t["_"]
l=u.program(7,m,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+='</button>\n    </div>\n    <div class="show-audio-chunks-wrapper">\n        <p>'
r=i["_"]
s=r||t["_"]
l=u.program(9,g,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+='<span class="last-audio-chunk">'
r=i["_"]
s=r||t["_"]
l=u.program(11,_,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+="</span></p>\n        <p>"
r=i["_"]
s=r||t["_"]
l=u.program(13,y,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+='<span class="saved-audio-chunks">'
r=i["_"]
s=r||t["_"]
l=u.program(15,v,o)
l.hash={}
l.fn=l
l.inverse=u.noop
if(r&&typeof s===f){s=s.call(t,l)}else{s=d.call(t,s,l)}if(s||s===0){a+=s}a+="</span></p>\n    </div>\n</div>"
return a})
$(document).delegate("a.ui-button",{mouseenter:function e(){if(!$(this).hasClass("ui-state-disabled")){$(this).addClass("ui-state-hover")}},mouseleave:function t(){$(this).removeClass("ui-state-hover")},click:function i(e){e.preventDefault()
if(!$(this).hasClass("ui-state-disabled")){$(this).trigger("buttonClick")}}})
$.fn.buttonize=function(){return this.find(".ui-button").addClass("ui-widget ui-state-default ui-corner-all").find("span:first").addClass("ui-button-icon-primary ui-icon").end().filter(":has(.ui-button-text)").addClass("ui-button-text-icon-primary").end().not(":has(.ui-button-text)").addClass("ui-button-icon-only").append("<span class='ui-button-text'>&nbsp;</span>").end().end()}
__KA_exports.MultiRecorder = MultiRecorder;
__KA_exports.TransloaditXhr = TransloaditXhr;
__KA_exports.soundManager = soundManager;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.tooltips.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/shared-package/i18n.js");
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../../../javascript/node_modules/underscore/index.js");
__KA_require("../../../../../javascript/node_modules/backbone/index.js");
__KA_require("../../../handlebars/handlebars.runtime.js");
__KA_require("./live-editor.editor_ace_deps.js");
__KA_require("../../../bootstrap-khansrc/js/bootstrap-tab.js");
(function($){var e=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent)
var t=function(){var t={},i,a=65,n,o='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',r={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:true,flat:false},s={start:e?"touchstart":"mousedown",end:e?"touchend":"mouseup",move:e?"touchmove":"mousemove"},l=function(e,t){var i=B(e)
$(t).data("colorpicker").fields.eq(1).val(i.r).end().eq(2).val(i.g).end().eq(3).val(i.b).end()},c=function(e,t){$(t).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},h=function(e,t){$(t).data("colorpicker").fields.eq(0).val(V(e)).end()},d=function(e,t){$(t).data("colorpicker").selector.css("backgroundColor","#"+V({h:e.h,s:100,b:100}))
$(t).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},p=function(e,t){$(t).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},u=function(e,t){$(t).data("colorpicker").currentColor.css("backgroundColor","#"+V(e))},f=function(e,t){$(t).data("colorpicker").newColor.css("backgroundColor","#"+V(e))},m=function(e){var t=e.charCode||e.keyCode||-1
if(t>a&&t<=90||t==32){return false}var i=$(this).parent().parent()
if(i.data("colorpicker").livePreview===true){g.apply(this)}},g=function(e,t){var i=$(this).parent().parent(),a
if(this.parentNode.className.indexOf("_hex")>0){i.data("colorpicker").color=a=F(z(this.value))}else if(this.parentNode.className.indexOf("_hsb")>0){i.data("colorpicker").color=a=P({h:parseInt(i.data("colorpicker").fields.eq(4).val(),10),s:parseInt(i.data("colorpicker").fields.eq(5).val(),10),b:parseInt(i.data("colorpicker").fields.eq(6).val(),10)})}else{i.data("colorpicker").color=a=H(A({r:parseInt(i.data("colorpicker").fields.eq(1).val(),10),g:parseInt(i.data("colorpicker").fields.eq(2).val(),10),b:parseInt(i.data("colorpicker").fields.eq(3).val(),10)}))}if(e){l(a,i.get(0))
h(a,i.get(0))
c(a,i.get(0))}d(a,i.get(0))
p(a,i.get(0))
f(a,i.get(0))
i.data("colorpicker").onChange.apply(i,[a,V(a),B(a),t])},v=function(e){var t=$(this).parent().parent()
t.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},b=function(){a=this.parentNode.className.indexOf("_hex")>0?70:65
$(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")
$(this).parent().addClass("colorpicker_focus")},x=function(e){var t=e.pageX
var i=e.pageY
if(!t&&!i){var a=e.originalEvent.targetTouches
if(a&&a[0]){t=a[0].pageX
i=a[0].pageY}}return{pageX:t,pageY:i}},y=function(e){var t=$(this).parent().find("input").focus()
var i={el:$(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:t,val:parseInt(t.val(),10),preview:$(this).parent().parent().data("colorpicker").livePreview}
$(document).bind(s.end,i,_)
$(document).bind(s.move,i,w)},w=function(e){e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10))))
if(e.data.preview){g.apply(e.data.field.get(0),[true])}return false},_=function(e){g.apply(e.data.field.get(0),[true])
e.data.el.removeClass("colorpicker_slider").find("input").focus()
$(document).unbind(s.end,_)
$(document).unbind(s.move,w)
return false},k=function(e){e.preventDefault()
var t={cal:$(this).parent(),y:$(this).offset().top}
e.data=t
T(e,"startScrub")
t.preview=t.cal.data("colorpicker").livePreview
$(document).bind(s.end,t,R)
$(document).bind(s.move,t,T)},T=function(e,t){var i=x(e)
if(!i.pageX&&!i.pageY){return false}g.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,i.pageY-e.data.y)))/150,10)).get(0),[e.data.preview,t||"midScrub"])
return false},R=function(e){T(e,"stopScrub")
l(e.data.cal.data("colorpicker").color,e.data.cal.get(0))
h(e.data.cal.data("colorpicker").color,e.data.cal.get(0))
$(document).unbind(s.end,R)
$(document).unbind(s.move,T)
return false},L=function(e){e.preventDefault()
var t={cal:$(this).parent(),pos:$(this).offset()}
e.data=t
S(e,"startScrub")
t.preview=t.cal.data("colorpicker").livePreview
$(document).bind(s.end,t,C)
$(document).bind(s.move,t,S)},S=function(e,t){var i=x(e)
if(!i.pageX&&!i.pageY){return false}g.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,i.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,i.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview,t||"midScrub"])
return false},C=function(e){S(e,"stopScrub")
l(e.data.cal.data("colorpicker").color,e.data.cal.get(0))
h(e.data.cal.data("colorpicker").color,e.data.cal.get(0))
$(document).unbind(s.end,C)
$(document).unbind(s.move,S)
return false},U=function(e){$(this).addClass("colorpicker_focus")},E=function(e){$(this).removeClass("colorpicker_focus")},D=function(e){var t=$(this).parent()
var i=t.data("colorpicker").color
t.data("colorpicker").origColor=i
u(i,t.get(0))
t.data("colorpicker").onSubmit(i,V(i),B(i),t.data("colorpicker").el,t.data("colorpicker").parent)},N=function(e){var t=$("#"+$(this).data("colorpickerId"))
t.data("colorpicker").onBeforeShow.apply(this,[t.get(0)])
var i=$(this).offset()
var a=I()
var n=i.top+this.offsetHeight
var o=i.left
if(n+176>a.t+a.h){n-=this.offsetHeight+176}if(o+356>a.l+a.w){o-=356}t.css({left:o+"px",top:n+"px"})
if(t.data("colorpicker").onShow.apply(this,[t.get(0)])!=false){t.show()}$(document).bind(s.start,{cal:t},M)
return false},M=function(e){if(!O(e.data.cal.get(0),e.target,e.data.cal.get(0))){if(e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])!=false){e.data.cal.hide()}$(document).unbind(s.start,M)}},O=function(e,t,i){if(e==t){return true}if(e.contains){return e.contains(t)}if(e.compareDocumentPosition){return!!(e.compareDocumentPosition(t)&16)}var a=t.parentNode
while(a&&a!=i){if(a==e)return true
a=a.parentNode}return false},I=function(){var e=document.compatMode=="CSS1Compat"
return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}},P=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},A=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},z=function(e){var t=6-e.length
if(t>0){var i=[]
for(var a=0;a<t;a++){i.push("0")}i.push(e)
e=i.join("")}return e},q=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16)
return{r:e>>16,g:(e&65280)>>8,b:e&255}},F=function(e){return H(q(e))},H=function(e){var t={h:0,s:0,b:0}
var i=Math.min(e.r,e.g,e.b)
var a=Math.max(e.r,e.g,e.b)
var n=a-i
t.b=a
if(a!=0){}t.s=a!=0?255*n/a:0
if(t.s!=0){if(e.r==a){t.h=(e.g-e.b)/n}else if(e.g==a){t.h=2+(e.b-e.r)/n}else{t.h=4+(e.r-e.g)/n}}else{t.h=-1}t.h*=60
if(t.h<0){t.h+=360}t.s*=100/255
t.b*=100/255
return t},B=function(e){var t={}
var i=Math.round(e.h)
var a=Math.round(e.s*255/100)
var n=Math.round(e.b*255/100)
if(a==0){t.r=t.g=t.b=n}else{var o=n
var r=(255-a)*n/255
var s=(o-r)*(i%60)/60
if(i==360)i=0
if(i<60){t.r=o
t.b=r
t.g=r+s}else if(i<120){t.g=o
t.b=r
t.r=o-s}else if(i<180){t.g=o
t.r=r
t.b=r+s}else if(i<240){t.b=o
t.r=r
t.g=o-s}else if(i<300){t.b=o
t.g=r
t.r=r+s}else if(i<360){t.r=o
t.g=r
t.b=o-s}else{t.r=0
t.g=0
t.b=0}}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},j=function(e){var t=[e.r.toString(16),e.g.toString(16),e.b.toString(16)]
$.each(t,function(e,i){if(i.length==1){t[e]="0"+i}})
return t.join("")},V=function(e){return j(B(e))},Y=function(){var e=$(this).parent()
var t=e.data("colorpicker").origColor
e.data("colorpicker").color=t
l(t,e.get(0))
h(t,e.get(0))
c(t,e.get(0))
d(t,e.get(0))
p(t,e.get(0))
f(t,e.get(0))}
return{init:function(e){e=$.extend({},r,e||{})
if(typeof e.color=="string"){e.color=F(e.color)}else if(e.color.r!=undefined&&e.color.g!=undefined&&e.color.b!=undefined){e.color=H(e.color)}else if(e.color.h!=undefined&&e.color.s!=undefined&&e.color.b!=undefined){e.color=P(e.color)}else{return this}return this.each(function(){if(!$(this).data("colorpickerId")){var t=$.extend({},e)
t.origColor=e.color
var i="collorpicker_"+parseInt(Math.random()*1e3)
$(this).data("colorpickerId",i)
t.parent=$(this)
var a=$(o).attr("id",i).attr("data-parent",$(this).attr("id"))
if(t.flat){a.appendTo(this).show()}else{a.appendTo(document.body)}t.fields=a.find("input").bind("keyup",m).bind("change",g).bind("blur",v).bind("focus",b)
a.find("span").bind(s.start,y).end().find(">div.colorpicker_current_color").bind("click",Y)
a.bind(s.move,function(e){e.preventDefault()})
t.selector=a.find("div.colorpicker_color").bind(s.start,L)
t.selectorIndic=t.selector.find("div div")
t.el=this
t.hue=a.find("div.colorpicker_hue div")
a.find("div.colorpicker_hue").bind(s.start,k)
t.newColor=a.find("div.colorpicker_new_color")
t.currentColor=a.find("div.colorpicker_current_color")
a.data("colorpicker",t)
a.find("div.colorpicker_submit").bind("mouseenter",U).bind("mouseleave",E).bind("click",D)
l(t.color,a.get(0))
c(t.color,a.get(0))
h(t.color,a.get(0))
p(t.color,a.get(0))
d(t.color,a.get(0))
u(t.color,a.get(0))
f(t.color,a.get(0))
if(t.flat){a.css({position:"relative",display:"block"})}else{$(this).bind(t.eventName,N)}}})},showPicker:function(){return this.each(function(){if($(this).data("colorpickerId")){N.apply(this)}})},hidePicker:function(){return this.each(function(){if($(this).data("colorpickerId")){$("#"+$(this).data("colorpickerId")).hide()}})},setColor:function(e){if(typeof e=="string"){e=F(e)}else if(e.r!=undefined&&e.g!=undefined&&e.b!=undefined){e=H(e)}else if(e.h!=undefined&&e.s!=undefined&&e.b!=undefined){e=P(e)}else{return this}return this.each(function(){if($(this).data("colorpickerId")){var t=$("#"+$(this).data("colorpickerId"))
t.data("colorpicker").color=e
t.data("colorpicker").origColor=e
l(e,t.get(0))
c(e,t.get(0))
h(e,t.get(0))
p(e,t.get(0))
d(e,t.get(0))
u(e,t.get(0))
f(e,t.get(0))}})}}}()
$.fn.extend({ColorPicker:t.init,ColorPickerHide:t.hidePicker,ColorPickerShow:t.showPicker,ColorPickerSetColor:t.setColor})})(jQuery)
window.ScratchpadAutosuggest={init:function e(t){this.initialized=true
this.editor=t
this.enableLiveCompletion(window.localStorage["autosuggest"]||true)
var i=ace.require("ace/ext/language_tools")
var a=[ScratchpadAutosuggestData._keywords,ScratchpadAutosuggestData._pjsFunctions,ScratchpadAutosuggestData._pjsVariables,ScratchpadAutosuggestData._pjsCallbacks,ScratchpadAutosuggestData._pjsObjectConstructors,ScratchpadAutosuggestData._pjsObjects]
for(var n=t.completers.length-1;n>=0;n--){if(t.completers[n]===i.keyWordCompleter){t.completers.splice(n,1)}else if(t.completers[n]===i.textCompleter){this.internalTextCompleter=t.completers[n]
t.completers.splice(n,1)}}this.customCompleter={getCompletions:function o(e,t,i,n,r){if(n.length===0){r(null,[])
return}var s=[]
a.forEach(function(e){e.whitelist.forEach(function(t){var i=t
if(_.isObject(t)){i=t.name}var a=i.split("(")[0]
if(a.indexOf(n)===-1){return}s.push({name:i+"-name",value:a,score:299,meta:e.type})}.bind(this))}.bind(this))
r(null,s)}}
i.addCompleter(this.customCompleter)},enableLiveCompletion:function t(e){if(!this.initialized){return}this.editor.setOptions({enableLiveAutocompletion:e})},lookupParams:function i(e){if(!this.initialized){return}var t=_.find(ScratchpadAutosuggestData._pjsFunctions.whitelist,function(t){var i=t
if(_.isObject(t)){i=t.name}return i.split("(")[0]===e})
if(!t){t=_.find(ScratchpadAutosuggestData._keywords.whitelist,function(t){if(_.isObject(t)){var i=t.name
return i===e}return false})}if(!t){return}return t},lookupParamsSafeHTML:function a(e,t){var i=t.split(",").length-1
var a=this.lookupParams(e)
if(!a){return}var e=a
var n,o,r=true,s
var l=$("<div class='autosuggest-info'/>").hide()
if(_.isObject(a)){e=a.name
n=a.description
s=a.exampleURL
o=a.params
if(!_.isUndefined(a.isFunction)){r=a.isFunction}}var c=function b(e){if(!o||e>=o.length){return""}return o[e]}
var h=e.split("(")
var d=$("<span class='autosuggest-function'/>").text(h[0])
var p=$()
if(n){p=p.add(d.data("param-info",n).data("exampleURL",s))}var u=h.length>1?h[1].substring(0,h[1].length-1):""
if(_.isUndefined(u)){return}var f=u.split(",")
var m=$("<span/>")
var g
if(i>=f.length&&d!=="debug"){i=f.length-1
g=$("  <span class='autosuggest-error'/>").text(" Too many arguments passed!")}for(var v=0;v<i;v++){if(m.children().length){m.append($("<span/>").text(", "))}m.append($("<span class='autosuggest-param-info'/>").text(f[v]).data("param-info",c(v)))}if(m.children().length){m.append($("<span>").text(", "))}m.append($("<span class='current-param autosuggest-param-info'/>").text(f[i]).data("param-info",c(v)))
for(var v=i+1;v<f.length;v++){if(m.children().length){m.append($("<span/>").text(", "))}m.append($("<span class='autosuggest-param-info'/>").text(f[v]).data("param-info",c(v)))}m.find(".autosuggest-param-info").each(function(){if($(this).data("param-info")){p=p.add($(this))}})
p.mouseenter(function(e){var t=$(e.target).addClass("autosuggest-highlight").data("param-info")
l.text("  "+t).show()
$(".arrow").hide()}).mouseleave(function(e){$(e.target).removeClass("autosuggest-highlight")
l.hide()
$(".arrow").show()}).mousedown(function(e){var t=$(e.target).addClass("autosuggest-highlight").data("exampleURL")
if(t){window.open(t,"_blank")}})
return $("<span/>").append(d).append(r?$("<span/>").text("("):null).append(m).append(r?$("<span/>").text(")"):null).append(g).append(l)}}
window.ScratchpadAutosuggestData={_keywords:{type:i18n._("keyword"),whitelist:["break","case","catch","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with"]},_pjsFunctions:{type:i18n._("function"),whitelist:[{name:"rect(x, y, width, height, radius*)",exampleURL:"/cs/rectx-y-w-h/839496660",description:i18n._("Draws a rectangle, using the first two coordinates as the top left corner and the last two as the width/height. For alternate ways to position, see rectMode."),params:[i18n._("x: the x-coordinate of the top left corner"),i18n._("y: the y-coordinate of the top left corner"),i18n._("width: the width of the rectangle"),i18n._("height: the height of the rectangle"),i18n._("radius:(Optional) the radius of the corners, to round the rectangle")]},{name:"ellipse(x, y, w, h)",exampleURL:"/cs/ellipsex-y-w-h/839435680",description:i18n._("Draws an ellipse, using the first two parameters as the center coordinates and the last two as the width/height. For alternate ways to position, see ellipseMode."),params:[i18n._("x: the x-coordinate of the center"),i18n._("y: the y-coordinate of the center"),i18n._("width: the width of the ellipse"),i18n._("height: the height of the ellipse")]},{name:"triangle(x1, y1, x2, y2, x3, y3)",exampleURL:"/cs/trianglex1-y1-x2-y2-x3-y3/839546599",description:i18n._("Draws a triangle"),params:[i18n._("x: the x-coordinate of the first vertex"),i18n._("y1: the y-coordinate of the first vertex"),i18n._("x2: the x-coordinate of the second vertex"),i18n._("y2: the y-coordinate of the second vertex"),i18n._("x3: the x-coordinate of the third vertex"),i18n._("y3: the y-coordinate of the third vertex")]},{name:"line(x1, y1, x2, y2)",exampleURL:"/cs/linex1-y1-x2-y2/827916099",description:i18n._("Draws a line from one point to another. The color of the line is determined by the most recent stroke() call. The thickness of the line is determined by the most recent strokeWeight() call. The line ending style can be changed using strokeCap()."),params:[i18n._("x1: the x-coordinate of the first point"),i18n._("y1: the y-coordinate of the first point"),i18n._("x2: the x-coordinate of the second point"),i18n._("y2: the y-coordinate of the second point")]},{name:"point(x, y)",exampleURL:"/cs/pointx-y/827809834",description:i18n._("Draws a point. The color is determined by the most recent stroke() call and the thickness is determined by the most recent strokeWeight() call."),params:[i18n._("x: the x-coordinate of the point"),i18n._("y: the y-coordinate of the point")]},{name:"arc(x, y, w, h, start, stop)",exampleURL:"/cs/arcx-y-w-h-start-stop/1903619297",description:i18n._("Draws an arc.   It is very similar to an ellipse(), except that the final two parameters, start and stop, decide how much of the ellipse to draw."),params:[i18n._("x: The x-coordinate of the center of the complete ellipse derived from the arc"),i18n._("y: The y-coordinate of the center of the complete ellipse derived from the arc"),i18n._("width: The width of the complete ellipse formed by the partial arc"),i18n._("height: The height of the complete ellipse formed by the partial arc"),i18n._("start: The angle to start the arc at"),i18n._("stop: The angle to stop the arc at")]},{name:"bezier(x1, y1, cx1, cy1, cx2, cy2, x2, y2)",exampleURL:"/cs/bezierx1-y1-cx1-cy1-cx2-cy2-x2-y2/956920482",description:i18n._("Draws a bezier curve. To extract points and tangents after drawing the curve, use bezierPoint() and bezierTangent."),params:[i18n._("x1: the x-coordinate of the first endpoint"),i18n._("y1: the y-coordinate of the first endpoint"),i18n._("cx1: the x-coordinate of the first control point"),i18n._("cy1: the y-coordinate of the first control point"),i18n._("cx2: the x-coordinate of the second control point"),i18n._("cy2: the y-coordinate of the second control point"),i18n._("x2: the x-coordinate of the second endpoint"),i18n._("y2: the y-coordinate of the second endpoint")]},{name:"quad(x1, y1, x2, y2, x3, y3, x4, y4)",exampleURL:"/cs/quadx1-y1-x2-y2-x3-y3-x4-y4/1907244018",description:i18n._("Draws any quadrilateral, with the points listed as parameters in a clockwise or counter-clockwise direction."),params:[i18n._("x1: the x-coordinate of the first vertex"),i18n._("y1: the y-coordinate of the first vertex"),i18n._("x2: the x-coordinate of the second vertex"),i18n._("y2: the y-coordinate of the second vertex"),i18n._("x3: the x-coordinate of the third vertex"),i18n._("y3: the y-coordinate of the third vertex"),i18n._("x4: the x-coordinate of the fourth vertex"),i18n._("y4: the y-coordinate of the fourth vertex")]},{name:"image(image, x, y, width*, height*)",exampleURL:"/cs/imageimage-x-y/937672662",description:i18n._("Draw an image on the canvas. The only allowed images are those that popup in the image picker when you use the getImage() method. The image is positioned using the x/y as the upper left corner. For alternate ways to position images, see imageMode."),params:[i18n._("image: an image returned by getImage()"),i18n._("x: the x-coordinate of the top left corner"),i18n._("y: the y-coordinate of the top left corner"),i18n._("width: (Optional) the width of the drawn image"),i18n._("height: (Optional) the height of the drawn image")]},{name:"playSound(sound)",exampleURL:"/cs/playsoundsound/6655307787534336",description:i18n._("Plays a short sound. The only allowed sounds are those that popup in the picker when you use the getSound() method."),params:[i18n._("sound: a sound returned by getSound()")]},{name:"rectMode(MODE)",exampleURL:"/cs/rectmodemode/4556457341091840",description:i18n._("Modifies the location from which rectangles draw."),params:[i18n._("MODE: The mode, either CORNER, CORNERS, CENTER, or RADIUS. The default is CORNER.")]},{name:"ellipseMode(MODE)",exampleURL:"cs/ellipsemodemode/6709863212122112",description:i18n._("Changes how ellipses are drawn."),params:[i18n._("MODE: The mode, either CORNER, CORNERS, CENTER, or RADIUS. The default is CENTER.")]},{name:"imageMode(MODE)",exampleURL:"/cs/imagemodemode/5295050787389440",description:i18n._("Modifies the location from which images are drawn."),params:[i18n._("MODE: Either CENTER, CORNERS, or CORNER. The default is CORNER.")]},{name:"bezierPoint(a, b, c, d, t)",exampleURL:"/cs/bezierpointa-b-c-d-t/4551007698681856",description:i18n._("Evaluates the Bezier at point t for points a, b, c, d. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the location of a bezier curve at t."),params:[i18n._("a: coordinate of first point on the curve"),i18n._("b: coordinate of first control point"),i18n._("c: coordinate of second control point"),i18n._("d: coordinate of second point on the curve"),i18n._("t: value between 0 and 1")]},{name:"bezierTangent(a,b, c, d, t)",exampleURL:"/cs/beziertangenta-b-c-d-t/4736929853603840",description:i18n._("Calculates the tangent of a point on a bezier curve. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the tangent of a bezier curve at t."),params:[i18n._("a: coordinate of first point on the curve"),i18n._("b: coordinate of first control point"),i18n._("c: coordinate of second control point"),i18n._("d: coordinate of second point on the curve"),i18n._("t: value between 0 and 1")]},{name:"bezierVertex(cx1, cy1, cx2, cy2, x, y)",exampleURL:"/cs/beziervertexcx1-cy1-cx2-cy2-x-y/5085481683386368",description:i18n._("Used in conjunction with beginShape() and endShape() to draw shapes with bezier curves for sides. Each call to bezierVertex() defines the position of two control points and one anchor point of a Bezier curve, adding a new segment to a line or shape. The first time bezierVertex() is used within a beginShape() call, it must be prefaced with a call to vertex() to set the first anchor point. When using this function, do *not* specify a mode in beginShape()."),params:[i18n._("cx1: The x-coordinate of 1st control point"),i18n._("cy1: The y-coordinate of 1st control point"),i18n._("cx2: The x-coordinate of 2nd control point"),i18n._("cy2: The y-coordinate of 2nd control point"),i18n._("x: The x-coordinate of anchor point"),i18n._("y: The y-coordinate of anchor point")]},{name:"curve(x1, y1, x2, y2, x3, y3, x4, y4)",exampleURL:"/cs/curve/5105742184972288",description:i18n._("Draws a curved line on the screen. The first and second parameters specify the first anchor point and the last two parameters specify the second anchor. The middle parameters specify the points for defining the shape of the curve. Longer curves can be created by putting a series of curve() functions together. An additional function called curveTightness() provides control for the visual quality of the curve. The curve() function is an implementation of Catmull-Rom splines."),params:[i18n._("x1: the x coordinate of first anchor point"),i18n._("y1: the y coordinate of first anchor point"),i18n._("x2: the x coordinate of first point"),i18n._("y2: the y coordinate of first point"),i18n._("x3: the x coordinate of second point"),i18n._("y3: the y coordinate of second point"),i18n._("x4: the x coordinate of second anchor point"),i18n._("y4: the y coordinate of second anchor point")]},{name:"curvePoint(a, b, c, d, t)",exampleURL:"/cs/curvepointa-b-c-d-t/5879387094253568",description:i18n._("Evalutes the curve at point t for points a, b, c, d. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the location of a curve at t."),params:[i18n._("a: the coordinate of the first point"),i18n._("b: the coordinate of the first control point"),i18n._("c: the coordinate of the second point"),i18n._("d: the coordinate of the second point"),i18n._("t: the a value between 0 and 1")]},{name:"curveTangent(a, b, c, d, t)",exampleURL:"/cs/curvetangenta-b-c-d-t/4708940860358656",description:i18n._("Calculates the tangent at a point the curve. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the tangent of a curve at t."),params:[i18n._("a: the coordinate of the first point"),i18n._("b: the coordinate of the first control point"),i18n._("c: the coordinate of the second point"),i18n._("d: the coordinate of the second point"),i18n._("t: the a value between 0 and 1")]},{name:"curveTightness(tightness)",exampleURL:"/cs/curvetightnesssquishy/4792873740402688",description:i18n._("Modifies the quality of forms created with curve() and curveVertex(). The tightness parameter determines how the curve fits to the vertex points."),params:[i18n._("tightness: amount of deformation from the original vertices")]},{name:"curveVertex(x,y)",exampleURL:"/cs/curvevertexx-y/6499542019080192",description:i18n._("Used in conjunction with beginShape() and endShape() to draw shapes with bezier curves for sides. The first and last points in a series of curveVertex() lines will be used to guide the beginning and end of a the curve."),params:[i18n._("x: the x-coordinate of the vertex"),i18n._("y: the y-coordinate of the vertex")]},{name:"beginShape(MODE*)",exampleURL:"/cs/beginshapeendshape/5462945756610560",description:i18n._("Using the beginShape() and endShape() functions allow creating more complex forms. To start a form, call beginShape(), then use the vertex() command, then call endShape() to stop. By default, it creates an irregular polygon, but you can control that by sending a mode to beginShape().  Transformations such as translate(), rotate(), and scale() do not work within beginShape(). It is also not possible to use other shapes, such as ellipse() or rect() within beginShape()."),params:[i18n._("MODE: (Optional) Shape mode. Either POINTS, LINES, TRIANGLES, TRIANGLE_FAN, TRIANGLE_STRIP, QUADS, and QUAD_STRIP")]},{name:"endShape(MODE*)",exampleURL:"/cs/beginshapeendshape/5462945756610560",description:i18n._("Using the beginShape() and endShape() functions allow creating more complex forms. To start a form, call beginShape(), then use the vertex() command, then call endShape() to stop. By default, it creates an irregular polygon, but you can control that by sending a mode to beginShape().  Transformations such as translate(), rotate(), and scale() do not work within beginShape(). It is also not possible to use other shapes, such as ellipse() or rect() within beginShape()."),params:[i18n._("MODE: (Optional) Specify CLOSE to close the shape.")]},{name:"vertex(x, y)",exampleURL:"/cs/beginshapeendshape/5462945756610560",description:i18n._("Using the beginShape() and endShape() functions allow creating more complex forms. To start a form, call beginShape(), then use the vertex() command, then call endShape() to stop. By default, it creates an irregular polygon, but you can control that by sending a mode to beginShape().  Transformations such as translate(), rotate(), and scale() do not work within beginShape(). It is also not possible to use other shapes, such as ellipse() or rect() within beginShape()."),params:[i18n._("x: the x-coordinate of the vertex"),i18n._("y: the y-coordinate of the vertex")]},{name:"background(r, g, b, a*)",exampleURL:"/cs/backgroundr-g-b/839653892",description:i18n._("Sets the background color of the canvas. Note that calling this will color over anything drawn before the command."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"fill(r, g, b, a*)",exampleURL:"/cs/fillr-g-b/839774957",description:i18n._("Sets the fill color for all shapes drawn after the function call."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"stroke(r, g, b, a*)",exampleURL:"/cs/stroker-g-b/839545910",description:i18n._("Sets the outline color for all shapes drawn after the function call."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"color(r, g, b, a*)",exampleURL:"/cs/colorr-g-b/957020020",description:i18n._("This function lets you store all three color components in a single variable. You can then pass that one variable to functions like background(), stroke(), and fill()."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"noFill()",exampleURL:"/cs/nofill/877946290",description:i18n._("Makes all shapes drawn after this function call transparent.")},{name:"noStroke()",exampleURL:"/cs/nostroke/839859412",description:i18n._("Disables outlines for all shapes drawn after the function call.")},{name:"strokeWeight(thickness)",exampleURL:"/cs/strokeweightthickness/877859744",description:i18n._("Sets the thickness of all lines and outlines drawn after the function call."),params:[i18n._("thickness: a number specifying the thickness")]},{name:"strokeJoin(MODE)",exampleURL:"/cs/strokejoinmode/5662070842327040",description:i18n._("Sets the style of the joints which connect line segments drawn with vertex(). These joints are either mitered, beveled, or rounded and specified with the corresponding parameters MITER, BEVEL, and ROUND."),params:[i18n._("MODE: Either MITER, BEVEL, or ROUND. The default is MITER.")]},{name:"strokeCap(MODE)",exampleURL:"/cs/strokecapmode/5288182060941312",description:i18n._("Sets the style for rendering line endings. These ends are either squared, extended, or rounded and specified with the corresponding parameters SQUARE, PROJECT, and ROUND."),params:[i18n._("MODE: Either SQUARE, PROJECT, or ROUND. The default is ROUND")]},{name:"blendColor(c1, c2, MODE)",exampleURL:"/cs/blendcolorc1-c2-mode/4530750216994816",description:i18n._("Blends two color values together based on the blending mode given as the MODE parameter."),params:[i18n._("c1: The first color to blend"),i18n._("c2: The second color to blend"),i18n._("MODE: Either BLEND, ADD, SUBTRACT, DARKEST, LIGHTEST, DIFFERENCE, EXCLUSION, MULTIPLY, SCREEN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, DODGE, or BURN.")]},{name:"lerpColor(c1, c2, amount)",exampleURL:"/cs/lerpcolorc1-c2-amount/4759935778816000",description:i18n._("Calculates a color or colors between two color at a specific increment. The amount parameter is the amount to interpolate between the two values where 0.0 equal to the first point, 0.1 is very near the first point, 0.5 is half-way in between, etc."),params:[i18n._("c1: Interpolate from this color"),i18n._("c2: Interpolate to this color")]},{name:"colorMode(MODE)",exampleURL:"/cs/colormode/5833774306689024",description:i18n._("Changes the way that color values are interpreted when set by fill()/stroke()/background()."),params:[i18n._("MODE: Either RGB or HSB. The default is RGB.")]},{name:"red(color)",exampleURL:"/cs/redcolor/5102159326609408",description:i18n._("Extracts the red value from a color, scaled to match current colorMode()."),params:[i18n._("color: Any color data type")]},{name:"green(color)",exampleURL:"/cs/greencolor/5877638103040000",description:i18n._("Extracts the green value from a color, scaled to match current colorMode()."),params:[i18n._("color: Any color data type")]},{name:"blue(color)",exampleURL:"/cs/bluecolor/5177743654256640",description:i18n._("Extracts the blue value from a color, scaled to match current colorMode()."),params:[i18n._("color: Any color data type")]},{name:"alpha(color)",exampleURL:"/cs/alphacolor/6687311345483776",description:i18n._("Extracts the alpha value from a color."),params:[i18n._("color: Any color data type")]},{name:"hue(color)",exampleURL:"/cs/huecolor/6620387366404096",description:i18n._("Extracts the hue value from a color."),params:[i18n._("color: Any color data type")]},{name:"saturation(color)",exampleURL:"/cs/saturationcolor/6358678768713728",description:i18n._("Extracts the saturation value from a color."),params:[i18n._("color: Any color data type")]},{name:"brightness(color)",exampleURL:"/cs/brightnesscolor/5888575639912448",description:i18n._("Extracts the brightness value from a color."),params:[i18n._("color: Any color data type")]},{name:"text(message, x, y, width*, height*)",exampleURL:"/cs/texttext-x-y/937624625",description:i18n._("Draws a string of text at the specified location"),params:[i18n._("message: the string of text to display"),i18n._("x: the x-coordinate of the bottom left corner"),i18n._("y: the y-coordinate of the bottom left corner"),i18n._("width: (Optional) the width of the box for text to auto wrap inside"),i18n._("height: (Optional) the height of the box for text to auto wrap inside")]},{name:"textFont(font, size*)",exampleURL:"/cs/textfontfont-size/940030209",description:i18n._("Using textFont() with createFont(), it's possible to change the font of text drawn."),params:[i18n._("font: A font returned by the createFont function"),i18n._("size: (Optional) The size of the font, in pixels")]},{name:"createFont(name, size*)",exampleURL:"/cs/textfontfont-size/940030209",description:i18n._("Using textFont() with createFont(), it's possible to change the font of text drawn."),params:[i18n._('name: A font name, either "sans-serif", "serif", "monospace", "fantasy", or "cursive"'),i18n._("size: (Optional) The size of the font, in pixels")]},{name:"textSize(size)",exampleURL:"/cs/textsizesize/937728198",description:i18n._("Changes the size of text being drawn."),params:[i18n._("size: The size of the text, in pixels")]},{name:"textWidth(str)",exampleURL:"/cs/textwidthstr/4799257177489408",description:i18n._("Calculates and returns the width of any string."),params:[i18n._("str: The string to calculate the width of")]},{name:"textAscent()",exampleURL:"/cs/textascent/5975406490419200",description:i18n._("Returns the ascent of the current font at its current size. This information is useful for determining the height of the font above the baseline. For example, adding the textAscent() and textDescent() values will give you the total height of the line.")},{name:"textDescent()",exampleURL:"/cs/textdescent/5638769772331008",description:i18n._("Returns descent of the current font at its current size. This information is useful for determining the height of the font below the baseline. For example, adding the textAscent() and textDescent() values will give you the total height of the line.")},{name:"textLeading(dist)",exampleURL:"/cs/textleadingdist/6369013500215296",description:i18n._("Sets the spacing between lines of text in units of pixels. This setting will be used in all subsequent calls to the text() function."),params:[i18n._("dist: The size in pixels for spacing between lines")]},{name:"textAlign(ALIGN, YALIGN)",exampleURL:"/cs/textalignalign-yalign/4508437190803456",description:i18n._("Sets the current alignment for drawing text. The first parameter is used to set the display characteristics of the letters in relation to the values for the x and y parameters of the text() function.  The second parameter is used to vertically align the text. BASELINE is the default setting, if textAlign is not used. The TOP and CENTER parameters are straightforward. The BOTTOM parameter offsets the line based on the current textDescent(). For multiple lines, the final line will be aligned to the bottom, with the previous lines appearing above it."),params:[i18n._("ALIGN: Horizontal alignment, either LEFT, CENTER, or RIGHT"),i18n._("YALIGN: Vertical alignment, either TOP, BOTTOM, CENTER, or BASELINE")]},{name:"rotate(angle)",exampleURL:"/cs/rotateangle/6386091934351360",description:i18n._("Sets the rotation angle for any shapes drawn after the command. If called multiple times, the angle will be added to the previous angle (accumulative effect). To stop rotation, use pushMatrix()/popMatrix()."),params:[i18n._("angle: The number of degrees to rotate by. To specify in radians, use the angleMode() function.")]},{name:"scale(amount, amountY*)",exampleURL:"/cs/scalex-y/6712922034143232",description:i18n._("Increases the size of shapes drawn after the command, by expanding and contracting vertices. For example, scale(2) makes it increase in size by 200%. If called multiple times, the sizes will multiply (accumulative effect). It can be called with one parameter to resize the same in both dimensions, or with two parameters to size differently in each dimension.  To stop resizing shapes, use pushMatrix()/popMatrix()."),params:[i18n._('amount: The amount to scale object in "x" and "y" axis'),i18n._('amountY: (Optional) The amount to scale object in "y" axis')]},{name:"translate(x, y)",exampleURL:"/cs/translatex-y/6505693083336704",description:i18n._("Displaces the drawn shapes by a given amount in the x/y directions. If called multiple times, the offsets will be added to each other (accumulative effect). To stop translating shapes, use pushMatrix()/popMatrix()."),params:[i18n._("x: The amount to translate left/right."),i18n._("y: The amount to translate up/down.")]},{name:"pushMatrix()",exampleURL:"/cs/pushmatrixpopmatrix/5505194477486080",description:i18n._('Remembers the current coordinate system (in the "matrix stack").')},{name:"popMatrix()",exampleURL:"/cs/pushmatrixpopmatrix/5505194477486080",description:i18n._('Restores the previous coordinate system (from the "matrix stack") - whatever was most recently pushed.')},{name:"resetMatrix()",exampleURL:"/cs/resetmatrix/4597705468805120",description:i18n._("Replaces the current transformation matrix with the identity matrix. This effectively clears all transformation functions set before it.")},{name:"printMatrix()",exampleURL:"/cs/printmatrix/5934612152844288",description:i18n._("Prints the current transformation matrix to the console.")},{name:"frameRate(fps)",exampleURL:"/cs/frameratefps/6427359154536448",description:i18n._("Specifies the number of frames to be displayed every second. If the processor is not fast enough to maintain the specified rate, it will not be achieved. For fluid animation, at least 24 frames per second is recommended."),params:[i18n._("fps: A whole number, number of frames per second")]},{name:"loop()",exampleURL:"/cs/loop/5519218351013888",description:i18n._("Causes the program to continuously execute the code within draw(). If noLoop() is called, the code in draw() stops executing.")},{name:"noLoop()",exampleURL:"/cs/noloop/6342789906300928",description:i18n._("Stops the program from continuously executing the code within draw(). If loop() is called, the code in draw() begin to run continuously again.")},{name:"random(low, high)",exampleURL:"/cs/randomlow-high/827911487",description:i18n._("Returns a random number between low and high."),params:[i18n._("low: the lowest possible number returned"),i18n._("high: the highest possible number returned")]},{name:"dist(x1, y1, x2, y2)",exampleURL:"/cs/distx1-y1-x2-y2/1917352082",description:i18n._("Calculates the distance between two points, (x1, y1) and (x2, y2)."),params:[i18n._("x1: the x-coordinate of the first point"),i18n._("y1: the y-coordinate of the first point"),i18n._("x2: the x-coordinate of the second point"),i18n._("y2: the y-coordinate of the second point")]},{name:"constrain(value, min, max)",exampleURL:"/cs/constrainvalue-min-max/5870136103796736",description:i18n._("Constrains a value to not exceed a maximum and minimum value."),params:[i18n._("value: The value to constrain"),i18n._("min: The minimum limit"),i18n._("max: The maximum limit")]},{name:"min(num1, num2)",exampleURL:"/cs/minnum1-num2/4693347713155072",description:i18n._("Returns the smallest value of all values passed in."),params:[i18n._("num1: The first value to compare, any number."),i18n._("num2: The second value to compare, any number.")]},{name:"max(num1, num2)",exampleURL:"/cs/maxnum1-num2/4755409722146816",description:i18n._("Returns the greatest value of all values passed in."),params:[i18n._("num1: The first value to compare, any number."),i18n._("num2: The second value to compare, any number.")]},{name:"abs(num)",exampleURL:"/cs/absnum/877930637",description:i18n._("Returns the absolute value of a number"),params:[i18n._("num: The number to take the absolute value of")]},{name:"log(num)",exampleURL:"/cs/lognum/877921884",description:i18n._("Returns the the natural logarithm (base-e) of a number."),params:[i18n._("num: The number to take the log of")]},{name:"pow(num, exponent)",exampleURL:"/cs/pownum-exponent/877858853",description:i18n._("Returns a number raised to an exponential power."),params:[i18n._("num: The base of the exponential expression"),i18n._("exponent: The power to which the num is raised")]},{name:"sq(num)",exampleURL:"/cs/sqnum/6588187426160640",description:i18n._("Squares a number (multiplies a number by itself). The result is always a positive number, as multiplying two negative numbers always yields a positive result. For example, -1 * -1 = 1"),params:[i18n._("num: Any numeric value")]},{name:"sqrt(num)",exampleURL:"/cs/sqrtnum/6473360267542528",description:i18n._("Calculates the square root of a number. The square root of a number is always positive, even though there may be a valid negative root. The square root s of number a is such that s*s = a. It is the opposite of squaring."),params:[i18n._("num: Any numeric value")]},{name:"round(num)",exampleURL:"/cs/roundnum/5907281296228352",description:i18n._("Calculates the closest whole number that is closest to the value of the parameter."),params:[i18n._("num: Any numeric value")]},{name:"ceil(num)",exampleURL:"/cs/ceil/5491781646942208",description:i18n._("Calculates the closest whole number that is greater than or equal to the value of the parameter."),params:[i18n._("num: Any numeric value")]},{name:"floor(num)",exampleURL:"/cs/floornum/5703004061696000",description:i18n._("Calculates the closest whole number that is less than or equal to the value of the parameter."),params:[i18n._("num: Any numeric value")]},{name:"mag(x1, y1)",exampleURL:"/cs/magx1-y1-not-working-yet/5983219002376192",description:i18n._('Calculates the magnitude (or length) of a vector. A vector is a direction in space commonly used in computer graphics and linear algebra. Because it has no "start" position, the magnitude of a vector can be thought of as the distance from coordinate (0,0) to its (x,y) value. Therefore, mag() is a shortcut for writing dist(0, 0, x, y).'),params:[i18n._("x: the x component"),i18n._("y: the y component")]},{name:"exp(num)",exampleURL:"/cs/expvalue/5228990398726144",description:i18n._("Returns Euler's number e (2.71828...) raised to the power of the value parameter."),params:[i18n._("num: Any numeric value")]},{name:"map(num, low1, high1, low2, high2)",exampleURL:"/cs/mapvalue-low1-high1-low2-high2/4587974079545344",description:i18n._("Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful."),params:[i18n._("num: The incoming value to be converted"),i18n._("low1: Lower bound of the value's current range"),i18n._("high1: Upper bound of the value's current range"),i18n._("low2: Lower bound of the value's target range"),i18n._("high2: Upper bound of the value's target range")]},{name:"norm(num, low, high)",exampleURL:"/cs/normvalue-low-high/6581050767572992",description:i18n._("Normalizes a number from another range into a value between 0 and 1. This is the same as using the map function with the last two parameters set to 0 and 1, i.e: map(value, low, high, 0, 1); Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful."),params:[i18n._("num: The incoming value to be converted"),i18n._("low1: Lower bound of the value's current range"),i18n._("high1: Upper bound of the value's current range")]},{name:"lerp(num1, num2, amount)",exampleURL:"/cs/lerpvalue1-value2-amount/6456916012171264",description:i18n._("Calculates a number between two numbers at a specific increment."),params:[i18n._("num1: The first number"),i18n._("num2: The second number"),i18n._("amount: A value between 0.0 and 1.0")]},{name:"noise(x, y)",exampleURL:"/cs/noise/5618485581316096",description:i18n._("Returns the Perlin noise value at specified coordinates. The resulting value will always be between 0.0 and 1.0"),params:[i18n._("x: the x-coordinate in noise space"),i18n._("y: the y-coordinate in noise space (optional)")]},{name:"noiseDetail(octaves, falloff)",exampleURL:"/cs/noisedetailoctaves-falloff/6549875814563840",description:i18n._("Adjusts the character and level of detail produced by the Perlin noise function."),params:[i18n._("octaves: The number of octaves to be used by the noise() function"),i18n._("falloff: The falloff factor for each octave")]},{name:"sin(degrees)",exampleURL:"/cs/sindeg/948255306",description:i18n._("Return the sine of an angle."),params:[i18n._("deg: The angle, in degrees")]},{name:"cos(degrees)",exampleURL:"/cs/cosdeg/948226821",description:i18n._("Return the cosine of an angle."),params:[i18n._("deg: The angle, in degrees")]},{name:"tan(degrees)",exampleURL:"/cs/tandeg/948018680",description:i18n._("Return the tangent of an angle"),params:[i18n._("deg: The angle, in degrees")]},{name:"acos(val)",exampleURL:"/cs/acosval/4542953527705600",description:i18n._("Returns the arc cosine (inverse cosine) of a value. Depending on the angle mode, it returns values from 0-180 or 0-PI."),params:[i18n._("val: The value whose arc cosine is to be returned.")]},{name:"asin(val)",exampleURL:"/cs/asinval/5061655520083968",description:i18n._("Returns the arc sine (inverse sine) of a value. Depending on the angle mode, it returns values from -90 to 90 or -PI/2 to PI/2."),params:[i18n._("val: The value whose arc sine is to be returned.")]},{name:"atan(val)",exampleURL:"/cs/atanval/4869834059808768",description:i18n._("Returns the arc tangent (inverse tangent) of a value. Depending on the angle mode, it returns values from -90 to 90 or -PI/2 to PI/2."),params:[i18n._("val: The value whose arc tangent is to be returned")]},{name:"radians(angle)",exampleURL:"/cs/radiansangle/6628151023108096",description:i18n._("Converts a degree measurement to its corresponding value in radians."),params:[i18n._("angle: The angle in degrees")]},{name:"degrees(angle)",exampleURL:"/cs/degreesangle/6674991668002816",description:i18n._("Converts a radians measurement to its corresponding value in degrees."),params:[i18n._("angle: The angle in radians")]},{name:"day()",exampleURL:"/cs/day/4526347808407552",description:i18n._("Returns the current day of the month, between 1 and 31, according to the clock on the user's computer.")},{name:"month()",exampleURL:"/cs/month/5388987023753216",description:i18n._("Returns the current month of the year, between 1-12, according to the clock on the user's computer.")},{name:"year()",exampleURL:"/cs/year/6216887939629056",description:i18n._("Returns the current year according to the clock on the user's computer.")},{name:"hour()",exampleURL:"/cs/hour/5806957302644736",description:i18n._("Returns the current hour as a value from 0 - 23, based on the user's computer clock.")},{name:"minute()",exampleURL:"/cs/minute/6638408210317312",description:i18n._("Returns the current minute as a value from 0 - 59, based on the user's computer clock.")},{name:"second()",exampleURL:"/cs/second/5743886110556160",description:i18n._("Returns the current second as a value from 0 - 59, based on the user's computer clock.")},{name:"millis()",exampleURL:"/cs/millis/5970545493409792",description:i18n._("Returns the number of milliseconds (thousandths of a second) since starting the program. Useful for cyclic animations.")},{name:"debug(arg1, ...",exampleURL:"/cs/debugarg1-arg2/939146973",description:i18n._("Log out any number of values to the browser console."),params:[i18n._("arg: The first value to log"),i18n._("...: (Optional)* any amount of extra arguments")]},{name:"println(data)",exampleURL:"/cs/printlndata/6120466259378176",description:i18n._("Prints a line of data to the console that pops up over the canvas. Click the X to close the console."),params:[i18n._("data: The data to print")]},{name:"print(data)",exampleURL:"/cs/printdata/5110798099677184",description:i18n._("Prints data to the console that pops up over the canvas, without creating a new line (like println does)."),params:[i18n._("data: The data to print")]}]},_pjsObjectConstructors:{type:i18n._("object constructor"),whitelist:["PVector(x,y)"]},_pjsObjects:{type:i18n._("object"),whitelist:["Random"]},_pjsVariables:{type:i18n._("variable"),whitelist:["width","height","mouseIsPressed","keyIsPressed","frameCount","key","keyCode","mouseButton","mouseX","mouseY","pmouseX","pmouseY","angleMode"]},_pjsCallbacks:{type:i18n._("callback"),whitelist:["draw","mouseClicked","mousePressed","mouseReleased","mouseMoved","mouseDragged","mouseOver","mouseOut","keyPressed","keyReleased","keyTyped"]}}
window.TooltipEngine=Backbone.View.extend({initialize:function n(e){this.options=e
this.editor=e.editor
this.enabled=true
var t=this.options.record
this.tooltips={}
var i=_.defaults({parent:this},e)
_.each(e.tooltips,function(e){this.tooltips[e]=new TooltipEngine.classes[e](i)
this.tooltips[e].on("scrubbingStarted",function(){this.trigger("scrubbingStarted",e)}.bind(this))
this.tooltips[e].on("scrubbingEnded",function(){this.trigger("scrubbingEnded",e)}.bind(this))}.bind(this))
if(t&&!t.handlers.hot){t.handlers.hot=function(e){if(this.currentTooltip){TooltipBase.prototype.updateText.call(this.currentTooltip,e.hot)}}.bind(this);["playStarted","runSeek"].forEach(function(e){t.on(e,function(){_.values(this.tooltips).forEach(function(e){e.autofill=false})}.bind(this))},this);["playPaused","playStopped","seekDone"].forEach(function(e){t.on(e,function(){_.values(this.tooltips).forEach(function(e){e.autofill=true})}.bind(this))},this)}this.currentTooltip=undefined
this.ignore=false
this.bind()},bind:function o(){if(this.callbacks){return}var e=function(e){var t=$.contains(this.editor.container,e.target)
var i=this.currentTooltip&&$.contains(this.currentTooltip.$el[0],e.target)
var a=this.currentTooltip&&this.currentTooltip.modal&&this.currentTooltip.modal.$el.is(":visible")
if(this.currentTooltip&&!(t||i||a)){this.currentTooltip.$el.hide()
this.currentTooltip=undefined}}.bind(this)
this.callbacks=[{target:this.editor.selection,event:"changeCursor",fn:this.doRequestTooltip.bind(this)},{target:this.editor.session.getDocument(),event:"change",fn:function(e){if(this.enabled){this.doRequestTooltip(e.data)}}.bind(this)},{target:this.editor.session,event:"changeScrollTop",fn:function(){if(this.currentTooltip){this.currentTooltip.placeOnScreen()}}.bind(this)},{target:$(document),event:"mousedown",fn:e},{target:$(document),event:"contextmenu",fn:e},{target:$(this.editor.container),event:"mousedown",fn:function(){this.doRequestTooltip({action:"click"})}.bind(this)}]
_.each(this.callbacks,function(e){e.target.on(e.event,e.fn)})
this.requestTooltipDefaultCallback=function(){ScratchpadAutosuggest.enableLiveCompletion(false)
if(this.currentTooltip&&this.currentTooltip.$el){this.currentTooltip.$el.hide()
this.currentTooltip=undefined}}.bind(this)
this.setEnabledStatus=function(e){this.enabled=e}.bind(this)
this.editor.on("requestTooltip",this.requestTooltipDefaultCallback)},remove:function r(){_.each(this.callbacks,function(e){e.target.off(e.event,e.fn)})
_.each(this.tooltips,function(e){e.remove()})
this.editor.off("requestTooltip",this.requestTooltipDefaultCallback)},doRequestTooltip:function s(e){if(this.ignore){return}this.last=this.last||{}
var t=this.editor.selection
var i=t.getCursor()
var a={col:i.column,row:i.row,line:this.editor.session.getDocument().getLine(i.row),selections:t.getAllRanges(),source:e}
a.pre=a.line.slice(0,a.col)
a.post=a.line.slice(a.col)
var n=a.col===this.last.col&&a.row===this.last.row&&a.line===this.last.line
if(n&&!e){return false}if(this.isWithinComment(a.pre)){if(this.currentTooltip){this.currentTooltip.$el.hide()
this.currentTooltip=undefined}return false}this.last=a
this.editor._emit("requestTooltip",a)},isWithinComment:function l(e){return e.length&&(e[0]==="/"||e[0]==="*")}})
TooltipEngine.classes={}
window.TooltipBase=Backbone.View.extend({bindToRequestTooltip:function c(){if(this.parent){this.callback=this.detector.bind(this)
this.parent.editor.on("requestTooltip",this.callback)}},unbindFromRequestTooltip:function h(){if(this.parent){this.parent.editor.off("requestTooltip",this.callback)}},placeOnScreen:function d(){if(this.parent.editor.getReadOnly()){return}var e=this.parent
if(e.currentTooltip&&e.currentTooltip!==this){e.currentTooltip.$el.hide()}e.currentTooltip=this
var t=e.editor
var i=this.aceLocation
var a=t.renderer.scroller.getBoundingClientRect()
var n=a.height
if(typeof i.tooltipCursor!=="number"){i.tooltipCursor=i.start+i.length}var o=t.renderer.textToScreenCoordinates(i.row,i.tooltipCursor)
var r=o.pageY-a.top
this.$el.css({top:$(window).scrollTop()+o.pageY,left:o.pageX}).toggle(!(r<0||r>=n))},updateText:function p(e,t,i){if(!this.parent||this.parent.options.record.playing){return}var a=this.parent
var n=a.editor
a.ignore=true
e=e.toString()
var o=ace.require("ace/range").Range
var r=this.aceLocation
var s=new o(r.row,r.start,r.row,r.start+r.length)
var l
if(i){l=n.session.$fromUndo
n.session.$fromUndo=true}n.session.replace(s,e)
if(i){n.session.$fromUndo=l}s.end.column=s.start.column+e.length
if(t){s.start.column=r.start+t.offset
s.end.column=r.start+t.offset+t.length}n.selection.setSelectionRange(s)
a.ignore=false
this.aceLocation.length=e.length},insert:function u(){if(this.parent.options.record.playing){return}this.parent.editor.session.insert.apply(this.parent.editor.session,arguments)},parens:{"(":")","{":"}","[":"]"},isInParenthesis:function f(e){var t=[]
for(var i=0;i<e.length;i++){if(e[i]in this.parens){t.unshift(e[i])}else if(t&&e[i]===this.parens[t[0]]){t.shift()}}return t.length>0},isAfterAssignment:function m(e){return/(?:^|[^!=])=\s*$/.test(e)},isWithinString:function g(e){var t=false
var i
for(var a=0;a<e.length;a++){if(t&&e[a]===i){t=false}else if(!t&&e[a]==="'"||e[a]==='"'){i=e[a]
t=true}}return t}})
TooltipEngine.classes.autoSuggest=TooltipBase.extend({initialize:function v(e){var t=this
this.options=e
this.parent=e.parent
this.render()
this.bind()
this.mouse=false
document.addEventListener("mousedown",function(){t.mouse=true})
document.addEventListener("mouseup",function(){t.mouse=false})},detector:function b(e){if(!/(\b[^\d\W][\w]*)\s*(\({1}\s*\){1})*\s*([^\]]*)$/.test(e.pre)||this.parent.options.record.playing){return}if(!this.isInParenthesis(RegExp.$3)){return}if(e.source&&e.source.type==="changeCursor"&&this.mouse){return}var t=RegExp.$1
var i=RegExp.$3
var a=ScratchpadAutosuggest.lookupParamsSafeHTML(t,i)
if(a){this.aceLocation={start:e.col,length:0,row:e.row}
this.updateTooltip(a)
this.placeOnScreen()
e.stopPropagation()
ScratchpadAutosuggest.enableLiveCompletion(false)}},render:function x(){this.$el=$("<div class='tooltip autosuggest hide-while-playing'><div class='hotsuggest'></div><div class='arrow'></div></div>").appendTo("body").hide()},bind:function y(){this.$el.on("mousedown",function(){this.$el.hide()
this.options.editor.focus()}.bind(this))
this.checkForEscape=function(e){if(e.which===27&&this.$el){this.$el.hide()}}.bind(this)
$(document).on("keyup",this.checkForEscape)
this.bindToRequestTooltip()},remove:function w(){this.$el.remove()
$(document).off("keyup",this.checkForEscape)
this.unbindFromRequestTooltip()},updateTooltip:function k(e){this.$el.find(".hotsuggest").empty().append(e)}})
TooltipEngine.classes.colorPicker=TooltipBase.extend({initialize:function T(e){this.options=e
this.parent=e.parent
var t=this.parent.options.type==="ace_webpage"?"rgb|rgba":"background|fill|stroke|color"
this.regex=RegExp("(\\b(?:"+t+")\\s*\\()[^\\)]*$")
this.autofill=true
this.render()
this.bind()},render:function R(){this.$el=$("<div class='tooltip picker'><div class='picker'>"+"</div><div class='arrow'></div></div>").appendTo("body").find(".picker").ColorPicker({flat:true,onChange:function(e,t,i,a){this.updateText(i,a)}.bind(this)}).end().hide()},bind:function L(){var e=false
var t=false
var i=this
this.$el.on("mouseenter",function(){e=true}).on("mouseleave",function(){e=false
if(!t){i.placeOnScreen()}i.options.editor.focus()}).on("mousedown",function(){var a=$(this)
a.addClass("active")
t=true
i.trigger("scrubbingStarted")
$(document).one("mouseup",function(){a.removeClass("active")
t=false
if(!e){i.placeOnScreen()}i.trigger("scrubbingEnded")})})
this.bindToRequestTooltip()},remove:function S(){this.$el.remove()
this.unbindFromRequestTooltip()},detector:function C(e){if(!this.regex.test(e.pre)){return}var t=e.col-RegExp.lastMatch.length
var i=t+RegExp.$1.length
var a=/^(.*?)(\);?|$)/.exec(e.line.slice(i))
var n=a[1]
this.closing=a[2]
var o=i+n.length
var r=i+a[0].length
var s=_.map(n.split(","),parseFloat)
if(s.length===4&&!isNaN(s[3])){n=n.slice(0,n.lastIndexOf(","))
o=i+n.length
this.closing=e.line.slice(o,r)}var l=_.map(n.split(","),function(e){e=parseFloat(e)
return isNaN(e)?0:e})
var c={r:Math.min(l[0]||0,255),g:Math.min(l[1]||0,255),b:Math.min(l[2]||0,255)}
this.aceLocation={start:i,length:o-i,row:e.row}
this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length
var h=e.line.substring(t,i-1)
var d=this.isAfterAssignment(e.pre.slice(0,t))
if(["fill","stroke"].includes(h)){d=true}if(e.source&&e.source.action==="insertText"&&e.source.text.length===1&&this.parent.options.type==="ace_pjs"&&this.autofill){if(n.length===0&&this.closing.length===0){this.closing=")"+(d?";":"")
this.insert({row:e.row,column:r},this.closing)}if(n.trim().length===0){var c={r:255,g:0,b:0}
this.updateText(c)}}this.updateTooltip(c)
this.placeOnScreen()
e.stopPropagation()
ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function U(e){this.$el.find(".picker").ColorPickerSetColor(e)},updateText:function E(e,t){var i=false
if(t==="startScrub"){var a=ace.require("ace/range").Range
var n=this.aceLocation
var o=new a(n.row,n.start,n.row,n.start+n.length)
this.originalText=this.parent.editor.getSession().getTextRange(o)
this.wasReadOnly=this.parent.editor.getReadOnly()
this.parent.editor.setReadOnly(true)
i=true}else if(t==="midScrub"){i=true}else if(t==="stopScrub"){TooltipBase.prototype.updateText.call(this,this.originalText,undefined,true)
this.parent.editor.setReadOnly(this.wasReadOnly)}TooltipBase.prototype.updateText.call(this,e.r+", "+e.g+", "+e.b,undefined,i)
this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length}});(function(){var e=Backbone.View.extend({initialize:function t(e){this.options=e
this.parent=e.parent
this.render()
this.bind()
TooltipUtils.setupScrollSpy(this.$(".mediapicker-modal-content"),function(e){return $(e).closest(".tab-pane").find(".nav-pills")})},bind:function i(){this.$(".mediapicker-modal-content").scroll(_.throttle(function(e){var t=$(e.currentTarget)
if(t.scrollTop()>0){t.addClass("top-shadow")}else{t.removeClass("top-shadow")}},100))
this.$(".mediapicker-modal-content").scroll(_.throttle(function(e){TooltipUtils.lazyLoadMedia(e.currentTarget)},200))
this.$(".mediapicker-modal-file audio").on("play",function(e){this.handleFileSelect(e)}.bind(this))},events:{"click .mediapicker-modal-file":"handleFileSelect","click .nav-tabs a":function a(e){$(e.currentTarget).tab("show")
e.preventDefault()},shown:function n(){TooltipUtils.lazyLoadMedia(this.$(".tab-pane.active .mediapicker-modal-content"))},"hide.bs.modal":function o(){this.scrollStart=undefined
$("body").css("overflow","auto")
this.logForRecording("hide")},"click .mediapicker-modal-submit":function r(e){var t=this.$(".mediapicker-modal-file.active")
if(t.length!==1){return}this.parent.updateText(t.attr("data-update-path"))
this.parent.updateTooltip(t.attr("data-preview-path"))}},show:function s(){this.$el.modal()
$("body").css("overflow","hidden")
this.$(".mediapicker-modal-file.active").removeClass("active")
this.logForRecording("show")},handleFileSelect:function l(e){this.$(".mediapicker-modal-file.active").removeClass("active")
var t=$(e.currentTarget).closest(".mediapicker-modal-file")
t.addClass("active")
this.logForRecording("selectImg",t.attr("data-path"))},selectFile:function c(e){var t=this.$(".mediapicker-modal-file[data-path='"+e+"']")
var i=t.closest(".tab-pane")
var a=this.$("a[href='#"+i.attr("id")+"']")
a.tab("show")
i.find(".mediapicker-modal-content").scrollTop(t.position().top-100)
return t},selectImg:function h(e){var t=this.selectFile(e)
t.find("img").click()},logForRecording:function d(e,t){var i=this.options.logPrefix||"mediamodal"
var a=i+"."+e
this.options.record.log(a,t)},render:function p(){Handlebars.registerHelper("hasMultipleItems",this.hasMultipleItems)
Handlebars.registerHelper("slugify",this.slugify)
Handlebars.registerHelper("patchedEach",this.handlebarsPatchedEach)
this.$el=$(Handlebars.templates["mediapicker-modal"]({imagesDir:this.options.imagesDir,soundsDir:this.options.soundsDir,classes:this.options.files}))
this.$el.appendTo("body").hide()},hasMultipleItems:function u(e,t){if(e&&e.length>1){return t.fn(this)}return t.inverse(this)},slugify:function f(e){return e.toLowerCase().match(/[a-z0-9_]+/g).join("-")},handlebarsPatchedEach:function m(e,t){return _.map(e,function(i,a){i.$index=a
i.$first=a===0
i.$last=a===e.length-1
return t.fn(i)}).join("")}})
TooltipEngine.classes.imageModal=TooltipBase.extend({initialize:function g(e){this.options=e
this.options.files=ExtendedOutputImages
this.parent=e.parent
this.autofill=true
this.render()
this.bindToRequestTooltip()
_.extend(this.options.record.handlers,{"imagemodal.show":this.modal.show.bind(this.modal),"imagemodal.hide":function(){this.modal.$el.modal("hide")}.bind(this),"imagemodal.selectImg":this.modal.selectImg.bind(this.modal)})},detector:function v(e){if(!/<img\s+[^>]*?\s*src\s*=\s*["']([^"']*)$/.test(e.pre)){return}var t=e.col-RegExp.$1.length
var i=e.line.slice(t).match(/^[^"']*/)[0]
this.aceLocation={start:t,length:i.length,row:e.row}
this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+1
this.updateTooltip(i)
this.placeOnScreen()
e.stopPropagation()
ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function b(e){if(e!==this.currentUrl){this.currentUrl=e.trim()
if(e===""){this.$(".thumb").hide()
this.$(".thumb-throbber").hide()
this.$(".thumb-error").text(i18n._("Enter an image URL.")).show()
return}var t=/(\.|^)?(khanacademy\.org|kastatic\.org|kasandbox\.org|ka-perseus-images\.s3\.amazonaws\.com|wikimedia\.org|localhost:\d+)$/i
var i=/\/\/([^\/]*)(?:\/|\?|#|$)/.exec(e)
var a=i?i[1]:""
if(!a||t.test(a)){if(e!==this.$(".thumb").attr("src")){this.$(".thumb").attr("src",e)
this.$(".thumb-throbber").show()}if(this.$(".thumb-error").hasClass("domainError")){this.$(".thumb-error").removeClass("domainError").hide()
this.$(".thumb").show()}}else{this.$(".thumb").hide()
this.$(".thumb-error").text(i18n._("Sorry! That server is not permitted.")).addClass("domainError").show()
this.$(".thumb-throbber").hide()}}},render:function x(){var t=this
this.$el=$(Handlebars.templates["mediapicker-preview"]({isAudio:false})).appendTo("body").hide()
this.$(".thumb").on("load",function(){$(this).closest(".thumb-shell").find(".thumb-error").hide()
$(this).show()
t.$(".thumb-throbber").hide()}).on("error",function(){if(t.currentUrl!==$(this).attr("src")){return}$(this).closest(".thumb-shell").find(".thumb-error").text(i18n._("That is not a valid image URL.")).show()
$(this).hide()
t.$(".thumb-throbber").hide()})
this.$("button").on("click",function(){t.modal.show()})
this.modal=new e(_.defaults({parent:this,logPrefix:"imagemodal"},this.options))},remove:function y(){this.$el.remove()
this.modal.remove()
this.unbindFromRequestTooltip()}})
TooltipEngine.classes.soundModal=TooltipBase.extend({defaultFile:'"rpg/metal-clink"',initialize:function w(e){this.options=e
this.options.files=OutputSounds
this.parent=e.parent
this.autofill=true
this.render()
this.bindToRequestTooltip()},detector:function k(e){if(!/(\bgetSound\s*\()[^\)]*$/.test(e.pre)){return}var t=e.col-RegExp.lastMatch.length
var i=t+RegExp.$1.length
var a=/^(\s*)(["']?[^\)]*?["']?)\s*(\);?|$)/.exec(e.line.slice(i))
var n=a[1]
var o=i+n.length
var r=a[2]
var s=a[3]
if(n.length===0&&r.length===0&&s.length===0&&e.source&&e.source.action==="insertText"&&e.source.text.length===1&&this.autofill){s=")"+(this.isInParenthesis(e.pre.slice(0,t))?"":";")
this.insert({row:e.row,column:o},s)
r=this.defaultFile
this.updateText(r)}this.aceLocation={start:o,length:r.length,row:e.row}
this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+s.length
this.updateTooltip(r)
this.placeOnScreen()
e.stopPropagation()
ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function T(e){if(e!==this.currentUrl){e=e.replace(/\"/g,"")
this.currentUrl=this.options.soundsDir+e+".mp3"
if(e===""){this.$(".thumb-error").text(i18n._("Invalid sound file.")).show()
return}else{this.$(".thumb-error").hide()}}this.$(".mediapicker-preview-file").attr("src",this.currentUrl)},render:function R(){var t=this
this.$el=$(Handlebars.templates["mediapicker-preview"]({isAudio:true})).appendTo("body").hide()
this.$("button").on("click",function(){t.modal.show()})
this.modal=new e(_.defaults({parent:this},this.options))},remove:function L(){this.$el.remove()
this.modal.remove()
this.unbindFromRequestTooltip()}})})()
TooltipEngine.classes.imagePicker=TooltipBase.extend({defaultImage:"cute/None",initialize:function D(e){this.options=e
this.parent=e.parent
this.autofill=true
this.render()
this.bindToRequestTooltip()},detector:function N(e){if(!/(\bgetImage\s*\()[^\)]*$/.test(e.pre)){return}var t=e.col-RegExp.lastMatch.length
var i=t+RegExp.$1.length
var a=/^(\s*)(["']?[^\)]*?["']?)\s*(\);?|$)/.exec(e.line.slice(i))
var n=a[1]
var o=i+n.length
var r=a[2]
this.closing=a[3]
this.aceLocation={start:o,length:r.length,row:e.row}
this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length
if(n.length===0&&r.length===0&&this.closing.length===0&&e.source&&e.source.action==="insertText"&&e.source.text.length===1&&this.autofill){this.closing=")"+(this.isAfterAssignment(e.pre.slice(0,t))?";":"")
this.insert({row:e.row,column:o},this.closing)
r=this.defaultImage
this.updateText(r)}this.updateTooltip(r)
this.placeOnScreen()
e.stopPropagation()
ScratchpadAutosuggest.enableLiveCompletion(false)},render:function M(){var e=this.options.imagesDir
var t=Handlebars.templates["image-picker"]({imagesDir:e,groups:_.map(OutputImages,function(t){t.imagesDir=e
return t})})
this.$el=$("<div class='tooltip mediapicker'>"+t+"<div class='arrow'></div></div>").appendTo("body").hide()
this.bind()},bind:function O(){var e=this
this.$(".media-groups").scroll(_.throttle(function(){TooltipUtils.lazyLoadMedia(this)},200,{leading:false}))
this.$el.on("mouseenter",function(){TooltipUtils.lazyLoadMedia($(this))}).on("click",".image",function(){$(this).parents(".mediapicker").find(".active").removeClass("active")
$(this).addClass("active")
var t=$(this).attr("data-path")
e.updateText(t)
e.updateTooltip('"'+t+'"')}).on("mouseleave",function(){e.options.editor.clearSelection()
e.options.editor.focus()})},remove:function I(){this.$el.remove()
this.unbindFromRequestTooltip()},updateTooltip:function P(e){var t=this.defaultImage
var i=/^["']?(.*?)["']?$/.exec(e)[1]
var a=i.split("/")
var n=a[0]
var o=a[1]
_.each(OutputImages,function(e){if(e.groupName===n){_.each(e.images,function(e){if(e===o){t=n+"/"+o}})}})
var r=this.parent.options.imagesDir+t+".png"
this.$el.find(".current-media img").attr("src",r)
this.value=i},updateText:function A(e){var t='"'+e+'"'
TooltipBase.prototype.updateText.call(this,t)
this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length}})
TooltipEngine.classes.numberScrubberClick=TooltipBase.extend({initialize:function z(e){this.options=e
this.parent=e.parent
this.bindToRequestTooltip()},remove:function q(){this.unbindFromRequestTooltip()},detector:function F(e){if(e.source&&e.source.action==="click"){if(this.parent.tooltips.numberScrubber){this.parent.tooltips.numberScrubber.detector(e)}else{console.warn("FAIL: You loaded the numberScrubberClick tooltip, without the numberScrubber tooltip.")}}}})
TooltipEngine.classes.numberScrubber=TooltipBase.extend({initialize:function H(e){this.options=e
this.parent=e.parent
this.render()
this.bind()},render:function B(){var e=this
var t=e.options.clickOnly
function i(t){var i=-e.decimals
if(t.shiftKey&&t.altKey){i=0}else if(t.shiftKey){i=1}else if(t.altKey){i=-1}return i}var a=t?"-":"◄"
var n=t?"+":"◄"
var o=t?"":" ◆ "
var r=$("<span role='button'>"+a+"</span>")
var s=$("<span role='button' class='flipped-arrow'>"+n+"</span>")
var l=$("<span>"+o+"</span>")
var c=function f(t,a){var n=a?i(a):-e.decimals
e.decimals=Math.max(0,-n)
e.intermediateValue=e.value+t*Math.pow(10,n)
e.updateText(e.intermediateValue.toFixed(e.decimals))
e.updateTooltip(e.intermediateValue,e.decimals)}
r.on("click touchend",function(t){if(e.noClick){e.noClick=false
return}if(!e.dragged){c(-1,t)}})
s.on("click touchend",function(t){if(e.noClick){e.noClick=false
return}if(!e.dragged){c(1,t)}})
var h=$("<div class='scrubber-handle'/>").append(r).append(l).append(s)
var d=function m(){var t=ace.require("ace/range").Range
var i=e.aceLocation
var a=new t(i.row,i.start,i.row,i.start+i.length)
return e.parent.editor.getSession().getTextRange(a)}
if(!t){h.draggable({axis:"x",appendTo:"body",helper:function g(){return $(this).clone().css($(this).offset())},start:function v(t,i){e.$el.addClass("dragging")
$(this).css("visibility","hidden")
e.trigger("scrubbingStarted")
e.originalString=d()
e.wasReadOnly=e.parent.editor.getReadOnly()
e.parent.editor.setReadOnly(true)},drag:function b(t,a){var n=a.helper.offset()
var o=$(this).parent().offset()
var r=n.left-o.left
var s=i(t)
e.decimals=Math.max(0,-s)
e.intermediateValue=e.value+Math.round(r/2)*Math.pow(10,s)
e.updateText(e.intermediateValue.toFixed(e.decimals),undefined,true)
e.dragged=true},stop:function x(t,a){e.$el.removeClass("dragging")
$(this).css("visibility","visible")
var n=i(t)
e.decimals=Math.max(0,-n)
e.updateText(e.originalString,undefined,true)
e.updateText(e.intermediateValue.toFixed(e.decimals))
e.updateTooltip(e.intermediateValue,e.decimals)
e.trigger("scrubbingEnded")
setTimeout(function(){e.dragged=false
e.parent.editor.setReadOnly(e.wasReadOnly)},0)}})}else{var p
var u=function y(t,i){var a=300
var n=(new Date).getTime()
if(e.setCurValue){e.setCurValue()}var o=function r(){e.noClick=false
p=setTimeout(function(){e.noClick=true
c(i,t)
var o=(new Date).getTime()-n
if(o>=5e3){i=(i<1?-1:1)*3}else if(o>2e3){i=(i<1?-1:1)*2}a=16
r()},a)}
o()}
r.on("touchstart mousedown",function(e){u(e,-1)
$(this).addClass("active")
e.preventDefault()})
r.on("touchend touchleave mouseup mouseleave",function(){$(this).removeClass("active")
clearInterval(p)})
s.on("touchstart mousedown",function(e){u(e,1)
$(this).addClass("active")
e.preventDefault()})
s.on("touchend touchleave mouseup mouseleave",function(){$(this).removeClass("active")
clearInterval(p)})}this.$el=$("<div class='tooltip'><div class='scrubber'></div><div class='arrow'></div></div>").appendTo("body").find(".scrubber").append(h).end().hide()
if(t){this.$el.addClass("click-only")}},bind:function j(){this.bindToRequestTooltip()},remove:function V(){this.$el.remove()
this.unbindFromRequestTooltip()},detector:function Y(e){if(/[a-zA-Z]\d+$/.test(e.pre)||/[a-zA-Z]$/.test(e.pre)&&/^\d/.test(e.post)||!(/\d$/.test(e.pre)||/^-?\d/.test(e.post))){return}var t=e.pre.split("").reverse().join("")
var i=e.col-/^[\d.]*(-(?!\s*\w))?/.exec(t)[0].length
var a=/^-?[\d.]+/.exec(e.line.slice(i))[0]
this.aceLocation={start:i,length:a.length,row:e.row}
this.aceLocation.tooltipCursor=e.col
this.updateTooltip(parseFloat(a),this.decimalCount(a))
this.placeOnScreen()
e.stopPropagation()
ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function W(e,t){this.value=e
this.decimals=t<=5?t:5},decimalCount:function G(e){var t=e.indexOf(".")
return t===-1?0:e.length-(t+1)}})
window.TooltipUtils={lazyLoadMedia:function X(e,t){t=t||250
var i=this
$(e).each(function(e,a){var n=$(a).scrollTop()
var o=n+$(a).height()
n-=t
o+=t
$(a).find("[data-lazy-src]").each(function(e,t){var a=$(t).position().top
if(a<n){return true}else if(a<o){i.loadNow(t)}else{return false}})})},loadNow:function K(e){$.each($(e),function(e,t){$(t).attr("src",$(t).attr("data-lazy-src"))
$(t).removeAttr("data-lazy-src")})},setupScrollSpy:function Q(e,t){$.each($(e),function(e,i){if(t==="refresh"){var a=$(i).data("scrollspy.navUl")
if(!a){console.warn("tried to refresh scrollspy without first initializing it")
return}var n=a.find("li a")
var o=[]
$.each(n,function(e,t){var a=$(t).attr("href")
var n=$(i).find(a).first()
if(n.length){var r=n.position().top
o.push([r,t])}})
o.sort(function(e,t){return e[0]-t[0]})
$(i).data("scrollspy.pointers",o)}else{var a=t(i)
$(i).data("scrollspy.navUl",a)
$(i).on("scroll",_.throttle(this.doScrollSpy,60))
$(a).find("li a").on("click",function(e){var t=$(i).find($(this).attr("href")).position().top
$(i).scrollTop(t)
e.preventDefault()})}}.bind(this))},doScrollSpy:function J(){var e=$(this)
var t=e.data("scrollspy.pointers")
if(t===undefined){e.data("scrollspy.pointers","working")
setTimeout(function(){TooltipUtils.setupScrollSpy(e,"refresh")},0)
return}else if(t==="working"){return}var i=e.scrollTop()
var a
$.each(t,function(e,t){if(t[0]<i+150){a=t[1]}else{return false}})
e.data("scrollspy.navUl").find(".active").removeClass("active")
$(a).closest("li").addClass("active")}}
this["Handlebars"]=this["Handlebars"]||{}
this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{}
this["Handlebars"]["templates"]["image-picker"]=Handlebars.template(function(e,t,i,a,n){i=i||e.helpers
var o="",r,s,l,c,h=this,d="function",p=i.helperMissing,u=void 0,f=this.escapeExpression
function m(e,t){var a="",n,o
a+='\n        <div class="media-group">\n            <h3>'
l=i.groupName
n=l||e.groupName
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"groupName",{hash:{}})}a+=f(n)+"</h3>\n            "
l=i.cite
n=l||e.cite
o=i["if"]
c=h.program(2,g,t)
c.hash={}
c.fn=c
c.inverse=h.noop
n=o.call(e,n,c)
if(n||n===0){a+=n}a+="\n            "
l=i.images
n=l||e.images
o=i.each
c=h.programWithDepth(v,t,e)
c.hash={}
c.fn=c
c.inverse=h.noop
n=o.call(e,n,c)
if(n||n===0){a+=n}a+="\n        </div>\n    "
return a}function g(e,t){var a="",n
a+='\n                <p><a href="'
l=i.citeLink
n=l||e.citeLink
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"citeLink",{hash:{}})}a+=f(n)+'" target="_blank">'
l=i.cite
n=l||e.cite
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"cite",{hash:{}})}a+=f(n)+"</a></p>\n            "
return a}function v(e,t,a){var n="",o
n+='\n            <div class="image" data-path="'
l=i.groupName
o=l||a.groupName
if(typeof o===d){o=o.call(e,{hash:{}})}else if(o===u){o=p.call(e,"...groupName",{hash:{}})}n+=f(o)+"/"
o=e
if(typeof o===d){o=o.call(e,{hash:{}})}else if(o===u){o=p.call(e,"this",{hash:{}})}n+=f(o)+'">\n                <img src="'
l=i.imagesDir
o=l||a.imagesDir
if(typeof o===d){o=o.call(e,{hash:{}})}else if(o===u){o=p.call(e,"...imagesDir",{hash:{}})}n+=f(o)+'throbber.gif" data-lazy-src="'
l=i.imagesDir
o=l||a.imagesDir
if(typeof o===d){o=o.call(e,{hash:{}})}else if(o===u){o=p.call(e,"...imagesDir",{hash:{}})}n+=f(o)
l=i.groupName
o=l||a.groupName
if(typeof o===d){o=o.call(e,{hash:{}})}else if(o===u){o=p.call(e,"...groupName",{hash:{}})}n+=f(o)+"/"
o=e
if(typeof o===d){o=o.call(e,{hash:{}})}else if(o===u){o=p.call(e,"this",{hash:{}})}n+=f(o)+'.png"/>\n                <span class="name">'
o=e
if(typeof o===d){o=o.call(e,{hash:{}})}else if(o===u){o=p.call(e,"this",{hash:{}})}n+=f(o)+"</span>\n            </div>\n            "
return n}o+='<div class="current-media"><img src="'
l=i.imagesDir
r=l||t.imagesDir
if(typeof r===d){r=r.call(t,{hash:{}})}else if(r===u){r=p.call(t,"imagesDir",{hash:{}})}o+=f(r)+'cute/Blank.png"/></div>\n<div class="media-groups">\n    <div style="position: relative;">\n    '
l=i.groups
r=l||t.groups
s=i.each
c=h.program(1,m,n)
c.hash={}
c.fn=c
c.inverse=h.noop
r=s.call(t,r,c)
if(r||r===0){o+=r}o+="\n    </div>\n</div>"
return o})
this["Handlebars"]=this["Handlebars"]||{}
this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{}
this["Handlebars"]["templates"]["mediapicker-preview"]=Handlebars.template(function(e,t,i,a,n){i=i||e.helpers
var o="",r,s,l,c,h=this,d="function",p=i.blockHelperMissing
function u(e,t){return"mediapicker__sound"}function f(e,t){return"mediapicker__image"}function m(e,t){return'\n		<audio controls class="mediapicker-preview-file"></audio>\n		<div class="thumb-error"></div>\n		'}function g(e,t){return'\n		<img src="/images/throbber.gif" class="thumb-throbber" />\n		<div class="thumb-shell">\n			<img class="thumb" />\n			<div class="thumb-error"></div>\n		</div> \n		'}function v(e,t){return"Pick file:"}o+='<div class="tooltip mediapicker-preview '
l=i.isAudio
r=l||t.isAudio
s=i["if"]
c=h.program(1,u,n)
c.hash={}
c.fn=c
c.inverse=h.program(3,f,n)
r=s.call(t,r,c)
if(r||r===0){o+=r}o+='">\n	<div class="mediapicker-preview-content">\n		\n		'
l=i.isAudio
r=l||t.isAudio
s=i["if"]
c=h.program(5,m,n)
c.hash={}
c.fn=c
c.inverse=h.program(7,g,n)
r=s.call(t,r,c)
if(r||r===0){o+=r}o+='\n\n		<button class="kui-button kui-button-submit kui-button-primary" style="padding: 5px; width: 100%; margin: 0 auto;" >\n			'
l=i["_"]
r=l||t["_"]
c=h.program(9,v,n)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof r===d){r=r.call(t,c)}else{r=p.call(t,r,c)}if(r||r===0){o+=r}o+='\n		</button> \n	</div>\n	<div class="arrow"></div>\n</div>'
return o})
this["Handlebars"]=this["Handlebars"]||{}
this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{}
this["Handlebars"]["templates"]["mediapicker-modal"]=Handlebars.template(function(e,t,i,a,n){i=i||e.helpers
var o="",r,s,l,c,h=this,d="function",p=i.helperMissing,u=void 0,f=this.escapeExpression,m=i.blockHelperMissing
function g(e,t){var a="",n,o
a+="\n      <li "
l=i.$first
n=l||e.$first
o=i["if"]
c=h.program(2,v,t)
c.hash={}
c.fn=c
c.inverse=h.noop
n=o.call(e,n,c)
if(n||n===0){a+=n}a+='><a href="#im-class-'
l=i.className
n=l||e.className
l=i.slugify
o=l||e.slugify
if(typeof o===d){n=o.call(e,n,{hash:{}})}else if(o===u){n=p.call(e,"slugify",n,{hash:{}})}else{n=o}a+=f(n)+'">'
l=i.className
n=l||e.className
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"className",{hash:{}})}a+=f(n)+"</a></li>\n    "
return a}function v(e,t){return'class="active"'}function b(e,t,a){var n="",o,r
n+='\n      <div class="tab-pane '
l=i.$first
o=l||e.$first
r=i["if"]
c=h.program(5,x,t)
c.hash={}
c.fn=c
c.inverse=h.noop
o=r.call(e,o,c)
if(o||o===0){n+=o}n+='" id="im-class-'
l=i.className
o=l||e.className
l=i.slugify
r=l||e.slugify
if(typeof r===d){o=r.call(e,o,{hash:{}})}else if(r===u){o=p.call(e,"slugify",o,{hash:{}})}else{o=r}n+=f(o)+'">\n        <div class="mediapicker-modal-content">\n        <div style="position: relative;">\n        '
l=i.groups
o=l||e.groups
r=i.each
c=h.programWithDepth(y,t,e,a)
c.hash={}
c.fn=c
c.inverse=h.noop
o=r.call(e,o,c)
if(o||o===0){n+=o}n+='\n        </div>\n        </div>\n\n        <div class="right">\n        '
l=i.groups
o=l||e.groups
l=i.hasMultipleItems
r=l||e.hasMultipleItems
c=h.program(16,R,t)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof r===d){o=r.call(e,o,c)}else{o=m.call(e,r,o,c)}if(o||o===0){n+=o}n+='\n        </div>\n\n        <div style="clear: both;"></div>\n      </div>\n    '
return n}function x(e,t){return"active"}function y(e,t,a,n){var o="",r,s
o+='\n            <div class="mediapicker-modal-group">\n                '
l=i.groups
r=l||a.groups
l=i.hasMultipleItems
s=l||e.hasMultipleItems
c=h.program(8,w,t)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof s===d){r=s.call(e,r,c)}else{r=m.call(e,s,r,c)}if(r||r===0){o+=r}o+="\n                "
l=i.cite
r=l||e.cite
s=i["if"]
c=h.program(10,_,t)
c.hash={}
c.fn=c
c.inverse=h.noop
r=s.call(e,r,c)
if(r||r===0){o+=r}o+="\n                "
l=i.images
r=l||e.images
s=i.each
c=h.programWithDepth(k,t,e,n)
c.hash={}
c.fn=c
c.inverse=h.noop
r=s.call(e,r,c)
if(r||r===0){o+=r}o+="\n                "
l=i.sounds
r=l||e.sounds
s=i.each
c=h.programWithDepth(T,t,e,n)
c.hash={}
c.fn=c
c.inverse=h.noop
r=s.call(e,r,c)
if(r||r===0){o+=r}o+="\n            </div>\n        "
return o}function w(e,t){var a="",n,o
a+='\n                <h3 id="im-group-'
l=i.groupName
n=l||e.groupName
l=i.slugify
o=l||e.slugify
if(typeof o===d){n=o.call(e,n,{hash:{}})}else if(o===u){n=p.call(e,"slugify",n,{hash:{}})}else{n=o}a+=f(n)+'">'
l=i.groupName
n=l||e.groupName
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"groupName",{hash:{}})}a+=f(n)+"</h3>\n                "
return a}function _(e,t){var a="",n
a+='\n                    <p><a href="'
l=i.citeLink
n=l||e.citeLink
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"citeLink",{hash:{}})}a+=f(n)+'" target="_blank">'
l=i.cite
n=l||e.cite
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"cite",{hash:{}})}a+=f(n)+"</a></p>\n                "
return a}function k(e,t,a,n){var o="",r
o+='\n                <div class="image mediapicker-modal-file"\n                    data-update-path="'
l=i.imagesDir
r=l||n.imagesDir
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,".........imagesDir",{hash:{}})}o+=f(r)
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'.png"\n                    data-preview-path="'
l=i.imagesDir
r=l||n.imagesDir
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,".........imagesDir",{hash:{}})}o+=f(r)
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)
l=i.thumbsDir
r=l||a.thumbsDir
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...thumbsDir",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'.png"\n                    data-path="'
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'">\n                    <div class="thumb-shell"><img src="'
l=i.imagesDir
r=l||n.imagesDir
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,".........imagesDir",{hash:{}})}o+=f(r)+'throbber.gif" data-lazy-src="'
l=i.imagesDir
r=l||n.imagesDir
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,".........imagesDir",{hash:{}})}o+=f(r)
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)
l=i.thumbsDir
r=l||a.thumbsDir
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...thumbsDir",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'.png"/></div>\n                    <span>'
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+"</span>\n                </div>\n                "
return o}function T(e,t,a,n){var o="",r
o+='\n                <div class="sound mediapicker-modal-file"\n                    data-update-path=\'"'
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'"\'\n                    data-preview-path="'
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'"\n                    data-path="'
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'">\n                    <audio data-lazy-src="'
l=i.soundsDir
r=l||n.soundsDir
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,".........soundsDir",{hash:{}})}o+=f(r)
l=i.groupName
r=l||a.groupName
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"...groupName",{hash:{}})}o+=f(r)+"/"
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+'.mp3" controls/>\n                    <span>'
r=e
if(typeof r===d){r=r.call(e,{hash:{}})}else if(r===u){r=p.call(e,"this",{hash:{}})}o+=f(r)+"</span>\n                </div>\n                "
return o}function R(e,t){var a="",n,o
a+='\n        <ul class="nav nav-pills nav-stackable">\n        '
l=i.groups
n=l||e.groups
l=i.patchedEach
o=l||e.patchedEach
c=h.program(17,L,t)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof o===d){n=o.call(e,n,c)}else{n=m.call(e,o,n,c)}if(n||n===0){a+=n}a+="\n        </ul>\n        "
return a}function L(e,t){var a="",n,o
a+="\n            <li "
l=i.$first
n=l||e.$first
o=i["if"]
c=h.program(18,S,t)
c.hash={}
c.fn=c
c.inverse=h.noop
n=o.call(e,n,c)
if(n||n===0){a+=n}a+='><a href="#im-group-'
l=i.groupName
n=l||e.groupName
l=i.slugify
o=l||e.slugify
if(typeof o===d){n=o.call(e,n,{hash:{}})}else if(o===u){n=p.call(e,"slugify",n,{hash:{}})}else{n=o}a+=f(n)+'">'
l=i.groupName
n=l||e.groupName
if(typeof n===d){n=n.call(e,{hash:{}})}else if(n===u){n=p.call(e,"groupName",{hash:{}})}a+=f(n)+"</a></li>\n        "
return a}function S(e,t){return'class="active"'}function C(e,t){return"Close"}function U(e,t){return"Ok"}o+='<div class="modal mediapicker-modal">\n    <ul class="nav nav-tabs" role="tablist">\n    '
l=i.classes
r=l||t.classes
l=i.patchedEach
s=l||t.patchedEach
c=h.program(1,g,n)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof s===d){r=s.call(t,r,c)}else{r=m.call(t,s,r,c)}if(r||r===0){o+=r}o+='\n    </ul>\n\n    <div class="tab-content">\n    '
l=i.classes
r=l||t.classes
l=i.patchedEach
s=l||t.patchedEach
c=h.programWithDepth(b,n,t)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof s===d){r=s.call(t,r,c)}else{r=m.call(t,s,r,c)}if(r||r===0){o+=r}o+='\n    </div>\n\n    <div class="mediapicker-modal-footer">\n      <button type="button" class="simple-button" data-dismiss="modal">'
l=i["_"]
r=l||t["_"]
c=h.program(20,C,n)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof r===d){r=r.call(t,c)}else{r=m.call(t,r,c)}if(r||r===0){o+=r}o+='</button>\n      <button type="button" class="simple-button green mediapicker-modal-submit" data-dismiss="modal">'
l=i["_"]
r=l||t["_"]
c=h.program(22,U,n)
c.hash={}
c.fn=c
c.inverse=h.noop
if(l&&typeof r===d){r=r.call(t,c)}else{r=m.call(t,r,c)}if(r||r===0){o+=r}o+="</button>\n    </div>\n</div>"
return o});(function(){var e=27
window.StructuredBlocksTooltips=Backbone.View.extend({events:{"mousedown .block-rgb.block-name-r":"showColorPicker","touchstart .block-rgb.block-name-r":"showColorPicker","focusin .block-rgb.block-name-r":"showColorPicker","mousedown .block-number .input":"showNumberScrubber","touchstart .block-number .input":"showNumberScrubber","focusin .block-number .input":"showNumberScrubber"},initialize:function t(){this.render()
this.bind()},render:function i(){this.$colorPicker=$("<div class='tooltip picker active'>"+"<div class='picker'></div>"+"<div class='arrow'></div></div>").on("mousedown",function(){return false}).find(".picker").ColorPicker({flat:true}).end().hide()
this.colorPicker=this.$colorPicker.find(".colorpicker").data("colorpicker")
this.numberScrubber=new TooltipEngine.classes.numberScrubber({clickOnly:true})},bind:function a(){$(window).on("mousedown touchstart",function(e){var t=e.target
var i=$(t)
var a=this.$colorPicker[0]
var n=this.numberScrubber.$el[0]
if(i.hasClass("input")){t=t.parentNode}else if(i.hasClass("block-name-r")){t=i.closest(".block-statement")[0]}else{if(!$.contains(a,t)){this.hideColorPicker()}if(!$.contains(n,t)){this.hideNumberScrubber()}return}if(!$.contains(t,a)){this.hideColorPicker()}if(!$.contains(t,n)){this.hideNumberScrubber()}}.bind(this))
$(window).on("keydown",function(t){if(t.which===e){this.hideColorPicker()
this.hideNumberScrubber()}}.bind(this))},showColorPicker:function n(e){var t=$(e.currentTarget)
var i=t.closest(".block-statement")
var a=t.position()
var n=t.offsetParent()
this.colorPicker.onChange=function(e,t,a){i.trigger("updateColor",a)}
this.$colorPicker.appendTo(i).css({top:a.top+5+n[0].scrollTop,left:a.left+t.width()+5+n[0].scrollLeft}).find(".picker").ColorPickerSetColor(i.data("color")).end().show()},hideColorPicker:function o(){this.colorPicker.onChange=function(){}
this.$colorPicker.appendTo("body").hide()},showNumberScrubber:function r(e){var t=$(e.target)
var i=t.closest(".block-number")
var a=t.position()
var n=t.offsetParent()
this.numberScrubber.updateText=function(e){i.trigger("updateValue",e)
o()}.bind(this)
this.numberScrubber.setCurValue=function(e){this.numberScrubber.updateTooltip(parseFloat(i.data("value")),0)}.bind(this)
var o=function(){this.numberScrubber.$el.css({top:a.top+t.outerHeight()+n[0].scrollTop,left:a.left+Math.round(t.width()/2)+n[0].scrollLeft})}.bind(this)
this.numberScrubber.updateTooltip(parseFloat(i.data("value")),0)
this.numberScrubber.$el.appendTo(i).show()
o()},hideNumberScrubber:function s(){this.numberScrubber.updateText=function(){}
this.numberScrubber.$el.appendTo("body").hide()}})})()
__KA_exports.TooltipEngine = TooltipEngine;
__KA_exports.TooltipBase = TooltipBase;
__KA_exports.ScratchpadAutosuggest = ScratchpadAutosuggest;
this.TooltipBase = TooltipBase;
this.TooltipEngine = TooltipEngine;
this.ScratchpadAutosuggest = ScratchpadAutosuggest;
});
KAdefine("third_party/javascript-khansrc/bootstrap-khansrc/js/bootstrap-tab.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../javascript/node_modules/jquery/index.js");
!function($){"use strict"
var t=function(t){this.element=$(t)}
t.prototype={constructor:t,show:function(){var t=this.element,a=t.closest("ul:not(.dropdown-menu)"),e=t.attr("data-target"),n,i,r
if(!e){e=t.attr("href")
e=e&&e.replace(/.*(?=#[^\s]*$)/,"")}if(t.parent("li").hasClass("active"))return
n=a.find(".active:last a")[0]
r=$.Event("show",{relatedTarget:n})
t.trigger(r)
if(r.isDefaultPrevented())return
i=$(e)
this.activate(t.parent("li"),a)
this.activate(i,i.parent(),function(){t.trigger({type:"shown",relatedTarget:n})})},activate:function(t,a,e){var n=a.find("> .active"),i=e&&$.support.transition&&n.hasClass("fade")
function r(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active")
t.addClass("active")
if(i){t[0].offsetWidth
t.addClass("in")}else{t.removeClass("fade")}if(t.parent(".dropdown-menu")){t.closest("li.dropdown").addClass("active")}e&&e()}i?n.one($.support.transition.end,r):r()
n.removeClass("in")}}
var a=$.fn.tab
$.fn.tab=function(a){return this.each(function(){var e=$(this),n=e.data("tab")
if(!n)e.data("tab",n=new t(this))
if(typeof a=="string")n[a]()})}
$.fn.tab.Constructor=t
$.fn.tab.noConflict=function(){$.fn.tab=a
return this}
$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault()
$(this).tab("show")})}(window.jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.button.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.core.js");
__KA_require("./jquery.ui.widget.js");
(function($,t){var e,i,s,n,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",u="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=$(this).find(":ui-button")
setTimeout(function(){t.button("refresh")},1)},r=function(t){var e=t.name,i=t.form,s=$([])
if(e){e=e.replace(/'/g,"\\'")
if(i){s=$(i).find("[name='"+e+"']")}else{s=$("[name='"+e+"']",t.ownerDocument).filter(function(){return!this.form})}}return s}
$.widget("ui.button",{version:"1.10.1",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l)
if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType()
this.hasTitle=!!this.buttonElement.attr("title")
var t=this,a=this.options,u=this.type==="checkbox"||this.type==="radio",d=!u?"ui-state-active":"",h="ui-state-focus"
if(a.label===null){a.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()}this._hoverable(this.buttonElement)
this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(a.disabled){return}if(this===e){$(this).addClass("ui-state-active")}}).bind("mouseleave"+this.eventNamespace,function(){if(a.disabled){return}$(this).removeClass(d)}).bind("click"+this.eventNamespace,function(t){if(a.disabled){t.preventDefault()
t.stopImmediatePropagation()}})
this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)})
if(u){this.element.bind("change"+this.eventNamespace,function(){if(n){return}t.refresh()})
this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){if(a.disabled){return}n=false
i=t.pageX
s=t.pageY}).bind("mouseup"+this.eventNamespace,function(t){if(a.disabled){return}if(i!==t.pageX||s!==t.pageY){n=true}})}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||n){return false}})}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||n){return false}$(this).addClass("ui-state-active")
t.buttonElement.attr("aria-pressed","true")
var e=t.element[0]
r(e).not(e).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(a.disabled){return false}$(this).addClass("ui-state-active")
e=this
t.document.one("mouseup",function(){e=null})}).bind("mouseup"+this.eventNamespace,function(){if(a.disabled){return false}$(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(a.disabled){return false}if(t.keyCode===$.ui.keyCode.SPACE||t.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active")}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")})
if(this.buttonElement.is("a")){this.buttonElement.keyup(function(t){if(t.keyCode===$.ui.keyCode.SPACE){$(this).click()}})}}this._setOption("disabled",a.disabled)
this._resetButton()},_determineButtonType:function(){var t,e,i
if(this.element.is("[type=checkbox]")){this.type="checkbox"}else if(this.element.is("[type=radio]")){this.type="radio"}else if(this.element.is("input")){this.type="input"}else{this.type="button"}if(this.type==="checkbox"||this.type==="radio"){t=this.element.parents().last()
e="label[for='"+this.element.attr("id")+"']"
this.buttonElement=t.find(e)
if(!this.buttonElement.length){t=t.length?t.siblings():this.element.siblings()
this.buttonElement=t.filter(e)
if(!this.buttonElement.length){this.buttonElement=t.find(e)}}this.element.addClass("ui-helper-hidden-accessible")
i=this.element.is(":checked")
if(i){this.buttonElement.addClass("ui-state-active")}this.buttonElement.prop("aria-pressed",i)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible")
this.buttonElement.removeClass(o+" "+a+" "+u).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html())
if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(t,e){this._super(t,e)
if(t==="disabled"){if(e){this.element.prop("disabled",true)}else{this.element.prop("disabled",false)}return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled")
if(t!==this.options.disabled){this._setOption("disabled",t)}if(this.type==="radio"){r(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var t=this.buttonElement.removeClass(u),e=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,s=i.primary&&i.secondary,n=[]
if(i.primary||i.secondary){if(this.options.text){n.push("ui-button-text-icon"+(s?"s":i.primary?"-primary":"-secondary"))}if(i.primary){t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>")}if(i.secondary){t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>")}if(!this.options.text){n.push(s?"ui-button-icons-only":"ui-button-icon-only")
if(!this.hasTitle){t.attr("title",$.trim(e))}}}else{n.push("ui-button-text-only")}t.addClass(n.join(" "))}})
$.widget("ui.buttonset",{version:"1.10.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){if(t==="disabled"){this.buttons.button("option",t,e)}this._super(t,e)},refresh:function(){var t=this.element.css("direction")==="rtl"
this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset")
this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.dialog.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.core.js");
__KA_require("./jquery.ui.widget.js");
__KA_require("./jquery.ui.button.js");
__KA_require("./jquery.ui.draggable.js");
__KA_require("./jquery.ui.mouse.js");
__KA_require("./jquery.ui.position.js");
__KA_require("./jquery.ui.resizable.js");
(function($,i){var t={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},e={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true}
$.widget("ui.dialog",{version:"1.10.1",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(i){var t=$(this).css(i).offset().top
if(t<0){$(this).css("top",i.top-t)}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height}
this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)}
this.originalTitle=this.element.attr("title")
this.options.title=this.options.title||this.originalTitle
this._createWrapper()
this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog)
this._createTitlebar()
this._createButtonPane()
if(this.options.draggable&&$.fn.draggable){this._makeDraggable()}if(this.options.resizable&&$.fn.resizable){this._makeResizable()}this._isOpen=false},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var i=this.options.appendTo
if(i&&(i.jquery||i.nodeType)){return $(i)}return this.document.find(i||"body").eq(0)},_destroy:function(){var i,t=this.originalPosition
this._destroyOverlay()
this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach()
this.uiDialog.stop(true,true).remove()
if(this.originalTitle){this.element.attr("title",this.originalTitle)}i=t.parent.children().eq(t.index)
if(i.length&&i[0]!==this.element[0]){i.before(this.element)}else{t.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(i){var t=this
if(!this._isOpen||this._trigger("beforeClose",i)===false){return}this._isOpen=false
this._destroyOverlay()
if(!this.opener.filter(":focusable").focus().length){$(this.document[0].activeElement).blur()}this._hide(this.uiDialog,this.options.hide,function(){t._trigger("close",i)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(i,t){var e=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length
if(e&&!t){this._trigger("focus",i)}return e},open:function(){var i=this
if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true
this.opener=$(this.document[0].activeElement)
this._size()
this._position()
this._createOverlay()
this._moveToTop(null,true)
this._show(this.uiDialog,this.options.show,function(){i._focusTabbable()
i._trigger("focus")})
this._trigger("open")},_focusTabbable:function(){var i=this.element.find("[autofocus]")
if(!i.length){i=this.element.find(":tabbable")}if(!i.length){i=this.uiDialogButtonPane.find(":tabbable")}if(!i.length){i=this.uiDialogTitlebarClose.filter(":tabbable")}if(!i.length){i=this.uiDialog}i.eq(0).focus()},_keepFocus:function(i){function t(){var i=this.document[0].activeElement,t=this.uiDialog[0]===i||$.contains(this.uiDialog[0],i)
if(!t){this._focusTabbable()}}i.preventDefault()
t.call(this)
this._delay(t)},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo())
this._on(this.uiDialog,{keydown:function(i){if(this.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===$.ui.keyCode.ESCAPE){i.preventDefault()
this.close(i)
return}if(i.keyCode!==$.ui.keyCode.TAB){return}var t=this.uiDialog.find(":tabbable"),e=t.filter(":first"),o=t.filter(":last")
if((i.target===o[0]||i.target===this.uiDialog[0])&&!i.shiftKey){e.focus(1)
i.preventDefault()}else if((i.target===e[0]||i.target===this.uiDialog[0])&&i.shiftKey){o.focus(1)
i.preventDefault()}},mousedown:function(i){if(this._moveToTop(i)){this._focusTabbable()}}})
if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var i
this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog)
this._on(this.uiDialogTitlebar,{mousedown:function(i){if(!$(i.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus()}}})
this.uiDialogTitlebarClose=$("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar)
this._on(this.uiDialogTitlebarClose,{click:function(i){i.preventDefault()
this.close(i)}})
i=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar)
this._title(i)
this.uiDialog.attr({"aria-labelledby":i.attr("id")})},_title:function(i){if(!this.options.title){i.html("&#160;")}i.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix")
this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane)
this._createButtons()},_createButtons:function(){var i=this,t=this.options.buttons
this.uiDialogButtonPane.remove()
this.uiButtonSet.empty()
if($.isEmptyObject(t)||$.isArray(t)&&!t.length){this.uiDialog.removeClass("ui-dialog-buttons")
return}$.each(t,function(t,e){var o,s
e=$.isFunction(e)?{click:e,text:t}:e
e=$.extend({type:"button"},e)
o=e.click
e.click=function(){o.apply(i.element[0],arguments)}
s={icons:e.icons,text:e.showText}
delete e.icons
delete e.showText
$("<button></button>",e).button(s).appendTo(i.uiButtonSet)})
this.uiDialog.addClass("ui-dialog-buttons")
this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var i=this,t=this.options
function e(i){return{position:i.position,offset:i.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,o){$(this).addClass("ui-dialog-dragging")
i._blockFrames()
i._trigger("dragStart",t,e(o))},drag:function(t,o){i._trigger("drag",t,e(o))},stop:function(o,s){t.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()]
$(this).removeClass("ui-dialog-dragging")
i._unblockFrames()
i._trigger("dragStop",o,e(s))}})},_makeResizable:function(){var i=this,t=this.options,e=t.resizable,o=this.uiDialog.css("position"),s=typeof e==="string"?e:"n,e,s,w,se,sw,ne,nw"
function n(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:this._minHeight(),handles:s,start:function(t,e){$(this).addClass("ui-dialog-resizing")
i._blockFrames()
i._trigger("resizeStart",t,n(e))},resize:function(t,e){i._trigger("resize",t,n(e))},stop:function(e,o){t.height=$(this).height()
t.width=$(this).width()
$(this).removeClass("ui-dialog-resizing")
i._unblockFrames()
i._trigger("resizeStop",e,n(o))}}).css("position",o)},_minHeight:function(){var i=this.options
return i.height==="auto"?i.minHeight:Math.min(i.minHeight,i.height)},_position:function(){var i=this.uiDialog.is(":visible")
if(!i){this.uiDialog.show()}this.uiDialog.position(this.options.position)
if(!i){this.uiDialog.hide()}},_setOptions:function(i){var o=this,s=false,n={}
$.each(i,function(i,a){o._setOption(i,a)
if(i in t){s=true}if(i in e){n[i]=a}})
if(s){this._size()
this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",n)}},_setOption:function(i,t){var e,o,s=this.uiDialog
if(i==="dialogClass"){s.removeClass(this.options.dialogClass).addClass(t)}if(i==="disabled"){return}this._super(i,t)
if(i==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(i==="buttons"){this._createButtons()}if(i==="closeText"){this.uiDialogTitlebarClose.button({label:""+t})}if(i==="draggable"){e=s.is(":data(ui-draggable)")
if(e&&!t){s.draggable("destroy")}if(!e&&t){this._makeDraggable()}}if(i==="position"){this._position()}if(i==="resizable"){o=s.is(":data(ui-resizable)")
if(o&&!t){s.resizable("destroy")}if(o&&typeof t==="string"){s.resizable("option","handles",t)}if(!o&&t!==false){this._makeResizable()}}if(i==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function(){var i,t,e,o=this.options
this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0})
if(o.minWidth>o.width){o.width=o.minWidth}i=this.uiDialog.css({height:"auto",width:o.width}).outerHeight()
t=Math.max(0,o.minHeight-i)
e=typeof o.maxHeight==="number"?Math.max(0,o.maxHeight-i):"none"
if(o.height==="auto"){this.element.css({minHeight:t,maxHeight:e,height:"auto"})}else{this.element.height(Math.max(0,o.height-i))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var i=$(this)
return $("<div>").css({position:"absolute",width:i.outerWidth(),height:i.outerHeight()}).appendTo(i.parent()).offset(i.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove()
delete this.iframeBlocks}},_createOverlay:function(){if(!this.options.modal){return}if(!$.ui.dialog.overlayInstances){this._delay(function(){if($.ui.dialog.overlayInstances){this.document.bind("focusin.dialog",function(i){if(!$(i.target).closest(".ui-dialog").length&&!$(i.target).closest(".ui-datepicker").length){i.preventDefault()
$(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable()}})}})}this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo())
this._on(this.overlay,{mousedown:"_keepFocus"})
$.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){$.ui.dialog.overlayInstances--
if(!$.ui.dialog.overlayInstances){this.document.unbind("focusin.dialog")}this.overlay.remove()
this.overlay=null}}})
$.ui.dialog.overlayInstances=0
if($.uiBackCompat!==false){$.widget("ui.dialog",$.ui.dialog,{_position:function(){var i=this.options.position,t=[],e=[0,0],o
if(i){if(typeof i==="string"||typeof i==="object"&&"0"in i){t=i.split?i.split(" "):[i[0],i[1]]
if(t.length===1){t[1]=t[0]}$.each(["left","top"],function(i,o){if(+t[i]===t[i]){e[i]=t[i]
t[i]=o}})
i={my:t[0]+(e[0]<0?e[0]:"+"+e[0])+" "+t[1]+(e[1]<0?e[1]:"+"+e[1]),at:t.join(" ")}}i=$.extend({},$.ui.dialog.prototype.options.position,i)}else{i=$.ui.dialog.prototype.options.position}o=this.uiDialog.is(":visible")
if(!o){this.uiDialog.show()}this.uiDialog.position(i)
if(!o){this.uiDialog.hide()}}})}})(jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.draggable.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.core.js");
__KA_require("./jquery.ui.widget.js");
__KA_require("./jquery.ui.mouse.js");
(function($,t){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled")
this._mouseDestroy()},_mouseCapture:function(t){var e=this.options
if(this.helper||e.disabled||$(t.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(t)
if(!this.handle){return false}$(e.iframeFix===true?"iframe":e.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")})
return true},_mouseStart:function(t){var e=this.options
this.helper=this._createHelper(t)
this.helper.addClass("ui-draggable-dragging")
this._cacheHelperProportions()
if($.ui.ddmanager){$.ui.ddmanager.current=this}this._cacheMargins()
this.cssPosition=this.helper.css("position")
this.scrollParent=this.helper.scrollParent()
this.offset=this.positionAbs=this.element.offset()
this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left}
$.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()})
this.originalPosition=this.position=this._generatePosition(t)
this.originalPageX=t.pageX
this.originalPageY=t.pageY
e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt)
if(e.containment){this._setContainment()}if(this._trigger("start",t)===false){this._clear()
return false}this._cacheHelperProportions()
if($.ui.ddmanager&&!e.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,true)
if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,t)}return true},_mouseDrag:function(t,e){this.position=this._generatePosition(t)
this.positionAbs=this._convertPositionTo("absolute")
if(!e){var i=this._uiHash()
if(this._trigger("drag",t,i)===false){this._mouseUp({})
return false}this.position=i.position}if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}if($.ui.ddmanager){$.ui.ddmanager.drag(this,t)}return false},_mouseStop:function(t){var e,i=this,s=false,o=false
if($.ui.ddmanager&&!this.options.dropBehaviour){o=$.ui.ddmanager.drop(this,t)}if(this.dropped){o=this.dropped
this.dropped=false}e=this.element[0]
while(e&&(e=e.parentNode)){if(e===document){s=true}}if(!s&&this.options.helper==="original"){return false}if(this.options.revert==="invalid"&&!o||this.options.revert==="valid"&&o||this.options.revert===true||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,o)){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(i._trigger("stop",t)!==false){i._clear()}})}else{if(this._trigger("stop",t)!==false){this._clear()}}return false},_mouseUp:function(t){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})
if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,t)}return $.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(t){var e=!this.options.handle||!$(this.options.handle,this.element).length?true:false
$(this.options.handle,this.element).find("*").addBack().each(function(){if(this===t.target){e=true}})
return e},_createHelper:function(t){var e=this.options,i=$.isFunction(e.helper)?$(e.helper.apply(this.element[0],[t])):e.helper==="clone"?this.element.clone().removeAttr("id"):this.element
if(!i.parents("body").length){i.appendTo(e.appendTo==="parent"?this.element[0].parentNode:e.appendTo)}if(i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))){i.css("position","absolute")}return i},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if($.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent()
var t=this.offsetParent.offset()
if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft()
t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.element.position()
return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,s=this.options
if(s.containment==="parent"){s.containment=this.helper[0].parentNode}if(s.containment==="document"||s.containment==="window"){this.containment=[s.containment==="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,s.containment==="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(s.containment==="document"?0:$(window).scrollLeft())+$(s.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(s.containment==="document"?0:$(window).scrollTop())+($(s.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(s.containment)&&s.containment.constructor!==Array){e=$(s.containment)
i=e[0]
if(!i){return}t=$(i).css("overflow")!=="hidden"
this.containment=[(parseInt($(i).css("borderLeftWidth"),10)||0)+(parseInt($(i).css("paddingLeft"),10)||0),(parseInt($(i).css("borderTopWidth"),10)||0)+(parseInt($(i).css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt($(i).css("borderLeftWidth"),10)||0)-(parseInt($(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt($(i).css("borderTopWidth"),10)||0)-(parseInt($(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom]
this.relative_container=e}else if(s.containment.constructor===Array){this.containment=s.containment}},_convertPositionTo:function(t,e){if(!e){e=this.position}var i=t==="absolute"?1:-1,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(s[0].tagName)
return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*i}},_generatePosition:function(t){var e,i,s,o,n=this.options,r=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(r[0].tagName),l=t.pageX,h=t.pageY
if(this.originalPosition){if(this.containment){if(this.relative_container){i=this.relative_container.offset()
e=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else{e=this.containment}if(t.pageX-this.offset.click.left<e[0]){l=e[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<e[1]){h=e[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>e[2]){l=e[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>e[3]){h=e[3]+this.offset.click.top}}if(n.grid){s=n.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY
h=e?s-this.offset.click.top>=e[1]||s-this.offset.click.top>e[3]?s:s-this.offset.click.top>=e[1]?s-n.grid[1]:s+n.grid[1]:s
o=n.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX
l=e?o-this.offset.click.left>=e[0]||o-this.offset.click.left>e[2]?o:o-this.offset.click.left>=e[0]?o-n.grid[0]:o+n.grid[0]:o}}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:r.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging")
if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null
this.cancelHelperRemoval=false},_trigger:function(t,e,i){i=i||this._uiHash()
$.ui.plugin.call(this,t,[e,i])
if(t==="drag"){this.positionAbs=this._convertPositionTo("absolute")}return $.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}})
$.ui.plugin.add("draggable","connectToSortable",{start:function(t,e){var i=$(this).data("ui-draggable"),s=i.options,o=$.extend({},e,{item:i.element})
i.sortables=[]
$(s.connectToSortable).each(function(){var e=$.data(this,"ui-sortable")
if(e&&!e.options.disabled){i.sortables.push({instance:e,shouldRevert:e.options.revert})
e.refreshPositions()
e._trigger("activate",t,o)}})},stop:function(t,e){var i=$(this).data("ui-draggable"),s=$.extend({},e,{item:i.element})
$.each(i.sortables,function(){if(this.instance.isOver){this.instance.isOver=0
i.cancelHelperRemoval=true
this.instance.cancelHelperRemoval=false
if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(t)
this.instance.options.helper=this.instance.options._helper
if(i.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false
this.instance._trigger("deactivate",t,s)}})},drag:function(t,e){var i=$(this).data("ui-draggable"),s=this
$.each(i.sortables,function(){var o=false,n=this
this.instance.positionAbs=i.positionAbs
this.instance.helperProportions=i.helperProportions
this.instance.offset.click=i.offset.click
if(this.instance._intersectsWith(this.instance.containerCache)){o=true
$.each(i.sortables,function(){this.instance.positionAbs=i.positionAbs
this.instance.helperProportions=i.helperProportions
this.instance.offset.click=i.offset.click
if(this!==n&&this.instance._intersectsWith(this.instance.containerCache)&&$.contains(n.instance.element[0],this.instance.element[0])){o=false}return o})}if(o){if(!this.instance.isOver){this.instance.isOver=1
this.instance.currentItem=$(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true)
this.instance.options._helper=this.instance.options.helper
this.instance.options.helper=function(){return e.helper[0]}
t.target=this.instance.currentItem[0]
this.instance._mouseCapture(t,true)
this.instance._mouseStart(t,true,true)
this.instance.offset.click.top=i.offset.click.top
this.instance.offset.click.left=i.offset.click.left
this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left
this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top
i._trigger("toSortable",t)
i.dropped=this.instance.element
i.currentItem=i.element
this.instance.fromOutside=i}if(this.instance.currentItem){this.instance._mouseDrag(t)}}else{if(this.instance.isOver){this.instance.isOver=0
this.instance.cancelHelperRemoval=true
this.instance.options.revert=false
this.instance._trigger("out",t,this.instance._uiHash(this.instance))
this.instance._mouseStop(t,true)
this.instance.options.helper=this.instance.options._helper
this.instance.currentItem.remove()
if(this.instance.placeholder){this.instance.placeholder.remove()}i._trigger("fromSortable",t)
i.dropped=false}}})}})
$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),e=$(this).data("ui-draggable").options
if(t.css("cursor")){e._cursor=t.css("cursor")}t.css("cursor",e.cursor)},stop:function(){var t=$(this).data("ui-draggable").options
if(t._cursor){$("body").css("cursor",t._cursor)}}})
$.ui.plugin.add("draggable","opacity",{start:function(t,e){var i=$(e.helper),s=$(this).data("ui-draggable").options
if(i.css("opacity")){s._opacity=i.css("opacity")}i.css("opacity",s.opacity)},stop:function(t,e){var i=$(this).data("ui-draggable").options
if(i._opacity){$(e.helper).css("opacity",i._opacity)}}})
$.ui.plugin.add("draggable","scroll",{start:function(){var t=$(this).data("ui-draggable")
if(t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"){t.overflowOffset=t.scrollParent.offset()}},drag:function(t){var e=$(this).data("ui-draggable"),i=e.options,s=false
if(e.scrollParent[0]!==document&&e.scrollParent[0].tagName!=="HTML"){if(!i.axis||i.axis!=="x"){if(e.overflowOffset.top+e.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity){e.scrollParent[0].scrollTop=s=e.scrollParent[0].scrollTop+i.scrollSpeed}else if(t.pageY-e.overflowOffset.top<i.scrollSensitivity){e.scrollParent[0].scrollTop=s=e.scrollParent[0].scrollTop-i.scrollSpeed}}if(!i.axis||i.axis!=="y"){if(e.overflowOffset.left+e.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity){e.scrollParent[0].scrollLeft=s=e.scrollParent[0].scrollLeft+i.scrollSpeed}else if(t.pageX-e.overflowOffset.left<i.scrollSensitivity){e.scrollParent[0].scrollLeft=s=e.scrollParent[0].scrollLeft-i.scrollSpeed}}}else{if(!i.axis||i.axis!=="x"){if(t.pageY-$(document).scrollTop()<i.scrollSensitivity){s=$(document).scrollTop($(document).scrollTop()-i.scrollSpeed)}else if($(window).height()-(t.pageY-$(document).scrollTop())<i.scrollSensitivity){s=$(document).scrollTop($(document).scrollTop()+i.scrollSpeed)}}if(!i.axis||i.axis!=="y"){if(t.pageX-$(document).scrollLeft()<i.scrollSensitivity){s=$(document).scrollLeft($(document).scrollLeft()-i.scrollSpeed)}else if($(window).width()-(t.pageX-$(document).scrollLeft())<i.scrollSensitivity){s=$(document).scrollLeft($(document).scrollLeft()+i.scrollSpeed)}}}if(s!==false&&$.ui.ddmanager&&!i.dropBehaviour){$.ui.ddmanager.prepareOffsets(e,t)}}})
$.ui.plugin.add("draggable","snap",{start:function(){var t=$(this).data("ui-draggable"),e=t.options
t.snapElements=[]
$(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var e=$(this),i=e.offset()
if(this!==t.element[0]){t.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}})},drag:function(t,e){var i,s,o,n,r,a,l,h,f,c,p=$(this).data("ui-draggable"),d=p.options,g=d.snapTolerance,u=e.offset.left,m=u+p.helperProportions.width,v=e.offset.top,P=v+p.helperProportions.height
for(f=p.snapElements.length-1;f>=0;f--){r=p.snapElements[f].left
a=r+p.snapElements[f].width
l=p.snapElements[f].top
h=l+p.snapElements[f].height
if(!(r-g<u&&u<a+g&&l-g<v&&v<h+g||r-g<u&&u<a+g&&l-g<P&&P<h+g||r-g<m&&m<a+g&&l-g<v&&v<h+g||r-g<m&&m<a+g&&l-g<P&&P<h+g)){if(p.snapElements[f].snapping){p.options.snap.release&&p.options.snap.release.call(p.element,t,$.extend(p._uiHash(),{snapItem:p.snapElements[f].item}))}p.snapElements[f].snapping=false
continue}if(d.snapMode!=="inner"){i=Math.abs(l-P)<=g
s=Math.abs(h-v)<=g
o=Math.abs(r-m)<=g
n=Math.abs(a-u)<=g
if(i){e.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top}if(s){e.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top}if(o){e.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left}if(n){e.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left}}c=i||s||o||n
if(d.snapMode!=="outer"){i=Math.abs(l-v)<=g
s=Math.abs(h-P)<=g
o=Math.abs(r-u)<=g
n=Math.abs(a-m)<=g
if(i){e.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top}if(s){e.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top}if(o){e.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left}if(n){e.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left}}if(!p.snapElements[f].snapping&&(i||s||o||n||c)){p.options.snap.snap&&p.options.snap.snap.call(p.element,t,$.extend(p._uiHash(),{snapItem:p.snapElements[f].item}))}p.snapElements[f].snapping=i||s||o||n||c}}})
$.ui.plugin.add("draggable","stack",{start:function(){var t,e=this.data("ui-draggable").options,i=$.makeArray($(e.stack)).sort(function(t,e){return(parseInt($(t).css("zIndex"),10)||0)-(parseInt($(e).css("zIndex"),10)||0)})
if(!i.length){return}t=parseInt($(i[0]).css("zIndex"),10)||0
$(i).each(function(e){$(this).css("zIndex",t+e)})
this.css("zIndex",t+i.length)}})
$.ui.plugin.add("draggable","zIndex",{start:function(t,e){var i=$(e.helper),s=$(this).data("ui-draggable").options
if(i.css("zIndex")){s._zIndex=i.css("zIndex")}i.css("zIndex",s.zIndex)},stop:function(t,e){var i=$(this).data("ui-draggable").options
if(i._zIndex){$(e.helper).css("zIndex",i._zIndex)}}})})(jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.resizable.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.core.js");
__KA_require("./jquery.ui.widget.js");
__KA_require("./jquery.ui.mouse.js");
(function($,i){function t(i){return parseInt(i,10)||0}function e(i){return!isNaN(parseInt(i,10))}$.widget("ui.resizable",$.ui.mouse,{version:"1.10.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var i,t,e,s,h,n=this,o=this.options
this.element.addClass("ui-resizable")
$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null})
if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}))
this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"))
this.elementIsWrapper=true
this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")})
this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0})
this.originalResizeStyle=this.originalElement.css("resize")
this.originalElement.css("resize","none")
this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}))
this.originalElement.css({margin:this.originalElement.css("margin")})
this._proportionallyResize()}this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"})
if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}i=this.handles.split(",")
this.handles={}
for(t=0;t<i.length;t++){e=$.trim(i[t])
h="ui-resizable-"+e
s=$("<div class='ui-resizable-handle "+h+"'></div>")
s.css({zIndex:o.zIndex})
if("se"===e){s.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[e]=".ui-resizable-"+e
this.element.append(s)}}this._renderAxis=function(i){var t,e,s,h
i=i||this.element
for(t in this.handles){if(this.handles[t].constructor===String){this.handles[t]=$(this.handles[t],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){e=$(this.handles[t],this.element)
h=/sw|ne|nw|se|n|s/.test(t)?e.outerHeight():e.outerWidth()
s=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join("")
i.css(s,h)
this._proportionallyResize()}if(!$(this.handles[t]).length){continue}}}
this._renderAxis(this.element)
this._handles=$(".ui-resizable-handle",this.element).disableSelection()
this._handles.mouseover(function(){if(!n.resizing){if(this.className){s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}n.axis=s&&s[1]?s[1]:"se"}})
if(o.autoHide){this._handles.hide()
$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return}$(this).removeClass("ui-resizable-autohide")
n._handles.show()}).mouseleave(function(){if(o.disabled){return}if(!n.resizing){$(this).addClass("ui-resizable-autohide")
n._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy()
var i,t=function(i){$(i).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()}
if(this.elementIsWrapper){t(this.element)
i=this.element
this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i)
i.remove()}this.originalElement.css("resize",this.originalResizeStyle)
t(this.originalElement)
return this},_mouseCapture:function(i){var t,e,s=false
for(t in this.handles){e=$(this.handles[t])[0]
if(e===i.target||$.contains(e,i.target)){s=true}}return!this.options.disabled&&s},_mouseStart:function(i){var e,s,h,n=this.options,o=this.element.position(),a=this.element
this.resizing=true
if(/absolute/.test(a.css("position"))){a.css({position:"absolute",top:a.css("top"),left:a.css("left")})}else if(a.is(".ui-draggable")){a.css({position:"absolute",top:o.top,left:o.left})}this._renderProxy()
e=t(this.helper.css("left"))
s=t(this.helper.css("top"))
if(n.containment){e+=$(n.containment).scrollLeft()||0
s+=$(n.containment).scrollTop()||0}this.offset=this.helper.offset()
this.position={left:e,top:s}
this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()}
this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()}
this.originalPosition={left:e,top:s}
this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()}
this.originalMousePosition={left:i.pageX,top:i.pageY}
this.aspectRatio=typeof n.aspectRatio==="number"?n.aspectRatio:this.originalSize.width/this.originalSize.height||1
h=$(".ui-resizable-"+this.axis).css("cursor")
$("body").css("cursor",h==="auto"?this.axis+"-resize":h)
a.addClass("ui-resizable-resizing")
this._propagate("start",i)
return true},_mouseDrag:function(i){var t,e=this.helper,s={},h=this.originalMousePosition,n=this.axis,o=this.position.top,a=this.position.left,l=this.size.width,r=this.size.height,p=i.pageX-h.left||0,f=i.pageY-h.top||0,d=this._change[n]
if(!d){return false}t=d.apply(this,[i,p,f])
this._updateVirtualBoundaries(i.shiftKey)
if(this._aspectRatio||i.shiftKey){t=this._updateRatio(t,i)}t=this._respectSize(t,i)
this._updateCache(t)
this._propagate("resize",i)
if(this.position.top!==o){s.top=this.position.top+"px"}if(this.position.left!==a){s.left=this.position.left+"px"}if(this.size.width!==l){s.width=this.size.width+"px"}if(this.size.height!==r){s.height=this.size.height+"px"}e.css(s)
if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!$.isEmptyObject(s)){this._trigger("resize",i,this.ui())}return false},_mouseStop:function(i){this.resizing=false
var t,e,s,h,n,o,a,l=this.options,r=this
if(this._helper){t=this._proportionallyResizeElements
e=t.length&&/textarea/i.test(t[0].nodeName)
s=e&&$.ui.hasScroll(t[0],"left")?0:r.sizeDiff.height
h=e?0:r.sizeDiff.width
n={width:r.helper.width()-h,height:r.helper.height()-s}
o=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null
a=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null
if(!l.animate){this.element.css($.extend(n,{top:a,left:o}))}r.helper.height(r.size.height)
r.helper.width(r.size.width)
if(this._helper&&!l.animate){this._proportionallyResize()}}$("body").css("cursor","auto")
this.element.removeClass("ui-resizable-resizing")
this._propagate("stop",i)
if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(i){var t,s,h,n,o,a=this.options
o={minWidth:e(a.minWidth)?a.minWidth:0,maxWidth:e(a.maxWidth)?a.maxWidth:Infinity,minHeight:e(a.minHeight)?a.minHeight:0,maxHeight:e(a.maxHeight)?a.maxHeight:Infinity}
if(this._aspectRatio||i){t=o.minHeight*this.aspectRatio
h=o.minWidth/this.aspectRatio
s=o.maxHeight*this.aspectRatio
n=o.maxWidth/this.aspectRatio
if(t>o.minWidth){o.minWidth=t}if(h>o.minHeight){o.minHeight=h}if(s<o.maxWidth){o.maxWidth=s}if(n<o.maxHeight){o.maxHeight=n}}this._vBoundaries=o},_updateCache:function(i){this.offset=this.helper.offset()
if(e(i.left)){this.position.left=i.left}if(e(i.top)){this.position.top=i.top}if(e(i.height)){this.size.height=i.height}if(e(i.width)){this.size.width=i.width}},_updateRatio:function(i){var t=this.position,s=this.size,h=this.axis
if(e(i.height)){i.width=i.height*this.aspectRatio}else if(e(i.width)){i.height=i.width/this.aspectRatio}if(h==="sw"){i.left=t.left+(s.width-i.width)
i.top=null}if(h==="nw"){i.top=t.top+(s.height-i.height)
i.left=t.left+(s.width-i.width)}return i},_respectSize:function(i){var t=this._vBoundaries,s=this.axis,h=e(i.width)&&t.maxWidth&&t.maxWidth<i.width,n=e(i.height)&&t.maxHeight&&t.maxHeight<i.height,o=e(i.width)&&t.minWidth&&t.minWidth>i.width,a=e(i.height)&&t.minHeight&&t.minHeight>i.height,l=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,p=/sw|nw|w/.test(s),f=/nw|ne|n/.test(s)
if(o){i.width=t.minWidth}if(a){i.height=t.minHeight}if(h){i.width=t.maxWidth}if(n){i.height=t.maxHeight}if(o&&p){i.left=l-t.minWidth}if(h&&p){i.left=l-t.maxWidth}if(a&&f){i.top=r-t.minHeight}if(n&&f){i.top=r-t.maxHeight}if(!i.width&&!i.height&&!i.left&&i.top){i.top=null}else if(!i.width&&!i.height&&!i.top&&i.left){i.left=null}return i},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var i,t,e,s,h,n=this.helper||this.element
for(i=0;i<this._proportionallyResizeElements.length;i++){h=this._proportionallyResizeElements[i]
if(!this.borderDif){this.borderDif=[]
e=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")]
s=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")]
for(t=0;t<e.length;t++){this.borderDif[t]=(parseInt(e[t],10)||0)+(parseInt(s[t],10)||0)}}h.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var i=this.element,t=this.options
this.elementOffset=i.offset()
if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>")
this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex})
this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(i,t){return{width:this.originalSize.width+t}},w:function(i,t){var e=this.originalSize,s=this.originalPosition
return{left:s.left+t,width:e.width-t}},n:function(i,t,e){var s=this.originalSize,h=this.originalPosition
return{top:h.top+e,height:s.height-e}},s:function(i,t,e){return{height:this.originalSize.height+e}},se:function(i,t,e){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[i,t,e]))},sw:function(i,t,e){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[i,t,e]))},ne:function(i,t,e){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[i,t,e]))},nw:function(i,t,e){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[i,t,e]))}},_propagate:function(i,t){$.ui.plugin.call(this,i,[t,this.ui()])
i!=="resize"&&this._trigger(i,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}})
$.ui.plugin.add("resizable","animate",{stop:function(i){var t=$(this).data("ui-resizable"),e=t.options,s=t._proportionallyResizeElements,h=s.length&&/textarea/i.test(s[0].nodeName),n=h&&$.ui.hasScroll(s[0],"left")?0:t.sizeDiff.height,o=h?0:t.sizeDiff.width,a={width:t.size.width-o,height:t.size.height-n},l=parseInt(t.element.css("left"),10)+(t.position.left-t.originalPosition.left)||null,r=parseInt(t.element.css("top"),10)+(t.position.top-t.originalPosition.top)||null
t.element.animate($.extend(a,r&&l?{top:r,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseInt(t.element.css("width"),10),height:parseInt(t.element.css("height"),10),top:parseInt(t.element.css("top"),10),left:parseInt(t.element.css("left"),10)}
if(s&&s.length){$(s[0]).css({width:e.width,height:e.height})}t._updateCache(e)
t._propagate("resize",i)}})}})
$.ui.plugin.add("resizable","containment",{start:function(){var i,e,s,h,n,o,a,l=$(this).data("ui-resizable"),r=l.options,p=l.element,f=r.containment,d=f instanceof $?f.get(0):/parent/.test(f)?p.parent().get(0):f
if(!d){return}l.containerElement=$(d)
if(/document/.test(f)||f===document){l.containerOffset={left:0,top:0}
l.containerPosition={left:0,top:0}
l.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}}else{i=$(d)
e=[]
$(["Top","Right","Left","Bottom"]).each(function(s,h){e[s]=t(i.css("padding"+h))})
l.containerOffset=i.offset()
l.containerPosition=i.position()
l.containerSize={height:i.innerHeight()-e[3],width:i.innerWidth()-e[1]}
s=l.containerOffset
h=l.containerSize.height
n=l.containerSize.width
o=$.ui.hasScroll(d,"left")?d.scrollWidth:n
a=$.ui.hasScroll(d)?d.scrollHeight:h
l.parentData={element:d,left:s.left,top:s.top,width:o,height:a}}},resize:function(i){var t,e,s,h,n=$(this).data("ui-resizable"),o=n.options,a=n.containerOffset,l=n.position,r=n._aspectRatio||i.shiftKey,p={top:0,left:0},f=n.containerElement
if(f[0]!==document&&/static/.test(f.css("position"))){p=a}if(l.left<(n._helper?a.left:0)){n.size.width=n.size.width+(n._helper?n.position.left-a.left:n.position.left-p.left)
if(r){n.size.height=n.size.width/n.aspectRatio}n.position.left=o.helper?a.left:0}if(l.top<(n._helper?a.top:0)){n.size.height=n.size.height+(n._helper?n.position.top-a.top:n.position.top)
if(r){n.size.width=n.size.height*n.aspectRatio}n.position.top=n._helper?a.top:0}n.offset.left=n.parentData.left+n.position.left
n.offset.top=n.parentData.top+n.position.top
t=Math.abs((n._helper?n.offset.left-p.left:n.offset.left-p.left)+n.sizeDiff.width)
e=Math.abs((n._helper?n.offset.top-p.top:n.offset.top-a.top)+n.sizeDiff.height)
s=n.containerElement.get(0)===n.element.parent().get(0)
h=/relative|absolute/.test(n.containerElement.css("position"))
if(s&&h){t-=n.parentData.left}if(t+n.size.width>=n.parentData.width){n.size.width=n.parentData.width-t
if(r){n.size.height=n.size.width/n.aspectRatio}}if(e+n.size.height>=n.parentData.height){n.size.height=n.parentData.height-e
if(r){n.size.width=n.size.height*n.aspectRatio}}},stop:function(){var i=$(this).data("ui-resizable"),t=i.options,e=i.containerOffset,s=i.containerPosition,h=i.containerElement,n=$(i.helper),o=n.offset(),a=n.outerWidth()-i.sizeDiff.width,l=n.outerHeight()-i.sizeDiff.height
if(i._helper&&!t.animate&&/relative/.test(h.css("position"))){$(this).css({left:o.left-s.left-e.left,width:a,height:l})}if(i._helper&&!t.animate&&/static/.test(h.css("position"))){$(this).css({left:o.left-s.left-e.left,width:a,height:l})}}})
$.ui.plugin.add("resizable","alsoResize",{start:function(){var i=$(this).data("ui-resizable"),t=i.options,e=function(i){$(i).each(function(){var i=$(this)
i.data("ui-resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10)})})}
if(typeof t.alsoResize==="object"&&!t.alsoResize.parentNode){if(t.alsoResize.length){t.alsoResize=t.alsoResize[0]
e(t.alsoResize)}else{$.each(t.alsoResize,function(i){e(i)})}}else{e(t.alsoResize)}},resize:function(i,t){var e=$(this).data("ui-resizable"),s=e.options,h=e.originalSize,n=e.originalPosition,o={height:e.size.height-h.height||0,width:e.size.width-h.width||0,top:e.position.top-n.top||0,left:e.position.left-n.left||0},a=function(i,e){$(i).each(function(){var i=$(this),s=$(this).data("ui-resizable-alsoresize"),h={},n=e&&e.length?e:i.parents(t.originalElement[0]).length?["width","height"]:["width","height","top","left"]
$.each(n,function(i,t){var e=(s[t]||0)+(o[t]||0)
if(e&&e>=0){h[t]=e||null}})
i.css(h)})}
if(typeof s.alsoResize==="object"&&!s.alsoResize.nodeType){$.each(s.alsoResize,function(i,t){a(i,t)})}else{a(s.alsoResize)}},stop:function(){$(this).removeData("resizable-alsoresize")}})
$.ui.plugin.add("resizable","ghost",{start:function(){var i=$(this).data("ui-resizable"),t=i.options,e=i.size
i.ghost=i.originalElement.clone()
i.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof t.ghost==="string"?t.ghost:"")
i.ghost.appendTo(i.helper)},resize:function(){var i=$(this).data("ui-resizable")
if(i.ghost){i.ghost.css({position:"relative",height:i.size.height,width:i.size.width})}},stop:function(){var i=$(this).data("ui-resizable")
if(i.ghost&&i.helper){i.helper.get(0).removeChild(i.ghost.get(0))}}})
$.ui.plugin.add("resizable","grid",{resize:function(){var i=$(this).data("ui-resizable"),t=i.options,e=i.size,s=i.originalSize,h=i.originalPosition,n=i.axis,o=typeof t.grid==="number"?[t.grid,t.grid]:t.grid,a=o[0]||1,l=o[1]||1,r=Math.round((e.width-s.width)/a)*a,p=Math.round((e.height-s.height)/l)*l,f=s.width+r,d=s.height+p,g=t.maxWidth&&t.maxWidth<f,u=t.maxHeight&&t.maxHeight<d,c=t.minWidth&&t.minWidth>f,m=t.minHeight&&t.minHeight>d
t.grid=o
if(c){f=f+a}if(m){d=d+l}if(g){f=f-a}if(u){d=d-l}if(/^(se|s|e)$/.test(n)){i.size.width=f
i.size.height=d}else if(/^(ne)$/.test(n)){i.size.width=f
i.size.height=d
i.position.top=h.top-p}else if(/^(sw)$/.test(n)){i.size.width=f
i.size.height=d
i.position.left=h.left-r}else{i.size.width=f
i.size.height=d
i.position.top=h.top-p
i.position.left=h.left-r}}})})(jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.slider.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.mouse.js");
(function($,e){var i=5
$.widget("ui.slider",$.ui.mouse,{version:"1.10.1",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=false
this._mouseSliding=false
this._animateOff=true
this._handleIndex=null
this._detectOrientation()
this._mouseInit()
this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all")
this._refresh()
this._setOption("disabled",this.options.disabled)
this._animateOff=false},_refresh:function(){this._createRange()
this._createHandles()
this._setupEvents()
this._refreshValue()},_createHandles:function(){var e,i,t=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",n=[]
i=t.values&&t.values.length||1
if(s.length>i){s.slice(i).remove()
s=s.slice(0,i)}for(e=s.length;e<i;e++){n.push(a)}this.handles=s.add($(n.join("")).appendTo(this.element))
this.handle=this.handles.eq(0)
this.handles.each(function(e){$(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i=""
if(e.range){if(e.range===true){if(!e.values){e.values=[this._valueMin(),this._valueMin()]}else if(e.values.length&&e.values.length!==2){e.values=[e.values[0],e.values[0]]}else if($.isArray(e.values)){e.values=e.values.slice(0)}}if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element)
i="ui-slider-range"+" ui-widget-header ui-corner-all"}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""})}this.range.addClass(i+(e.range==="min"||e.range==="max"?" ui-slider-range-"+e.range:""))}else{this.range=$([])}},_setupEvents:function(){var e=this.handles.add(this.range).filter("a")
this._off(e)
this._on(e,this._handleEvents)
this._hoverable(e)
this._focusable(e)},_destroy:function(){this.handles.remove()
this.range.remove()
this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all")
this._mouseDestroy()},_mouseCapture:function(e){var i,t,s,a,n,l,h,u,r=this,o=this.options
if(o.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()}
this.elementOffset=this.element.offset()
i={x:e.pageX,y:e.pageY}
t=this._normValueFromMouse(i)
s=this._valueMax()-this._valueMin()+1
this.handles.each(function(e){var i=Math.abs(t-r.values(e))
if(s>i||s===i&&(e===r._lastChangedValue||r.values(e)===o.min)){s=i
a=$(this)
n=e}})
l=this._start(e,n)
if(l===false){return false}this._mouseSliding=true
this._handleIndex=n
a.addClass("ui-state-active").focus()
h=a.offset()
u=!$(e.target).parents().addBack().is(".ui-slider-handle")
this._clickOffset=u?{left:0,top:0}:{left:e.pageX-h.left-a.width()/2,top:e.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)}
if(!this.handles.hasClass("ui-state-hover")){this._slide(e,n,t)}this._animateOff=true
return true},_mouseStart:function(){return true},_mouseDrag:function(e){var i={x:e.pageX,y:e.pageY},t=this._normValueFromMouse(i)
this._slide(e,this._handleIndex,t)
return false},_mouseStop:function(e){this.handles.removeClass("ui-state-active")
this._mouseSliding=false
this._stop(e,this._handleIndex)
this._change(e,this._handleIndex)
this._handleIndex=null
this._clickOffset=null
this._animateOff=false
return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var i,t,s,a,n
if(this.orientation==="horizontal"){i=this.elementSize.width
t=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{i=this.elementSize.height
t=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}s=t/i
if(s>1){s=1}if(s<0){s=0}if(this.orientation==="vertical"){s=1-s}a=this._valueMax()-this._valueMin()
n=this._valueMin()+s*a
return this._trimAlignValue(n)},_start:function(e,i){var t={handle:this.handles[i],value:this.value()}
if(this.options.values&&this.options.values.length){t.value=this.values(i)
t.values=this.values()}return this._trigger("start",e,t)},_slide:function(e,i,t){var s,a,n
if(this.options.values&&this.options.values.length){s=this.values(i?0:1)
if(this.options.values.length===2&&this.options.range===true&&(i===0&&t>s||i===1&&t<s)){t=s}if(t!==this.values(i)){a=this.values()
a[i]=t
n=this._trigger("slide",e,{handle:this.handles[i],value:t,values:a})
s=this.values(i?0:1)
if(n!==false){this.values(i,t,true)}}}else{if(t!==this.value()){n=this._trigger("slide",e,{handle:this.handles[i],value:t})
if(n!==false){this.value(t)}}}},_stop:function(e,i){var t={handle:this.handles[i],value:this.value()}
if(this.options.values&&this.options.values.length){t.value=this.values(i)
t.values=this.values()}this._trigger("stop",e,t)},_change:function(e,i){if(!this._keySliding&&!this._mouseSliding){var t={handle:this.handles[i],value:this.value()}
if(this.options.values&&this.options.values.length){t.value=this.values(i)
t.values=this.values()}this._lastChangedValue=i
this._trigger("change",e,t)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e)
this._refreshValue()
this._change(null,0)
return}return this._value()},values:function(e,i){var t,s,a
if(arguments.length>1){this.options.values[e]=this._trimAlignValue(i)
this._refreshValue()
this._change(null,e)
return}if(arguments.length){if($.isArray(arguments[0])){t=this.options.values
s=arguments[0]
for(a=0;a<t.length;a+=1){t[a]=this._trimAlignValue(s[a])
this._change(null,a)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(e,i){var t,s=0
if(e==="range"&&this.options.range===true){if(i==="min"){this.options.value=this._values(0)
this.options.values=null}else if(i==="max"){this.options.value=this._values(this.options.values.length-1)
this.options.values=null}}if($.isArray(this.options.values)){s=this.options.values.length}$.Widget.prototype._setOption.apply(this,arguments)
switch(e){case"orientation":this._detectOrientation()
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation)
this._refreshValue()
break
case"value":this._animateOff=true
this._refreshValue()
this._change(null,0)
this._animateOff=false
break
case"values":this._animateOff=true
this._refreshValue()
for(t=0;t<s;t+=1){this._change(null,t)}this._animateOff=false
break
case"min":case"max":this._animateOff=true
this._refreshValue()
this._animateOff=false
break
case"range":this._animateOff=true
this._refresh()
this._animateOff=false
break}},_value:function(){var e=this.options.value
e=this._trimAlignValue(e)
return e},_values:function(e){var i,t,s
if(arguments.length){i=this.options.values[e]
i=this._trimAlignValue(i)
return i}else if(this.options.values&&this.options.values.length){t=this.options.values.slice()
for(s=0;s<t.length;s+=1){t[s]=this._trimAlignValue(t[s])}return t}else{return[]}},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var i=this.options.step>0?this.options.step:1,t=(e-this._valueMin())%i,s=e-t
if(Math.abs(t)*2>=i){s+=t>0?i:-i}return parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,t,s,a,n=this.options.range,l=this.options,h=this,u=!this._animateOff?l.animate:false,r={}
if(this.options.values&&this.options.values.length){this.handles.each(function(t){i=(h.values(t)-h._valueMin())/(h._valueMax()-h._valueMin())*100
r[h.orientation==="horizontal"?"left":"bottom"]=i+"%"
$(this).stop(1,1)[u?"animate":"css"](r,l.animate)
if(h.options.range===true){if(h.orientation==="horizontal"){if(t===0){h.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},l.animate)}if(t===1){h.range[u?"animate":"css"]({width:i-e+"%"},{queue:false,duration:l.animate})}}else{if(t===0){h.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},l.animate)}if(t===1){h.range[u?"animate":"css"]({height:i-e+"%"},{queue:false,duration:l.animate})}}}e=i})}else{t=this.value()
s=this._valueMin()
a=this._valueMax()
i=a!==s?(t-s)/(a-s)*100:0
r[this.orientation==="horizontal"?"left":"bottom"]=i+"%"
this.handle.stop(1,1)[u?"animate":"css"](r,l.animate)
if(n==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},l.animate)}if(n==="max"&&this.orientation==="horizontal"){this.range[u?"animate":"css"]({width:100-i+"%"},{queue:false,duration:l.animate})}if(n==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},l.animate)}if(n==="max"&&this.orientation==="vertical"){this.range[u?"animate":"css"]({height:100-i+"%"},{queue:false,duration:l.animate})}}},_handleEvents:{keydown:function(e){var t,s,a,n,l=$(e.target).data("ui-slider-handle-index")
switch(e.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:e.preventDefault()
if(!this._keySliding){this._keySliding=true
$(e.target).addClass("ui-state-active")
t=this._start(e,l)
if(t===false){return}}break}n=this.options.step
if(this.options.values&&this.options.values.length){s=a=this.values(l)}else{s=a=this.value()}switch(e.keyCode){case $.ui.keyCode.HOME:a=this._valueMin()
break
case $.ui.keyCode.END:a=this._valueMax()
break
case $.ui.keyCode.PAGE_UP:a=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/i)
break
case $.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/i)
break
case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(s===this._valueMax()){return}a=this._trimAlignValue(s+n)
break
case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(s===this._valueMin()){return}a=this._trimAlignValue(s-n)
break}this._slide(e,l,a)},click:function(e){e.preventDefault()},keyup:function(e){var i=$(e.target).data("ui-slider-handle-index")
if(this._keySliding){this._keySliding=false
this._stop(e,i)
this._change(e,i)
$(e.target).removeClass("ui-state-active")}}}})})(jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.sortable.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.mouse.js");
(function($,t){function e(t,e,i){return t>e&&t<e+i}$.widget("ui.sortable",$.ui.mouse,{version:"1.10.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options
this.containerCache={}
this.element.addClass("ui-sortable")
this.refresh()
this.floating=this.items.length?t.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false
this.offset=this.element.offset()
this._mouseInit()
this.ready=true},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled")
this._mouseDestroy()
for(var t=this.items.length-1;t>=0;t--){this.items[t].item.removeData(this.widgetName+"-item")}return this},_setOption:function(t,e){if(t==="disabled"){this.options[t]=e
this.widget().toggleClass("ui-sortable-disabled",!!e)}else{$.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(t,e){var i=null,s=false,o=this
if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t)
$(t.target).parents().each(function(){if($.data(this,o.widgetName+"-item")===o){i=$(this)
return false}})
if($.data(t.target,o.widgetName+"-item")===o){i=$(t.target)}if(!i){return false}if(this.options.handle&&!e){$(this.options.handle,i).find("*").addBack().each(function(){if(this===t.target){s=true}})
if(!s){return false}}this.currentItem=i
this._removeCurrentsFromItems()
return true},_mouseStart:function(t,e,i){var s,o=this.options
this.currentContainer=this
this.refreshPositions()
this.helper=this._createHelper(t)
this._cacheHelperProportions()
this._cacheMargins()
this.scrollParent=this.helper.scrollParent()
this.offset=this.currentItem.offset()
this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left}
$.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()})
this.helper.css("position","absolute")
this.cssPosition=this.helper.css("position")
this.originalPosition=this._generatePosition(t)
this.originalPageX=t.pageX
this.originalPageY=t.pageY
o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt)
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]}
if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder()
if(o.containment){this._setContainment()}if(o.cursor){if($("body").css("cursor")){this._storedCursor=$("body").css("cursor")}$("body").css("cursor",o.cursor)}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash())
if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!i){for(s=this.containers.length-1;s>=0;s--){this.containers[s]._trigger("activate",t,this._uiHash(this))}}if($.ui.ddmanager){$.ui.ddmanager.current=this}if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true
this.helper.addClass("ui-sortable-helper")
this._mouseDrag(t)
return true},_mouseDrag:function(t){var e,i,s,o,r=this.options,n=false
this.position=this._generatePosition(t)
this.positionAbs=this._convertPositionTo("absolute")
if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity){this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+r.scrollSpeed}else if(t.pageY-this.overflowOffset.top<r.scrollSensitivity){this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-r.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity){this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+r.scrollSpeed}else if(t.pageX-this.overflowOffset.left<r.scrollSensitivity){this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-r.scrollSpeed}}else{if(t.pageY-$(document).scrollTop()<r.scrollSensitivity){n=$(document).scrollTop($(document).scrollTop()-r.scrollSpeed)}else if($(window).height()-(t.pageY-$(document).scrollTop())<r.scrollSensitivity){n=$(document).scrollTop($(document).scrollTop()+r.scrollSpeed)}if(t.pageX-$(document).scrollLeft()<r.scrollSensitivity){n=$(document).scrollLeft($(document).scrollLeft()-r.scrollSpeed)}else if($(window).width()-(t.pageX-$(document).scrollLeft())<r.scrollSensitivity){n=$(document).scrollLeft($(document).scrollLeft()+r.scrollSpeed)}}if(n!==false&&$.ui.ddmanager&&!r.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute")
if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(e=this.items.length-1;e>=0;e--){i=this.items[e]
s=i.item[0]
o=this._intersectsWithPointer(i)
if(!o){continue}if(i.instance!==this.currentContainer){continue}if(s!==this.currentItem[0]&&this.placeholder[o===1?"next":"prev"]()[0]!==s&&!$.contains(this.placeholder[0],s)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],s):true)){this.direction=o===1?"down":"up"
if(this.options.tolerance==="pointer"||this._intersectsWithSides(i)){this._rearrange(t,i)}else{break}this._trigger("change",t,this._uiHash())
break}}this._contactContainers(t)
if($.ui.ddmanager){$.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash())
this.lastPositionAbs=this.positionAbs
return false},_mouseStop:function(t,e){if(!t){return}if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,t)}if(this.options.revert){var i=this,s=this.placeholder.offset()
this.reverting=true
$(this.helper).animate({left:s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else{this._clear(t,e)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null})
if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this))
if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this))
this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null})
if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem)}else{$(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[]
t=t||{}
$(e).each(function(){var e=($(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/)
if(e){i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}})
if(!i.length&&t.key){i.push(t.key+"=")}return i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[]
t=t||{}
e.each(function(){i.push($(t.item||this).attr(t.attribute||"id")||"")})
return i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,r=t.left,n=r+t.width,h=t.top,l=h+t.height,a=this.offset.click.top,c=this.offset.click.left,f=s+a>h&&s+a<l&&e+c>r&&e+c<n
if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]){return f}else{return r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<n&&h<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<l}},_intersectsWithPointer:function(t){var i=this.options.axis==="x"||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s=this.options.axis==="y"||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=i&&s,r=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection()
if(!o){return false}return this.floating?n&&n==="right"||r==="down"?2:1:r&&(r==="down"?2:1)},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection()
if(this.floating&&r){return r==="right"&&s||r==="left"&&!s}else{return o&&(o==="down"&&i||o==="up"&&!i)}},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top
return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left
return t!==0&&(t>0?"right":"left")},refresh:function(t){this._refreshItems(t)
this.refreshPositions()
return this},_connectWith:function(){var t=this.options
return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,i,s,o,r=[],n=[],h=this._connectWith()
if(h&&t){for(e=h.length-1;e>=0;e--){s=$(h[e])
for(i=s.length-1;i>=0;i--){o=$.data(s[i],this.widgetFullName)
if(o&&o!==this&&!o.options.disabled){n.push([$.isFunction(o.options.items)?o.options.items.call(o.element):$(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o])}}}}n.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this])
for(e=n.length-1;e>=0;e--){n[e][0].each(function(){r.push(this)})}return $(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)")
this.items=$.grep(this.items,function(e){for(var i=0;i<t.length;i++){if(t[i]===e.item[0]){return false}}return true})},_refreshItems:function(t){this.items=[]
this.containers=[this]
var e,i,s,o,r,n,h,l,a=this.items,c=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):$(this.options.items,this.element),this]],f=this._connectWith()
if(f&&this.ready){for(e=f.length-1;e>=0;e--){s=$(f[e])
for(i=s.length-1;i>=0;i--){o=$.data(s[i],this.widgetFullName)
if(o&&o!==this&&!o.options.disabled){c.push([$.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):$(o.options.items,o.element),o])
this.containers.push(o)}}}}for(e=c.length-1;e>=0;e--){r=c[e][1]
n=c[e][0]
for(i=0,l=n.length;i<l;i++){h=$(n[i])
h.data(this.widgetName+"-item",r)
a.push({item:h,instance:r,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var e,i,s,o
for(e=this.items.length-1;e>=0;e--){i=this.items[e]
if(i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]){continue}s=this.options.toleranceElement?$(this.options.toleranceElement,i.item):i.item
if(!t){i.width=s.outerWidth()
i.height=s.outerHeight()}o=s.offset()
i.left=o.left
i.top=o.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(e=this.containers.length-1;e>=0;e--){o=this.containers[e].element.offset()
this.containers[e].containerCache.left=o.left
this.containers[e].containerCache.top=o.top
this.containers[e].containerCache.width=this.containers[e].element.outerWidth()
this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}}return this},_createPlaceholder:function(t){t=t||this
var e,i=t.options
if(!i.placeholder||i.placeholder.constructor===String){e=i.placeholder
i.placeholder={element:function(){var i=$(document.createElement(t.currentItem[0].nodeName)).addClass(e||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0]
if(!e){i.style.visibility="hidden"}return i},update:function(s,o){if(e&&!i.forcePlaceholderSize){return}if(!o.height()){o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10))}if(!o.width()){o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}}t.placeholder=$(i.placeholder.element.call(t.element,t.currentItem))
t.currentItem.after(t.placeholder)
i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var e,i,s,o,r,n,h,l,a,c=null,f=null
for(e=this.containers.length-1;e>=0;e--){if($.contains(this.currentItem[0],this.containers[e].element[0])){continue}if(this._intersectsWith(this.containers[e].containerCache)){if(c&&$.contains(this.containers[e].element[0],c.element[0])){continue}c=this.containers[e]
f=e}else{if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",t,this._uiHash(this))
this.containers[e].containerCache.over=0}}}if(!c){return}if(this.containers.length===1){this.containers[f]._trigger("over",t,this._uiHash(this))
this.containers[f].containerCache.over=1}else{s=1e4
o=null
r=this.containers[f].floating?"left":"top"
n=this.containers[f].floating?"width":"height"
h=this.positionAbs[r]+this.offset.click[r]
for(i=this.items.length-1;i>=0;i--){if(!$.contains(this.containers[f].element[0],this.items[i].item[0])){continue}if(this.items[i].item[0]===this.currentItem[0]){continue}l=this.items[i].item.offset()[r]
a=false
if(Math.abs(l-h)>Math.abs(l+this.items[i][n]-h)){a=true
l+=this.items[i][n]}if(Math.abs(l-h)<s){s=Math.abs(l-h)
o=this.items[i]
this.direction=a?"up":"down"}}if(!o&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[f]
o?this._rearrange(t,o,null,true):this._rearrange(t,null,this.containers[f].element,true)
this._trigger("change",t,this._uiHash())
this.containers[f]._trigger("change",t,this._uiHash(this))
this.options.placeholder.update(this.currentContainer,this.placeholder)
this.containers[f]._trigger("over",t,this._uiHash(this))
this.containers[f].containerCache.over=1}},_createHelper:function(t){var e=this.options,i=$.isFunction(e.helper)?$(e.helper.apply(this.element[0],[t,this.currentItem])):e.helper==="clone"?this.currentItem.clone():this.currentItem
if(!i.parents("body").length){$(e.appendTo!=="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0])}if(i[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!i[0].style.width||e.forceHelperSize){i.width(this.currentItem.width())}if(!i[0].style.height||e.forceHelperSize){i.height(this.currentItem.height())}return i},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if($.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent()
var t=this.offsetParent.offset()
if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft()
t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position()
return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,s=this.options
if(s.containment==="parent"){s.containment=this.helper[0].parentNode}if(s.containment==="document"||s.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(s.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(s.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(s.containment)){t=$(s.containment)[0]
e=$(s.containment).offset()
i=$(t).css("overflow")!=="hidden"
this.containment=[e.left+(parseInt($(t).css("borderLeftWidth"),10)||0)+(parseInt($(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt($(t).css("borderTopWidth"),10)||0)+(parseInt($(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt($(t).css("borderLeftWidth"),10)||0)-(parseInt($(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt($(t).css("borderTopWidth"),10)||0)-(parseInt($(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,e){if(!e){e=this.position}var i=t==="absolute"?1:-1,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,o=/(html|body)/i.test(s[0].tagName)
return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*i}},_generatePosition:function(t){var e,i,s=this.options,o=t.pageX,r=t.pageY,n=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(n[0].tagName)
if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){o=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){r=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){o=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){r=this.containment[3]+this.offset.click.top}}if(s.grid){e=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1]
r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-s.grid[1]:e+s.grid[1]:e
i=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0]
o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():h?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:n.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?e.item[0]:e.item[0].nextSibling)
this.counter=this.counter?++this.counter:1
var o=this.counter
this._delay(function(){if(o===this.counter){this.refreshPositions(!s)}})},_clear:function(t,e){this.reverting=false
var i,s=[]
if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null
if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!e){s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!e){s.push(function(t){this._trigger("update",t,this._uiHash())})}if(this!==this.currentContainer){if(!e){s.push(function(t){this._trigger("remove",t,this._uiHash())})
s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer))
s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))}}for(i=this.containers.length-1;i>=0;i--){if(!e){s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i]))}if(this.containers[i].containerCache.over){s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i]))
this.containers[i].containerCache.over=0}}if(this._storedCursor){$("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false
if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",t,this._uiHash())
for(i=0;i<s.length;i++){s[i].call(this,t)}this._trigger("stop",t,this._uiHash())}this.fromOutside=false
return false}if(!e){this._trigger("beforeStop",t,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0])
if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null
if(!e){for(i=0;i<s.length;i++){s[i].call(this,t)}this._trigger("stop",t,this._uiHash())}this.fromOutside=false
return true},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(t){var e=t||this
return{helper:e.helper,placeholder:e.placeholder||$([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})})(jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.selectable.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.core.js");
__KA_require("./jquery.ui.widget.js");
__KA_require("./jquery.ui.mouse.js");
(function($,e){$.widget("ui.selectable",$.ui.mouse,{version:"1.10.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,t=this
this.element.addClass("ui-selectable")
this.dragged=false
this.refresh=function(){e=$(t.options.filter,t.element[0])
e.addClass("ui-selectee")
e.each(function(){var e=$(this),t=e.offset()
$.data(this,"selectable-item",{element:this,$element:e,left:t.left,top:t.top,right:t.left+e.outerWidth(),bottom:t.top+e.outerHeight(),startselected:false,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})}
this.refresh()
this.selectees=e.addClass("ui-selectee")
this._mouseInit()
this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item")
this.element.removeClass("ui-selectable ui-selectable-disabled")
this._mouseDestroy()},_mouseStart:function(e){var t=this,s=this.options
this.opos=[e.pageX,e.pageY]
if(this.options.disabled){return}this.selectees=$(s.filter,this.element[0])
this._trigger("start",e)
$(s.appendTo).append(this.helper)
this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0})
if(s.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var s=$.data(this,"selectable-item")
s.startselected=true
if(!e.metaKey&&!e.ctrlKey){s.$element.removeClass("ui-selected")
s.selected=false
s.$element.addClass("ui-unselecting")
s.unselecting=true
t._trigger("unselecting",e,{unselecting:s.element})}})
$(e.target).parents().addBack().each(function(){var s,l=$.data(this,"selectable-item")
if(l){s=!e.metaKey&&!e.ctrlKey||!l.$element.hasClass("ui-selected")
l.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting")
l.unselecting=!s
l.selecting=s
l.selected=s
if(s){t._trigger("selecting",e,{selecting:l.element})}else{t._trigger("unselecting",e,{unselecting:l.element})}return false}})},_mouseDrag:function(e){this.dragged=true
if(this.options.disabled){return}var t,s=this,l=this.options,i=this.opos[0],n=this.opos[1],a=e.pageX,c=e.pageY
if(i>a){t=a
a=i
i=t}if(n>c){t=c
c=n
n=t}this.helper.css({left:i,top:n,width:a-i,height:c-n})
this.selectees.each(function(){var t=$.data(this,"selectable-item"),r=false
if(!t||t.element===s.element[0]){return}if(l.tolerance==="touch"){r=!(t.left>a||t.right<i||t.top>c||t.bottom<n)}else if(l.tolerance==="fit"){r=t.left>i&&t.right<a&&t.top>n&&t.bottom<c}if(r){if(t.selected){t.$element.removeClass("ui-selected")
t.selected=false}if(t.unselecting){t.$element.removeClass("ui-unselecting")
t.unselecting=false}if(!t.selecting){t.$element.addClass("ui-selecting")
t.selecting=true
s._trigger("selecting",e,{selecting:t.element})}}else{if(t.selecting){if((e.metaKey||e.ctrlKey)&&t.startselected){t.$element.removeClass("ui-selecting")
t.selecting=false
t.$element.addClass("ui-selected")
t.selected=true}else{t.$element.removeClass("ui-selecting")
t.selecting=false
if(t.startselected){t.$element.addClass("ui-unselecting")
t.unselecting=true}s._trigger("unselecting",e,{unselecting:t.element})}}if(t.selected){if(!e.metaKey&&!e.ctrlKey&&!t.startselected){t.$element.removeClass("ui-selected")
t.selected=false
t.$element.addClass("ui-unselecting")
t.unselecting=true
s._trigger("unselecting",e,{unselecting:t.element})}}}})
return false},_mouseStop:function(e){var t=this
this.dragged=false
$(".ui-unselecting",this.element[0]).each(function(){var s=$.data(this,"selectable-item")
s.$element.removeClass("ui-unselecting")
s.unselecting=false
s.startselected=false
t._trigger("unselected",e,{unselected:s.element})})
$(".ui-selecting",this.element[0]).each(function(){var s=$.data(this,"selectable-item")
s.$element.removeClass("ui-selecting").addClass("ui-selected")
s.selecting=false
s.selected=true
s.startselected=true
t._trigger("selected",e,{selected:s.element})})
this._trigger("stop",e)
this.helper.remove()
return false}})})(jQuery)
});
KAdefine("third_party/javascript-khansrc/jqueryui/jquery.ui.droppable.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../javascript/node_modules/jquery/index.js");
__KA_require("./jquery.ui.core.js");
__KA_require("./jquery.ui.widget.js");
__KA_require("./jquery.ui.mouse.js");
__KA_require("./jquery.ui.draggable.js");
(function($,e){function t(e,t,i){return e>t&&e<t+i}$.widget("ui.droppable",{version:"1.10.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,t=e.accept
this.isover=false
this.isout=true
this.accept=$.isFunction(t)?t:function(e){return e.is(t)}
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}
$.ui.ddmanager.droppables[e.scope]=$.ui.ddmanager.droppables[e.scope]||[]
$.ui.ddmanager.droppables[e.scope].push(this)
e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var e=0,t=$.ui.ddmanager.droppables[this.options.scope]
for(;e<t.length;e++){if(t[e]===this){t.splice(e,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,t){if(e==="accept"){this.accept=$.isFunction(t)?t:function(e){return e.is(t)}}$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var t=$.ui.ddmanager.current
if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(t){this._trigger("activate",e,this.ui(t))}},_deactivate:function(e){var t=$.ui.ddmanager.current
if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(t){this._trigger("deactivate",e,this.ui(t))}},_over:function(e){var t=$.ui.ddmanager.current
if(!t||(t.currentItem||t.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],t.currentItem||t.element)){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",e,this.ui(t))}},_out:function(e){var t=$.ui.ddmanager.current
if(!t||(t.currentItem||t.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],t.currentItem||t.element)){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",e,this.ui(t))}},_drop:function(e,t){var i=t||$.ui.ddmanager.current,s=false
if(!i||(i.currentItem||i.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=$.data(this,"ui-droppable")
if(e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&$.ui.intersect(i,$.extend(e,{offset:e.element.offset()}),e.options.tolerance)){s=true
return false}})
if(s){return false}if(this.accept.call(this.element[0],i.currentItem||i.element)){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",e,this.ui(i))
return this.element}return false},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}})
$.ui.intersect=function(e,i,s){if(!i.offset){return false}var o,r,n=(e.positionAbs||e.position.absolute).left,a=n+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,p=l+e.helperProportions.height,u=i.offset.left,h=u+i.proportions.width,c=i.offset.top,f=c+i.proportions.height
switch(s){case"fit":return u<=n&&a<=h&&c<=l&&p<=f
case"intersect":return u<n+e.helperProportions.width/2&&a-e.helperProportions.width/2<h&&c<l+e.helperProportions.height/2&&p-e.helperProportions.height/2<f
case"pointer":o=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left
r=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top
return t(r,c,i.proportions.height)&&t(o,u,i.proportions.width)
case"touch":return(l>=c&&l<=f||p>=c&&p<=f||l<c&&p>f)&&(n>=u&&n<=h||a>=u&&a<=h||n<u&&a>h)
default:return false}}
$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,t){var i,s,o=$.ui.ddmanager.droppables[e.options.scope]||[],r=t?t.type:null,n=(e.currentItem||e.element).find(":data(ui-droppable)").addBack()
e:for(i=0;i<o.length;i++){if(o[i].options.disabled||e&&!o[i].accept.call(o[i].element[0],e.currentItem||e.element)){continue}for(s=0;s<n.length;s++){if(n[s]===o[i].element[0]){o[i].proportions.height=0
continue e}}o[i].visible=o[i].element.css("display")!=="none"
if(!o[i].visible){continue}if(r==="mousedown"){o[i]._activate.call(o[i],t)}o[i].offset=o[i].element.offset()
o[i].proportions={width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}}},drop:function(e,t){var i=false
$.each($.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&$.ui.intersect(e,this,this.options.tolerance)){i=this._drop.call(this,t)||i}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=true
this.isover=false
this._deactivate.call(this,t)}})
return i},dragStart:function(e,t){e.element.parentsUntil("body").bind("scroll.droppable",function(){if(!e.options.refreshPositions){$.ui.ddmanager.prepareOffsets(e,t)}})},drag:function(e,t){if(e.options.refreshPositions){$.ui.ddmanager.prepareOffsets(e,t)}$.each($.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var i,s,o,r=$.ui.intersect(e,this,this.options.tolerance),n=!r&&this.isover?"isout":r&&!this.isover?"isover":null
if(!n){return}if(this.options.greedy){s=this.options.scope
o=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===s})
if(o.length){i=$.data(o[0],"ui-droppable")
i.greedyChild=n==="isover"}}if(i&&n==="isover"){i.isover=false
i.isout=true
i._out.call(i,t)}this[n]=true
this[n==="isout"?"isover":"isout"]=false
this[n==="isover"?"_over":"_out"].call(this,t)
if(i&&n==="isout"){i.isout=false
i.isover=true
i._over.call(i,t)}})},dragStop:function(e,t){e.element.parentsUntil("body").unbind("scroll.droppable")
if(!e.options.refreshPositions){$.ui.ddmanager.prepareOffsets(e,t)}}}})(jQuery)
});
KAdefine("third_party/javascript-khansrc/live-editor/build/external/structuredjs/external/esprima.js", function(__KA_require, __KA_module, __KA_exports) {
(function(e,t){"use strict"
if(typeof define==="function"&&define.amd){define(["exports"],t)}else if(typeof exports!=="undefined"){t(exports)}else{t(e.esprima={})}})(this,function(e){"use strict"
var t,r,n,a,i,o,c,u,l,s,f,p,m,d,y,h,S,k
t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}
r={}
r[t.BooleanLiteral]="Boolean"
r[t.EOF]="<end>"
r[t.Identifier]="Identifier"
r[t.Keyword]="Keyword"
r[t.NullLiteral]="Null"
r[t.NumericLiteral]="Numeric"
r[t.Punctuator]="Punctuator"
r[t.StringLiteral]="String"
r[t.RegularExpression]="RegularExpression"
n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="]
a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"}
i={Data:1,Get:2,Set:4}
o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"}
c={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")}
function g(e,t){if(!e){throw new Error("ASSERT: "+t)}}function v(e){return e>=48&&e<=57}function b(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function E(e){return"01234567".indexOf(e)>=0}function x(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&" ᠎             　﻿".indexOf(String.fromCharCode(e))>0}function w(e){return e===10||e===13||e===8232||e===8233}function I(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&c.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function C(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&c.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function L(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return true
default:return false}}function A(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true
default:return false}}function P(e){return e==="eval"||e==="arguments"}function N(e){if(s&&A(e)){return true}switch(e.length){case 2:return e==="if"||e==="in"||e==="do"
case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let"
case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum"
case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super"
case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import"
case 7:return e==="default"||e==="finally"||e==="extends"
case 8:return e==="function"||e==="continue"||e==="debugger"
case 10:return e==="instanceof"
default:return false}}function O(e,t,r,n,a){var i
g(typeof r==="number","Comment must have valid position")
if(S.lastCommentStart>=r){return}S.lastCommentStart=r
i={type:e,value:t}
if(k.range){i.range=[r,n]}if(k.loc){i.loc=a}k.comments.push(i)}function U(){var e,t,r,n
e=f-2
t={start:{line:p,column:f-m-2}}
while(f<d){r=l.charCodeAt(f);++f
if(w(r)){if(k.comments){n=l.slice(e+2,f-1)
t.end={line:p,column:f-m-1}
O("Line",n,e,f-1,t)}if(r===13&&l.charCodeAt(f)===10){++f}++p
m=f
return}}if(k.comments){n=l.slice(e+2,f)
t.end={line:p,column:f-m}
O("Line",n,e,f,t)}}function F(){var e,t,r,n
if(k.comments){e=f-2
t={start:{line:p,column:f-m-2}}}while(f<d){r=l.charCodeAt(f)
if(w(r)){if(r===13&&l.charCodeAt(f+1)===10){++f}++p;++f
m=f
if(f>=d){et({},o.UnexpectedToken,"ILLEGAL")}}else if(r===42){if(l.charCodeAt(f+1)===47){++f;++f
if(k.comments){n=l.slice(e+2,f-2)
t.end={line:p,column:f-m}
O("Block",n,e,f,t)}return}++f}else{++f}}et({},o.UnexpectedToken,"ILLEGAL")}function D(){var e
while(f<d){e=l.charCodeAt(f)
if(x(e)){++f}else if(w(e)){++f
if(e===13&&l.charCodeAt(f)===10){++f}++p
m=f}else if(e===47){e=l.charCodeAt(f+1)
if(e===47){++f;++f
U()}else if(e===42){++f;++f
F()}else{break}}else{break}}}function T(e){var t,r,n,a=0
r=e==="u"?4:2
for(t=0;t<r;++t){if(f<d&&b(l[f])){n=l[f++]
a=a*16+"0123456789abcdef".indexOf(n.toLowerCase())}else{return""}}return String.fromCharCode(a)}function B(){var e,t
e=l.charCodeAt(f++)
t=String.fromCharCode(e)
if(e===92){if(l.charCodeAt(f)!==117){et({},o.UnexpectedToken,"ILLEGAL")}++f
e=T("u")
if(!e||e==="\\"||!I(e.charCodeAt(0))){et({},o.UnexpectedToken,"ILLEGAL")}t=e}while(f<d){e=l.charCodeAt(f)
if(!C(e)){break}++f
t+=String.fromCharCode(e)
if(e===92){t=t.substr(0,t.length-1)
if(l.charCodeAt(f)!==117){et({},o.UnexpectedToken,"ILLEGAL")}++f
e=T("u")
if(!e||e==="\\"||!C(e.charCodeAt(0))){et({},o.UnexpectedToken,"ILLEGAL")}t+=e}}return t}function R(){var e,t
e=f++
while(f<d){t=l.charCodeAt(f)
if(t===92){f=e
return B()}if(C(t)){++f}else{break}}return l.slice(e,f)}function W(){var e,r,n
e=f
r=l.charCodeAt(f)===92?B():R()
if(r.length===1){n=t.Identifier}else if(N(r)){n=t.Keyword}else if(r==="null"){n=t.NullLiteral}else if(r==="true"||r==="false"){n=t.BooleanLiteral}else{n=t.Identifier}return{type:n,value:r,lineNumber:p,lineStart:m,range:[e,f]}}function j(){var e=f,r=l.charCodeAt(f),n,a=l[f],i,c,u
switch(r){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:++f
if(k.tokenize){if(r===40){k.openParenToken=k.tokens.length}else if(r===123){k.openCurlyToken=k.tokens.length}}return{type:t.Punctuator,value:String.fromCharCode(r),lineNumber:p,lineStart:m,range:[e,f]}
default:n=l.charCodeAt(f+1)
if(n===61){switch(r){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:f+=2
return{type:t.Punctuator,value:String.fromCharCode(r)+String.fromCharCode(n),lineNumber:p,lineStart:m,range:[e,f]}
case 33:case 61:f+=2
if(l.charCodeAt(f)===61){++f}return{type:t.Punctuator,value:l.slice(e,f),lineNumber:p,lineStart:m,range:[e,f]}
default:break}}break}i=l[f+1]
c=l[f+2]
u=l[f+3]
if(a===">"&&i===">"&&c===">"){if(u==="="){f+=4
return{type:t.Punctuator,value:">>>=",lineNumber:p,lineStart:m,range:[e,f]}}}if(a===">"&&i===">"&&c===">"){f+=3
return{type:t.Punctuator,value:">>>",lineNumber:p,lineStart:m,range:[e,f]}}if(a==="<"&&i==="<"&&c==="="){f+=3
return{type:t.Punctuator,value:"<<=",lineNumber:p,lineStart:m,range:[e,f]}}if(a===">"&&i===">"&&c==="="){f+=3
return{type:t.Punctuator,value:">>=",lineNumber:p,lineStart:m,range:[e,f]}}if(a===i&&"+-<>&|".indexOf(a)>=0){f+=2
return{type:t.Punctuator,value:a+i,lineNumber:p,lineStart:m,range:[e,f]}}if("<>=!+-*%&|^/".indexOf(a)>=0){++f
return{type:t.Punctuator,value:a,lineNumber:p,lineStart:m,range:[e,f]}}et({},o.UnexpectedToken,"ILLEGAL")}function G(e){var r=""
while(f<d){if(!b(l[f])){break}r+=l[f++]}if(r.length===0){et({},o.UnexpectedToken,"ILLEGAL")}if(I(l.charCodeAt(f))){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:p,lineStart:m,range:[e,f]}}function K(e){var r="0"+l[f++]
while(f<d){if(!E(l[f])){break}r+=l[f++]}if(I(l.charCodeAt(f))||v(l.charCodeAt(f))){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.NumericLiteral,value:parseInt(r,8),octal:true,lineNumber:p,lineStart:m,range:[e,f]}}function V(){var e,r,n
n=l[f]
g(v(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point")
r=f
e=""
if(n!=="."){e=l[f++]
n=l[f]
if(e==="0"){if(n==="x"||n==="X"){++f
return G(r)}if(E(n)){return K(r)}if(n&&v(n.charCodeAt(0))){et({},o.UnexpectedToken,"ILLEGAL")}}while(v(l.charCodeAt(f))){e+=l[f++]}n=l[f]}if(n==="."){e+=l[f++]
while(v(l.charCodeAt(f))){e+=l[f++]}n=l[f]}if(n==="e"||n==="E"){e+=l[f++]
n=l[f]
if(n==="+"||n==="-"){e+=l[f++]}if(v(l.charCodeAt(f))){while(v(l.charCodeAt(f))){e+=l[f++]}}else{et({},o.UnexpectedToken,"ILLEGAL")}}if(I(l.charCodeAt(f))){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.NumericLiteral,value:parseFloat(e),lineNumber:p,lineStart:m,range:[r,f]}}function M(){var e="",r,n,a,i,c,u,s=false
r=l[f]
g(r==="'"||r==='"',"String literal must starts with a quote")
n=f;++f
while(f<d){a=l[f++]
if(a===r){r=""
break}else if(a==="\\"){a=l[f++]
if(!a||!w(a.charCodeAt(0))){switch(a){case"n":e+="\n"
break
case"r":e+="\r"
break
case"t":e+="	"
break
case"u":case"x":u=f
c=T(a)
if(c){e+=c}else{f=u
e+=a}break
case"b":e+="\b"
break
case"f":e+="\f"
break
case"v":e+=""
break
default:if(E(a)){i="01234567".indexOf(a)
if(i!==0){s=true}if(f<d&&E(l[f])){s=true
i=i*8+"01234567".indexOf(l[f++])
if("0123".indexOf(a)>=0&&f<d&&E(l[f])){i=i*8+"01234567".indexOf(l[f++])}}e+=String.fromCharCode(i)}else{e+=a}break}}else{++p
if(a==="\r"&&l[f]==="\n"){++f}}}else if(w(a.charCodeAt(0))){break}else{e+=a}}if(r!==""){et({},o.UnexpectedToken,"ILLEGAL")}return{type:t.StringLiteral,value:e,octal:s,lineNumber:p,lineStart:m,range:[n,f]}}function H(){var e,r,n,a,i,c,u=false,s,y=false
h=null
D()
n=f
r=l[f]
g(r==="/","Regular expression literal must start with a slash")
e=l[f++]
while(f<d){r=l[f++]
e+=r
if(u){if(r==="]"){u=false}}else{if(r==="\\"){r=l[f++]
if(w(r.charCodeAt(0))){et({},o.UnterminatedRegExp)}e+=r}else if(r==="/"){y=true
break}else if(r==="["){u=true}else if(w(r.charCodeAt(0))){et({},o.UnterminatedRegExp)}}}if(!y){et({},o.UnterminatedRegExp)}a=e.substr(1,e.length-2)
i=""
while(f<d){r=l[f]
if(!C(r.charCodeAt(0))){break}++f
if(r==="\\"&&f<d){r=l[f]
if(r==="u"){++f
s=f
r=T("u")
if(r){i+=r
for(e+="\\u";s<f;++s){e+=l[s]}}else{f=s
i+="u"
e+="\\u"}}else{e+="\\"}}else{i+=r
e+=r}}try{c=new RegExp(a,i)}catch(S){et({},o.InvalidRegExp)}Z()
if(k.tokenize){return{type:t.RegularExpression,value:c,lineNumber:p,lineStart:m,range:[n,f]}}return{literal:e,value:c,range:[n,f]}}function q(){var e,t,r,n
D()
e=f
t={start:{line:p,column:f-m}}
r=H()
t.end={line:p,column:f-m}
if(!k.tokenize){if(k.tokens.length>0){n=k.tokens[k.tokens.length-1]
if(n.range[0]===e&&n.type==="Punctuator"){if(n.value==="/"||n.value==="/="){k.tokens.pop()}}}k.tokens.push({type:"RegularExpression",value:r.literal,range:[e,f],loc:t})}return r}function z(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function X(){var e,t
e=k.tokens[k.tokens.length-1]
if(!e){return q()}if(e.type==="Punctuator"){if(e.value===")"){t=k.tokens[k.openParenToken-1]
if(t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")){return q()}return j()}if(e.value==="}"){if(k.tokens[k.openCurlyToken-3]&&k.tokens[k.openCurlyToken-3].type==="Keyword"){t=k.tokens[k.openCurlyToken-4]
if(!t){return j()}}else if(k.tokens[k.openCurlyToken-4]&&k.tokens[k.openCurlyToken-4].type==="Keyword"){t=k.tokens[k.openCurlyToken-5]
if(!t){return q()}}else{return j()}if(n.indexOf(t.value)>=0){return j()}return q()}return q()}if(e.type==="Keyword"){return q()}return j()}function J(){var e
D()
if(f>=d){return{type:t.EOF,lineNumber:p,lineStart:m,range:[f,f]}}e=l.charCodeAt(f)
if(e===40||e===41||e===58){return j()}if(e===39||e===34){return M()}if(I(e)){return W()}if(e===46){if(v(l.charCodeAt(f+1))){return V()}return j()}if(v(e)){return V()}if(k.tokenize&&e===47){return X()}return j()}function Q(){var e,n,a,i,o
D()
e=f
n={start:{line:p,column:f-m}}
a=J()
n.end={line:p,column:f-m}
if(a.type!==t.EOF){i=[a.range[0],a.range[1]]
o=l.slice(a.range[0],a.range[1])
k.tokens.push({type:r[a.type],value:o,range:i,loc:n})}return a}function Y(){var e
e=h
f=e.range[1]
p=e.lineNumber
m=e.lineStart
h=typeof k.tokens!=="undefined"?Q():J()
f=e.range[1]
p=e.lineNumber
m=e.lineStart
return e}function Z(){var e,t,r
e=f
t=p
r=m
h=typeof k.tokens!=="undefined"?Q():J()
f=e
p=t
m=r}u={name:"SyntaxTree",markStart:function(){if(k.loc){S.markerStack.push(f-m)
S.markerStack.push(p)}if(k.range){S.markerStack.push(f)}},markEnd:function(e){if(k.range){e.range=[S.markerStack.pop(),f]}if(k.loc){e.loc={start:{line:S.markerStack.pop(),column:S.markerStack.pop()},end:{line:p,column:f-m}}
this.postProcess(e)}return e},markEndIf:function(e){if(e.range||e.loc){if(k.loc){S.markerStack.pop()
S.markerStack.pop()}if(k.range){S.markerStack.pop()}}else{this.markEnd(e)}return e},postProcess:function(e){if(k.source){e.loc.source=k.source}return e},createArrayExpression:function(e){return{type:a.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:a.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){var n=e==="||"||e==="&&"?a.LogicalExpression:a.BinaryExpression
return{type:n,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:a.BlockStatement,body:e}},createBreakStatement:function(e){return{type:a.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:a.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:a.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:a.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:a.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:a.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(e){return{type:a.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:a.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:a.ForInStatement,left:e,right:t,body:r,each:false}},createFunctionDeclaration:function(e,t,r,n){return{type:a.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:false,expression:false}},createFunctionExpression:function(e,t,r,n){return{type:a.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:false,expression:false}},createIdentifier:function(e){return{type:a.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:a.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:a.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:a.Literal,value:e.value,raw:l.slice(e.range[0],e.range[1])}},createMemberExpression:function(e,t,r){return{type:a.MemberExpression,computed:e==="[",object:t,property:r}},createNewExpression:function(e,t){return{type:a.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:a.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:a.UpdateExpression,operator:e,argument:t,prefix:false}},createProgram:function(e){return{type:a.Program,body:e}},createProperty:function(e,t,r){return{type:a.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:a.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:a.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:a.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:a.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(e){return{type:a.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:a.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){if(e==="++"||e==="--"){return{type:a.UpdateExpression,operator:e,argument:t,prefix:true}}return{type:a.UnaryExpression,operator:e,argument:t,prefix:true}},createVariableDeclaration:function(e,t){return{type:a.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:a.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:a.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:a.WithStatement,object:e,body:t}}}
function _(){var e,t,r,n
e=f
t=p
r=m
D()
n=p!==t
f=e
p=t
m=r
return n}function et(e,t){var r,n=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,function(e,t){g(t<n.length,"Message reference must be in range")
return n[t]})
if(typeof e.lineNumber==="number"){r=new Error("Line "+e.lineNumber+": "+a)
r.index=e.range[0]
r.lineNumber=e.lineNumber
r.column=e.range[0]-m+1}else{r=new Error("Line "+p+": "+a)
r.index=f
r.lineNumber=p
r.column=f-m+1}r.description=a
throw r}function tt(){try{et.apply(null,arguments)}catch(e){if(k.errors){k.errors.push(e)}else{throw e}}}function rt(e){if(e.type===t.EOF){et(e,o.UnexpectedEOS)}if(e.type===t.NumericLiteral){et(e,o.UnexpectedNumber)}if(e.type===t.StringLiteral){et(e,o.UnexpectedString)}if(e.type===t.Identifier){et(e,o.UnexpectedIdentifier)}if(e.type===t.Keyword){if(L(e.value)){et(e,o.UnexpectedReserved)}else if(s&&A(e.value)){tt(e,o.StrictReservedWord)
return}et(e,o.UnexpectedToken,e.value)}et(e,o.UnexpectedToken,e.value)}function nt(e){var r=Y()
if(r.type!==t.Punctuator||r.value!==e){rt(r)}}function at(e){var r=Y()
if(r.type!==t.Keyword||r.value!==e){rt(r)}}function it(e){return h.type===t.Punctuator&&h.value===e}function ot(e){return h.type===t.Keyword&&h.value===e}function ct(){var e
if(h.type!==t.Punctuator){return false}e=h.value
return e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|="}function ut(){var e
if(l.charCodeAt(f)===59){Y()
return}e=p
D()
if(p!==e){return}if(it(";")){Y()
return}if(h.type!==t.EOF&&!it("}")){rt(h)}}function lt(e){return e.type===a.Identifier||e.type===a.MemberExpression}function st(){var e=[]
nt("[")
while(!it("]")){if(it(",")){Y()
e.push(null)}else{e.push(Pt())
if(!it("]")){nt(",")}}}nt("]")
return y.createArrayExpression(e)}function ft(e,t){var r,n
r=s
D()
y.markStart()
n=rr()
if(t&&s&&P(e[0].name)){tt(t,o.StrictParamName)}s=r
return y.markEnd(y.createFunctionExpression(null,e,[],n))}function pt(){var e
D()
y.markStart()
e=Y()
if(e.type===t.StringLiteral||e.type===t.NumericLiteral){if(s&&e.octal){tt(e,o.StrictOctalLiteral)}return y.markEnd(y.createLiteral(e))}return y.markEnd(y.createIdentifier(e.value))}function mt(){var e,r,n,a,i
e=h
D()
y.markStart()
if(e.type===t.Identifier){n=pt()
if(e.value==="get"&&!it(":")){r=pt()
nt("(")
nt(")")
a=ft([])
return y.markEnd(y.createProperty("get",r,a))}if(e.value==="set"&&!it(":")){r=pt()
nt("(")
e=h
if(e.type!==t.Identifier){nt(")")
tt(e,o.UnexpectedToken,e.value)
a=ft([])}else{i=[Ft()]
nt(")")
a=ft(i,e)}return y.markEnd(y.createProperty("set",r,a))}nt(":")
a=Pt()
return y.markEnd(y.createProperty("init",n,a))}if(e.type===t.EOF||e.type===t.Punctuator){rt(e)}else{r=pt()
nt(":")
a=Pt()
return y.markEnd(y.createProperty("init",r,a))}}function dt(){var e=[],t,r,n,c,u={},l=String
nt("{")
while(!it("}")){t=mt()
if(t.key.type===a.Identifier){r=t.key.name}else{r=l(t.key.value)}c=t.kind==="init"?i.Data:t.kind==="get"?i.Get:i.Set
n="$"+r
if(Object.prototype.hasOwnProperty.call(u,n)){if(u[n]===i.Data){if(s&&c===i.Data){tt({},o.StrictDuplicateProperty)}else if(c!==i.Data){tt({},o.AccessorDataProperty)}}else{if(c===i.Data){tt({},o.AccessorDataProperty)}else if(u[n]&c){tt({},o.AccessorGetSet)}}u[n]|=c}else{u[n]=c}e.push(t)
if(!it("}")){nt(",")}}nt("}")
return y.createObjectExpression(e)}function yt(){var e
nt("(")
e=Nt()
nt(")")
return e}function ht(){var e,r,n
if(it("(")){return yt()}e=h.type
y.markStart()
if(e===t.Identifier){n=y.createIdentifier(Y().value)}else if(e===t.StringLiteral||e===t.NumericLiteral){if(s&&h.octal){tt(h,o.StrictOctalLiteral)}n=y.createLiteral(Y())}else if(e===t.Keyword){if(ot("this")){Y()
n=y.createThisExpression()}else if(ot("function")){n=ir()}}else if(e===t.BooleanLiteral){r=Y()
r.value=r.value==="true"
n=y.createLiteral(r)}else if(e===t.NullLiteral){r=Y()
r.value=null
n=y.createLiteral(r)}else if(it("[")){n=st()}else if(it("{")){n=dt()}else if(it("/")||it("/=")){if(typeof k.tokens!=="undefined"){n=y.createLiteral(q())}else{n=y.createLiteral(H())}}if(n){return y.markEnd(n)}rt(Y())}function St(){var e=[]
nt("(")
if(!it(")")){while(f<d){e.push(Pt())
if(it(")")){break}nt(",")}}nt(")")
return e}function kt(){var e
y.markStart()
e=Y()
if(!z(e)){rt(e)}return y.markEnd(y.createIdentifier(e.value))}function gt(){nt(".")
return kt()}function vt(){var e
nt("[")
e=Nt()
nt("]")
return e}function bt(){var e,t
y.markStart()
at("new")
e=xt()
t=it("(")?St():[]
return y.markEnd(y.createNewExpression(e,t))}function Et(){var e,t,r,n
e=fr()
t=ot("new")?bt():ht()
while(it(".")||it("[")||it("(")){if(it("(")){r=St()
t=y.createCallExpression(t,r)}else if(it("[")){n=vt()
t=y.createMemberExpression("[",t,n)}else{n=gt()
t=y.createMemberExpression(".",t,n)}if(e){e.end()
e.apply(t)}}return t}function xt(){var e,t,r
e=fr()
t=ot("new")?bt():ht()
while(it(".")||it("[")){if(it("[")){r=vt()
t=y.createMemberExpression("[",t,r)}else{r=gt()
t=y.createMemberExpression(".",t,r)}if(e){e.end()
e.apply(t)}}return t}function wt(){var e,r
y.markStart()
e=Et()
if(h.type===t.Punctuator){if((it("++")||it("--"))&&!_()){if(s&&e.type===a.Identifier&&P(e.name)){tt({},o.StrictLHSPostfix)}if(!lt(e)){et({},o.InvalidLHSInAssignment)}r=Y()
e=y.createPostfixExpression(r.value,e)}}return y.markEndIf(e)}function It(){var e,r
y.markStart()
if(h.type!==t.Punctuator&&h.type!==t.Keyword){r=wt()}else if(it("++")||it("--")){e=Y()
r=It()
if(s&&r.type===a.Identifier&&P(r.name)){tt({},o.StrictLHSPrefix)}if(!lt(r)){et({},o.InvalidLHSInAssignment)}r=y.createUnaryExpression(e.value,r)}else if(it("+")||it("-")||it("~")||it("!")){e=Y()
r=It()
r=y.createUnaryExpression(e.value,r)}else if(ot("delete")||ot("void")||ot("typeof")){e=Y()
r=It()
r=y.createUnaryExpression(e.value,r)
if(s&&r.operator==="delete"&&r.argument.type===a.Identifier){tt({},o.StrictDelete)}}else{r=wt()}return y.markEndIf(r)}function Ct(e,r){var n=0
if(e.type!==t.Punctuator&&e.type!==t.Keyword){return 0}switch(e.value){case"||":n=1
break
case"&&":n=2
break
case"|":n=3
break
case"^":n=4
break
case"&":n=5
break
case"==":case"!=":case"===":case"!==":n=6
break
case"<":case">":case"<=":case">=":case"instanceof":n=7
break
case"in":n=r?7:0
break
case"<<":case">>":case">>>":n=8
break
case"+":case"-":n=9
break
case"*":case"/":case"%":n=11
break
default:break}return n}function Lt(){var e,t,r,n,a,i,o,c,u,l,s
i=S.allowIn
S.allowIn=true
e=fr()
l=It()
n=h
a=Ct(n,i)
if(a===0){return l}n.prec=a
Y()
t=[e,fr()]
c=It()
o=[l,n,c]
while((a=Ct(h,i))>0){while(o.length>2&&a<=o[o.length-2].prec){c=o.pop()
u=o.pop().value
l=o.pop()
r=y.createBinaryExpression(u,l,c)
t.pop()
e=t.pop()
if(e){e.end()
e.apply(r)}o.push(r)
t.push(e)}n=Y()
n.prec=a
o.push(n)
t.push(fr())
r=It()
o.push(r)}S.allowIn=i
s=o.length-1
r=o[s]
t.pop()
while(s>1){r=y.createBinaryExpression(o[s-1].value,o[s-2],r)
s-=2
e=t.pop()
if(e){e.end()
e.apply(r)}}return r}function At(){var e,t,r,n
y.markStart()
e=Lt()
if(it("?")){Y()
t=S.allowIn
S.allowIn=true
r=Pt()
S.allowIn=t
nt(":")
n=Pt()
e=y.markEnd(y.createConditionalExpression(e,r,n))}else{y.markEnd({})}return e}function Pt(){var e,t,r,n
e=h
y.markStart()
n=t=At()
if(ct()){if(!lt(t)){et({},o.InvalidLHSInAssignment)}if(s&&t.type===a.Identifier&&P(t.name)){tt(e,o.StrictLHSAssignment)}e=Y()
r=Pt()
n=y.createAssignmentExpression(e.value,t,r)}return y.markEndIf(n)}function Nt(){var e
y.markStart()
e=Pt()
if(it(",")){e=y.createSequenceExpression([e])
while(f<d){if(!it(",")){break}Y()
e.expressions.push(Pt())}}return y.markEndIf(e)}function Ot(){var e=[],t
while(f<d){if(it("}")){break}t=or()
if(typeof t==="undefined"){break}e.push(t)}return e}function Ut(){var e
D()
y.markStart()
nt("{")
e=Ot()
nt("}")
return y.markEnd(y.createBlockStatement(e))}function Ft(){var e
D()
y.markStart()
e=Y()
if(e.type!==t.Identifier){rt(e)}return y.markEnd(y.createIdentifier(e.value))}function Dt(e){var t=null,r
D()
y.markStart()
r=Ft()
if(s&&P(r.name)){tt({},o.StrictVarName)}if(e==="const"){nt("=")
t=Pt()}else if(it("=")){Y()
t=Pt()}return y.markEnd(y.createVariableDeclarator(r,t))}function Tt(e){var t=[]
do{t.push(Dt(e))
if(!it(",")){break}Y()}while(f<d)
return t}function Bt(){var e
at("var")
e=Tt()
ut()
return y.createVariableDeclaration(e,"var")}function Rt(e){var t
D()
y.markStart()
at(e)
t=Tt(e)
ut()
return y.markEnd(y.createVariableDeclaration(t,e))}function Wt(){nt(";")
return y.createEmptyStatement()}function jt(){var e=Nt()
ut()
return y.createExpressionStatement(e)}function Gt(){var e,t,r
at("if")
nt("(")
e=Nt()
nt(")")
t=tr()
if(ot("else")){Y()
r=tr()}else{r=null}return y.createIfStatement(e,t,r)}function Kt(){var e,t,r
at("do")
r=S.inIteration
S.inIteration=true
e=tr()
S.inIteration=r
at("while")
nt("(")
t=Nt()
nt(")")
if(it(";")){Y()}return y.createDoWhileStatement(e,t)}function Vt(){var e,t,r
at("while")
nt("(")
e=Nt()
nt(")")
r=S.inIteration
S.inIteration=true
t=tr()
S.inIteration=r
return y.createWhileStatement(e,t)}function Mt(){var e,t
y.markStart()
e=Y()
t=Tt()
return y.markEnd(y.createVariableDeclaration(t,e.value))}function Ht(){var e,t,r,n,a,i,c
e=t=r=null
at("for")
nt("(")
if(it(";")){Y()}else{if(ot("var")||ot("let")){S.allowIn=false
e=Mt()
S.allowIn=true
if(e.declarations.length===1&&ot("in")){Y()
n=e
a=Nt()
e=null}}else{S.allowIn=false
e=Nt()
S.allowIn=true
if(ot("in")){if(!lt(e)){et({},o.InvalidLHSInForIn)}Y()
n=e
a=Nt()
e=null}}if(typeof n==="undefined"){nt(";")}}if(typeof n==="undefined"){if(!it(";")){t=Nt()}nt(";")
if(!it(")")){r=Nt()}}nt(")")
c=S.inIteration
S.inIteration=true
i=tr()
S.inIteration=c
return typeof n==="undefined"?y.createForStatement(e,t,r,i):y.createForInStatement(n,a,i)}function qt(){var e=null,r
at("continue")
if(l.charCodeAt(f)===59){Y()
if(!S.inIteration){et({},o.IllegalContinue)}return y.createContinueStatement(null)}if(_()){if(!S.inIteration){et({},o.IllegalContinue)}return y.createContinueStatement(null)}if(h.type===t.Identifier){e=Ft()
r="$"+e.name
if(!Object.prototype.hasOwnProperty.call(S.labelSet,r)){et({},o.UnknownLabel,e.name)}}ut()
if(e===null&&!S.inIteration){et({},o.IllegalContinue)}return y.createContinueStatement(e)}function zt(){var e=null,r
at("break")
if(l.charCodeAt(f)===59){Y()
if(!(S.inIteration||S.inSwitch)){et({},o.IllegalBreak)}return y.createBreakStatement(null)}if(_()){if(!(S.inIteration||S.inSwitch)){et({},o.IllegalBreak)}return y.createBreakStatement(null)}if(h.type===t.Identifier){e=Ft()
r="$"+e.name
if(!Object.prototype.hasOwnProperty.call(S.labelSet,r)){et({},o.UnknownLabel,e.name)}}ut()
if(e===null&&!(S.inIteration||S.inSwitch)){et({},o.IllegalBreak)}return y.createBreakStatement(e)}function $t(){var e=null
at("return")
if(!S.inFunctionBody){tt({},o.IllegalReturn)}if(l.charCodeAt(f)===32){if(I(l.charCodeAt(f+1))){e=Nt()
ut()
return y.createReturnStatement(e)}}if(_()){return y.createReturnStatement(null)}if(!it(";")){if(!it("}")&&h.type!==t.EOF){e=Nt()}}ut()
return y.createReturnStatement(e)}function Xt(){var e,t
if(s){tt({},o.StrictModeWith)}at("with")
nt("(")
e=Nt()
nt(")")
t=tr()
return y.createWithStatement(e,t)}function Jt(){var e,t=[],r
D()
y.markStart()
if(ot("default")){Y()
e=null}else{at("case")
e=Nt()}nt(":")
while(f<d){if(it("}")||ot("default")||ot("case")){break}r=tr()
t.push(r)}return y.markEnd(y.createSwitchCase(e,t))}function Qt(){var e,t,r,n,a
at("switch")
nt("(")
e=Nt()
nt(")")
nt("{")
if(it("}")){Y()
return y.createSwitchStatement(e)}t=[]
n=S.inSwitch
S.inSwitch=true
a=false
while(f<d){if(it("}")){break}r=Jt()
if(r.test===null){if(a){et({},o.MultipleDefaultsInSwitch)}a=true}t.push(r)}S.inSwitch=n
nt("}")
return y.createSwitchStatement(e,t)}function Yt(){var e
at("throw")
if(_()){et({},o.NewlineAfterThrow)}e=Nt()
ut()
return y.createThrowStatement(e)}function Zt(){var e,t
D()
y.markStart()
at("catch")
nt("(")
if(it(")")){rt(h)}e=Ft()
if(s&&P(e.name)){tt({},o.StrictCatchVariable)}nt(")")
t=Ut()
return y.markEnd(y.createCatchClause(e,t))}function _t(){var e,t=[],r=null
at("try")
e=Ut()
if(ot("catch")){t.push(Zt())}if(ot("finally")){Y()
r=Ut()}if(t.length===0&&!r){et({},o.NoCatchOrFinally)}return y.createTryStatement(e,[],t,r)}function er(){at("debugger")
ut()
return y.createDebuggerStatement()}function tr(){var e=h.type,r,n,i
if(e===t.EOF){rt(h)}D()
y.markStart()
if(e===t.Punctuator){switch(h.value){case";":return y.markEnd(Wt())
case"{":return y.markEnd(Ut())
case"(":return y.markEnd(jt())
default:break}}if(e===t.Keyword){switch(h.value){case"break":return y.markEnd(zt())
case"continue":return y.markEnd(qt())
case"debugger":return y.markEnd(er())
case"do":return y.markEnd(Kt())
case"for":return y.markEnd(Ht())
case"function":return y.markEnd(ar())
case"if":return y.markEnd(Gt())
case"return":return y.markEnd($t())
case"switch":return y.markEnd(Qt())
case"throw":return y.markEnd(Yt())
case"try":return y.markEnd(_t())
case"var":return y.markEnd(Bt())
case"while":return y.markEnd(Vt())
case"with":return y.markEnd(Xt())
default:break}}r=Nt()
if(r.type===a.Identifier&&it(":")){Y()
i="$"+r.name
if(Object.prototype.hasOwnProperty.call(S.labelSet,i)){et({},o.Redeclaration,"Label",r.name)}S.labelSet[i]=true
n=tr()
delete S.labelSet[i]
return y.markEnd(y.createLabeledStatement(r,n))}ut()
return y.markEnd(y.createExpressionStatement(r))}function rr(){var e,r=[],n,i,c,u,p,m,k
D()
y.markStart()
nt("{")
while(f<d){if(h.type!==t.StringLiteral){break}n=h
e=or()
r.push(e)
if(e.expression.type!==a.Literal){break}i=l.slice(n.range[0]+1,n.range[1]-1)
if(i==="use strict"){s=true
if(c){tt(c,o.StrictOctalLiteral)}}else{if(!c&&n.octal){c=n}}}u=S.labelSet
p=S.inIteration
m=S.inSwitch
k=S.inFunctionBody
S.labelSet={}
S.inIteration=false
S.inSwitch=false
S.inFunctionBody=true
while(f<d){if(it("}")){break}e=or()
if(typeof e==="undefined"){break}r.push(e)}nt("}")
S.labelSet=u
S.inIteration=p
S.inSwitch=m
S.inFunctionBody=k
return y.markEnd(y.createBlockStatement(r))}function nr(e){var t,r=[],n,a,i,c,u
nt("(")
if(!it(")")){i={}
while(f<d){n=h
t=Ft()
c="$"+n.value
if(s){if(P(n.value)){a=n
u=o.StrictParamName}if(Object.prototype.hasOwnProperty.call(i,c)){a=n
u=o.StrictParamDupe}}else if(!e){if(P(n.value)){e=n
u=o.StrictParamName}else if(A(n.value)){e=n
u=o.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(i,c)){e=n
u=o.StrictParamDupe}}r.push(t)
i[c]=true
if(it(")")){break}nt(",")}}nt(")")
return{params:r,stricted:a,firstRestricted:e,message:u}}function ar(){var e,t=[],r,n,a,i,c,u,l
D()
y.markStart()
at("function")
n=h
e=Ft()
if(s){if(P(n.value)){tt(n,o.StrictFunctionName)}}else{if(P(n.value)){c=n
u=o.StrictFunctionName}else if(A(n.value)){c=n
u=o.StrictReservedWord}}i=nr(c)
t=i.params
a=i.stricted
c=i.firstRestricted
if(i.message){u=i.message}l=s
r=rr()
if(s&&c){et(c,u)}if(s&&a){tt(a,u)}s=l
return y.markEnd(y.createFunctionDeclaration(e,t,[],r))}function ir(){var e,t=null,r,n,a,i,c=[],u,l
y.markStart()
at("function")
if(!it("(")){e=h
t=Ft()
if(s){if(P(e.value)){tt(e,o.StrictFunctionName)}}else{if(P(e.value)){n=e
a=o.StrictFunctionName}else if(A(e.value)){n=e
a=o.StrictReservedWord}}}i=nr(n)
c=i.params
r=i.stricted
n=i.firstRestricted
if(i.message){a=i.message}l=s
u=rr()
if(s&&n){et(n,a)}if(s&&r){tt(r,a)}s=l
return y.markEnd(y.createFunctionExpression(t,c,[],u))}function or(){if(h.type===t.Keyword){switch(h.value){case"const":case"let":return Rt(h.value)
case"function":return ar()
default:return tr()}}if(h.type!==t.EOF){return tr()}}function cr(){var e,r=[],n,i,c
while(f<d){n=h
if(n.type!==t.StringLiteral){break}e=or()
r.push(e)
if(e.expression.type!==a.Literal){break}i=l.slice(n.range[0]+1,n.range[1]-1)
if(i==="use strict"){s=true
if(c){tt(c,o.StrictOctalLiteral)}}else{if(!c&&n.octal){c=n}}}while(f<d){e=or()
if(typeof e==="undefined"){break}r.push(e)}return r}function ur(){var e
D()
y.markStart()
s=false
Z()
e=cr()
return y.markEnd(y.createProgram(e))}function lr(){var e,t,r,n=[]
for(e=0;e<k.tokens.length;++e){t=k.tokens[e]
r={type:t.type,value:t.value}
if(k.range){r.range=t.range}if(k.loc){r.loc=t.loc}n.push(r)}k.tokens=n}function sr(){this.marker=[f,p,f-m,0,0,0]}sr.prototype={constructor:sr,end:function(){this.marker[3]=f
this.marker[4]=p
this.marker[5]=f-m},apply:function(e){if(k.range){e.range=[this.marker[0],this.marker[3]]}if(k.loc){e.loc={start:{line:this.marker[1],column:this.marker[2]},end:{line:this.marker[4],column:this.marker[5]}}}e=y.postProcess(e)}}
function fr(){if(!k.loc&&!k.range){return null}D()
return new sr}function pr(e,r){var n,a,i
n=String
if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}y=u
l=e
f=0
p=l.length>0?1:0
m=0
d=l.length
h=null
S={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1}
k={}
r=r||{}
r.tokens=true
k.tokens=[]
k.tokenize=true
k.openParenToken=-1
k.openCurlyToken=-1
k.range=typeof r.range==="boolean"&&r.range
k.loc=typeof r.loc==="boolean"&&r.loc
if(typeof r.comment==="boolean"&&r.comment){k.comments=[]}if(typeof r.tolerant==="boolean"&&r.tolerant){k.errors=[]}if(d>0){if(typeof l[0]==="undefined"){if(e instanceof String){l=e.valueOf()}}}try{Z()
if(h.type===t.EOF){return k.tokens}a=Y()
while(h.type!==t.EOF){try{a=Y()}catch(o){a=h
if(k.errors){k.errors.push(o)
break}else{throw o}}}lr()
i=k.tokens
if(typeof k.comments!=="undefined"){i.comments=k.comments}if(typeof k.errors!=="undefined"){i.errors=k.errors}}catch(c){throw c}finally{k={}}return i}function mr(e,t){var r,n
n=String
if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}y=u
l=e
f=0
p=l.length>0?1:0
m=0
d=l.length
h=null
S={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,markerStack:[]}
k={}
if(typeof t!=="undefined"){k.range=typeof t.range==="boolean"&&t.range
k.loc=typeof t.loc==="boolean"&&t.loc
if(k.loc&&t.source!==null&&t.source!==undefined){k.source=n(t.source)}if(typeof t.tokens==="boolean"&&t.tokens){k.tokens=[]}if(typeof t.comment==="boolean"&&t.comment){k.comments=[]}if(typeof t.tolerant==="boolean"&&t.tolerant){k.errors=[]}}if(d>0){if(typeof l[0]==="undefined"){if(e instanceof String){l=e.valueOf()}}}try{r=ur()
if(typeof k.comments!=="undefined"){r.comments=k.comments}if(typeof k.tokens!=="undefined"){lr()
r.tokens=k.tokens}if(typeof k.errors!=="undefined"){r.errors=k.errors}}catch(a){throw a}finally{k={}}return r}e.version="1.1.0-dev"
e.tokenize=pr
e.parse=mr
e.Syntax=function(){var e,t={}
if(typeof Object.create==="function"){t=Object.create(null)}for(e in a){if(a.hasOwnProperty(e)){t[e]=a[e]}}if(typeof Object.freeze==="function"){Object.freeze(t)}return t}()})
__KA_module.exports = esprima;
this.esprima = esprima;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/external/structuredjs/structured.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../../javascript/node_modules/underscore/index.js");
__KA_require("./external/esprima.js");
__KA_require("../../../../rainbow/js/rainbow.min.js");
(function(e){var r
var n
var a
var i={}
var t
var s
if(typeof module!=="undefined"&&module.exports){r=module.exports={}
n=require("esprima")
a=require("underscore")}else{r=this.Structured={}
n=e.esprima
a=e._}if(!n||!a){throw"Error: Both Esprima and UnderscoreJS are required dependencies."}function f(e){var r=/^function [^\(]*\(([^\)]*)\)/.exec(e)[1]
var n=r.match(/[$_a-zA-z0-9]+/g)
for(var a in n){if(n[a][0]!=="$"){console.warn("Invalid parameter in constraint (should begin with a '$'): ",n[a])
return null}}return{variables:n,fn:e}}var o
function u(e,r,i){i=i||{}
var u=i.varCallbacks||[]
o=u
if(u instanceof Function||u.fn&&u.variables){u=[u]}if(u instanceof Array){for(var v in u){if(u[v]instanceof Function){u[v]=f(u[v])}}}else{var d=[]
for(var y in u){if(u.hasOwnProperty(y)&&y!=="failure"){d.push({variables:y.match(/[$_a-zA-z0-9]+/g),fn:u[y]})}}u=d}var h={order:[],skipData:{},values:{}}
var b=c(r,h)
var g=t===e?s:typeof e==="object"?O(e):n.parse(e)
t=e
s=g
p(g)
var _=b.body||b
var w=[]
if(a.isArray(b.body)){_=b.body[0]
w=b.body.slice(1)}var x
var j={_:[],vars:{}}
if(h.order.length===0||i.single){x=m(g,_,w,h,j,i)}else{x=k(0,h,u,j,i)}return x
function k(e,r,n,i,t){var s=r.order
r.skipData[s[e]]=0
do{for(var f=e+1;f<s.length;f+=1){r.skipData[s[f]]=0}if(e===s.length-1){a.each(r.values,function(e,n){a.each(r.values[n],function(e,a){delete r.values[n][a]})})
r.leftToSkip=a.extend({},r.skipData)
if(m(g,_,w.slice(),r,i,t)&&l(r,n)){return i}}else if(k(e+1,r,n,i,t)){return i}r.skipData[s[e]]+=1}while(!a.isEmpty(r.values[s[e]]))
return false}}function l(e,r){delete o.failure
for(var n in r){var i=r[n].variables
var t=a.map(i,function(r){r=f(r)
if(!a.has(e.values,r)){console.error("Callback var "+r+" doesn't exist")
return undefined}return O(e.values[r])})
var s=r[n].fn.apply(null,t)
if(!s||a.has(s,"failure")){if(a.has(s,"failure")){o.failure=s.failure}return false}}return true
function f(e){if(String.prototype.trim){return e.trim()}return e.replace(/^\s+|\s+$/g,"")}}function v(e){if(typeof e==="object"){return O(e)}if(i[e]){return JSON.parse(i[e])}var r=n.parse("("+e+")")
if(r.body[0].expression.type!=="FunctionExpression"||!r.body[0].expression.body){throw"Poorly formatted structure code"}var a=r.body[0].expression.body
i[e]=JSON.stringify(a)
return a}function c(e,r){var n=v(e)
p(n)
d(n,r)
return n}function p(e){for(var r in e){if(!e.hasOwnProperty(r)){continue}var i=e[r]
if(a.isObject(i)){p(i)
if(i.type==n.Syntax.UnaryExpression){var t=i.argument
if(t.type===n.Syntax.Literal&&a.isNumber(t.value)){if(i.operator==="-"){t.value=-t.value
e[r]=t}else if(i.operator==="+"){t.value=+t.value
e[r]=t}}}}}}function d(e,r){for(var i in e){if(!e.hasOwnProperty(i)){continue}if(a.isObject(e[i])){if(y(e[i])){e[i]=undefined}else if(h(e[i])){var t=e[i].name
if(!r.values[t]){r.values[t]={}
e[i]={wildcardVar:t}
r.order.push(t)
r.skipData[t]=0}else{e[i]=r.values[t]}}else if(e[i].type===n.Syntax.EmptyStatement){a.isArray(e)?e.splice(i,1):delete e[i]}else{d(e[i],r)}}}}function y(e){return e.name&&e.name==="_"}function h(e){return e.name&&a.isString(e.name)&&e.name.length>=2&&e.name[0]==="$"}function b(e){return e&&e.name&&(e.name==="glob_"&&"_"||e.name.indexOf("glob$")===0&&e.name.slice(5))||e&&e.expression&&b(e.expression)}function m(e,r,n,i,t,s){if(a.isArray(r)){console.error("toFind should never be an array.")
console.error(r)}if(e==undefined){if(r==undefined){t._.push(e)
return t}else{return false}}if(x(e,r,n,i,t,s)){return t}if(s.single){return false}for(var f in e){if(!e.hasOwnProperty(f)||!a.isObject(e[f])){continue}if(a.isArray(e[f])&&g(e[f],r,n,i,t,s)||!a.isArray(e[f])&&m(e[f],r,n,i,t,s)){return t}}return false}function g(e,r,n,a,i,t){var s
for(var f=0;f<e.length;f+=1){if(b(r)){if(!s){s=[]
var o=b(r)
if(o==="_"){i._.push(s)}else{i.vars[o]=s}}s.push(e[f])}else if(m(e[f],r,n,a,i,t)){if(!n||n.length===0){return i}else{r=n.shift()}}}if(s){return i}else if(b(r)){var o=b(r)
if(o==="_"){i._.push([])}else{i.vars[o]=[]}return i}return false}function _(e){return function(r,n,i,t,s,f){var o
for(o=0;o<t.order.length;o++){var u=t.values[t.order[o]]
if(a.isEmpty(u)){break}}var l=e(r,n,i,t,s,f)
if(!l){for(;o<t.order.length;o++){var u=t.values[t.order[o]]
if(!a.isEmpty(u)){a.each(u,function(e,r){delete u[r]})}else{break}}t._last=o}return l}}var w=_(function(e,r,n,a,i,t){var s
for(var f=0;f<e.length;f+=1){if(b(r)){if(!s){s=[]
var o=b(r)
if(o==="_"){i._.push(s)}else{i.vars[o]=s}}s.push(e[f])}else{if(m(e[f],r,n,a,i,t)){if(!n||n.length===0){return i}else{r=n.shift()}}else{return false}}}if(s){return i}else if(b(r)){var o=b(r)
if(o==="_"){i._.push([])}else{i.vars[o]=[]}return i}return false})
function x(e,r,n,i,t,s){var f
if(!t.root&&e.type!=="Program"){f=e}for(var o in r){if(!r.hasOwnProperty(o)||r[o]===null){continue}var u=r[o]
var l=e[o]
if(u===undefined){if(l==undefined){return false}else{t._.push(l)
continue}}if(l==null){if(o==="wildcardVar"){if(i.leftToSkip&&i.leftToSkip[u]>0){i.leftToSkip[u]-=1
return false}a.extend(i.values[u],e)
t.vars[u.slice(1)]=e
if(f){t.root=f}return t}return false}if(a.isObject(l)!==a.isObject(u)||a.isArray(l)!==a.isArray(u)||typeof l!==typeof u){return false}else if(a.isArray(l)){if(u.length===0){continue}var v=u[0]
var c=u.slice(1)
if(o==="params"||o==="arguments"){if(!w(l,v,c,i,t,s)){return false}}else if(!g(l,v,c,i,t,s)){return false}}else if(a.isObject(l)){if(!m(l,u,n,i,t,s)){return false}}else{if(l!==u){return false}}}if(r===undefined){t._.push(e)}if(f){t.root=f}return t}function O(e){return JSON.parse(JSON.stringify(e))}function j(e,r){if(!Rainbow){return e}Rainbow.color(e,"javascript",function(e){var n="<pre class='rainbowjs'>"+k(e)+"</pre>"
r(n)})}function k(e,r){if(!r){k.styleMap={}
k.counter=0}e=e.replace(/(^|[^A-Za-z0-9])_(?![A-Za-z0-9])/g,"$1<span class='structuredjs_blank'></span>")
var n=/(?:(^|[^\w])\$(\w+))|(?:\$<span class="function call">(\w+)<\/span>)/g
return e.replace(n,function(e,r,n,a){r=r||""
n=n||a
var i=k
if(!(n in i.styleMap)){i.styleMap[n]=i.counter<i.styles.length?i.styles[i.counter]:"extra"
i.counter+=1}return r+"<span class='structuredjs_var "+i.styleMap[n]+"'>"+"</span>"})}k.styles=["one","two","three","four","five","six","seven"]
k.styleMap={}
k.counter=0
function S(e,r){if(!e||e.type!=="Identifier"){return}if(e.name==="_"){if(!r._||r._.length===0){throw"No _ data available."}return r._.shift()}else if(e.name&&e.name.indexOf("$")===0){var n=e.name.slice(1)
if(!r.vars||!(n in r.vars)){throw"No vars available."}return r.vars[n]}}function A(e,r){var n=e&&e.expression||e
if(!n||n.type!=="Identifier"){return}if(n.name==="glob_"){if(!r._||r._.length===0){throw"No _ data available."}return r._.shift()}else if(n.name&&n.name.indexOf("glob$")===0){var a=n.name.slice(5)
if(!r.vars||!(a in r.vars)){throw"No vars available."}return r.vars[a]}}function N(e,r){if(!e){return e}for(var n in e){if(!e.hasOwnProperty(n)){continue}if(e[n]&&typeof e[n]==="object"&&"length"in e[n]){for(var a=0;a<e[n].length;a++){var i=A(e[n][a],r)
if(i){e[n].splice.apply(e[n],[a,1].concat(i))
break}else if(typeof e[n][a]==="object"){var t=S(e[n][a],r)
if(t){e[n][a]=t}else if(typeof e[n][a]==="object"){N(e[n][a],r)}}}}else{var t=S(e[n],r)
if(t){e[n]=t}else if(typeof e[n]==="object"){N(e[n],r)}}}return e}r.match=u
r.matchNode=function(e,r,n){n=n||{}
n.single=true
return u(e,r,n)}
r.injectData=function(e,r){e=v(e)
r=O(r)
return N(e,r)}
r.prettify=j})(typeof window!=="undefined"?window:global)
__KA_module.exports = Structured;
this.Structured = Structured;
});
KAdefine("javascript/scratchpads-package/browser-notice.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(e,o,n,r,t){n=n||e.helpers
var a="",i,l,s,f=this,p="function",c=n.blockHelperMissing
function h(e,o){return"You're using a browser that doesn't support the features that we\n        need in order to run the code of this page. Please switch your\n        browser to one of the following in order for it to work correctly:"}function u(e,o){return"Chrome"}function w(e,o){return"Firefox"}function m(e,o){return"Safari"}a+='<div id="browser-notice-container">\n    <div id="browser-notice">\n        <p>'
l=n["_"]
i=l||o["_"]
s=f.program(1,h,t)
s.hash={}
s.fn=s
s.inverse=f.noop
if(l&&typeof i===p){i=i.call(o,s)}else{i=c.call(o,i,s)}if(i||i===0){a+=i}a+='</p>\n        <p>\n            <a href="https://www.google.com/chrome">'
l=n.i18nDoNotTranslate
i=l||o.i18nDoNotTranslate
s=f.program(3,u,t)
s.hash={}
s.fn=s
s.inverse=f.noop
if(l&&typeof i===p){i=i.call(o,s)}else{i=c.call(o,i,s)}if(i||i===0){a+=i}a+='</a> | \n            <a href="http://www.mozilla.org/en-US/firefox/new/">'
l=n.i18nDoNotTranslate
i=l||o.i18nDoNotTranslate
s=f.program(5,w,t)
s.hash={}
s.fn=s
s.inverse=f.noop
if(l&&typeof i===p){i=i.call(o,s)}else{i=c.call(o,i,s)}if(i||i===0){a+=i}a+='</a> | \n            <a href="http://www.apple.com/safari/">'
l=n.i18nDoNotTranslate
i=l||o.i18nDoNotTranslate
s=f.program(7,m,t)
s.hash={}
s.fn=s
s.inverse=f.noop
if(l&&typeof i===p){i=i.call(o,s)}else{i=c.call(o,i,s)}if(i||i===0){a+=i}a+="</a>\n        </p>\n    </div>\n</div>"
return a})
function wrapped_template(e,o){return absoluteLinks.makeHtmlLinksSafe(template(e,o))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/goal-tab.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(n,e,a,r,i){a=a||n.helpers
var t="",o,s,l,c,f=this,p="function",h=a.blockHelperMissing,u=a.helperMissing,v=void 0,g=this.escapeExpression
function m(n,e){var r="",i,t
r+="\n			"
l=a.isProject
i=l||n.isProject
t=a["if"]
c=f.program(2,d,e)
c.hash={}
c.fn=c
c.inverse=f.program(7,j,e)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n		"
return r}function d(n,e){var r="",i
r+="\n			<h3>"
l=a["_"]
i=l||n["_"]
c=f.program(3,_,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+="</h3>\n			<h4>"
l=a["_"]
i=l||n["_"]
c=f.program(5,b,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+="</h4>\n			"
return r}function _(n,e){return"Congratulations! You've completed this project."}function b(n,e){return"View your spin-offs of this project to see your solution."}function j(n,e){var r="",i
r+="\n			<h3>"
l=a["_"]
i=l||n["_"]
c=f.program(8,y,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+="</h3>\n			"
return r}function y(n,e){return"Congratulations!"}function P(n,e){var r="",i
r+="\n		<h3>"
l=a["_"]
i=l||n["_"]
c=f.program(11,k,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+="</h3>\n		"
return r}function k(n,e){return"Thanks for watching!"}function U(n,e){var r="",i,t
r+='\n		<div class="points">\n			<span class="point-label">\n			'
l=a["_"]
i=l||n["_"]
c=f.program(14,x,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+='\n			</span>\n			<span class="point-counter">\n			<img src="'
i="/images/throbber-full.gif"
l=a.staticUrl
t=l||n.staticUrl
if(typeof t===p){i=t.call(n,i,{hash:{}})}else if(t===v){i=u.call(n,"staticUrl",i,{hash:{}})}else{i=t}r+=g(i)+'">\n			</span>\n		</div>\n		'
return r}function x(n,e){return"POINTS EARNED"}function w(n,e){var r="",i
r+='\n		<button id="complete-spin-off" class="simple-button">'
l=a["_"]
i=l||n["_"]
c=f.program(17,T,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+="</button>\n		"
return r}function T(n,e){return"Save as a spin-off"}function C(n,e){var r="",i
r+='\n		<div class="spinoff-notice">\n		<a href="#spinoffs-tab-header" class="simple-button green pull-right"><span class="icon-th-list"></span> '
l=a["_"]
i=l||n["_"]
c=f.program(20,O,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+="</a>\n		</div>\n		"
return r}function O(n,e){return"View Your Spin-offs"}function R(n,e){var r="",i,t
r+='\n			<a href="'
l=a.continueUrl
i=l||n.continueUrl
if(typeof i===p){i=i.call(n,{hash:{}})}else if(i===v){i=u.call(n,"continueUrl",{hash:{}})}r+=g(i)+'" class="tutorial-router-link simple-button green">\n				'
l=a.continueText
i=l||n.continueText
if(typeof i===p){i=i.call(n,{hash:{}})}else if(i===v){i=u.call(n,"continueText",{hash:{}})}r+=g(i)+"</a>\n			"
l=a.isProject
i=l||n.isProject
t=a["if"]
c=f.program(23,E,e)
c.hash={}
c.fn=c
c.inverse=f.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n		"
return r}function E(n,e){var r="",i
r+='\n				<a href="'
l=a.topicRelativeUrl
i=l||n.topicRelativeUrl
if(typeof i===p){i=i.call(n,{hash:{}})}else if(i===v){i=u.call(n,"topicRelativeUrl",{hash:{}})}r+=g(i)+'/projectfeedback/next-eval" class="simple-button">\n				'
l=a["_"]
i=l||n["_"]
c=f.program(24,S,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+="</a>\n			"
return r}function S(n,e){return"Evaluate another student's project"}function H(n,e){var r="",i
r+='\n<a class="scratchpad-challenge-feedback-btn" href="javascript:void(0);">('
l=a["_"]
i=l||n["_"]
c=f.program(27,L,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(l&&typeof i===p){i=i.call(n,c)}else{i=h.call(n,i,c)}if(i||i===0){r+=i}r+=")</a>\n"
return r}function L(n,e){return"Report a problem"}t+='<div class="goal-pane">\n	<div class="left-pane">\n		'
l=a.isChallengeOrProjectBased
o=l||e.isChallengeOrProjectBased
s=a["if"]
c=f.program(1,m,i)
c.hash={}
c.fn=c
c.inverse=f.program(10,P,i)
o=s.call(e,o,c)
if(o||o===0){t+=o}t+="\n		"
l=a.showPoints
o=l||e.showPoints
s=a["if"]
c=f.program(13,U,i)
c.hash={}
c.fn=c
c.inverse=f.noop
o=s.call(e,o,c)
if(o||o===0){t+=o}t+='\n	</div>\n	<div id="complete-critter" class="cool-critter"></div>\n	<div class="right-pane">\n		'
l=a.isOriginProject
o=l||e.isOriginProject
s=a.unless
c=f.program(16,w,i)
c.hash={}
c.fn=c
c.inverse=f.noop
o=s.call(e,o,c)
if(o||o===0){t+=o}t+="\n\n		"
l=a.isProject
o=l||e.isProject
s=a["if"]
c=f.program(19,C,i)
c.hash={}
c.fn=c
c.inverse=f.noop
o=s.call(e,o,c)
if(o||o===0){t+=o}t+="\n		"
l=a.continueText
o=l||e.continueText
s=a["if"]
c=f.program(22,R,i)
c.hash={}
c.fn=c
c.inverse=f.noop
o=s.call(e,o,c)
if(o||o===0){t+=o}t+="\n	</div>\n\n</div>\n\n"
l=a.isChallenge
o=l||e.isChallenge
s=a["if"]
c=f.program(26,H,i)
c.hash={}
c.fn=c
c.inverse=f.noop
o=s.call(e,o,c)
if(o||o===0){t+=o}t+="\n"
return t})
function wrapped_template(n,e){return absoluteLinks.makeHtmlLinksSafe(template(n,e))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/dev-trusted-revision-panel.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(e,n,r,i,s){r=r||e.helpers
var t="",a,u,o,l,d=this,v="function",f=r.helperMissing,c=void 0,p=this.escapeExpression
function h(e,n){var i="",s,t
i+="\n  "
o=r.currentRevisionTrusted
s=o||e.currentRevisionTrusted
t=r["if"]
l=d.program(2,m,n)
l.hash={}
l.fn=l
l.inverse=d.program(4,b,n)
s=t.call(e,s,l)
if(s||s===0){i+=s}i+="\n"
return i}function m(e,n){return'\n  <div class="mark-trusted"></div>\n  '}function b(e,n){return'\n  <button class="simple-button primary mark-trusted">Mark trusted</button>\n  '}function R(e,n){return'\n<button class="simple-button primary mark-trusted">Mark trusted</button>\n'}function k(e,n){var i="",s,t
i+='\n  <button class="simple-button secondary see-trusted">View trusted</button>\n  '
o=r.currentRevisionTrusted
s=o||e.currentRevisionTrusted
t=r["if"]
l=d.program(9,g,n)
l.hash={}
l.fn=l
l.inverse=d.program(11,y,n)
s=t.call(e,s,l)
if(s||s===0){i+=s}i+="\n"
return i}function g(e,n){return'\n  <div class="rev-info"><b>Trusted revision:</b> Current revision is trusted.</div>\n  '}function y(e,n){var i="",s
i+='\n  <div class="rev-info"><b>Trusted revision:</b> '
o=r.trustedRevision
s=o||e.trustedRevision
s=s===null||s===undefined||s===false?s:s.id
if(typeof s===v){s=s.call(e,{hash:{}})}else if(s===c){s=f.call(e,"trustedRevision.id",{hash:{}})}i+=p(s)+", created "
o=r.trustedRevision
s=o||e.trustedRevision
s=s===null||s===undefined||s===false?s:s.created
if(typeof s===v){s=s.call(e,{hash:{}})}else if(s===c){s=f.call(e,"trustedRevision.created",{hash:{}})}i+=p(s)+".</div>\n  "
return i}function T(e,n){return'\n  <div class="see-trusted"></div>\n  <div class="rev-info"><b>Trusted revision:</b> No revision selected.</div>\n'}o=r.trustedRevision
a=o||n.trustedRevision
u=r["if"]
l=d.program(1,h,s)
l.hash={}
l.fn=l
l.inverse=d.program(6,R,s)
a=u.call(n,a,l)
if(a||a===0){t+=a}t+='\n<div class="rev-info"><b>Current revision:</b> '
o=r.revision
a=o||n.revision
a=a===null||a===undefined||a===false?a:a.id
if(typeof a===v){a=a.call(n,{hash:{}})}else if(a===c){a=f.call(n,"revision.id",{hash:{}})}t+=p(a)+", created "
o=r.revision
a=o||n.revision
a=a===null||a===undefined||a===false?a:a.created
if(typeof a===v){a=a.call(n,{hash:{}})}else if(a===c){a=f.call(n,"revision.created",{hash:{}})}t+=p(a)+".</div>\n"
o=r.trustedRevision
a=o||n.trustedRevision
u=r["if"]
l=d.program(8,k,s)
l.hash={}
l.fn=l
l.inverse=d.program(13,T,s)
a=u.call(n,a,l)
if(a||a===0){t+=a}t+="\n"
return t})
function wrapped_template(e,n){return absoluteLinks.makeHtmlLinksSafe(template(e,n))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/dev-record.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(e,t,n,a,o){n=n||e.helpers
var s="",r,l,i,c=this,u="function",p=n.blockHelperMissing
function h(e,t){return"Start New Chunk"}function f(e,t){return"Discard Recorded Chunk"}function d(e,t){return"Save Recorded Chunk"}function v(e,t){return"Refresh Editor State"}function m(e,t){return"Last audio chunk recorded: "}function y(e,t){return"Empty"}function b(e,t){return"All saved audio chunks: "}function g(e,t){return"Empty"}function k(e,t){return'These buttons let you record in chunks, rather than having to get everything right in one go. There is no way to edit a chunk once you save it, sorry. Also, because command playback has some weird bugs, sometimes discarding a chunk might get you in a bad state. If that happens, just hit "Refresh editor state" and hope for the best. This is pretty brittle -- just record everything in one chunk if you want the old system back :)'}function _(e,t){return'<strong>DO NOT TOUCH THE EDITOR (or the canvas) between chunks -- especially not the cursor or selection.</strong> If you do, you might destroy your whole recording -- try hitting "Refresh Editor State" to recover.'}s+='<div class="scratchpad-dev-record">\n    <div class="scratchpad-dev-record-buttons">\n        <button class="scratchpad-dev-new-chunk simple-button pull-left">'
l=n["_"]
r=l||t["_"]
i=c.program(1,h,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+='</button>\n        <button class="scratchpad-dev-discard-chunk simple-button pull-left">'
l=n["_"]
r=l||t["_"]
i=c.program(3,f,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+='</button>\n        <button class="scratchpad-dev-save-chunk simple-button pull-left">'
l=n["_"]
r=l||t["_"]
i=c.program(5,d,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+='</button>\n        <button class="scratchpad-dev-refresh-editor-state simple-button pull-left">'
l=n["_"]
r=l||t["_"]
i=c.program(7,v,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+='</button>\n    </div>\n    <br />\n    <div class="show-audio-chunks-wrapper">\n        <p>'
l=n["_"]
r=l||t["_"]
i=c.program(9,m,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+='<span class="last-audio-chunk">'
l=n["_"]
r=l||t["_"]
i=c.program(11,y,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+="</span></p>\n        <p>"
l=n["_"]
r=l||t["_"]
i=c.program(13,b,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+='<span class="saved-audio-chunks">'
l=n["_"]
r=l||t["_"]
i=c.program(15,g,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+="</span></p>\n    </div>\n    <p>"
l=n.i18nDoNotTranslate
r=l||t.i18nDoNotTranslate
i=c.program(17,k,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+="</p>\n    <p>"
l=n.i18nDoNotTranslate
r=l||t.i18nDoNotTranslate
i=c.program(19,_,o)
i.hash={}
i.fn=i
i.inverse=c.noop
if(l&&typeof r===u){r=r.call(t,i)}else{r=p.call(t,r,i)}if(r||r===0){s+=r}s+="</p>\n</div>"
return s})
function wrapped_template(e,t){return absoluteLinks.makeHtmlLinksSafe(template(e,t))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/share-modal.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(n,e,a,t,s){a=a||n.helpers
var r="",l,o,i,c,p=this,h="function",f=a.blockHelperMissing
function u(n,e){var t="",s
t+='\n<div class="modal hide fade scratchpad-share-modal">\n\n    <div class="modal-header">\n        <span class="close" data-dismiss="modal">&#215;</span>\n        <h2>'
i=a["_"]
s=i||n["_"]
c=p.program(2,d,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='</h2>\n    </div>\n\n    <div class="modal-body">\n        <p class="scratchpad-share-warning alert" style="display:none;">\n            '
i=a["_"]
s=i||n["_"]
c=p.program(4,b,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+="\n            <br>\n        </p>\n\n        <p>"
i=a["_"]
s=i||n["_"]
c=p.program(6,m,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='</p>\n        <input class="scratchpad-share-url"></input>\n        <br>\n        <button class="simple-button scratchpad-share-facebook-button">\n            <span class="icon-facebook icon-large"></span>\n            '
i=a["_"]
s=i||n["_"]
c=p.program(8,v,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='\n        </button>\n        <button class="simple-button scratchpad-share-twitter-button">\n            <span class="icon-twitter icon-large"></span>\n            '
i=a["_"]
s=i||n["_"]
c=p.program(10,_,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='\n        </button>\n        <button class="simple-button scratchpad-share-email-button">\n            <span class="icon-envelope icon-large"></span>\n            '
i=a["_"]
s=i||n["_"]
c=p.program(12,g,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='\n        </button>\n\n        <!-- Allow the user to embed the scratchpad on their\n             site using an iframe -->\n        <div class="scratchpad-share-embed">\n            <p>'
i=a["_"]
s=i||n["_"]
c=p.program(14,y,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='</p>\n            <textarea></textarea>\n            <br>\n            <label><input type="checkbox" name="hide-editor" value="no"/>\n                '
i=a["_"]
s=i||n["_"]
c=p.program(16,k,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='</label>\n            <label><input type="checkbox" name="hide-buttons"  value="no"/>\n                '
i=a["_"]
s=i||n["_"]
c=p.program(18,w,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+='</label>\n            <label><input type="checkbox" name="hide-author"  value="no"/>\n                '
i=a["_"]
s=i||n["_"]
c=p.program(20,H,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(i&&typeof s===h){s=s.call(n,c)}else{s=f.call(n,s,c)}if(s||s===0){t+=s}t+="</label>\n        </div>\n\n    </div>\n\n</div>\n"
return t}function d(n,e){return"Share this Project"}function b(n,e){return"Warning: there are un-saved changes in this project."}function m(n,e){return"Share this project by using this link:"}function v(n,e){return"Share"}function _(n,e){return"Tweet"}function g(n,e){return"Email"}function y(n,e){return"Have a website? Embed this project on your site:"}function k(n,e){return"Hide Editor"}function w(n,e){return"Hide Buttons"}function H(n,e){return"Hide Author and Playback"}i=a.scratchpad
l=i||e.scratchpad
o=a["if"]
c=p.program(1,u,s)
c.hash={}
c.fn=c
c.inverse=p.noop
l=o.call(e,l,c)
if(l||l===0){r+=l}r+="\n"
return r})
function wrapped_template(n,e){return absoluteLinks.makeHtmlLinksSafe(template(n,e))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/play-page.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(n,a,e,r,i){e=e||n.helpers
r=r||n.partials
var t="",s,l,o,c,d=this,f="function",p=e.helperMissing,h=void 0,u=this.escapeExpression,v=e.blockHelperMissing
function g(n,a){var r="",i,t
r+='\n    <!-- If the scratchpad is a project or it was forked from a project. -->\n    <div id="challenge-task-container"\n            class="task-container '
o=e.topic
i=o||n.topic
i=i===null||i===undefined||i===false?i:i.domainSlug
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"topic.domainSlug",{hash:{}})}r+=u(i)+'">\n        '
r+='\n        <div class="task-header-container '
o=e.topic
i=o||n.topic
i=i===null||i===undefined||i===false?i:i.domainSlug
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"topic.domainSlug",{hash:{}})}r+=u(i)+'">\n            <div class="task-root-nav">\n                <a href="'
o=e.topic
i=o||n.topic
i=i===null||i===undefined||i===false?i:i.relativeUrl
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"topic.relativeUrl",{hash:{}})}r+=u(i)+'" class="domain">'
o=e.topic
i=o||n.topic
i=i===null||i===undefined||i===false?i:i.translatedTitle
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"topic.translatedTitle",{hash:{}})}r+=u(i)+"</a>\n                "
o=e.isDocumentation
i=o||n.isDocumentation
t=e["if"]
c=d.program(2,m,a)
c.hash={}
c.fn=c
c.inverse=d.program(5,y,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n            </div>\n                "
o=e.useContentHeader
i=o||n.useContentHeader
t=e["if"]
c=d.program(9,U,a)
c.hash={}
c.fn=c
c.inverse=d.program(11,P,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n        </div>\n        "
o=e.isChallenge
i=o||n.isChallenge
t=e["if"]
c=d.program(42,q,a)
c.hash={}
c.fn=c
c.inverse=d.program(45,Y,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n    </div>\n    "
return r}function m(n,a){var r="",i
r+='\n                    <a href="'
o=e.scratchpad
i=o||n.scratchpad
i=i===null||i===undefined||i===false?i:i.docsUrlPath
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"scratchpad.docsUrlPath",{hash:{}})}r+=u(i)+'" class="topic">'
o=e["_"]
i=o||n["_"]
c=d.program(3,b,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</a>\n                "
return r}function b(n,a){return"Documentation"}function y(n,a){var r="",i,t
r+="\n                    "
o=e.isOwner
i=o||n.isOwner
t=e["if"]
c=d.program(6,_,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                "
return r}function _(n,a){var r="",i
r+='\n                        <a href="'
o=e.profileRoot
i=o||n.profileRoot
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"profileRoot",{hash:{}})}r+=u(i)+'projects" class="topic">'
o=e["_"]
i=o||n["_"]
c=d.program(7,k,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</a>\n                    "
return r}function k(n,a){return"My Projects"}function U(n,a){var e=""
e+="\n                    "
e+='\n                    <div class="task-header-mid-container"></div>\n                '
return e}function P(n,a){var i="",t,s
i+='\n                    <div class="task-header domain-color clearfix'
o=e.isChallenge
t=o||n.isChallenge
s=e["if"]
c=d.program(12,S,a)
c.hash={}
c.fn=c
c.inverse=d.noop
t=s.call(n,t,c)
if(t||t===0){i+=t}i+='">\n                        '
o=e.originScratchpad
t=o||n.originScratchpad
s=e["if"]
c=d.program(14,w,a)
c.hash={}
c.fn=c
c.inverse=d.noop
t=s.call(n,t,c)
if(t||t===0){i+=t}i+="\n\n                        <!-- Title bar above editor + canvas -->\n                        "
i+='\n                            <!-- Title bar above editor + canvas -->\n                         <div class="random-stuff">\n                            '
t=n
t=d.invokePartial(r["scratchpads_header-buttons"],"scratchpads_header-buttons",t,e,r)
if(t||t===0){i+=t}i+="\n                        </div>\n\n                        "
o=e.inEditModeAndCanEdit
t=o||n.inEditModeAndCanEdit
s=e["if"]
c=d.program(21,E,a)
c.hash={}
c.fn=c
c.inverse=d.program(24,C,a)
t=s.call(n,t,c)
if(t||t===0){i+=t}i+="\n                        "
o=e.isChallenge
t=o||n.isChallenge
s=e["if"]
c=d.program(26,D,a)
c.hash={}
c.fn=c
c.inverse=d.program(28,F,a)
t=s.call(n,t,c)
if(t||t===0){i+=t}i+="\n                    </div>\n                "
return i}function S(n,a){return" has-progress"}function w(n,a){var r="",i,t
r+='\n                        <div>\n                            <span class="tutorial-back">\n                            '
o=e["_"]
i=o||n["_"]
c=d.program(15,T,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                            "
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.deleted
t=e["if"]
c=d.program(17,j,a)
c.hash={}
c.fn=c
c.inverse=d.program(19,x,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                            </span>\n                        </div>\n                        "
return r}function T(n,a){return"Based on:"}function j(n,a){var r="",i
r+="\n                                "
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.translatedTitle
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.translatedTitle",{hash:{}})}r+=u(i)+"\n                            "
return r}function x(n,a){var r="",i
r+='\n                            <a href="'
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.url
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.url",{hash:{}})}r+=u(i)+'" class="origin-scratchpad-link">\n                                '
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.translatedTitle
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.translatedTitle",{hash:{}})}r+=u(i)+"\n                            </a>\n                            "
return r}function E(n,a){var r="",i
r+='\n                        <div class="title-box">\n                            <span id="edit-title" data-react-component="button" data-react-button-type="submit">\n                                '
o=e["_"]
i=o||n["_"]
c=d.program(22,A,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='</span>\n                            <h1 id="scratchpad-title" class="task-title">\n                                '
o=e.translatedTitle
i=o||n.translatedTitle
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"translatedTitle",{hash:{}})}r+=u(i)+"</h1>\n                        </div>\n                        "
return r}function A(n,a){return"Edit Title"}function C(n,a){var r="",i
r+='\n                        <h2 id="scratchpad-title" class="task-title">\n                            '
o=e.translatedTitle
i=o||n.translatedTitle
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"translatedTitle",{hash:{}})}r+=u(i)+"</h2>\n                        "
return r}function D(n,a){var r="",i
r+='\n                            <div id="challenge-description" title="'
o=e.translatedDescription
i=o||n.translatedDescription
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"translatedDescription",{hash:{}})}r+=u(i)+'">\n                                '
o=e.translatedDescription
i=o||n.translatedDescription
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"translatedDescription",{hash:{}})}if(i||i===0){r+=i}r+="\n                            </div>\n                        "
return r}function F(n,a){var r="",i,t
r+="\n                            "
r+="\n                            "
o=e.creatorProfile
i=o||n.creatorProfile
t=e["if"]
c=d.program(29,R,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                        "
return r}function R(n,a){var r="",i,t
r+="\n                            "
o=e.isDocumentation
i=o||n.isDocumentation
t=e.unless
c=d.program(30,M,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                            "
return r}function M(n,a){var r="",i,t
r+='\n                            <div class="author">\n                                '
o=e["_"]
i=o||n["_"]
c=d.program(31,H,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n\n                                    "
o=e.creatorProfile
i=o||n.creatorProfile
i=i===null||i===undefined||i===false?i:i.nickname
t=e["if"]
c=d.program(33,W,a)
c.hash={}
c.fn=c
c.inverse=d.program(36,N,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n\n                                "
o=e.embedded
i=o||n.embedded
t=e.unless
c=d.program(39,I,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                            </div>\n                            "
return r}function H(n,a){return"Created by:"}function W(n,a){var r="",i,t
r+='\n                                    <a href="'
o=e.creatorProfile
i=o||n.creatorProfile
i=i===null||i===undefined||i===false?i:i.isPublic
t=e["if"]
c=d.program(34,B,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+='"\n                                        class="author-nickname profile-programs" data-user-kaid="'
o=e.scratchpad
i=o||n.scratchpad
i=i===null||i===undefined||i===false?i:i.kaid
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"scratchpad.kaid",{hash:{}})}r+=u(i)+'">'
o=e.creatorProfile
i=o||n.creatorProfile
i=i===null||i===undefined||i===false?i:i.nickname
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"creatorProfile.nickname",{hash:{}})}r+=u(i)+"</a>\n                                    "
return r}function B(n,a){var r
o=e.creatorProfile
r=o||n.creatorProfile
r=r===null||r===undefined||r===false?r:r.profileRoot
if(typeof r===f){r=r.call(n,{hash:{}})}else if(r===h){r=p.call(n,"creatorProfile.profileRoot",{hash:{}})}return u(r)}function N(n,a){var r="",i
r+="\n                                    "
o=e["_"]
i=o||n["_"]
c=d.program(37,L,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                                    "
return r}function L(n,a){return"New visitor"}function I(n,a){var r="",i
r+="\n\n                                ("
o=e["_"]
i=o||n["_"]
c=d.program(40,O,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='\n                                <time class="timeago" datetime="'
o=e.lastUpdatedTime
i=o||n.lastUpdatedTime
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"lastUpdatedTime",{hash:{}})}r+=u(i)+'">'
o=e.lastUpdatedTime
i=o||n.lastUpdatedTime
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"lastUpdatedTime",{hash:{}})}r+=u(i)+"</time>)\n                                "
return r}function O(n,a){return"Updated"}function q(n,a){var r="",i,t
r+='\n        <div class="objectives-pane-outer">\n            <div id="objectives-pane" class="min-contained-and-centered">\n                <div class="objectives-loading">\n                    <img src="'
i="/images/throbber-full.gif"
o=e.staticUrl
t=o||n.staticUrl
if(typeof t===f){i=t.call(n,i,{hash:{}})}else if(t===h){i=p.call(n,"staticUrl",i,{hash:{}})}else{i=t}r+=u(i)+'">\n                    <span>'
o=e["_"]
i=o||n["_"]
c=d.program(43,V,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='</span>\n                </div>\n            </div>\n        </div>\n        <div class="challenge-warning span-full-column">\n            <span id="challenge-warning-message">\n            </span>\n        </div>\n        '
return r}function V(n,a){return"Waiting for code to run..."}function Y(n,a){var r="",i,t
r+="\n            "
o=e.useContentHeader
i=o||n.useContentHeader
t=e["if"]
c=d.program(46,K,a)
c.hash={}
c.fn=c
c.inverse=d.program(54,Q,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n        "
return r}function K(n,a){var r="",i,t
r+="\n            "
r+="\n                "
o=e.isProject
i=o||n.isProject
t=e["if"]
c=d.program(47,Z,a)
c.hash={}
c.fn=c
c.inverse=d.program(49,G,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n            "
return r}function Z(n,a){var i="",t
i+="\n                    "
t=n
t=d.invokePartial(r["scratchpads_objectives-pane"],"scratchpads_objectives-pane",t,e,r)
if(t||t===0){i+=t}i+="\n                "
return i}function G(n,a){var r="",i,t
r+="\n                  "
o=e.isRedirectedProjectFork
i=o||n.isRedirectedProjectFork
t=e["if"]
c=d.program(50,z,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                  "
o=e.isOfficial
i=o||n.isOfficial
t=e["if"]
c=d.program(52,J,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                "
return r}function z(n,a){var i="",t
i+="\n                    "
t=n
t=d.invokePartial(r["scratchpads_objectives-pane"],"scratchpads_objectives-pane",t,e,r)
if(t||t===0){i+=t}i+="\n                  "
return i}function J(n,a){var i="",t
i+="\n                    "
t=n
t=d.invokePartial(r["scratchpads_objectives-pane"],"scratchpads_objectives-pane",t,e,r)
if(t||t===0){i+=t}i+="\n                  "
return i}function Q(n,a){var r="",i,t
r+="\n            "
o=e.isUneditableProjectFork
i=o||n.isUneditableProjectFork
t=e.unless
c=d.program(55,X,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n            "
return r}function X(n,a){var r="",i,t
r+="\n                "
o=e.scratchpad
i=o||n.scratchpad
i=i===null||i===undefined||i===false?i:i.originIsProject
t=e["if"]
c=d.program(56,na,a)
c.hash={}
c.fn=c
c.inverse=d.program(59,ea,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n            "
return r}function na(n,a){var r="",i,t
r+="\n                  "
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.translatedDescription
t=e["if"]
c=d.program(57,aa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                "
return r}function aa(n,a){var r="",i
r+='\n                  <div class="objectives-pane-outer">\n                      <div id="objectives-pane" class="scratchpad-objectives-notchallenge min-contained-and-centered">\n                          <div class="challenge-step">\n                              <div class="test-description full-width">\n                                  '
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.translatedDescription
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.translatedDescription",{hash:{}})}if(i||i===0){r+=i}r+="\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n                  "
return r}function ea(n,a){var i="",t
i+="\n                    "
t=n
t=d.invokePartial(r["scratchpads_objectives-pane"],"scratchpads_objectives-pane",t,e,r)
if(t||t===0){i+=t}i+="\n                "
return i}function ra(n,a){return'\n        <div id="react-dev-controls"></div>\n    '}function ia(n,a){var i="",t
i+="\n        "
t=n
t=d.invokePartial(r["scratchpads_share-modal"],"scratchpads_share-modal",t,e,r)
if(t||t===0){i+=t}i+="\n    "
return i}function ta(n,a){return'\n        <div class="scratchpad-project-eval-mount">\n        </div>\n        '}function sa(n,a){var r="",i
r+='\n        <div class="spinoff-notice" style="display: none;">\n            <span class="spinoff-text"><strong>'
o=e["_"]
i=o||n["_"]
c=d.program(68,la,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='</strong></span>\n            <a href="#spinoffs-tab-header" class="simple-button green pull-right"><span class="icon-th-list"></span> '
o=e["_"]
i=o||n["_"]
c=d.program(70,oa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</a>\n        </div>\n        "
return r}function la(n,a){return"You already have a spin-off of this project!"}function oa(n,a){return"View Your Spin-offs"}function ca(n,a){return" no-output"}function da(n,a){var r="",i
r+='\n              <ul class="scratchpad-editor-tabs-links" style="display:none;">\n                <li><a href="#scratchpad-code-editor-tab">'
o=e["_"]
i=o||n["_"]
c=d.program(75,fa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='</a></li>\n                <li><a href="#scratchpad-tests-editor-tab">'
o=e["_"]
i=o||n["_"]
c=d.program(77,pa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='</a></li>\n                <li><a href="#scratchpad-regression-tests-editor-tab">'
o=e["_"]
i=o||n["_"]
c=d.program(79,ha,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</a></li>\n              </ul>\n              "
return r}function fa(n,a){return"Starter Code"}function pa(n,a){return"Validation Tests"}function ha(n,a){return"Regression Tests"}function ua(n,a){var r="",i,t
r+='\n                <div class="scratchpad-editor-bigplay-loading">\n                    <img src="'
i="/images/throbber-full.gif"
o=e.staticUrl
t=o||n.staticUrl
if(typeof t===f){i=t.call(n,i,{hash:{}})}else if(t===h){i=p.call(n,"staticUrl",i,{hash:{}})}else{i=t}r+=u(i)+'">\n                    <span class="hide-text">'
o=e["_"]
i=o||n["_"]
c=d.program(82,va,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='</span>\n                </div>\n\n                <!-- This cannot be removed, if we want Flash to keep working! -->\n                <div id="sm2-container">\n                    '
o=e["_"]
i=o||n["_"]
c=d.program(84,ga,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                    <br>\n                </div>\n\n                "
o=e.youtubeUrl
i=o||n.youtubeUrl
t=e["if"]
c=d.program(86,ma,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+='\n\n                <button class="scratchpad-editor-bigplay-button" style="display:none;">\n                    <span class="icon-play"></span>\n                    <span class="hide-text">'
o=e["_"]
i=o||n["_"]
c=d.program(89,ya,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</span>\n                </button>\n                "
return r}function va(n,a){return"Loading..."}function ga(n,a){return"Enable Flash to load audio:"}function ma(n,a){var r="",i
r+='\n                <div class="scratchpad-editor-youtube-link alert alert-info" style="display:none;">\n                    <span class="close" data-dismiss="alert">&#215;</span>\n                    '
o=e["_"]
i=o||n["_"]
c=d.program(87,ba,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                </div>\n                "
return r}function ba(n,a){var r="",i
r+='If the audio never loads, reload the page or\n                    <a href="'
o=e.youtubeUrl
i=o||n.youtubeUrl
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"youtubeUrl",{hash:{}})}r+=u(i)+'" target="_blank">\n                        watch on Youtube\n                    </a>\n                    '
return r}function ya(n,a){return"Play"}function _a(n,a){var r="",i
r+='\n              <div id="scratchpad-tests-editor-tab"  class="scratchpad-editor-tab" style="display:none;">\n                <div class="scratchpad-tests-editor scratchpad-ace-editor"></div>\n                <a href="https://docs.google.com/document/d/1pdEsv99ZUmrCNI-KZKD8hqlG9FLETaLINfDwiwWpyFk/edit?usp=sharing" target="_blank">'
o=e.i18nDoNotTranslate
i=o||n.i18nDoNotTranslate
c=d.program(92,ka,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='</a>\n              </div>\n              <div id="scratchpad-regression-tests-editor-tab" class="scratchpad-editor-tab" style="display:none;">\n                <div class="scratchpad-regression-tests-editor scratchpad-ace-editor"></div>\n                <button class="scratchpad-regression-tests-button">'
o=e.i18nDoNotTranslate
i=o||n.i18nDoNotTranslate
c=d.program(94,Ua,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</button>\n              </div>\n              "
return r}function ka(n,a){return"How To Make A Challenge"}function Ua(n,a){return"Run regression tests"}function Pa(n,a){var r,i
o=e.isRedirectedProjectFork
r=o||n.isRedirectedProjectFork
i=e.unless
c=d.program(97,Sa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
r=i.call(n,r,c)
if(r||r===0){return r}else{return""}}function Sa(n,a){var r,i
o=e.embedded
r=o||n.embedded
i=e["if"]
c=d.program(98,wa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
r=i.call(n,r,c)
if(r||r===0){return r}else{return""}}function wa(n,a){var r="",i,t
r+='\n                <div class="origin-scratchpad pull-right">\n                    '
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.deleted
t=e.unless
c=d.program(99,Ta,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+='\n                    <div class="text-contents">\n                        <div>'
o=e["_"]
i=o||n["_"]
c=d.program(102,xa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</div>\n                        "
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.deleted
t=e["if"]
c=d.program(104,Ea,a)
c.hash={}
c.fn=c
c.inverse=d.program(106,Aa,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n                    </div>\n                </div>\n                "
return r}function Ta(n,a){var r="",i,t
r+='\n                    <a href="'
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.url
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.url",{hash:{}})}r+=u(i)+'"'
o=e.embedded
i=o||n.embedded
t=e["if"]
c=d.program(100,ja,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+='>\n                        <img src="'
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.imageUrl
o=e.staticUrl
t=o||n.staticUrl
if(typeof t===f){i=t.call(n,i,{hash:{}})}else if(t===h){i=p.call(n,"staticUrl",i,{hash:{}})}else{i=t}r+=u(i)+'" class="pull-right" />\n                    </a>\n                    '
return r}function ja(n,a){return' target="_blank"'}function xa(n,a){return"Based on:"}function Ea(n,a){var r="",i
r+="\n                        "
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.translatedTitle
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.translatedTitle",{hash:{}})}r+=u(i)+"\n                        "
return r}function Aa(n,a){var r="",i
r+='\n                        <a href="'
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.url
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.url",{hash:{}})}r+=u(i)+'" target="_blank">\n                            '
o=e.originScratchpad
i=o||n.originScratchpad
i=i===null||i===undefined||i===false?i:i.translatedTitle
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"originScratchpad.translatedTitle",{hash:{}})}r+=u(i)+"\n                        </a>\n                        "
return r}function Ca(n,a){return"Undo Change"}function Da(n,a){var r="",i,t
r+="\n\n                    "
o=e.showStartOverButton
i=o||n.showStartOverButton
t=e["if"]
c=d.program(111,Fa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n\n                    "
o=e.showProjectHelpButton
i=o||n.showProjectHelpButton
t=e["if"]
c=d.program(114,Ma,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n\n                    "
o=e.showProjectEvalButton
i=o||n.showProjectEvalButton
t=e["if"]
c=d.program(117,Wa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n\n                    "
return r}function Fa(n,a){var r="",i
r+='\n                    <span class="scratchpad-startover-button" data-react-component="button" style="display:none;">\n                        '
o=e["_"]
i=o||n["_"]
c=d.program(112,Ra,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                    </span>\n                    "
return r}function Ra(n,a){return"Start Over"}function Ma(n,a){var r="",i
r+='\n                    <a href="#projecthelp" class="request-help-button" data-react-component="button">\n                        '
o=e["_"]
i=o||n["_"]
c=d.program(115,Ha,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                    </a>\n                    "
return r}function Ha(n,a){return"Request Help"}function Wa(n,a){var r="",i
r+='\n                    <a href="#challenge-task-container" class="request-eval-button" data-react-component="button">\n                        '
o=e["_"]
i=o||n["_"]
c=d.program(118,Ba,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                    </a>\n                    "
return r}function Ba(n,a){return"I'm all done!"}function Na(n,a){var r,i
o=e.scratchpad
r=o||n.scratchpad
r=r===null||r===undefined||r===false?r:r.isPublished
i=e.unless
c=d.program(121,La,a)
c.hash={}
c.fn=c
c.inverse=d.noop
r=i.call(n,r,c)
if(r||r===0){return r}else{return""}}function La(n,a){var r,i
o=e.isRedirectedProjectFork
r=o||n.isRedirectedProjectFork
i=e.unless
c=d.program(122,Ia,a)
c.hash={}
c.fn=c
c.inverse=d.noop
r=i.call(n,r,c)
if(r||r===0){return r}else{return""}}function Ia(n,a){var r,i
o=e.embedded
r=o||n.embedded
i=e["if"]
c=d.program(123,Oa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
r=i.call(n,r,c)
if(r||r===0){return r}else{return""}}function Oa(n,a){var r,i
o=e.hasAudio
r=o||n.hasAudio
i=e.unless
c=d.program(124,qa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
r=i.call(n,r,c)
if(r||r===0){return r}else{return""}}function qa(n,a){var r="",i,t
r+='\n                <div class="author">\n                    <img class="user-avatar pull-left" src="'
o=e.creatorProfile
i=o||n.creatorProfile
i=i===null||i===undefined||i===false?i:i.avatarSrc
o=e.staticUrl
t=o||n.staticUrl
if(typeof t===f){i=t.call(n,i,{hash:{}})}else if(t===h){i=p.call(n,"staticUrl",i,{hash:{}})}else{i=t}r+=u(i)+'"/>\n\n                    <div class="pull-left">\n                        <div>\n                            <a href="'
o=e.creatorProfile
i=o||n.creatorProfile
i=i===null||i===undefined||i===false?i:i.isPublic
t=e["if"]
c=d.program(125,Va,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+='"\n                                class="author-nickname profile-programs" data-user-kaid="'
o=e.scratchpad
i=o||n.scratchpad
i=i===null||i===undefined||i===false?i:i.kaid
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"scratchpad.kaid",{hash:{}})}r+=u(i)+'"\n                                '
o=e.embedded
i=o||n.embedded
t=e["if"]
c=d.program(127,Ya,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+=">\n                                "
o=e.creatorProfile
i=o||n.creatorProfile
i=i===null||i===undefined||i===false?i:i.nickname
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"creatorProfile.nickname",{hash:{}})}r+=u(i)+"\n                            </a>\n                        </div>\n\n                        <div>\n                            ("
o=e["_"]
i=o||n["_"]
c=d.program(129,Ka,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+='\n                            <time class="timeago" datetime="'
o=e.lastUpdatedTime
i=o||n.lastUpdatedTime
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"lastUpdatedTime",{hash:{}})}r+=u(i)+'">\n                                '
o=e.lastUpdatedTime
i=o||n.lastUpdatedTime
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"lastUpdatedTime",{hash:{}})}r+=u(i)+"\n                            </time>)\n                        </div>\n                    </div>\n                </div>\n                "
return r}function Va(n,a){var r
o=e.creatorProfile
r=o||n.creatorProfile
r=r===null||r===undefined||r===false?r:r.profileRoot
if(typeof r===f){r=r.call(n,{hash:{}})}else if(r===h){r=p.call(n,"creatorProfile.profileRoot",{hash:{}})}return u(r)}function Ya(n,a){return'target="_blank"'}function Ka(n,a){return"Updated"}function Za(n,a){var r="",i,t
r+='\n                <!-- Row for playback controls -->\n                <div class="scratchpad-playbar">\n                    <div class="scratchpad-playbar-area" style="display:none;">\n                        <button\n                            class="simple-button primary scratchpad-playbar-play"\n                            type="button">\n                            <span class="icon-play"></span>\n                        </button>\n\n                        <div class="scratchpad-playbar-progress"></div>\n\n                        <span class="scratchpad-playbar-timeleft"></span>\n\n                        <span class="dropdown scratchpad-playbar-options">\n                            <button class="dropdown-toggle" disabled>\n                                <i class="icon-cog icon-large"></i>\n                                <i class="icon-caret-down"></i>\n                            </button>\n                            <ul class="dropdown-menu no-submenus">\n                                <li>\n                                    <label>\n                                        <input type="checkbox">\n                                        <span class="link-text">'
o=e["_"]
i=o||n["_"]
c=d.program(132,Ga,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="</span>\n                                    </label>\n                                </li>\n                                "
o=e.youtubeUrl
i=o||n.youtubeUrl
t=e["if"]
c=d.program(134,za,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+='\n                            </ul>\n                        </span>\n\n                    </div>\n                    <div class="loading-msg">\n                        '
o=e["_"]
i=o||n["_"]
c=d.program(137,Qa,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                    </div>\n                </div>\n                "
return r}function Ga(n,a){return"Interactive transcript"}function za(n,a){var r="",i
r+='\n                                <li>\n                                    <a href="'
o=e.youtubeUrl
i=o||n.youtubeUrl
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"youtubeUrl",{hash:{}})}r+=u(i)+'" target="_blank">\n                                        <span class="icon-youtube"></span>\n                                        '
o=e["_"]
i=o||n["_"]
c=d.program(135,Ja,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+="\n                                    </a>\n                                </li>\n                                "
return r}function Ja(n,a){return"Watch on Youtube"}function Qa(n,a){return"Loading audio..."}function Xa(n,a){var e=""
e+="\n                "
e+="\n                &nbsp;\n                "
return e}function $a(n,a){var i="",t
i+="\n                "
t=n
t=d.invokePartial(r["scratchpads_scratchpad-canvas-toolbar"],"scratchpads_scratchpad-canvas-toolbar",t,e,r)
if(t||t===0){i+=t}i+="\n            "
return i}function ne(n,a){var r="",i
r+='\n                    <iframe id="output-frame"\n                        sandbox="'
o=e.sandboxProps
i=o||n.sandboxProps
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"sandboxProps",{hash:{}})}r+=u(i)+'"\n                        src="'
o=e.sandboxUrl
i=o||n.sandboxUrl
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"sandboxUrl",{hash:{}})}r+=u(i)+"&amp;deferjsk=0&amp;v="
o=e.appVersion
i=o||n.appVersion
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"appVersion",{hash:{}})}r+=u(i)+'"\n                        data-src="'
o=e.sandboxUrl
i=o||n.sandboxUrl
if(typeof i===f){i=i.call(n,{hash:{}})}else if(i===h){i=p.call(n,"sandboxUrl",{hash:{}})}r+=u(i)+'" style="width: 100%;"></iframe>\n                '
return r}function ae(n,a){return"Loading..."}function ee(n,a){var i="",t
i+="\n                "
t=n
t=d.invokePartial(r["scratchpads_scratchpad-canvas-toolbar"],"scratchpads_scratchpad-canvas-toolbar",t,e,r)
if(t||t===0){i+=t}i+="\n            "
return i}function re(n,a){var r="",i,t
r+="\n    "
o=e.inEditModeAndCanEdit
i=o||n.inEditModeAndCanEdit
t=e["if"]
c=d.program(150,ie,a)
c.hash={}
c.fn=c
c.inverse=d.noop
i=t.call(n,i,c)
if(i||i===0){r+=i}r+="\n\n    "
o=e.isNew
i=o||n.isNew
t=e["if"]
c=d.program(153,se,a)
c.hash={}
c.fn=c
c.inverse=d.program(155,le,a)
i=t.call(n,i,c)
if(i||i===0){r+=i}r+='\n\n    <!-- iPad Navigation -->\n    <div class="ipad-scratchpad-wrap-outer"></div>\n\n    <div class="license">'
o=e["_"]
i=o||n["_"]
c=d.program(157,oe,a)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof i===f){i=i.call(n,c)}else{i=v.call(n,i,c)}if(i||i===0){r+=i}r+=".</div>\n    "
return r}function ie(n,a){var r,i
o=e.canRecord
r=o||n.canRecord
i=e["if"]
c=d.program(151,te,a)
c.hash={}
c.fn=c
c.inverse=d.noop
r=i.call(n,r,c)
if(r||r===0){return r}else{return""}}function te(n,a){return'\n        <div class="scratchpad-toolbar scratchpad-dev-record-row"></div>\n    '}function se(n,a){return'\n    <div class="documentation"></div>\n    '}function le(n,a){var i="",t
i+="\n    "
t=n
t=d.invokePartial(r.discussion_discussion,"discussion_discussion",t,e,r)
if(t||t===0){i+=t}i+="\n    "
return i}function oe(n,a){return'All code is owned by its respective author and made available under an <a href="http://opensource.org/licenses/mit-license.php">MIT license</a>. All non-code (such as writing, drawings, images, etc.) are also owned by their respective author and made available under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution License</a>. For more information please see the <a href="/about/tos#5">Terms of Service</a>'}t+="<div>\n    "
o=e.embeddedAndWithFrame
s=o||a.embeddedAndWithFrame
l=e.unless
c=d.program(1,g,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n\n    "
t+="\n    "
o=e.inEditModeAndCanEdit
s=o||a.inEditModeAndCanEdit
l=e["if"]
c=d.program(61,ra,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n\n    "
o=e.showShareButton
s=o||a.showShareButton
l=e["if"]
c=d.program(63,ia,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n\n    <!-- Main scratchpad content -->\n    <div class="scratchpad-wrap-outer">\n        '
o=e.showProjectEvalArea
s=o||a.showProjectEvalArea
l=e["if"]
c=d.program(65,ta,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n\n        "
o=e.embeddedAndWithFrame
s=o||a.embeddedAndWithFrame
l=e.unless
c=d.program(67,sa,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n    <div class="scratchpad-wrap'
o=e.sandboxUrl
s=o||a.sandboxUrl
l=e.unless
c=d.program(72,ca,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='">\n        <!-- Editor -->\n        <div class="scratchpad-editor-wrap overlay-container">\n            <div class="scratchpad-editor-tabs">\n              '
o=e.inEditModeAndCanEdit
s=o||a.inEditModeAndCanEdit
l=e["if"]
c=d.program(74,da,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n              \n              <div id="scratchpad-code-editor-tab" class="scratchpad-editor-tab">\n                <div class="scratchpad-editor scratchpad-ace-editor"></div>\n                <div class="overlay disable-overlay" style="display:none;">\n                </div>\n\n                '
o=e.hasAudio
s=o||a.hasAudio
l=e["if"]
c=d.program(81,ua,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n              </div>\n\n              "
o=e.inEditModeAndCanEdit
s=o||a.inEditModeAndCanEdit
l=e["if"]
c=d.program(91,_a,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n            </div>\n\n            <div class="scratchpad-toolbar">\n                '
o=e.originScratchpad
s=o||a.originScratchpad
l=e["if"]
c=d.program(96,Pa,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n\n\n                <div class="pull-right">\n                    <span class="scratchpad-editor-undo-button" data-react-component="button" style="display:none;">\n                        '
o=e["_"]
s=o||a["_"]
c=d.program(108,Ca,i)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof s===f){s=s.call(a,c)}else{s=v.call(a,s,c)}if(s||s===0){t+=s}t+="\n                    </span>\n\n                    "
o=e.embeddedAndWithFrame
s=o||a.embeddedAndWithFrame
l=e.unless
c=d.program(110,Da,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n                </div>\n\n                <p id="save-progress-text" class="pull-right"></p>\n\n                '
t+="\n                "
o=e.creatorProfile
s=o||a.creatorProfile
l=e["if"]
c=d.program(120,Na,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n\n                "
o=e.hasAudio
s=o||a.hasAudio
l=e["if"]
c=d.program(131,Za,i)
c.hash={}
c.fn=c
c.inverse=d.program(139,Xa,i)
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n            </div>\n            \n            "
o=e.sandboxUrl
s=o||a.sandboxUrl
l=e.unless
c=d.program(141,$a,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n\n        </div>\n\n        <div class="scratchpad-drag-handle" style="display:none;"><div></div></div>\n\n        <!-- Canvases (Drawing + Output) -->\n        <div class="scratchpad-canvas-wrap">\n            <div id="output">\n                <!-- Extra data-src attribute to work around\n                     cross-origin access policies. -->\n                '
o=e.sandboxUrl
s=o||a.sandboxUrl
l=e["if"]
c=d.program(143,ne,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+='\n                <canvas class="scratchpad-draw-canvas" style="display:none;"\n                    width="400" height="400"></canvas>\n\n                <div class="overlay disable-overlay" style="display:none;">\n                </div>\n\n                <div class="scratchpad-canvas-loading">\n                    <img src="'
s="/images/throbber-full.gif"
o=e.staticUrl
l=o||a.staticUrl
if(typeof l===f){s=l.call(a,s,{hash:{}})}else if(l===h){s=p.call(a,"staticUrl",s,{hash:{}})}else{s=l}t+=u(s)+'">\n                    <span class="hide-text">'
o=e["_"]
s=o||a["_"]
c=d.program(145,ae,i)
c.hash={}
c.fn=c
c.inverse=d.noop
if(o&&typeof s===f){s=s.call(a,c)}else{s=v.call(a,s,c)}if(s||s===0){t+=s}t+="</span>\n                </div>\n            </div>\n\n            "
o=e.sandboxUrl
s=o||a.sandboxUrl
l=e["if"]
c=d.program(147,ee,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n        </div>\n    </div>\n\n    "
o=e.embeddedAndWithFrame
s=o||a.embeddedAndWithFrame
l=e.unless
c=d.program(149,re,i)
c.hash={}
c.fn=c
c.inverse=d.noop
s=l.call(a,s,c)
if(s||s===0){t+=s}t+="\n    </div>\n</div>\n"
return t})
function wrapped_template(n,a){return absoluteLinks.makeHtmlLinksSafe(template(n,a))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/header-buttons.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(n,e,a,r,t){a=a||n.helpers
r=r||n.partials
var i="",l,s,o,c,f=this,u="function",p=a.helperMissing,h=void 0,d=this.escapeExpression,v=a.blockHelperMissing
function m(n,e){return' class="has-progress"'}function g(n,e){return'\n    <div class="challenge-progress">\n        <div id="challenge-status-message"></div>\n        <div id="challenge-progress-bar">\n        </div>\n    </div>\n    '}function b(n,e){var r="",t,i
r+="\n\n            "
o=a.embedded
t=o||n.embedded
i=a.unless
c=f.program(6,y,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n\n\n            "
o=a.isOwner
t=o||n.isOwner
i=a["if"]
c=f.program(10,k,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n\n            "
o=a.inEditModeAndCanEdit
t=o||n.inEditModeAndCanEdit
i=a["if"]
c=f.program(14,C,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n\n            "
o=a.embedded
t=o||n.embedded
i=a["if"]
c=f.program(17,H,e)
c.hash={}
c.fn=c
c.inverse=f.program(21,T,e)
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n\n            "
r+="\n            "
o=a["private"]
t=o||n["private"]
i=a["if"]
c=f.program(26,F,e)
c.hash={}
c.fn=c
c.inverse=f.program(30,A,e)
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n        "
return r}function y(n,e){var r="",t,i
r+="\n            "
o=a.isComputerProgramming
t=o||n.isComputerProgramming
i=a["if"]
c=f.program(7,_,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n            "
return r}function _(n,e){var r="",t
r+='\n            <!-- New Program button -->\n            <a href="'
o=a.scratchpad
t=o||n.scratchpad
t=t===null||t===undefined||t===false?t:t.newUrlPath
if(typeof t===u){t=t.call(n,{hash:{}})}else if(t===h){t=p.call(n,"scratchpad.newUrlPath",{hash:{}})}r+=d(t)+'" class="new-scratchpad" style="margin-top: -9px;" data-react-component="button" data-react-button-type="submit">\n                    '
o=a["_"]
t=o||n["_"]
c=f.program(8,w,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="\n            </a>\n            "
return r}function w(n,e){var r
o=a.newTitle
r=o||n.newTitle
if(typeof r===u){r=r.call(n,{hash:{}})}else if(r===h){r=p.call(n,"newTitle",{hash:{}})}return d(r)}function k(n,e){var r="",t,i
r+="\n            "
o=a.isRedirectedProjectFork
t=o||n.isRedirectedProjectFork
i=a.unless
c=f.program(11,P,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n            "
return r}function P(n,e){var r="",t
r+='\n            <!-- Hard delete button -->\n            <span class="scratchpad-delete-button pull-right" data-test-id="scratchpad-delete-button" data-react-component="button" data-react-button-type="submit">\n                '
o=a["_"]
t=o||n["_"]
c=f.program(12,U,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="\n            </span>\n            "
return r}function U(n,e){return"Delete"}function C(n,e){var r="",t
r+='\n                <span class="dev-settings-button pull-right" data-react-component="button" data-react-button-type="submit">\n                    '
o=a["_"]
t=o||n["_"]
c=f.program(15,E,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="</span>\n            "
return r}function E(n,e){return"Settings"}function H(n,e){var r="",t,i
r+="\n                "
o=a.canEdit
t=o||n.canEdit
i=a["if"]
c=f.program(18,M,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n            "
return r}function M(n,e){var r="",t
r+='\n                    <a class="pull-right" href="'
o=a.scratchpad
t=o||n.scratchpad
t=t===null||t===undefined||t===false?t:t.url
if(typeof t===u){t=t.call(n,{hash:{}})}else if(t===h){t=p.call(n,"scratchpad.url",{hash:{}})}r+=d(t)+'" data-react-component="button" data-react-button-type="submit" target="_blank">'
o=a["_"]
t=o||n["_"]
c=f.program(19,S,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="</a>\n                "
return r}function S(n,e){return"Edit"}function T(n,e){var r="",t,i
r+="\n                "
o=a.tutorialUrl
t=o||n.tutorialUrl
i=a["if"]
c=f.program(22,x,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n            "
return r}function x(n,e){var r="",t,i
r+="\n                    "
o=a.canEdit
t=o||n.canEdit
i=a["if"]
c=f.program(23,B,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n                "
return r}function B(n,e){var r="",t
r+='\n                        <a class="pull-right" href="'
o=a.tutorialUrl
t=o||n.tutorialUrl
if(typeof t===u){t=t.call(n,{hash:{}})}else if(t===h){t=p.call(n,"tutorialUrl",{hash:{}})}r+=d(t)+'" data-react-component="button" data-react-button-type="submit" target="_blank">'
o=a["_"]
t=o||n["_"]
c=f.program(24,j,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="</a>\n                    "
return r}function j(n,e){return"View in Tutorial"}function F(n,e){var r="",t,i
r+="\n                "
o=a.creatorProfile
t=o||n.creatorProfile
i=a["if"]
c=f.program(27,L,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n            "
return r}function L(n,e){var r="",t
r+='\n                <span class="pull-right" id="child-account-notice">\n                    '
o=a["_"]
t=o||n["_"]
c=f.program(28,N,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="</span>\n                "
return r}function N(n,e){return"Child account program"}function A(n,e){var r="",t,i
r+="\n            <!-- Voting Controls -->\n            "
o=a.key
t=o||n.key
i=a["if"]
c=f.program(31,O,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n\n            <!-- Share Button -->\n            "
o=a.showShareButton
t=o||n.showShareButton
i=a["if"]
c=f.program(33,R,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n\n            <!-- Moderators area, for non official programs-->\n            "
o=a.scratchpad
t=o||n.scratchpad
t=t===null||t===undefined||t===false?t:t.isPublished
i=a.unless
c=f.program(36,q,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n            "
return r}function O(n,e){var t="",i
t+='\n            <div class="scratchpad-vote pull-right">\n                '
i=n
i=f.invokePartial(r["discussion_discussion-meta"],"discussion_discussion-meta",i,a,r)
if(i||i===0){t+=i}t+="\n            </div>\n            "
return t}function R(n,e){var r="",t
r+='\n                <span class="pull-right scratchpad-share-button" data-react-component="button" data-react-button-use="white">\n                    '
o=a["_"]
t=o||n["_"]
c=f.program(34,V,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="\n                </span>\n            "
return r}function V(n,e){return"Share"}function q(n,e){var r="",t,i
r+="\n            "
o=a.isModerator
t=o||n.isModerator
i=a["if"]
c=f.program(37,D,e)
c.hash={}
c.fn=c
c.inverse=f.noop
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n            "
return r}function D(n,e){var r="",t,i
r+='\n            <div class="clear"></div>\n            <div class="scratchpad-buttons-area">\n\n                <!-- Soft delete Button -->\n                <span id="hide-everywhere" class="scratchpad-softdelete-button pull-right" data-react-component="button" data-react-button-type="submit">\n                    '
o=a.scratchpad
t=o||n.scratchpad
t=t===null||t===undefined||t===false?t:t.deleted
i=a["if"]
c=f.program(38,z,e)
c.hash={}
c.fn=c
c.inverse=f.program(41,I,e)
t=i.call(n,t,c)
if(t||t===0){r+=t}r+='\n                </span>\n\n                <!-- Hide from hotlist -->\n                <span id="hide-from-hotlist" class="scratchpad-hotlist-button pull-right" data-react-component="button" data-react-button-type="submit">\n                    '
o=a.scratchpad
t=o||n.scratchpad
t=t===null||t===undefined||t===false?t:t.hideFromHotlist
i=a["if"]
c=f.program(44,K,e)
c.hash={}
c.fn=c
c.inverse=f.program(47,W,e)
t=i.call(n,t,c)
if(t||t===0){r+=t}r+="\n                </span>\n            </div>\n            "
return r}function z(n,e){var r="",t
r+="\n                    "
o=a["_"]
t=o||n["_"]
c=f.program(39,G,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="\n                    "
return r}function G(n,e){return"Undo hide everywhere"}function I(n,e){var r="",t
r+="\n                    "
o=a["_"]
t=o||n["_"]
c=f.program(42,J,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="\n                    "
return r}function J(n,e){return"Hide everywhere"}function K(n,e){var r="",t
r+="\n                    "
o=a["_"]
t=o||n["_"]
c=f.program(45,Q,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="\n                    "
return r}function Q(n,e){return"Undo hide from hotlist"}function W(n,e){var r="",t
r+="\n                    "
o=a["_"]
t=o||n["_"]
c=f.program(48,X,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="\n                    "
return r}function X(n,e){return"Hide from hotlist"}function Y(n,e){var r="",t
r+='\n        <div class="scratchpad-buttons-area">\n            <div class="clear"></div>\n            <a class="pull-right" href="'
o=a.scratchpad
t=o||n.scratchpad
t=t===null||t===undefined||t===false?t:t.guidelinesUrlPath
if(typeof t===u){t=t.call(n,{hash:{}})}else if(t===h){t=p.call(n,"scratchpad.guidelinesUrlPath",{hash:{}})}r+=d(t)+'" target="_blank">'
o=a["_"]
t=o||n["_"]
c=f.program(51,Z,e)
c.hash={}
c.fn=c
c.inverse=f.noop
if(o&&typeof t===u){t=t.call(n,c)}else{t=v.call(n,t,c)}if(t||t===0){r+=t}r+="</a>\n        </div>\n        "
return r}function Z(n,e){var r
o=a.guidelinesTitle
r=o||n.guidelinesTitle
if(typeof r===u){r=r.call(n,{hash:{}})}else if(r===h){r=p.call(n,"guidelinesTitle",{hash:{}})}return d(r)}i+="<div"
o=a.isChallenge
l=o||e.isChallenge
s=a["if"]
c=f.program(1,m,t)
c.hash={}
c.fn=c
c.inverse=f.noop
l=s.call(e,l,c)
if(l||l===0){i+=l}i+=">\n   "
o=a.isChallenge
l=o||e.isChallenge
s=a["if"]
c=f.program(3,g,t)
c.hash={}
c.fn=c
c.inverse=f.noop
l=s.call(e,l,c)
if(l||l===0){i+=l}i+='\n\n    <div class="buttons clearfix">\n\n        '
o=a.isNew
l=o||e.isNew
s=a.unless
c=f.program(5,b,t)
c.hash={}
c.fn=c
c.inverse=f.noop
l=s.call(e,l,c)
if(l||l===0){i+=l}i+="\n        "
o=a.scratchpad
l=o||e.scratchpad
l=l===null||l===undefined||l===false?l:l.isPublished
s=a.unless
c=f.program(50,Y,t)
c.hash={}
c.fn=c
c.inverse=f.noop
l=s.call(e,l,c)
if(l||l===0){i+=l}i+='\n    </div>\n    <div class="clear"></div>\n</div>\n'
return i})
function wrapped_template(n,e){return absoluteLinks.makeHtmlLinksSafe(template(n,e))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/objectives-pane.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(e,n,i,a,r){i=i||e.helpers
var t,s,l,c,o=this,p="function",d=i.blockHelperMissing,f=i.helperMissing,h=void 0
function u(e,n){var a="",r,t
a+='\n<div class="objectives-pane-outer">\n    <div id="objectives-pane" class="scratchpad-objectives-notchallenge min-contained-and-centered">\n        <div class="challenge-step">\n            <div class="test-description full-width">\n                '
l=i.isProject
r=l||e.isProject
t=i["if"]
c=o.program(2,v,n)
c.hash={}
c.fn=c
c.inverse=o.noop
r=t.call(e,r,c)
if(r||r===0){a+=r}a+='\n                <div class="project-description">\n                    '
l=i.originScratchpad
r=l||e.originScratchpad
r=r===null||r===undefined||r===false?r:r.translatedDescription
t=i["if"]
c=o.program(5,m,n)
c.hash={}
c.fn=c
c.inverse=o.program(7,b,n)
r=t.call(e,r,c)
if(r||r===0){a+=r}a+="\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"
return a}function v(e,n){var a="",r
a+="\n                    <h4>"
l=i["_"]
r=l||e["_"]
c=o.program(3,g,n)
c.hash={}
c.fn=c
c.inverse=o.noop
if(l&&typeof r===p){r=r.call(e,c)}else{r=d.call(e,r,c)}if(r||r===0){a+=r}a+="</h4>\n                "
return a}function g(e,n){return"Project Overview"}function m(e,n){var a="",r
a+="\n                        "
l=i.originScratchpad
r=l||e.originScratchpad
r=r===null||r===undefined||r===false?r:r.translatedDescription
if(typeof r===p){r=r.call(e,{hash:{}})}else if(r===h){r=f.call(e,"originScratchpad.translatedDescription",{hash:{}})}if(r||r===0){a+=r}a+="\n                    "
return a}function b(e,n){var a="",r
a+="\n                        "
l=i.translatedDescription
r=l||e.translatedDescription
if(typeof r===p){r=r.call(e,{hash:{}})}else if(r===h){r=f.call(e,"translatedDescription",{hash:{}})}if(r||r===0){a+=r}a+="\n                    "
return a}l=i.showDescription
t=l||n.showDescription
s=i["if"]
c=o.program(1,u,r)
c.hash={}
c.fn=c
c.inverse=o.noop
t=s.call(n,t,c)
if(t||t===0){return t}else{return""}})
function wrapped_template(e,n){return absoluteLinks.makeHtmlLinksSafe(template(e,n))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/share-embed.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(e,a,r,s,l){r=r||e.helpers
var t="",i,n,p,h,o=this,c="function",f=r.blockHelperMissing,m=r.helperMissing,u=void 0,d=this.escapeExpression
function g(e,a){var s="",l
s+="\n<p>"
p=r["_"]
l=p||e["_"]
h=o.program(2,k,a)
h.hash={}
h.fn=h
h.inverse=o.noop
if(p&&typeof l===c){l=l.call(e,h)}else{l=f.call(e,l,h)}if(l||l===0){s+=l}s+="</p>\n"
return s}function k(e,a){return'Made using: <a href="http://www.khanacademy.org/computer-programming">Khan Academy Computer Science</a>.'}t+='<h2><a href="'
p=r.shareURL
i=p||a.shareURL
if(typeof i===c){i=i.call(a,{hash:{}})}else if(i===u){i=m.call(a,"shareURL",{hash:{}})}t+=d(i)+'">'
p=r.translatedTitle
i=p||a.translatedTitle
if(typeof i===c){i=i.call(a,{hash:{}})}else if(i===u){i=m.call(a,"translatedTitle",{hash:{}})}t+=d(i)+'</a></h2>\n<script src="'
p=r.url
i=p||a.url
if(typeof i===c){i=i.call(a,{hash:{}})}else if(i===u){i=m.call(a,"url",{hash:{}})}t+=d(i)+"/embed.js?"
p=r.params
i=p||a.params
if(typeof i===c){i=i.call(a,{hash:{}})}else if(i===u){i=m.call(a,"params",{hash:{}})}t+=d(i)+'"><\\/script>\n'
p=r.isComputerProgramming
i=p||a.isComputerProgramming
n=r["if"]
h=o.program(1,g,l)
h.hash={}
h.fn=h
h.inverse=o.noop
i=n.call(a,i,h)
if(i||i===0){t+=i}return t})
function wrapped_template(e,a){return absoluteLinks.makeHtmlLinksSafe(template(e,a))}module.exports=wrapped_template
});
KAdefine("javascript/scratchpads-package/scratchpad-canvas-toolbar.handlebars", function(require, module, exports) {
require("../../third_party/javascript-khansrc/handlebars/handlebars.runtime.js");
var absoluteLinks=require("../shared-package/absolute-links.js")
var template=Handlebars.template(function(n,e,a,r,s){a=a||n.helpers
var t="",l,i,o,c,p=this,f="function",d=a.helperMissing,h=void 0,u=this.escapeExpression,v=a.blockHelperMissing
function m(n,e){return"Hmm..."}function g(n,e){var r,s
o=a.canRecord
r=o||n.canRecord
s=a["if"]
c=p.program(4,b,e)
c.hash={}
c.fn=c
c.inverse=p.noop
r=s.call(n,r,c)
if(r||r===0){return r}else{return""}}function b(n,e){var r,s
o=a.canRecordDraw
r=o||n.canRecordDraw
s=a["if"]
c=p.program(5,y,e)
c.hash={}
c.fn=c
c.inverse=p.noop
r=s.call(n,r,c)
if(r||r===0){return r}else{return""}}function y(n,e){var r="",s,t
r+='\n    <div id="draw-widgets" style="display:none;">\n        <a href="" id="draw-clear-button" class="ui-button">\n            <span class="ui-icon-cancel"></span>\n        </a>\n        '
o=a.colors
s=o||n.colors
t=a.each
c=p.program(6,_,e)
c.hash={}
c.fn=c
c.inverse=p.noop
s=t.call(n,s,c)
if(s||s===0){r+=s}r+="\n    </div>\n    "
return r}function _(n,e){var a="",r
a+='\n        <a href="" class="draw-color-button" id="'
r=n
if(typeof r===f){r=r.call(n,{hash:{}})}else if(r===h){r=d.call(n,"this",{hash:{}})}a+=u(r)+'">\n            <span></span>\n        </a>\n        '
return a}function k(n,e){var r="",s
r+='\n    <span id="save-button" class="save-button pull-right" data-react-component="button" data-react-button-type="submit" style="display:none;">'
o=a["_"]
s=o||n["_"]
c=p.program(9,w,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(o&&typeof s===f){s=s.call(n,c)}else{s=v.call(n,s,c)}if(s||s===0){r+=s}r+="</span>\n    "
return r}function w(n,e){return"Save"}function E(n,e){var r="",s,t
r+="\n        "
o=a.embeddedAndWithFrame
s=o||n.embeddedAndWithFrame
t=a["if"]
c=p.program(12,C,e)
c.hash={}
c.fn=c
c.inverse=p.program(17,S,e)
s=t.call(n,s,c)
if(s||s===0){r+=s}r+="\n    "
return r}function C(n,e){var r="",s,t
r+="\n            "
r+='\n            <a class="simple-button pull-left green" '
o=a.isChallenge
s=o||n.isChallenge
t=a["if"]
c=p.program(13,R,e)
c.hash={}
c.fn=c
c.inverse=p.noop
s=t.call(n,s,c)
if(s||s===0){r+=s}r+=' href="'
o=a.scratchpad
s=o||n.scratchpad
s=s===null||s===undefined||s===false?s:s.url
if(typeof s===f){s=s.call(n,{hash:{}})}else if(s===h){s=d.call(n,"scratchpad.url",{hash:{}})}r+=u(s)+'" target="_blank">'
o=a["_"]
s=o||n["_"]
c=p.program(15,A,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(o&&typeof s===f){s=s.call(n,c)}else{s=v.call(n,s,c)}if(s||s===0){r+=s}r+="</a>\n            "
return r}function R(n,e){return'style="display:none;"'}function A(n,e){return"View on Khan Academy"}function S(n,e){var r="",s,t
r+='\n            <!-- Save as/Fork Button -->\n            <span id="fork-button" data-react-component="button"\n                class="pull-left" '
o=a.isChallenge
s=o||n.isChallenge
t=a["if"]
c=p.program(18,L,e)
c.hash={}
c.fn=c
c.inverse=p.noop
s=t.call(n,s,c)
if(s||s===0){r+=s}r+=">"
o=a["_"]
s=o||n["_"]
c=p.program(20,M,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(o&&typeof s===f){s=s.call(n,c)}else{s=v.call(n,s,c)}if(s||s===0){r+=s}r+="</span>\n        "
return r}function L(n,e){return'style="display:none;"'}function M(n,e){return"Spin-off"}function U(n,e){var r,s
o=a.canRecord
r=o||n.canRecord
s=a["if"]
c=p.program(23,H,e)
c.hash={}
c.fn=c
c.inverse=p.noop
r=s.call(n,r,c)
if(r||r===0){return r}else{return""}}function H(n,e){var r="",s
r+='\n    <!-- Record button -->\n    <span id="record" class="pull-left" data-react-component="button">'
o=a["_"]
s=o||n["_"]
c=p.program(24,F,e)
c.hash={}
c.fn=c
c.inverse=p.noop
if(o&&typeof s===f){s=s.call(n,c)}else{s=v.call(n,s,c)}if(s||s===0){r+=s}r+="</span>\n    "
return r}function F(n,e){return"Record"}t+='<div class="scratchpad-toolbar">\n    <div class="error-buddy-resting">\n        <div class="error-buddy-happy" style="display:none;">\n            <img src="'
l="/images/ohnoes-happy.png"
o=a.staticUrl
i=o||e.staticUrl
if(typeof i===f){l=i.call(e,l,{hash:{}})}else if(i===h){l=d.call(e,"staticUrl",l,{hash:{}})}else{l=i}t+=u(l)+'"/>\n        </div>\n        <a class="error-buddy-thinking" style="display:none;" href="javascript:void(0);">\n            <img src="'
l="/images/ohnoes-hmm.png"
o=a.staticUrl
i=o||e.staticUrl
if(typeof i===f){l=i.call(e,l,{hash:{}})}else if(i===h){l=d.call(e,"staticUrl",l,{hash:{}})}else{l=i}t+=u(l)+'"/>\n            '
t+="\n            "
o=a["_"]
l=o||e["_"]
c=p.program(1,m,s)
c.hash={}
c.fn=c
c.inverse=p.noop
if(o&&typeof l===f){l=l.call(e,c)}else{l=v.call(e,l,c)}if(l||l===0){t+=l}t+='\n        </a>\n    </div>\n\n    <span id="restart-code" class="pull-right" data-react-component="button">\n      <span class="icon-refresh"></span>'
o=a.restartLabel
l=o||e.restartLabel
if(typeof l===f){l=l.call(e,{hash:{}})}else if(l===h){l=d.call(e,"restartLabel",{hash:{}})}t+=u(l)+"</span>\n\n    <!-- Widgets for selecting colors to doodle on the canvas during\n        recordings -->\n    "
o=a.inEditModeAndCanEdit
l=o||e.inEditModeAndCanEdit
i=a["if"]
c=p.program(3,g,s)
c.hash={}
c.fn=c
c.inverse=p.noop
l=i.call(e,l,c)
if(l||l===0){t+=l}t+="\n    <!-- Save Button -->\n    "
o=a.hideSave
l=o||e.hideSave
i=a.unless
c=p.program(8,k,s)
c.hash={}
c.fn=c
c.inverse=p.noop
l=i.call(e,l,c)
if(l||l===0){t+=l}t+="\n    "
o=a.isNew
l=o||e.isNew
i=a.unless
c=p.program(11,E,s)
c.hash={}
c.fn=c
c.inverse=p.noop
l=i.call(e,l,c)
if(l||l===0){t+=l}t+="\n    "
o=a.inEditModeAndCanEdit
l=o||e.inEditModeAndCanEdit
i=a["if"]
c=p.program(22,U,s)
c.hash={}
c.fn=c
c.inverse=p.noop
l=i.call(e,l,c)
if(l||l===0){t+=l}t+="\n</div>\n"
return t})
function wrapped_template(n,e){return absoluteLinks.makeHtmlLinksSafe(template(n,e))}module.exports=wrapped_template
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.shared.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/shared-package/i18n.js");
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../../../javascript/node_modules/underscore/index.js");
__KA_require("../../../../../javascript/node_modules/backbone/index.js");
__KA_require("../../../handlebars/handlebars.runtime.js");
__KA_require("../../../../../javascript/shared-package/i18n.js");
__KA_require("../../../../../javascript/shared-package/console.js");
window.AllImages=[{groupName:"animals",images:["birds_rainbow-lorakeets","boxer-getting-tan","boxer-laying-down","boxer-wagging-tongue","butterfly","butterfly_monarch","cat","cheetah","collies","crocodiles","dog_sleeping-puppy","dogs_collies","fox","horse","kangaroos","komodo-dragon","penguins","rabbit","retriever","shark","sleeping-puppy","snake_green-tree-boa","spider"]},{groupName:"avatars",images:["Hopper-jumping.gif","Thumbs.db","aqualine-sapling","aqualine-seed","aqualine-seedling","aqualine-tree","aqualine-ultimate","avatar-team","cs-hopper-cool","cs-hopper-happy","cs-hopper-jumping","cs-ohnoes","cs-winston-baby","cs-winston","duskpin-sapling","duskpin-seed","duskpin-seedling","duskpin-tree","duskpin-ultimate","leaf-blue","leaf-green","leaf-grey","leaf-orange","leaf-red","leaf-yellow","leafers-sapling","leafers-seed","leafers-seedling","leafers-tree","leafers-ultimate","marcimus-orange","marcimus-purple","marcimus-red","marcimus","mr-pants-green","mr-pants-idle.gif","mr-pants-orange","mr-pants-pink","mr-pants-purple","mr-pants-with-hat","mr-pants","mr-pink-green","mr-pink-orange","mr-pink","mystery-1","mystery-2","old-spice-man-blue","old-spice-man","orange-juice-squid","piceratops-sapling","piceratops-seed","piceratops-seedling","piceratops-tree","piceratops-ultimate","primosaur-sapling","primosaur-seed","primosaur-seedling","primosaur-tree","primosaur-ultimate","purple-pi-pink","purple-pi-teal","purple-pi","questionmark","robot_female_1","robot_female_2","robot_female_3","robot_male_1","robot_male_2","robot_male_3","spunky-sam-green","spunky-sam-orange","spunky-sam-red","spunky-sam","starky-sapling","starky-seed","starky-seedling","starky-tree","starky-ultimate"]},{groupName:"creatures",images:["BabyWinston","Hopper-Cool","Hopper-Happy","Hopper-Jumping","OhNoes","Winston"]},{groupName:"cute",images:["Blank","BrownBlock","CharacterBoy","CharacterCatGirl","CharacterHornGirl","CharacterPinkGirl","CharacterPrincessGirl","ChestClosed","ChestLid","ChestOpen","DirtBlock","DoorTallClosed","DoorTallOpen","EnemyBug","GemBlue","GemGreen","GemOrange","GrassBlock","Heart","Key","None","PlainBlock","RampEast","RampNorth","RampSouth","RampWest","Rock","RoofEast","RoofNorth","RoofNorthEast","RoofNorthWest","RoofSouth","RoofSouthEast","RoofSouthWest","RoofWest","Selector","ShadowEast","ShadowNorth","ShadowNorthEast","ShadowNorthWest","ShadowSideWest","ShadowSouth","ShadowSouthEast","ShadowSouthWest","ShadowWest","Star","StoneBlock","StoneBlockTall","TreeShort","TreeTall","TreeUgly","WallBlock","WallBlockTall","WaterBlock","WindowTall","WoodBlock"]},{groupName:"food",images:["bananas","berries","broccoli","brussels-sprouts","cake","chocolates","coffee-beans","croissant","dumplings","fish_grilled-snapper","fruits","grapes","hamburger","ice-cream","mushroom","oysters","pasta","potato-chips","potatoes","shish-kebab","strawberries","sushi","tomatoes"]},{groupName:"insideout",images:["layer0blur0","layer0blur10","layer0blur20","layer0blur40","layer0blur80","layer1blur0","layer1blur10","layer1blur20","layer1blur40","layer1blur80","layer2blur0","layer2blur10","layer2blur20","layer2blur40","layer2blur80","layer3blur0","layer3blur10","layer3blur100","layer3blur20","layer3blur40","layer3blur80","shot1_layer0blur0","shot1_layer0blur10","shot1_layer0blur20","shot1_layer0blur40","shot1_layer0blur80","shot1_layer1blur0","shot1_layer1blur10","shot1_layer1blur20","shot1_layer1blur40","shot1_layer1blur80","shot1_layer2blur0","shot1_layer2blur10","shot1_layer2blur20","shot1_layer2blur40","shot1_layer2blur80","shot1_layer3blur0","shot1_layer3blur10","shot1_layer3blur20","shot1_layer3blur40","shot1_layer3blur80","shot1_layer4blur0","shot1_layer4blur10","shot1_layer4blur20","shot1_layer4blur40","shot1_layer4blur80","shot1_layer5blur0","shot1_layer5blur10","shot1_layer5blur20","shot1_layer5blur40","shot1_layer5blur80","shot2_layer0blur0","shot2_layer0blur10","shot2_layer0blur20","shot2_layer0blur40","shot2_layer0blur80","shot2_layer1blur0","shot2_layer1blur10","shot2_layer1blur20","shot2_layer1blur40","shot2_layer1blur80","shot2_layer2blur0","shot2_layer2blur10","shot2_layer2blur20","shot2_layer2blur40","shot2_layer2blur80","shot2_layer3blur0","shot2_layer3blur10","shot2_layer3blur20","shot2_layer3blur40","shot2_layer3blur80","shot2_layer4blur0","shot2_layer4blur10","shot2_layer4blur20","shot2_layer4blur40","shot2_layer4blur80"]},{groupName:"landscapes",images:["beach-at-dusk","beach-in-hawaii","beach-sunset","beach-waves-at-sunset","beach-waves-at-sunset2","beach-waves-daytime","beach-with-palm-trees","beach","clouds-from-plane","crop-circle","fields-of-grain","fields-of-wine","lake-steam-rising","lake","lava","lotus-garden","mountain_matterhorn","mountains-and-lake","mountains-in-hawaii","mountains-sunset","sand-dunes","waterfall_niagara-falls"]},{groupName:"misc",images:["boxmodel","tim-berners-lee-webpage","tim-berners-lee"]},{groupName:"pixar",images:["army1","army2","bedspread","bopeep","buzz","floorplanes","ham","lamp","luxoball"]},{groupName:"scratchpads",images:["colorpicker_background","colorpicker_hex","colorpicker_hsb_b","colorpicker_hsb_h","colorpicker_hsb_s","colorpicker_indic","colorpicker_overlay","colorpicker_rgb_b","colorpicker_rgb_g","colorpicker_rgb_r","colorpicker_select","colorpicker_submit","cool-critter","error-buddy","happy-critter","jumping-critter","leaf-green","leaf-orange","leaf-red","leaf-yellow","select","simple-button-green-loader.gif","speech-arrow","topic-animation","topic-drawing","topic-programming-basics","topic-user-interaction","ui-icons_808080_256x240"]},{groupName:"seasonal",images:["disco-ball","father-winston","fireworks-2015","fireworks-in-sky","fireworks-over-harbor","fireworks-scattered","gingerbread-family","gingerbread-house","gingerbread-houses","gingerbread-man","hannukah-dreidel","hannukah-menorah","hopper-elfer","hopper-partying","hopper-reindeer","house-with-lights","penguin-with-presents","red-nosed-winston","reindeer-with-hat","reindeer","santa-with-bag","snow-crystal1","snow-crystal2","snow-crystal3","snowman","snownoes","snowy-slope-with-trees","stocking-empty","xmas-cookies","xmas-ornament-boat","xmas-ornament-on-tree","xmas-ornaments","xmas-presents","xmas-scene-holly-border","xmas-tree-with-presents","xmas-tree","xmas-wreath"]},{groupName:"space",images:["0","1","2","3","4","5","6","7","8","9","background","beetleship","collisioncircle","girl1","girl2","girl3","girl4","girl5","healthheart","minus","octopus","planet","plus","rocketship","star"]}]
if(!i18n._){i18n._=function(e){return e}}window.OutputImages=[{groupName:"avatars",images:"leaf-blue leaf-green leaf-grey leaf-orange leaf-red leaf-yellow leafers-seed leafers-seedling leafers-sapling leafers-tree leafers-ultimate marcimus mr-pants mr-pink piceratops-seed piceratops-seedling piceratops-sapling piceratops-tree piceratops-ultimate old-spice-man orange-juice-squid aqualine-seed aqualine-seedling aqualine-sapling aqualine-tree aqualine-ultimate purple-pi questionmark robot_female_1 robot_female_2 robot_female_3 robot_male_1 robot_male_2 robot_male_3 spunky-sam".split(" ")},{groupName:"creatures",images:"Hopper-Happy Hopper-Cool Hopper-Jumping OhNoes BabyWinston Winston".split(" ")},{groupName:"cute",images:"Blank BrownBlock CharacterBoy CharacterCatGirl CharacterHornGirl CharacterPinkGirl CharacterPrincessGirl ChestClosed ChestLid ChestOpen DirtBlock DoorTallClosed DoorTallOpen EnemyBug GemBlue GemGreen GemOrange GrassBlock Heart Key PlainBlock RampEast RampNorth RampSouth RampWest Rock RoofEast RoofNorth RoofNorthEast RoofNorthWest RoofSouth RoofSouthEast RoofSouthWest RoofWest Selector ShadowEast ShadowNorth ShadowNorthEast ShadowNorthWest ShadowSideWest ShadowSouth ShadowSouthEast ShadowSouthWest ShadowWest Star StoneBlock StoneBlockTall TreeShort TreeTall TreeUgly WallBlock WallBlockTall WaterBlock WindowTall WoodBlock".split(" "),cite:i18n._("'Planet Cute' art by Daniel Cook (Lostgarden.com)"),citeLink:"http://lostgarden.com/2007/05/dancs-miraculously-flexible-game.html"},{groupName:"space",images:"background beetleship collisioncircle girl1 girl2 girl3 girl4 girl5 healthheart minus octopus planet plus rocketship star 0 1 2 3 4 5 6 7 8 9".split(" "),cite:i18n._("'Space Cute' art by Daniel Cook (Lostgarden.com)"),citeLink:"http://lostgarden.com/2007/03/spacecute-prototyping-challenge.html"}]
window.ExtendedOutputImages=[{className:"Clipart",groups:OutputImages},{className:"Photos",groups:[{groupName:"animals",thumbsDir:"/thumbs",images:"birds_rainbow-lorakeets butterfly butterfly_monarch cat cheetah crocodiles dog_sleeping-puppy dogs_collies fox horse kangaroos komodo-dragon penguins rabbit retriever shark snake_green-tree-boa spider".split(" ")},{groupName:"landscapes",thumbsDir:"/thumbs",images:"beach-at-dusk beach-in-hawaii beach-sunset beach-waves-at-sunset beach-waves-daytime beach-with-palm-trees beach clouds-from-plane crop-circle fields-of-grain fields-of-wine lake lava lotus-garden mountain_matterhorn mountains-and-lake mountains-in-hawaii mountains-sunset sand-dunes waterfall_niagara-falls".split(" ")},{groupName:"food",thumbsDir:"/thumbs",images:"bananas berries broccoli brussels-sprouts cake chocolates coffee-beans croissant dumplings fish_grilled-snapper fruits grapes hamburger ice-cream mushroom oysters pasta potato-chips potatoes shish-kebab strawberries sushi tomatoes".split(" ")}]},{className:"Holiday ☃",groups:[{groupName:"seasonal",thumbsDir:"/thumbs",images:"father-winston fireworks-2015 fireworks-in-sky fireworks-over-harbor fireworks-scattered gingerbread-family gingerbread-house gingerbread-houses gingerbread-man hannukah-dreidel hannukah-menorah hopper-elfer hopper-partying hopper-reindeer house-with-lights reindeer snow-crystal1 snow-crystal2 snow-crystal3 snownoes snowy-slope-with-trees stocking-empty xmas-cookies xmas-ornament-boat xmas-ornament-on-tree xmas-ornaments xmas-presents xmas-scene-holly-border xmas-tree-with-presents xmas-tree xmas-wreath".split(" ")}]}]
if(!i18n._){i18n._=function(e){return e}}window.OutputSounds=[{className:"Sound effects",groups:[{groupName:"rpg",sounds:"battle-magic battle-spell battle-swing coin-jingle door-open giant-hyah giant-no giant-yah hit-clop hit-splat hit-thud hit-whack metal-chime metal-clink step-heavy water-bubble water-slosh".split(" "),cite:i18n._("'RPG Sound Effects' sounds by artisticdude"),citeLink:"http://opengameart.org/content/rpg-sound-pack"},{groupName:"retro",sounds:"boom1 boom2 coin hit1 hit2 jump1 jump2 laser1 laser2 laser3 laser4 rumble thruster-short thruster-long whistle1 whistle2".split(" "),cite:i18n._("'Retro Game Sounds' sounds by spongejr"),citeLink:"https://www.khanacademy.org/profile/spongejr/"}]}]
window.ScratchpadRecord=Backbone.Model.extend({initialize:function e(){this.handlers={seek:function e(){}}
this.seekCache={}
this.seekCacheInterval=20
this.initData={}
this.seekCachers={}
this.allSavedCommands=[]},setActualInitData:function t(e){this.actualInitData=e},hasNoChunks:function r(){return _.isEmpty(this.allSavedCommands)},numChunksSaved:function n(){return this.allSavedCommands.length},startRecordChunk:function i(e){e=Math.max(e,t())
this._resetForNewChunk()
this.record(e)
function t(){var e=0
if(this.allSavedCommands&&this.allSavedCommands.length>0){if(_.last(this.allSavedCommands).length>0){e=_.last(_.last(this.allSavedCommands))[0]}}return e}},stopRecordChunk:function s(){this.stopRecord()},saveRecordChunk:function o(){this.allSavedCommands.push(this.commands)
this._resetForNewChunk()},discardRecordChunk:function a(){this._resetForNewChunk()},_resetForNewChunk:function u(){this.commands=[]
this.initData={}},record:function c(e){e=e||0
if(!this.recording){this.commands=[]
this.recording=true
this.startTime=(new Date).getTime()-e
this.trigger("recordStarted")}},stopRecord:function l(){if(this.recording){this.recording=false
this.recorded=true
this.trigger("recordEnded")}},loadRecording:function f(e){var t=1
if(e&&e.commands&&e.init){this.initData=e.init
t=e.multiplier
e=e.commands}if(t!==1){for(var r=0;r<e.length;r++){e[r][0]=Math.floor(e[r][0]*t)}}this.commands=e
this.seekCacheInterval=Math.ceil(e.length/50)},dumpRecording:function h(){if(this.actualInitData){this.initData=this.actualInitData
this.commands=_.flatten(this.allSavedCommands,true)}return{init:this.initData,commands:this.commands}},getVersion:function d(){return this.initData.configVersion||0},seekTo:function p(e){this.pauseTime=(new Date).getTime()
this.playStart=this.pauseTime-e
this.cache(-1*this.seekCacheInterval)
var t=this.commands.length-1
for(var r=0;r<this.commands.length;r++){if(this.commands[r][0]>e){t=r-1
break}}this.playPos=t+1
this.trigger("runSeek")
var n=Math.floor(t/this.seekCacheInterval)
var i=null
var s=0
for(var r=n;r>=0;r--){if(this.seekCache[r]){i=r
break}}if(i!==null){this.cacheRestore(i)
s=i*this.seekCacheInterval+1}else{this.cacheRestore(-1*this.seekCacheInterval)}for(var r=s;r<=t;r++){this.runCommand(this.commands[r])
this.cache(r)}this.trigger("seekDone")},cache:function g(e){if(e%this.seekCacheInterval===0){var t=Math.floor(e/this.seekCacheInterval)
if(!this.seekCache[t]){this.seekCache[t]={}
_.each(this.seekCachers,function(e,r){this.seekCache[t][r]=e.getState()},this)}}},cacheRestore:function m(e){if(this.seekCache[e]){_.each(this.seekCachers,function(t,r){var n=this.seekCache[e][r]
if(n){t.restoreState(n)}},this)}},play:function y(){if(this.recording||this.playing||!this.commands||this.commands.length===0){return}this.trigger("playInit")
var e=this.playStart?this.pauseTime-this.playStart:0
this.playing=true
this.playPos=this.playPos||0
this.playStart=(new Date).getTime()-e
this.playInterval=setInterval(_.bind(function(){var e=this.commands[this.playPos]
while(e&&this.currentTime()>=e[0]){this.runCommand(e)
this.cache(this.playPos)
this.playPos+=1
if(this.playPos===this.commands.length){this.stopPlayback(true)
this.trigger("playEnded")
return}e=this.commands[this.playPos]}},this),5)
this.trigger("playStarted",e>0)
this.seekTo(e)},pausePlayback:function v(e){clearInterval(this.playInterval)
this.playing=false
this.playInterval=null
this.pauseTime=(new Date).getTime()
if(!e){this.trigger("playPaused")}},stopPlayback:function w(e){this.pausePlayback(e)
if(!e){this.trigger("playStopped")}this.playPos=null
this.playStart=null
this.pauseTime=null},reset:function k(){this.initData={}
this.commands=[]
this.seekCache={}
this.playPos=null
this.playStart=null
this.pauseTime=null
this.playing=false
this.recording=false
this.recorded=false},currentTime:function S(){return(new Date).getTime()-this.playStart},runCommand:function x(e){var t=this.handlers[e[1]]
if(t){return t.apply(this.handlers,e.slice(2))}console.error("Command not found:",e[1])},log:function j(){if(!this.playing&&this.recording&&this.commands){if(this.synchronizedTime===undefined){this.synchronizedTime=Math.floor((new Date).getTime()-this.startTime)
setTimeout(function(){this.synchronizedTime=undefined}.bind(this),0)}var e=Array.prototype.slice.call(arguments,0)
e.unshift(this.synchronizedTime)
this.commands.push(e)
return true}},pauseLog:function O(){this.oldRecording=this.recording
this.recording=false},resumeLog:function E(){this.recording=this.oldRecording}})
var ScratchpadConfig=Backbone.Model.extend({version:null,initialize:function C(e){this.version=e.version
this.useDebugger=e.useDebugger
if(this.version!=null){this.version=this.latestVersion()}},runCurVersion:function P(e){var t=Array.prototype.slice.call(arguments,0)
t.unshift(this.curVersion())
return this.runVersion.apply(this,t)},runVersion:function D(e,t){var r=Array.prototype.slice.call(arguments,2)
for(var n=0;n<=e;n++){var i=this.versions[n][t]
if(i){i.apply(this,r)}}},switchVersion:function N(e){if(e!==this.curVersion()){this.version=e
this.trigger("versionSwitched",e)}},curVersion:function I(){if(this.version!=null){return this.version}return this.latestVersion()},latestVersion:function T(){return this.versions.length-1},autoCompleteBehavior:{autoBrace:false,braceIndent:true,equalsInsert:true},bindAutoComplete:function F(e,t){t=t||this.autoCompleteBehavior
var r=e.getSession().getMode().$behaviour
r.add("parens","insertion",function(){})
r.add("parens","deletion",function(){})
r.add("brackets","insertion",function(){})
r.add("brackets","deletion",function(){})
r.add("string_dquotes","insertion",function(){})
r.add("string_dquotes","deletion",function(){})
r.add("braces","insertion",function(e,r,n,i,s){var o=n.getCursorPosition()
var a=i.doc.getLine(o.row)
if(s==="{"){var u=n.getSelectionRange()
var c=i.doc.getTextRange(u)
if(t.autoBrace){if(c!==""){return{text:"{"+c+"}",selection:false}}else{return{text:"{}",selection:[1,1]}}}else if(t.braceIndent){var l=/=\s*function/.test(a)?";":""
var f=this.getNextLineIndent(e,a.substring(0,a.length-1),i.getTabString())
var h=this.$getIndent(i.doc.getLine(o.row))
if(f===h){f+=i.getTabString()}return{text:"{\n"+f+c+"\n"+h+"}"+l,selection:[1,f.length,1,f.length]}}}else if(s==="}"){var d=a.substring(o.column,o.column+1)
if(d==="}"){var p=i.$findOpeningBracket("}",{column:o.column+1,row:o.row})
if(p!==null){return{text:"",selection:[1,1]}}}}else if(s==="\n"){var d=a.substring(o.column,o.column+1)
if(d==="}"){var g=i.findMatchingBracket({row:o.row,column:o.column+1})
if(!g){return null}var f=this.getNextLineIndent(e,a.substring(0,a.length-1),i.getTabString())
var h=this.$getIndent(i.doc.getLine(g.row))
return{text:"\n"+f+"\n"+h,selection:[1,f.length,1,f.length]}}}})
r.add("equals","insertion",function(e,r,n,i,s){if(!t.equalsInsert){return}var o=n.getCursorPosition()
var a=i.doc.getLine(o.row)
if(s==="="&&/\bdraw\s*$/.test(a)){var u=n.getSelectionRange()
var c=i.doc.getTextRange(u)
var l=this.getNextLineIndent(e,a.substring(0,a.length-1),i.getTabString())
var f=this.$getIndent(i.doc.getLine(o.row))
if(l===f){l+=i.getTabString()}return{text:"= function() {\n"+l+c+"\n"+f+"};",selection:[1,l.length,1,l.length]}}})},versions:[{name:"Initial Configuration",ace_pjs_editor:function L(e){var t=e.editor
t.session.setOption("useWorker",false)
t.setHighlightActiveLine(false)
t.$highlightBrackets=function(){}
t.renderer.setHScrollBarAlwaysVisible(false)
var r=t.getSession()
r.setUseWrapMode(true)
r.setUseSoftTabs(true)
r.setUseWorker(false)
t.setFontSize("14px")
t.setHighlightSelectedWord(false)
t.renderer.setShowGutter(true)
t.renderer.setShowPrintMargin(false)
r.setMode("ace/mode/javascript")
t.setTheme("ace/theme/textmate")
this.bindAutoComplete(e.editor,{autoBrace:false,braceIndent:false,equalsInsert:true})},ace_webpage_editor:function A(e){var t=e.editor
t.session.setOption("useWorker",false)
t.setHighlightActiveLine(false)
t.renderer.setHScrollBarAlwaysVisible(false)
var r=t.getSession()
r.setUseWrapMode(true)
r.setUseSoftTabs(true)
t.setFontSize("14px")
t.setHighlightSelectedWord(false)
t.renderer.setShowGutter(true)
t.renderer.setShowPrintMargin(false)
r.setMode("ace/mode/html")
var n=r.getMode().$behaviour.getBehaviours()
var i=n.autoclosing.insertion
n.autoclosing.insertion=function(e,t,r,n,s){var o=r.getCursorPosition()
var a=n.getLine(o.row)
if(a.slice(o.column).trim()===""){return i.apply(this,arguments)}}
t.setTheme("ace/theme/textmate")},ace_sql_editor:function M(e){var t=e.editor
t.setHighlightActiveLine(false)
t.renderer.setHScrollBarAlwaysVisible(false)
var r=t.getSession()
r.setUseWrapMode(true)
r.setUseSoftTabs(true)
t.setFontSize("14px")
t.setHighlightSelectedWord(false)
t.renderer.setShowGutter(true)
t.renderer.setShowPrintMargin(false)
r.setMode("ace/mode/sql")
t.setTheme("ace/theme/textmate")},jshint:function R(e){e.JSHint={undef:true,noempty:true,plusplus:true,noarg:true,latedef:true,eqeqeq:true,curly:true,shadow:true,smarttabs:true}},processing:function W(e){e.size(400,400)
e.frameRate(30)
e.angleMode="radians"}},{name:"Switch to Degress from Radians",processing:function B(e){e.angleMode="degrees"}},{name:"Brace Autocompletion Changes",ace_pjs_editor:function G(e){}},{name:"Disable Un-needed JSHint Rules",jshint:function q(e){delete e.JSHint.noempty
delete e.JSHint.plusplus}},{name:"version 4 placeholder"}]});(function(){window.visibly={q:document,p:undefined,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(e){if(typeof e=="function"){this.visibleCallbacks.push(e)}},onHidden:function(e){if(typeof e=="function"){this.hiddenCallbacks.push(e)}},getPrefix:function(){if(!this.cachedPrefix){for(var e=0;b=this.prefixes[e++];){if(b+this.props[2]in this.q){this.cachedPrefix=b
return this.cachedPrefix}}}},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(e){if(typeof e=="function"){this.genericCallbacks.push(e)}var t=this.genericCallbacks.length
if(t){if(this.cachedPrefix){while(t--){this.genericCallbacks[t].call(this,this.visibilityState())}}else{while(t--){this.genericCallbacks[t].call(this,arguments[0])}}}},isSupported:function(e){return this._getPropName(2)in this.q},_getPropName:function(e){return this.cachedPrefix==""?this.props[e].substring(0,1).toLowerCase()+this.props[e].substring(1):this.cachedPrefix+this.props[e]},_getProp:function(e){return this.q[this._getPropName(e)]},_execute:function(e){if(e){this._callbacks=e==1?this.visibleCallbacks:this.hiddenCallbacks
var t=this._callbacks.length
while(t--){this._callbacks[t]()}}},_visible:function(){window.visibly._execute(1)
window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2)
window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{if(!this.isSupported()){if(this.q.addEventListener){window.addEventListener(this.m[0],this._visible,false)
window.addEventListener(this.m[1],this._hidden,false)}else{if(this.q.attachEvent){this.q.attachEvent("onfocusin",this._visible)
this.q.attachEvent("onfocusout",this._hidden)}}}else{this.q.addEventListener(this._getPropName(1),function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1)}}catch(e){}},init:function(){this.getPrefix()
this._listen()}}
this.visibly.init()})();(function H(e,t,r){function n(s,o){if(!t[s]){if(!e[s]){var a=typeof require=="function"&&require
if(!o&&a)return a(s,!0)
if(i)return i(s,!0)
var u=new Error("Cannot find module '"+s+"'")
throw u.code="MODULE_NOT_FOUND",u}var c=t[s]={exports:{}}
e[s][0].call(c.exports,function(t){var r=e[s][1][t]
return n(r?r:t)},c,c.exports,H,e,t,r)}return t[s].exports}var i=typeof require=="function"&&require
for(var s=0;s<r.length;s++)n(r[s])
return n})({1:[function(e,t,r){(function(r){"use strict"
var n=e("./tools/protect.js")
var i=s(n)
e("core-js/shim")
e("regenerator/runtime")
i["default"](t)
function s(e){return e&&e.__esModule?e:{"default":e}}if(r._babelPolyfill){throw new Error("only one instance of babel/polyfill is allowed")}r._babelPolyfill=true}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./tools/protect.js":2,"core-js/shim":93,"regenerator/runtime":94}],2:[function(e,t,r){(function(n){"use strict"
r.__esModule=true
function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("path")
var o=i(s)
var a=o["default"].resolve(n,"../../../")
r["default"]=function(e){if(e.parent&&e.parent.filename.indexOf(a)!==0){throw new Error("Don't hotlink internal Babel files.")}}
t.exports=r["default"]}).call(this,"/lib/babel/tools")},{path:3}],3:[function(e,t,r){(function(e){function t(e,t){var r=0
for(var n=e.length-1;n>=0;n--){var i=e[n]
if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1)
r++}else if(r){e.splice(n,1)
r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/
var i=function(e){return n.exec(e).slice(1)}
r.resolve=function(){var r="",n=false
for(var i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:e.cwd()
if(typeof o!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!o){continue}r=o+"/"+r
n=o.charAt(0)==="/"}r=t(s(r.split("/"),function(e){return!!e}),!n).join("/")
return(n?"/":"")+r||"."}
r.normalize=function(e){var n=r.isAbsolute(e),i=o(e,-1)==="/"
e=t(s(e.split("/"),function(e){return!!e}),!n).join("/")
if(!e&&!n){e="."}if(e&&i){e+="/"}return(n?"/":"")+e}
r.isAbsolute=function(e){return e.charAt(0)==="/"}
r.join=function(){var e=Array.prototype.slice.call(arguments,0)
return r.normalize(s(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}
r.relative=function(e,t){e=r.resolve(e).substr(1)
t=r.resolve(t).substr(1)
function n(e){var t=0
for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1
for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[]
return e.slice(t,r-t+1)}var i=n(e.split("/"))
var s=n(t.split("/"))
var o=Math.min(i.length,s.length)
var a=o
for(var u=0;u<o;u++){if(i[u]!==s[u]){a=u
break}}var c=[]
for(var u=a;u<i.length;u++){c.push("..")}c=c.concat(s.slice(a))
return c.join("/")}
r.sep="/"
r.delimiter=":"
r.dirname=function(e){var t=i(e),r=t[0],n=t[1]
if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n}
r.basename=function(e,t){var r=i(e)[2]
if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r}
r.extname=function(e){return i(e)[3]}
function s(e,t){if(e.filter)return e.filter(t)
var r=[]
for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var o="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t
return e.substr(t,r)}}).call(this,e("_process"))},{_process:4}],4:[function(e,t,r){var n=t.exports={}
var i=[]
var s=false
function o(){if(s){return}s=true
var e
var t=i.length
while(t){e=i
i=[]
var r=-1
while(++r<t){e[r]()}t=i.length}s=false}n.nextTick=function(e){i.push(e)
if(!s){setTimeout(o,0)}}
n.title="browser"
n.browser=true
n.env={}
n.argv=[]
n.version=""
n.versions={}
function a(){}n.on=a
n.addListener=a
n.once=a
n.off=a
n.removeListener=a
n.removeAllListeners=a
n.emit=a
n.binding=function(e){throw new Error("process.binding is not supported")}
n.cwd=function(){return"/"}
n.chdir=function(e){throw new Error("process.chdir is not supported")}
n.umask=function(){return 0}},{}],5:[function(e,t,r){var $=e("./$")
t.exports=function(e){return function(t,r,n){var i=$.toObject(t),s=$.toLength(i.length),o=$.toIndex(n,s),a
if(e&&r!=r)while(s>o){a=i[o++]
if(a!=a)return true}else for(;s>o;o++)if(e||o in i){if(i[o]===r)return e||o}return!e&&-1}}},{"./$":26}],6:[function(e,t,r){var $=e("./$"),n=e("./$.ctx")
t.exports=function(e){var t=e==1,r=e==2,i=e==3,s=e==4,o=e==6,a=e==5||o
return function(u,c,l){var f=Object($.assertDefined(u)),h=$.ES5Object(f),d=n(c,l,3),p=$.toLength(h.length),g=0,m=t?Array(p):r?[]:undefined,y,v
for(;p>g;g++)if(a||g in h){y=h[g]
v=d(y,g,f)
if(e){if(t)m[g]=v
else if(v)switch(e){case 3:return true
case 5:return y
case 6:return g
case 2:m.push(y)}else if(s)return false}}return o?-1:i||s?s:m}}},{"./$":26,"./$.ctx":14}],7:[function(e,t,r){var $=e("./$")
function n(e,t,r){if(!e)throw TypeError(r?t+r:t)}n.def=$.assertDefined
n.fn=function(e){if(!$.isFunction(e))throw TypeError(e+" is not a function!")
return e}
n.obj=function(e){if(!$.isObject(e))throw TypeError(e+" is not an object!")
return e}
n.inst=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!")
return e}
t.exports=n},{"./$":26}],8:[function(e,t,r){var $=e("./$"),n=e("./$.enum-keys")
t.exports=Object.assign||function i(e,t){var r=Object($.assertDefined(e)),i=arguments.length,s=1
while(i>s){var o=$.ES5Object(arguments[s++]),a=n(o),u=a.length,c=0,l
while(u>c)r[l=a[c++]]=o[l]}return r}},{"./$":26,"./$.enum-keys":17}],9:[function(e,t,r){var $=e("./$"),n=e("./$.wks")("toStringTag"),i={}.toString
function s(e){return i.call(e).slice(8,-1)}s.classof=function(e){var t,r
return e==undefined?e===undefined?"Undefined":"Null":typeof(r=(t=Object(e))[n])=="string"?r:s(t)}
s.set=function(e,t,r){if(e&&!$.has(e=r?e:e.prototype,n))$.hide(e,n,t)}
t.exports=s},{"./$":26,"./$.wks":44}],10:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.ctx"),i=e("./$.uid").safe,s=e("./$.assert"),o=e("./$.for-of"),a=e("./$.iter").step,u=$.has,c=$.set,l=$.isObject,f=$.hide,h=Object.isExtensible||l,d=i("id"),p=i("O1"),g=i("last"),m=i("first"),y=i("iter"),v=$.DESC?i("size"):"size",b=0
function w(e,t){if(!l(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e
if(!u(e,d)){if(!h(e))return"F"
if(!t)return"E"
f(e,d,++b)}return"O"+e[d]}function k(e,t){var r=w(t),n
if(r!=="F")return e[p][r]
for(n=e[m];n;n=n.n){if(n.k==t)return n}}t.exports={getConstructor:function(t,r,i,a){var u=t(function(e,t){s.inst(e,u,r)
c(e,p,$.create(null))
c(e,v,0)
c(e,g,undefined)
c(e,m,undefined)
if(t!=undefined)o(t,i,e[a],e)})
e("./$.mix")(u.prototype,{clear:function l(){for(var e=this,t=e[p],r=e[m];r;r=r.n){r.r=true
if(r.p)r.p=r.p.n=undefined
delete t[r.i]}e[m]=e[g]=undefined
e[v]=0},"delete":function(e){var t=this,r=k(t,e)
if(r){var n=r.n,i=r.p
delete t[p][r.i]
r.r=true
if(i)i.n=n
if(n)n.p=i
if(t[m]==r)t[m]=n
if(t[g]==r)t[g]=i
t[v]--}return!!r},forEach:function f(e){var t=n(e,arguments[1],3),r
while(r=r?r.n:this[m]){t(r.v,r.k,this)
while(r&&r.r)r=r.p}},has:function h(e){return!!k(this,e)}})
if($.DESC)$.setDesc(u.prototype,"size",{get:function(){return s.def(this[v])}})
return u},def:function(e,t,r){var n=k(e,t),i,s
if(n){n.v=r}else{e[g]=n={i:s=w(t,true),k:t,v:r,p:i=e[g],n:undefined,r:false}
if(!e[m])e[m]=n
if(i)i.n=n
e[v]++
if(s!=="F")e[p][s]=n}return e},getEntry:k,setIter:function(t,r,n){e("./$.iter-define")(t,r,function(e,t){c(this,y,{o:e,k:t})},function(){var e=this[y],t=e.k,r=e.l
while(r&&r.r)r=r.p
if(!e.o||!(e.l=r=r?r.n:e.o[m])){e.o=undefined
return a(1)}if(t=="keys")return a(0,r.k)
if(t=="values")return a(0,r.v)
return a(0,[r.k,r.v])},n?"entries":"values",!n,true)}}},{"./$":26,"./$.assert":7,"./$.ctx":14,"./$.for-of":18,"./$.iter":25,"./$.iter-define":23,"./$.mix":28,"./$.uid":42}],11:[function(e,t,r){var n=e("./$.def"),i=e("./$.for-of")
t.exports=function(e){n(n.P,e,{toJSON:function t(){var e=[]
i(this,false,e.push,e)
return e}})}},{"./$.def":15,"./$.for-of":18}],12:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.uid").safe,i=e("./$.assert"),s=e("./$.for-of"),o=$.has,a=$.isObject,u=$.hide,c=Object.isExtensible||a,l=0,f=n("id"),h=n("weak"),d=n("leak"),p=e("./$.array-methods"),g=p(5),m=p(6)
function y(e,t){return g(e.array,function(e){return e[0]===t})}function v(e){return e[d]||u(e,d,{array:[],get:function(e){var t=y(this,e)
if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e)
if(r)r[1]=t
else this.array.push([e,t])},"delete":function(e){var t=m(this.array,function(t){return t[0]===e})
if(~t)this.array.splice(t,1)
return!!~t}})[d]}t.exports={getConstructor:function(t,r,n,u){var d=t(function(e,t){$.set(i.inst(e,d,r),f,l++)
if(t!=undefined)s(t,n,e[u],e)})
e("./$.mix")(d.prototype,{"delete":function(e){if(!a(e))return false
if(!c(e))return v(this)["delete"](e)
return o(e,h)&&o(e[h],this[f])&&delete e[h][this[f]]},has:function p(e){if(!a(e))return false
if(!c(e))return v(this).has(e)
return o(e,h)&&o(e[h],this[f])}})
return d},def:function(e,t,r){if(!c(i.obj(t))){v(e).set(t,r)}else{o(t,h)||u(t,h,{})
t[h][e[f]]=r}return e},leakStore:v,WEAK:h,ID:f}},{"./$":26,"./$.array-methods":6,"./$.assert":7,"./$.for-of":18,"./$.mix":28,"./$.uid":42}],13:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.def"),i=e("./$.iter").BUGGY,s=e("./$.for-of"),o=e("./$.species"),a=e("./$.assert").inst
t.exports=function(t,r,u,c,l,f){var h=$.g[t],d=h,p=l?"set":"add",g=d&&d.prototype,m={}
function y(t){var r=g[t]
e("./$.redef")(g,t,t=="delete"?function(e){return r.call(this,e===0?0:e)}:t=="has"?function n(e){return r.call(this,e===0?0:e)}:t=="get"?function i(e){return r.call(this,e===0?0:e)}:t=="add"?function s(e){r.call(this,e===0?0:e)
return this}:function o(e,t){r.call(this,e===0?0:e,t)
return this})}if(!$.isFunction(d)||!(f||!i&&g.forEach&&g.entries)){d=c.getConstructor(r,t,l,p)
e("./$.mix")(d.prototype,u)}else{var v=new d,b=v[p](f?{}:-0,1),w
if(!e("./$.iter-detect")(function(e){new d(e)})){d=r(function(e,r){a(e,d,t)
var n=new h
if(r!=undefined)s(r,l,n[p],n)
return n})
d.prototype=g
g.constructor=d}f||v.forEach(function(e,t){w=1/t===-Infinity})
if(w){y("delete")
y("has")
l&&y("get")}if(w||b!==v)y(p)}e("./$.cof").set(d,t)
m[t]=d
n(n.G+n.W+n.F*(d!=h),m)
o(d)
o($.core[t])
if(!f)c.setIter(d,t,l)
return d}},{"./$":26,"./$.assert":7,"./$.cof":9,"./$.def":15,"./$.for-of":18,"./$.iter":25,"./$.iter-detect":24,"./$.mix":28,"./$.redef":31,"./$.species":36}],14:[function(e,t,r){var n=e("./$.assert").fn
t.exports=function(e,t,r){n(e)
if(~r&&t===undefined)return e
switch(r){case 1:return function(r){return e.call(t,r)}
case 2:return function(r,n){return e.call(t,r,n)}
case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./$.assert":7}],15:[function(e,t,r){var $=e("./$"),n=$.g,i=$.core,s=$.isFunction,o=e("./$.redef")
function a(e,t){return function(){return e.apply(t,arguments)}}n.core=i
u.F=1
u.G=2
u.S=4
u.P=8
u.B=16
u.W=32
function u(e,t,r){var c,l,f,h,d=e&u.G,p=e&u.P,g=d?n:e&u.S?n[t]:(n[t]||{}).prototype,m=d?i:i[t]||(i[t]={})
if(d)r=t
for(c in r){l=!(e&u.F)&&g&&c in g
f=(l?g:r)[c]
if(e&u.B&&l)h=a(f,n)
else h=p&&s(f)?a(Function.call,f):f
if(g&&!l)o(g,c,f)
if(m[c]!=f)$.hide(m,c,h)
if(p)(m.prototype||(m.prototype={}))[c]=f}}t.exports=u},{"./$":26,"./$.redef":31}],16:[function(e,t,r){var $=e("./$"),n=$.g.document,i=$.isObject,s=i(n)&&i(n.createElement)
t.exports=function(e){return s?n.createElement(e):{}}},{"./$":26}],17:[function(e,t,r){var $=e("./$")
t.exports=function(e){var t=$.getKeys(e),r=$.getDesc,n=$.getSymbols
if(n)$.each.call(n(e),function(n){if(r(e,n).enumerable)t.push(n)})
return t}},{"./$":26}],18:[function(e,t,r){var n=e("./$.ctx"),i=e("./$.iter").get,s=e("./$.iter-call")
t.exports=function(e,t,r,o){var a=i(e),u=n(r,o,t?2:1),c
while(!(c=a.next()).done){if(s(a,u,c.value,t)===false){return s.close(a)}}}},{"./$.ctx":14,"./$.iter":25,"./$.iter-call":22}],19:[function(e,t,r){t.exports=function($){$.FW=true
$.path=$.g
return $}},{}],20:[function(e,t,r){var $=e("./$"),n={}.toString,i=$.getNames
var s=typeof window=="object"&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[]
function o(e){try{return i(e)}catch(t){return s.slice()}}t.exports.get=function a(e){if(s&&n.call(e)=="[object Window]")return o(e)
return i($.toObject(e))}},{"./$":26}],21:[function(e,t,r){t.exports=function(e,t,r){var n=r===undefined
switch(t.length){case 0:return n?e():e.call(r)
case 1:return n?e(t[0]):e.call(r,t[0])
case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1])
case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2])
case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])
case 5:return n?e(t[0],t[1],t[2],t[3],t[4]):e.call(r,t[0],t[1],t[2],t[3],t[4])}return e.apply(r,t)}},{}],22:[function(e,t,r){var n=e("./$.assert").obj
function i(e){var t=e["return"]
if(t!==undefined)n(t.call(e))}function s(e,t,r,s){try{return s?t(n(r)[0],r[1]):t(r)}catch(o){i(e)
throw o}}s.close=i
t.exports=s},{"./$.assert":7}],23:[function(e,t,r){var n=e("./$.def"),i=e("./$.redef"),$=e("./$"),s=e("./$.cof"),o=e("./$.iter"),a=e("./$.wks")("iterator"),u="@@iterator",c="keys",l="values",f=o.Iterators
t.exports=function(e,t,r,h,d,p,g){o.create(r,t,h)
function m(e){function t(t){return new r(t,e)}switch(e){case c:return function n(){return t(this)}
case l:return function i(){return t(this)}}return function s(){return t(this)}}var y=t+" Iterator",v=e.prototype,b=v[a]||v[u]||d&&v[d],w=b||m(d),k,S
if(b){var _=$.getProto(w.call(new e))
s.set(_,y,true)
if($.FW&&$.has(v,u))o.set(_,$.that)}if($.FW||g)o.set(v,w)
f[t]=w
f[y]=$.that
if(d){k={keys:p?w:m(c),values:d==l?w:m(l),entries:d!=l?w:m("entries")}
if(g)for(S in k){if(!(S in v))i(v,S,k[S])}else n(n.P+n.F*o.BUGGY,t,k)}}},{"./$":26,"./$.cof":9,"./$.def":15,"./$.iter":25,"./$.redef":31,"./$.wks":44}],24:[function(e,t,r){var n=e("./$.wks")("iterator"),i=false
try{var s=[7][n]()
s["return"]=function(){i=true}
Array.from(s,function(){throw 2})}catch(o){}t.exports=function(e){if(!i)return false
var t=false
try{var r=[7],s=r[n]()
s.next=function(){t=true}
r[n]=function(){return s}
e(r)}catch(o){}return t}},{"./$.wks":44}],25:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.cof"),i=n.classof,s=e("./$.assert"),o=s.obj,a=e("./$.wks")("iterator"),u="@@iterator",c=e("./$.shared")("iterators"),l={}
f(l,$.that)
function f(e,t){$.hide(e,a,t)
if(u in[])$.hide(e,u,t)}t.exports={BUGGY:"keys"in[]&&!("next"in[].keys()),Iterators:c,step:function(e,t){return{value:t,done:!!e}},is:function(e){var t=Object(e),r=$.g.Symbol
return(r&&r.iterator||u)in t||a in t||$.has(c,i(t))},get:function(e){var t=$.g.Symbol,r
if(e!=undefined){r=e[t&&t.iterator||u]||e[a]||c[i(e)]}s($.isFunction(r),e," is not iterable!")
return o(r.call(e))},set:f,create:function(e,t,r,i){e.prototype=$.create(i||l,{next:$.desc(1,r)})
n.set(e,t+" Iterator")}}},{"./$":26,"./$.assert":7,"./$.cof":9,"./$.shared":35,"./$.wks":44}],26:[function(e,t,r){"use strict"
var n=typeof self!="undefined"?self:Function("return this")(),i={},s=Object.defineProperty,o={}.hasOwnProperty,a=Math.ceil,u=Math.floor,c=Math.max,l=Math.min
var f=!!function(){try{return s({},"a",{get:function(){return 2}}).a==2}catch(e){}}()
var h=m(1)
function d(e){return isNaN(e=+e)?0:(e>0?u:a)(e)}function p(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}function g(e,t,r){e[t]=r
return e}function m(e){return f?function(t,r,n){return $.setDesc(t,r,p(e,n))}:g}function y(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function v(e){return typeof e=="function"}function b(e){if(e==undefined)throw TypeError("Can't call method on  "+e)
return e}var $=t.exports=e("./$.fw")({g:n,core:i,html:n.document&&document.documentElement,isObject:y,isFunction:v,that:function(){return this},toInteger:d,toLength:function(e){return e>0?l(d(e),9007199254740991):0},toIndex:function(e,t){e=d(e)
return e<0?c(e+t,0):l(e,t)},has:function(e,t){return o.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:f,desc:p,getDesc:Object.getOwnPropertyDescriptor,setDesc:s,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:b,ES5Object:Object,toObject:function(e){return $.ES5Object(b(e))},hide:h,def:m(0),set:n.Symbol?g:h,each:[].forEach})
if(typeof __e!="undefined")__e=i
if(typeof __g!="undefined")__g=n},{"./$.fw":19}],27:[function(e,t,r){var $=e("./$")
t.exports=function(e,t){var r=$.toObject(e),n=$.getKeys(r),i=n.length,s=0,o
while(i>s)if(r[o=n[s++]]===t)return o}},{"./$":26}],28:[function(e,t,r){var n=e("./$.redef")
t.exports=function(e,t){for(var r in t)n(e,r,t[r])
return e}},{"./$.redef":31}],29:[function(e,t,r){var $=e("./$"),n=e("./$.assert").obj
t.exports=function i(e){n(e)
var t=$.getNames(e),r=$.getSymbols
return r?t.concat(r(e)):t}},{"./$":26,"./$.assert":7}],30:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.invoke"),i=e("./$.assert").fn
t.exports=function(){var e=i(this),t=arguments.length,r=Array(t),s=0,o=$.path._,a=false
while(t>s)if((r[s]=arguments[s++])===o)a=true
return function(){var i=this,s=arguments.length,u=0,c=0,l
if(!a&&!s)return n(e,r,i)
l=r.slice()
if(a)for(;t>u;u++)if(l[u]===o)l[u]=arguments[c++]
while(s>c)l.push(arguments[c++])
return n(e,l,i)}}},{"./$":26,"./$.assert":7,"./$.invoke":21}],31:[function(e,t,r){var $=e("./$"),n=String({}.hasOwnProperty),i=e("./$.uid").safe("src"),s=Function.toString
function o(e,t,r,s){if($.isFunction(r)){var o=e[t]
$.hide(r,i,o?String(o):n.replace(/hasOwnProperty/,String(t)))
if(!("name"in r))r.name=t}if(e===$.g){e[t]=r}else{if(!s)delete e[t]
$.hide(e,t,r)}}o(Function.prototype,"toString",function a(){return $.has(this,i)?this[i]:s.call(this)})
$.core.inspectSource=function(e){return s.call(e)}
t.exports=o},{"./$":26,"./$.uid":42}],32:[function(e,t,r){"use strict"
t.exports=function(e,t,r){var n=t===Object(t)?function(e){return t[e]}:t
return function(t){return String(r?t:this).replace(e,n)}}},{}],33:[function(e,t,r){t.exports=Object.is||function n(e,t){return e===t?e!==0||1/e===1/t:e!=e&&t!=t}},{}],34:[function(e,t,r){var $=e("./$"),n=e("./$.assert")
function i(e,t){n.obj(e)
n(t===null||$.isObject(t),t,": can't set as prototype!")}t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r){try{r=e("./$.ctx")(Function.call,$.getDesc(Object.prototype,"__proto__").set,2)
r({},[])}catch(n){t=true}return function s(e,n){i(e,n)
if(t)e.__proto__=n
else r(e,n)
return e}}():undefined),check:i}},{"./$":26,"./$.assert":7,"./$.ctx":14}],35:[function(e,t,r){var $=e("./$"),n="__core-js_shared__",i=$.g[n]||($.g[n]={})
t.exports=function(e){return i[e]||(i[e]={})}},{"./$":26}],36:[function(e,t,r){var $=e("./$"),n=e("./$.wks")("species")
t.exports=function(e){if($.DESC&&!(n in e))$.setDesc(e,n,{configurable:true,get:$.that})}},{"./$":26,"./$.wks":44}],37:[function(e,t,r){var $=e("./$")
t.exports=function(e){return function(t,r){var n=String($.assertDefined(t)),i=$.toInteger(r),s=n.length,o,a
if(i<0||i>=s)return e?"":undefined
o=n.charCodeAt(i)
return o<55296||o>56319||i+1===s||(a=n.charCodeAt(i+1))<56320||a>57343?e?n.charAt(i):o:e?n.slice(i,i+2):(o-55296<<10)+(a-56320)+65536}}},{"./$":26}],38:[function(e,t,r){var $=e("./$"),n=e("./$.string-repeat")
t.exports=function(e,t,r,i){var s=String($.assertDefined(e))
if(t===undefined)return s
var o=$.toInteger(t)
var a=o-s.length
if(a<0||a===Infinity){throw new RangeError("Cannot satisfy string length "+t+" for string: "+s)}var u=r===undefined?" ":String(r)
var c=n.call(u,Math.ceil(a/u.length))
if(c.length>a)c=i?c.slice(c.length-a):c.slice(0,a)
return i?c.concat(s):s.concat(c)}},{"./$":26,"./$.string-repeat":39}],39:[function(e,t,r){"use strict"
var $=e("./$")
t.exports=function n(e){var t=String($.assertDefined(this)),r="",n=$.toInteger(e)
if(n<0||n==Infinity)throw RangeError("Count can't be negative")
for(;n>0;(n>>>=1)&&(t+=t))if(n&1)r+=t
return r}},{"./$":26}],40:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.ctx"),i=e("./$.cof"),s=e("./$.invoke"),o=e("./$.dom-create"),a=$.g,u=$.isFunction,c=$.html,l=a.process,f=a.setImmediate,h=a.clearImmediate,d=a.MessageChannel,p=0,g={},m="onreadystatechange",y,v,b
function w(){var e=+this
if($.has(g,e)){var t=g[e]
delete g[e]
t()}}function k(e){w.call(e.data)}if(!u(f)||!u(h)){f=function(e){var t=[],r=1
while(arguments.length>r)t.push(arguments[r++])
g[++p]=function(){s(u(e)?e:Function(e),t)}
y(p)
return p}
h=function(e){delete g[e]}
if(i(l)=="process"){y=function(e){l.nextTick(n(w,e,1))}}else if(a.addEventListener&&u(a.postMessage)&&!a.importScripts){y=function(e){a.postMessage(e,"*")}
a.addEventListener("message",k,false)}else if(u(d)){v=new d
b=v.port2
v.port1.onmessage=k
y=n(b.postMessage,b,1)}else if(m in o("script")){y=function(e){c.appendChild(o("script"))[m]=function(){c.removeChild(this)
w.call(e)}}}else{y=function(e){setTimeout(n(w,e,1),0)}}}t.exports={set:f,clear:h}},{"./$":26,"./$.cof":9,"./$.ctx":14,"./$.dom-create":16,"./$.invoke":21}],41:[function(e,t,r){t.exports=function(e){try{e()
return false}catch(t){return true}}},{}],42:[function(e,t,r){var n=0
function i(e){return"Symbol(".concat(e===undefined?"":e,")_",(++n+Math.random()).toString(36))}i.safe=e("./$").g.Symbol||i
t.exports=i},{"./$":26}],43:[function(e,t,r){var n=e("./$.wks")("unscopables")
if(!(n in[]))e("./$").hide(Array.prototype,n,{})
t.exports=function(e){[][n][e]=true}},{"./$":26,"./$.wks":44}],44:[function(e,t,r){var n=e("./$").g,i=e("./$.shared")("wks")
t.exports=function(t){return i[t]||(i[t]=n.Symbol&&n.Symbol[t]||e("./$.uid").safe("Symbol."+t))}},{"./$":26,"./$.shared":35,"./$.uid":42}],45:[function(e,t,r){var $=e("./$"),n=e("./$.dom-create"),i=e("./$.cof"),s=e("./$.def"),o=e("./$.invoke"),a=e("./$.array-methods"),u=e("./$.uid").safe("__proto__"),c=e("./$.assert"),l=c.obj,f=Object.prototype,h=$.html,d=[],p=d.slice,g=d.join,m=i.classof,y=$.has,v=$.setDesc,b=$.getDesc,w=$.setDescs,k=$.isFunction,S=$.isObject,_=$.toObject,x=$.toLength,j=$.toIndex,O=false,E=e("./$.array-includes")(false),C=a(0),P=a(1),D=a(2),N=a(3),I=a(4)
if(!$.DESC){try{O=v(n("div"),"x",{get:function(){return 8}}).x==8}catch(T){}$.setDesc=function(e,t,r){if(O)try{return v(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!")
if("value"in r)l(e)[t]=r.value
return e}
$.getDesc=function(e,t){if(O)try{return b(e,t)}catch(r){}if(y(e,t))return $.desc(!f.propertyIsEnumerable.call(e,t),e[t])}
$.setDescs=w=function(e,t){l(e)
var r=$.getKeys(t),n=r.length,i=0,s
while(n>i)$.setDesc(e,s=r[i++],t[s])
return e}}s(s.S+s.F*!$.DESC,"Object",{getOwnPropertyDescriptor:$.getDesc,defineProperty:$.setDesc,defineProperties:w})
var F=("constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,"+"toLocaleString,toString,valueOf").split(","),L=F.concat("length","prototype"),A=F.length
var M=function(){var e=n("iframe"),t=A,r=">",i
e.style.display="none"
h.appendChild(e)
e.src="javascript:"
i=e.contentWindow.document
i.open()
i.write("<script>document.F=Object</script"+r)
i.close()
M=i.F
while(t--)delete M.prototype[F[t]]
return M()}
function R(e,t){return function(r){var n=_(r),i=0,s=[],o
for(o in n)if(o!=u)y(n,o)&&s.push(o)
while(t>i)if(y(n,o=e[i++])){~E(s,o)||s.push(o)}return s}}function W(){}s(s.S,"Object",{getPrototypeOf:$.getProto=$.getProto||function(e){e=Object(c.def(e))
if(y(e,u))return e[u]
if(k(e.constructor)&&e instanceof e.constructor){return e.constructor.prototype}return e instanceof Object?f:null},getOwnPropertyNames:$.getNames=$.getNames||R(L,L.length,true),create:$.create=$.create||function(e,t){var r
if(e!==null){W.prototype=l(e)
r=new W
W.prototype=null
r[u]=e}else r=M()
return t===undefined?r:w(r,t)},keys:$.getKeys=$.getKeys||R(F,A,false),seal:function U(e){return e},freeze:function V(e){return e},preventExtensions:function K(e){return e},isSealed:function J(e){return!S(e)},isFrozen:function Y(e){return!S(e)},isExtensible:function X(e){return S(e)}})
s(s.P,"Function",{bind:function(e){var t=c.fn(this),r=p.call(arguments,1)
function n(){var i=r.concat(p.call(arguments)),s=this instanceof n,a=s?$.create(t.prototype):e,u=o(t,i,a)
return s?a:u}if(t.prototype)n.prototype=t.prototype
return n}})
if(!(0 in Object("z")&&"z"[0]=="z")){$.ES5Object=function(e){return i(e)=="String"?e.split(""):Object(e)}}var B=true
try{if(h)p.call(h)
B=false}catch(T){}s(s.P+s.F*B,"Array",{slice:function Z(e,t){var r=x(this.length),n=i(this)
t=t===undefined?r:t
if(n=="Array")return p.call(this,e,t)
var s=j(e,r),o=j(t,r),a=x(o-s),u=Array(a),c=0
for(;c<a;c++)u[c]=n=="String"?this.charAt(s+c):this[s+c]
return u}})
s(s.P+s.F*($.ES5Object!=Object),"Array",{join:function Q(){return g.apply($.ES5Object(this),arguments)}})
s(s.S,"Array",{isArray:function(e){return i(e)=="Array"}})
function G(e){return function(t,r){c.fn(t)
var n=_(this),i=x(n.length),s=e?i-1:0,o=e?-1:1
if(arguments.length<2)for(;;){if(s in n){r=n[s]
s+=o
break}s+=o
c(e?s>=0:i>s,"Reduce of empty array with no initial value")}for(;e?s>=0:i>s;s+=o)if(s in n){r=t(r,n[s],s,this)}return r}}s(s.P,"Array",{forEach:$.each=$.each||function et(e){return C(this,e,arguments[1])},map:function tt(e){return P(this,e,arguments[1])},filter:function rt(e){return D(this,e,arguments[1])},some:function nt(e){return N(this,e,arguments[1])},every:function it(e){return I(this,e,arguments[1])},reduce:G(false),reduceRight:G(true),indexOf:function st(e){return E(this,e,arguments[1])},lastIndexOf:function(e,t){var r=_(this),n=x(r.length),i=n-1
if(arguments.length>1)i=Math.min(i,$.toInteger(t))
if(i<0)i=x(n+i)
for(;i>=0;i--)if(i in r)if(r[i]===e)return i
return-1}})
s(s.P,"String",{trim:e("./$.replacer")(/^\s*([\s\S]*\S)?\s*$/,"$1")})
s(s.S,"Date",{now:function(){return+new Date}})
function q(e){return e>9?e:"0"+e}var H=new Date(-5e13-1),z=!(H.toISOString&&H.toISOString()=="0385-07-25T07:06:39.999Z"&&e("./$.throws")(function(){new Date(NaN).toISOString()}))
s(s.P+s.F*z,"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value")
var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":""
return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+q(e.getUTCMonth()+1)+"-"+q(e.getUTCDate())+"T"+q(e.getUTCHours())+":"+q(e.getUTCMinutes())+":"+q(e.getUTCSeconds())+"."+(r>99?r:"0"+q(r))+"Z"}})
if(m(function(){return arguments}())=="Object")i.classof=function(e){var t=m(e)
return t=="Object"&&k(e.callee)?"Arguments":t}},{"./$":26,"./$.array-includes":5,"./$.array-methods":6,"./$.assert":7,"./$.cof":9,"./$.def":15,"./$.dom-create":16,"./$.invoke":21,"./$.replacer":32,"./$.throws":41,"./$.uid":42}],46:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.def"),i=$.toIndex
n(n.P,"Array",{copyWithin:function s(e,t){var r=Object($.assertDefined(this)),n=$.toLength(r.length),s=i(e,n),o=i(t,n),a=arguments[2],u=a===undefined?n:i(a,n),c=Math.min(u-o,n-s),l=1
if(o<s&&s<o+c){l=-1
o=o+c-1
s=s+c-1}while(c-->0){if(o in r)r[s]=r[o]
else delete r[s]
s+=l
o+=l}return r}})
e("./$.unscope")("copyWithin")},{"./$":26,"./$.def":15,"./$.unscope":43}],47:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.def"),i=$.toIndex
n(n.P,"Array",{fill:function s(e){var t=Object($.assertDefined(this)),r=$.toLength(t.length),n=i(arguments[1],r),s=arguments[2],o=s===undefined?r:i(s,r)
while(o>n)t[n++]=e
return t}})
e("./$.unscope")("fill")},{"./$":26,"./$.def":15,"./$.unscope":43}],48:[function(e,t,r){"use strict"
var n="findIndex",i=e("./$.def"),s=true,o=e("./$.array-methods")(6)
if(n in[])Array(1)[n](function(){s=false})
i(i.P+i.F*s,"Array",{findIndex:function a(e){return o(this,e,arguments[1])}})
e("./$.unscope")(n)},{"./$.array-methods":6,"./$.def":15,"./$.unscope":43}],49:[function(e,t,r){"use strict"
var n="find",i=e("./$.def"),s=true,o=e("./$.array-methods")(5)
if(n in[])Array(1)[n](function(){s=false})
i(i.P+i.F*s,"Array",{find:function a(e){return o(this,e,arguments[1])}})
e("./$.unscope")(n)},{"./$.array-methods":6,"./$.def":15,"./$.unscope":43}],50:[function(e,t,r){var $=e("./$"),n=e("./$.ctx"),i=e("./$.def"),s=e("./$.iter"),o=e("./$.iter-call")
i(i.S+i.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function a(e){var t=Object($.assertDefined(e)),r=arguments[1],i=r!==undefined,a=i?n(r,arguments[2],2):undefined,u=0,c,l,f,h
if(s.is(t)){h=s.get(t)
l=new(typeof this=="function"?this:Array)
for(;!(f=h.next()).done;u++){l[u]=i?o(h,a,[f.value,u],true):f.value}}else{l=new(typeof this=="function"?this:Array)(c=$.toLength(t.length))
for(;c>u;u++){l[u]=i?a(t[u],u):t[u]}}l.length=u
return l}})},{"./$":26,"./$.ctx":14,"./$.def":15,"./$.iter":25,"./$.iter-call":22,"./$.iter-detect":24}],51:[function(e,t,r){var $=e("./$"),n=e("./$.unscope"),i=e("./$.uid").safe("iter"),s=e("./$.iter"),o=s.step,a=s.Iterators
e("./$.iter-define")(Array,"Array",function(e,t){$.set(this,i,{o:$.toObject(e),i:0,k:t})},function(){var e=this[i],t=e.o,r=e.k,n=e.i++
if(!t||n>=t.length){e.o=undefined
return o(1)}if(r=="keys")return o(0,n)
if(r=="values")return o(0,t[n])
return o(0,[n,t[n]])},"values")
a.Arguments=a.Array
n("keys")
n("values")
n("entries")},{"./$":26,"./$.iter":25,"./$.iter-define":23,"./$.uid":42,"./$.unscope":43}],52:[function(e,t,r){var n=e("./$.def")
n(n.S,"Array",{of:function i(){var e=0,t=arguments.length,r=new(typeof this=="function"?this:Array)(t)
while(t>e)r[e]=arguments[e++]
r.length=t
return r}})},{"./$.def":15}],53:[function(e,t,r){e("./$.species")(Array)},{"./$.species":36}],54:[function(e,t,r){var $=e("./$"),n=e("./$.wks")("hasInstance"),i=Function.prototype
if(!(n in i))$.setDesc(i,n,{value:function(e){if(!$.isFunction(this)||!$.isObject(e))return false
if(!$.isObject(this.prototype))return e instanceof this
while(e=$.getProto(e))if(this.prototype===e)return true
return false}})},{"./$":26,"./$.wks":44}],55:[function(e,t,r){"use strict"
var $=e("./$"),n="name",i=$.setDesc,s=Function.prototype
n in s||$.FW&&$.DESC&&i(s,n,{configurable:true,get:function(){var e=String(this).match(/^\s*function ([^ (]*)/),t=e?e[1]:""
$.has(this,n)||i(this,n,$.desc(5,t))
return t},set:function(e){$.has(this,n)||i(this,n,$.desc(0,e))}})},{"./$":26}],56:[function(e,t,r){"use strict"
var n=e("./$.collection-strong")
e("./$.collection")("Map",function(e){return function t(){return e(this,arguments[0])}},{get:function i(e){var t=n.getEntry(this,e)
return t&&t.v},set:function s(e,t){return n.def(this,e===0?0:e,t)}},n,true)},{"./$.collection":13,"./$.collection-strong":10}],57:[function(e,t,r){var n=1/0,i=e("./$.def"),s=Math.E,o=Math.pow,a=Math.abs,u=Math.exp,c=Math.log,l=Math.sqrt,f=Math.ceil,h=Math.floor,d=o(2,-52),p=o(2,-23),g=o(2,127)*(2-p),m=o(2,-126)
function y(e){return e+1/d-1/d}function v(e){return(e=+e)==0||e!=e?e:e<0?-1:1}function b(e){return!isFinite(e=+e)||e==0?e:e<0?-b(-e):c(e+l(e*e+1))}function w(e){return(e=+e)==0?e:e>-1e-6&&e<1e-6?e+e*e/2:u(e)-1}i(i.S,"Math",{acosh:function k(e){return(e=+e)<1?NaN:isFinite(e)?c(e/s+l(e+1)*l(e-1)/s)+1:e},asinh:b,atanh:function S(e){return(e=+e)==0?e:c((1+e)/(1-e))/2},cbrt:function _(e){return v(e=+e)*o(a(e),1/3)},clz32:function x(e){return(e>>>=0)?31-h(c(e+.5)*Math.LOG2E):32},cosh:function j(e){return(u(e=+e)+u(-e))/2},expm1:w,fround:function O(e){var t=a(e),r=v(e),i,s
if(t<m)return r*y(t/m/p)*m*p
i=(1+p/d)*t
s=i-(i-t)
if(s>g||s!=s)return r*n
return r*s},hypot:function E(e,t){var r=0,i=0,s=arguments.length,o=0,u,c
while(i<s){u=a(arguments[i++])
if(o<u){c=o/u
r=r*c*c+1
o=u}else if(u>0){c=u/o
r+=c*c}else r+=u}return o===n?n:o*l(r)},imul:function C(e,t){var r=65535,n=+e,i=+t,s=r&n,o=r&i
return 0|s*o+((r&n>>>16)*o+s*(r&i>>>16)<<16>>>0)},log1p:function P(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:c(1+e)},log10:function D(e){return c(e)/Math.LN10},log2:function N(e){return c(e)/Math.LN2},sign:v,sinh:function I(e){return a(e=+e)<1?(w(e)-w(-e))/2:(u(e-1)-u(-e-1))*(s/2)},tanh:function T(e){var t=w(e=+e),r=w(-e)
return t==n?1:r==n?-1:(t-r)/(u(e)+u(-e))},trunc:function F(e){return(e>0?h:f)(e)}})},{"./$.def":15}],58:[function(e,t,r){"use strict"
var $=e("./$"),n=$.isObject,i=$.isFunction,s="Number",o=$.g[s],a=o,u=o.prototype
function c(e){var t,r
if(i(t=e.valueOf)&&!n(r=t.call(e)))return r
if(i(t=e.toString)&&!n(r=t.call(e)))return r
throw TypeError("Can't convert object to number")}function l(e){if(n(e))e=c(e)
if(typeof e=="string"&&e.length>2&&e.charCodeAt(0)==48){var t=false
switch(e.charCodeAt(1)){case 66:case 98:t=true
case 79:case 111:return parseInt(e.slice(2),t?2:8)}}return+e}if($.FW&&!(o("0o1")&&o("0b1"))){o=function f(e){return this instanceof o?new a(l(e)):l(e)}
$.each.call($.DESC?$.getNames(a):("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,"+"EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,"+"MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger").split(","),function(e){if($.has(a,e)&&!$.has(o,e)){$.setDesc(o,e,$.getDesc(a,e))}})
o.prototype=u
u.constructor=o
e("./$.redef")($.g,s,o)}},{"./$":26,"./$.redef":31}],59:[function(e,t,r){var $=e("./$"),n=e("./$.def"),i=Math.abs,s=Math.floor,o=$.g.isFinite,a=9007199254740991
function u(e){return!$.isObject(e)&&o(e)&&s(e)===e}n(n.S,"Number",{EPSILON:Math.pow(2,-52),isFinite:function c(e){return typeof e=="number"&&o(e)},isInteger:u,isNaN:function l(e){return e!=e},isSafeInteger:function f(e){return u(e)&&i(e)<=a},MAX_SAFE_INTEGER:a,MIN_SAFE_INTEGER:-a,parseFloat:parseFloat,parseInt:parseInt})},{"./$":26,"./$.def":15}],60:[function(e,t,r){var n=e("./$.def")
n(n.S,"Object",{assign:e("./$.assign")})},{"./$.assign":8,"./$.def":15}],61:[function(e,t,r){var n=e("./$.def")
n(n.S,"Object",{is:e("./$.same")})},{"./$.def":15,"./$.same":33}],62:[function(e,t,r){var n=e("./$.def")
n(n.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.def":15,"./$.set-proto":34}],63:[function(e,t,r){var $=e("./$"),n=e("./$.def"),i=$.isObject,s=$.toObject
$.each.call(("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,"+"getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames").split(","),function(t,r){var o=($.core.Object||{})[t]||Object[t],a=0,u={}
u[t]=r==0?function l(e){return i(e)?o(e):e}:r==1?function f(e){return i(e)?o(e):e}:r==2?function h(e){return i(e)?o(e):e}:r==3?function d(e){return i(e)?o(e):true}:r==4?function p(e){return i(e)?o(e):true}:r==5?function g(e){return i(e)?o(e):false}:r==6?function m(e,t){return o(s(e),t)}:r==7?function y(e){return o(Object($.assertDefined(e)))}:r==8?function v(e){return o(s(e))}:e("./$.get-names").get
try{o("z")}catch(c){a=1}n(n.S+n.F*a,"Object",u)})},{"./$":26,"./$.def":15,"./$.get-names":20}],64:[function(e,t,r){"use strict"
var n=e("./$.cof"),i={}
i[e("./$.wks")("toStringTag")]="z"
if(e("./$").FW&&n(i)!="z"){e("./$.redef")(Object.prototype,"toString",function s(){return"[object "+n.classof(this)+"]"},true)}},{"./$":26,"./$.cof":9,"./$.redef":31,"./$.wks":44}],65:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.ctx"),i=e("./$.cof"),s=e("./$.def"),o=e("./$.assert"),a=e("./$.for-of"),u=e("./$.set-proto").set,c=e("./$.same"),l=e("./$.species"),f=e("./$.wks")("species"),h=e("./$.uid").safe("record"),d="Promise",p=$.g,g=p.process,m=i(g)=="process",y=g&&g.nextTick||e("./$.task").set,v=p[d],b=$.isFunction,w=$.isObject,k=o.fn,S=o.obj,_
function x(e){var t=new v(function(){})
if(e)t.constructor=Object
return v.resolve(t)===t}var j=function(){var e=false
function t(e){var r=new v(e)
u(r,t.prototype)
return r}try{e=b(v)&&b(v.resolve)&&x()
u(t,v)
t.prototype=$.create(v.prototype,{constructor:{value:t}})
if(!(t.resolve(5).then(function(){})instanceof t)){e=false}if(e&&$.DESC){var r=false
v.resolve($.setDesc({},"then",{get:function(){r=true}}))
e=r}}catch(n){e=false}return e}()
function O(e){return w(e)&&(j?i.classof(e)=="Promise":h in e)}function E(e,t){if(!$.FW&&e===v&&t===_)return true
return c(e,t)}function C(e){var t=S(e)[f]
return t!=undefined?t:e}function P(e){var t
if(w(e))t=e.then
return b(t)?t:false}function D(e){var t=e.c
if(t.length)y.call(p,function(){var r=e.v,n=e.s==1,i=0
function s(t){var i=n?t.ok:t.fail,s,o
try{if(i){if(!n)e.h=true
s=i===true?r:i(r)
if(s===t.P){t.rej(TypeError("Promise-chain cycle"))}else if(o=P(s)){o.call(s,t.res,t.rej)}else t.res(s)}else t.rej(r)}catch(a){t.rej(a)}}while(t.length>i)s(t[i++])
t.length=0})}function N(e){var t=e[h],r=t.a||t.c,n=0,i
if(t.h)return false
while(r.length>n){i=r[n++]
if(i.fail||!N(i.P))return false}return true}function I(e){var t=this,r
if(t.d)return
t.d=true
t=t.r||t
t.v=e
t.s=2
t.a=t.c.slice()
setTimeout(function(){y.call(p,function(){if(N(r=t.p)){if(m){g.emit("unhandledRejection",e,r)}else if(p.console&&console.error){console.error("Unhandled promise rejection",e)}}t.a=undefined})},1)
D(t)}function T(e){var t=this,r
if(t.d)return
t.d=true
t=t.r||t
try{if(r=P(e)){y.call(p,function(){var i={r:t,d:false}
try{r.call(e,n(T,i,1),n(I,i,1))}catch(s){I.call(i,s)}})}else{t.v=e
t.s=1
D(t)}}catch(i){I.call({r:t,d:false},i)}}if(!j){v=function F(e){k(e)
var t={p:o.inst(this,v,d),c:[],a:undefined,s:0,d:false,v:undefined,h:false}
$.hide(this,h,t)
try{e(n(T,t,1),n(I,t,1))}catch(r){I.call(t,r)}}
e("./$.mix")(v.prototype,{then:function L(e,t){var r=S(S(this).constructor)[f]
var n={ok:b(e)?e:true,fail:b(t)?t:false}
var i=n.P=new(r!=undefined?r:v)(function(e,t){n.res=k(e)
n.rej=k(t)})
var s=this[h]
s.c.push(n)
if(s.a)s.a.push(n)
if(s.s)D(s)
return i},"catch":function(e){return this.then(undefined,e)}})}s(s.G+s.W+s.F*!j,{Promise:v})
i.set(v,d)
l(v)
l(_=$.core[d])
s(s.S+s.F*!j,d,{reject:function A(e){return new(C(this))(function(t,r){r(e)})}})
s(s.S+s.F*(!j||x(true)),d,{resolve:function M(e){return O(e)&&E(e.constructor,this)?e:new this(function(t){t(e)})}})
s(s.S+s.F*!(j&&e("./$.iter-detect")(function(e){v.all(e)["catch"](function(){})})),d,{all:function R(e){var t=C(this),r=[]
return new t(function(n,i){a(e,false,r.push,r)
var s=r.length,o=Array(s)
if(s)$.each.call(r,function(e,r){t.resolve(e).then(function(e){o[r]=e;--s||n(o)},i)})
else n(o)})},race:function W(e){var t=C(this)
return new t(function(r,n){a(e,false,function(e){t.resolve(e).then(r,n)})})}})},{"./$":26,"./$.assert":7,"./$.cof":9,"./$.ctx":14,"./$.def":15,"./$.for-of":18,"./$.iter-detect":24,"./$.mix":28,"./$.same":33,"./$.set-proto":34,"./$.species":36,"./$.task":40,"./$.uid":42,"./$.wks":44}],66:[function(e,t,r){var $=e("./$"),n=e("./$.def"),i=e("./$.set-proto"),s=e("./$.iter"),o=e("./$.wks")("iterator"),a=e("./$.uid").safe("iter"),u=s.step,c=e("./$.assert"),l=$.isObject,f=$.getProto,h=$.g.Reflect,d=Function.apply,p=c.obj,g=Object.isExtensible||l,m=Object.preventExtensions,y=!(h&&h.enumerate&&o in h.enumerate({}))
function v(e){$.set(this,a,{o:e,k:undefined,i:0})}s.create(v,"Object",function(){var e=this[a],t=e.k,r
if(t==undefined){e.k=t=[]
for(r in e.o)t.push(r)}do{if(e.i>=t.length)return u(1)}while(!((r=t[e.i++])in e.o))
return u(0,r)})
var b={apply:function w(e,t,r){return d.call(e,t,r)},construct:function k(e,t){var r=c.fn(arguments.length<3?e:arguments[2]).prototype,n=$.create(l(r)?r:Object.prototype),i=d.call(e,n,t)
return l(i)?i:n},defineProperty:function S(e,t,r){p(e)
try{$.setDesc(e,t,r)
return true}catch(n){return false}},deleteProperty:function _(e,t){var r=$.getDesc(p(e),t)
return r&&!r.configurable?false:delete e[t]},get:function x(e,t){var r=arguments.length<3?e:arguments[2],n=$.getDesc(p(e),t),i
if(n)return $.has(n,"value")?n.value:n.get===undefined?undefined:n.get.call(r)
return l(i=f(e))?x(i,t,r):undefined},getOwnPropertyDescriptor:function j(e,t){return $.getDesc(p(e),t)},getPrototypeOf:function O(e){return f(p(e))},has:function E(e,t){return t in e},isExtensible:function C(e){return g(p(e))},ownKeys:e("./$.own-keys"),preventExtensions:function P(e){p(e)
try{if(m)m(e)
return true}catch(t){return false}},set:function D(e,t,r){var n=arguments.length<4?e:arguments[3],i=$.getDesc(p(e),t),s,o
if(!i){if(l(o=f(e))){return D(o,t,r,n)}i=$.desc(0)}if($.has(i,"value")){if(i.writable===false||!l(n))return false
s=$.getDesc(n,t)||$.desc(0)
s.value=r
$.setDesc(n,t,s)
return true}return i.set===undefined?false:(i.set.call(n,r),true)}}
if(i)b.setPrototypeOf=function N(e,t){i.check(e,t)
try{i.set(e,t)
return true}catch(r){return false}}
n(n.G,{Reflect:{}})
n(n.S+n.F*y,"Reflect",{enumerate:function I(e){return new v(p(e))}})
n(n.S,"Reflect",b)},{"./$":26,"./$.assert":7,"./$.def":15,"./$.iter":25,"./$.own-keys":29,"./$.set-proto":34,"./$.uid":42,"./$.wks":44}],67:[function(e,t,r){var $=e("./$"),n=e("./$.cof"),i=$.g.RegExp,s=i,o=i.prototype,a=/a/g,u=new i(a)!==a,c=function(){try{return i(a,"i")=="/a/i"}catch(e){}}()
if($.FW&&$.DESC){if(!u||!c){i=function l(e,t){var r=n(e)=="RegExp",o=t===undefined
if(!(this instanceof i)&&r&&o)return e
return u?new s(r&&!o?e.source:e,t):new s(r?e.source:e,r&&o?e.flags:t)}
$.each.call($.getNames(s),function(e){e in i||$.setDesc(i,e,{configurable:true,get:function(){return s[e]},set:function(t){s[e]=t}})})
o.constructor=i
i.prototype=o
e("./$.redef")($.g,"RegExp",i)}if(/./g.flags!="g")$.setDesc(o,"flags",{configurable:true,get:e("./$.replacer")(/^.*\/(\w*)$/,"$1")})}e("./$.species")(i)},{"./$":26,"./$.cof":9,"./$.redef":31,"./$.replacer":32,"./$.species":36}],68:[function(e,t,r){"use strict"
var n=e("./$.collection-strong")
e("./$.collection")("Set",function(e){return function t(){return e(this,arguments[0])}},{add:function i(e){return n.def(this,e=e===0?0:e,e)}},n)},{"./$.collection":13,"./$.collection-strong":10}],69:[function(e,t,r){"use strict"
var n=e("./$.def"),i=e("./$.string-at")(false)
n(n.P,"String",{codePointAt:function s(e){return i(this,e)}})},{"./$.def":15,"./$.string-at":37}],70:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.cof"),i=e("./$.def"),s=$.toLength
i(i.P+i.F*!e("./$.throws")(function(){"q".endsWith(/./)}),"String",{endsWith:function o(e){if(n(e)=="RegExp")throw TypeError()
var t=String($.assertDefined(this)),r=arguments[1],i=s(t.length),o=r===undefined?i:Math.min(s(r),i)
e+=""
return t.slice(o-e.length,o)===e}})},{"./$":26,"./$.cof":9,"./$.def":15,"./$.throws":41}],71:[function(e,t,r){var n=e("./$.def"),i=e("./$").toIndex,s=String.fromCharCode,o=String.fromCodePoint
n(n.S+n.F*(!!o&&o.length!=1),"String",{fromCodePoint:function a(e){var t=[],r=arguments.length,n=0,o
while(r>n){o=+arguments[n++]
if(i(o,1114111)!==o)throw RangeError(o+" is not a valid code point")
t.push(o<65536?s(o):s(((o-=65536)>>10)+55296,o%1024+56320))}return t.join("")}})},{"./$":26,"./$.def":15}],72:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.cof"),i=e("./$.def")
i(i.P,"String",{includes:function s(e){if(n(e)=="RegExp")throw TypeError()
return!!~String($.assertDefined(this)).indexOf(e,arguments[1])}})},{"./$":26,"./$.cof":9,"./$.def":15}],73:[function(e,t,r){var n=e("./$").set,i=e("./$.string-at")(true),s=e("./$.uid").safe("iter"),o=e("./$.iter"),a=o.step
e("./$.iter-define")(String,"String",function(e){n(this,s,{o:String(e),i:0})},function(){var e=this[s],t=e.o,r=e.i,n
if(r>=t.length)return a(1)
n=i(t,r)
e.i+=n.length
return a(0,n)})},{"./$":26,"./$.iter":25,"./$.iter-define":23,"./$.string-at":37,"./$.uid":42}],74:[function(e,t,r){var $=e("./$"),n=e("./$.def")
n(n.S,"String",{raw:function i(e){var t=$.toObject(e.raw),r=$.toLength(t.length),n=arguments.length,i=[],s=0
while(r>s){i.push(String(t[s++]))
if(s<n)i.push(String(arguments[s]))}return i.join("")}})},{"./$":26,"./$.def":15}],75:[function(e,t,r){var n=e("./$.def")
n(n.P,"String",{repeat:e("./$.string-repeat")})},{"./$.def":15,"./$.string-repeat":39}],76:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.cof"),i=e("./$.def")
i(i.P+i.F*!e("./$.throws")(function(){"q".startsWith(/./)}),"String",{startsWith:function s(e){if(n(e)=="RegExp")throw TypeError()
var t=String($.assertDefined(this)),r=$.toLength(Math.min(arguments[1],t.length))
e+=""
return t.slice(r,r+e.length)===e}})},{"./$":26,"./$.cof":9,"./$.def":15,"./$.throws":41}],77:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.cof").set,i=e("./$.uid"),s=e("./$.shared"),o=e("./$.def"),a=e("./$.redef"),u=e("./$.keyof"),c=e("./$.enum-keys"),l=e("./$.assert").obj,f=Object.prototype,h=$.DESC,d=$.has,p=$.create,g=$.getDesc,m=$.setDesc,y=$.desc,v=e("./$.get-names"),b=v.get,w=$.toObject,k=$.g.Symbol,S=false,_=i("tag"),x=i("hidden"),j={}.propertyIsEnumerable,O=s("symbol-registry"),E=s("symbols"),C=$.isFunction(k)
var P=h?function(){try{return p(m({},x,{get:function(){return m(this,x,{value:false})[x]}}))[x]||m}catch(e){return function(e,t,r){var n=g(f,t)
if(n)delete f[t]
m(e,t,r)
if(n&&e!==f)m(f,t,n)}}}():m
function D(e){var t=E[e]=$.set(p(k.prototype),_,e)
h&&S&&P(f,e,{configurable:true,set:function(t){if(d(this,x)&&d(this[x],e))this[x][e]=false
P(this,e,y(1,t))}})
return t}function N(e,t,r){if(r&&d(E,t)){if(!r.enumerable){if(!d(e,x))m(e,x,y(1,{}))
e[x][t]=true}else{if(d(e,x)&&e[x][t])e[x][t]=false
r=p(r,{enumerable:y(0,false)})}return P(e,t,r)}return m(e,t,r)}function I(e,t){l(e)
var r=c(t=w(t)),n=0,i=r.length,s
while(i>n)N(e,s=r[n++],t[s])
return e}function T(e,t){return t===undefined?p(e):I(p(e),t)}function F(e){var t=j.call(this,e)
return t||!d(this,e)||!d(E,e)||d(this,x)&&this[x][e]?t:true}function L(e,t){var r=g(e=w(e),t)
if(r&&d(E,t)&&!(d(e,x)&&e[x][t]))r.enumerable=true
return r}function A(e){var t=b(w(e)),r=[],n=0,i
while(t.length>n)if(!d(E,i=t[n++])&&i!=x)r.push(i)
return r}function M(e){var t=b(w(e)),r=[],n=0,i
while(t.length>n)if(d(E,i=t[n++]))r.push(E[i])
return r}if(!C){k=function W(){if(this instanceof k)throw TypeError("Symbol is not a constructor")
return D(i(arguments[0]))}
a(k.prototype,"toString",function(){return this[_]})
$.create=T
$.setDesc=N
$.getDesc=L
$.setDescs=I
$.getNames=v.get=A
$.getSymbols=M
if($.DESC&&$.FW)a(f,"propertyIsEnumerable",F,true)}var R={"for":function(e){return d(O,e+="")?O[e]:O[e]=k(e)},keyFor:function B(e){return u(O,e)},useSetter:function(){S=true},useSimple:function(){S=false}}
$.each.call(("hasInstance,isConcatSpreadable,iterator,match,replace,search,"+"species,split,toPrimitive,toStringTag,unscopables").split(","),function(t){var r=e("./$.wks")(t)
R[t]=C?r:D(r)})
S=true
o(o.G+o.W,{Symbol:k})
o(o.S,"Symbol",R)
o(o.S+o.F*!C,"Object",{create:T,defineProperty:N,defineProperties:I,getOwnPropertyDescriptor:L,getOwnPropertyNames:A,getOwnPropertySymbols:M})
n(k,"Symbol")
n(Math,"Math",true)
n($.g.JSON,"JSON",true)},{"./$":26,"./$.assert":7,"./$.cof":9,"./$.def":15,"./$.enum-keys":17,"./$.get-names":20,"./$.keyof":27,"./$.redef":31,"./$.shared":35,"./$.uid":42,"./$.wks":44}],78:[function(e,t,r){"use strict"
var $=e("./$"),n=e("./$.collection-weak"),i=n.leakStore,s=n.ID,o=n.WEAK,a=$.has,u=$.isObject,c=Object.isExtensible||u,l={}
var f=e("./$.collection")("WeakMap",function(e){return function t(){return e(this,arguments[0])}},{get:function h(e){if(u(e)){if(!c(e))return i(this).get(e)
if(a(e,o))return e[o][this[s]]}},set:function d(e,t){return n.def(this,e,t)}},n,true,true)
if((new f).set((Object.freeze||Object)(l),7).get(l)!=7){$.each.call(["delete","has","get","set"],function(t){var r=f.prototype,n=r[t]
e("./$.redef")(r,t,function(e,r){if(u(e)&&!c(e)){var s=i(this)[t](e,r)
return t=="set"?this:s}return n.call(this,e,r)})})}},{"./$":26,"./$.collection":13,"./$.collection-weak":12,"./$.redef":31}],79:[function(e,t,r){"use strict"
var n=e("./$.collection-weak")
e("./$.collection")("WeakSet",function(e){return function t(){return e(this,arguments[0])}},{add:function i(e){return n.def(this,e,true)}},n,false,true)},{"./$.collection":13,"./$.collection-weak":12}],80:[function(e,t,r){"use strict"
var n=e("./$.def"),i=e("./$.array-includes")(true)
n(n.P,"Array",{includes:function s(e){return i(this,e,arguments[1])}})
e("./$.unscope")("includes")},{"./$.array-includes":5,"./$.def":15,"./$.unscope":43}],81:[function(e,t,r){e("./$.collection-to-json")("Map")},{"./$.collection-to-json":11}],82:[function(e,t,r){var $=e("./$"),n=e("./$.def"),i=e("./$.own-keys")
n(n.S,"Object",{getOwnPropertyDescriptors:function s(e){var t=$.toObject(e),r={}
$.each.call(i(t),function(e){$.setDesc(r,e,$.desc(0,$.getDesc(t,e)))})
return r}})},{"./$":26,"./$.def":15,"./$.own-keys":29}],83:[function(e,t,r){var $=e("./$"),n=e("./$.def")
function i(e){return function(t){var r=$.toObject(t),n=$.getKeys(r),i=n.length,s=0,o=Array(i),a
if(e)while(i>s)o[s]=[a=n[s++],r[a]]
else while(i>s)o[s]=r[n[s++]]
return o}}n(n.S,"Object",{values:i(false),entries:i(true)})},{"./$":26,"./$.def":15}],84:[function(e,t,r){var n=e("./$.def")
n(n.S,"RegExp",{escape:e("./$.replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&",true)})},{"./$.def":15,"./$.replacer":32}],85:[function(e,t,r){e("./$.collection-to-json")("Set")},{"./$.collection-to-json":11}],86:[function(e,t,r){"use strict"
var n=e("./$.def"),i=e("./$.string-at")(true)
n(n.P,"String",{at:function s(e){return i(this,e)}})},{"./$.def":15,"./$.string-at":37}],87:[function(e,t,r){"use strict"
var n=e("./$.def"),i=e("./$.string-pad")
n(n.P,"String",{lpad:function s(e){return i(this,e,arguments[1],true)}})},{"./$.def":15,"./$.string-pad":38}],88:[function(e,t,r){"use strict"
var n=e("./$.def"),i=e("./$.string-pad")
n(n.P,"String",{rpad:function s(e){return i(this,e,arguments[1],false)}})},{"./$.def":15,"./$.string-pad":38}],89:[function(e,t,r){var $=e("./$"),n=e("./$.def"),i=$.core.Array||Array,s={}
function o(t,r){$.each.call(t.split(","),function(t){if(r==undefined&&t in i)s[t]=i[t]
else if(t in[])s[t]=e("./$.ctx")(Function.call,[][t],r)})}o("pop,reverse,shift,keys,values,entries",1)
o("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3)
o("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill,turn")
n(n.S,"Array",s)},{"./$":26,"./$.ctx":14,"./$.def":15}],90:[function(e,t,r){e("./es6.array.iterator")
var $=e("./$"),n=e("./$.iter").Iterators,i=e("./$.wks")("iterator"),s=n.Array,o=$.g.NodeList,a=$.g.HTMLCollection,u=o&&o.prototype,c=a&&a.prototype
if($.FW){if(o&&!(i in u))$.hide(u,i,s)
if(a&&!(i in c))$.hide(c,i,s)}n.NodeList=n.HTMLCollection=s},{"./$":26,"./$.iter":25,"./$.wks":44,"./es6.array.iterator":51}],91:[function(e,t,r){var n=e("./$.def"),i=e("./$.task")
n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./$.def":15,"./$.task":40}],92:[function(e,t,r){var $=e("./$"),n=e("./$.def"),i=e("./$.invoke"),s=e("./$.partial"),o=$.g.navigator,a=!!o&&/MSIE .\./.test(o.userAgent)
function u(e){return a?function(t,r){return e(i(s,[].slice.call(arguments,2),$.isFunction(t)?t:Function(t)),r)}:e}n(n.G+n.B+n.F*a,{setTimeout:u($.g.setTimeout),setInterval:u($.g.setInterval)})},{"./$":26,"./$.def":15,"./$.invoke":21,"./$.partial":30}],93:[function(e,t,r){e("./modules/es5")
e("./modules/es6.symbol")
e("./modules/es6.object.assign")
e("./modules/es6.object.is")
e("./modules/es6.object.set-prototype-of")
e("./modules/es6.object.to-string")
e("./modules/es6.object.statics-accept-primitives")
e("./modules/es6.function.name")
e("./modules/es6.function.has-instance")
e("./modules/es6.number.constructor")
e("./modules/es6.number.statics")
e("./modules/es6.math")
e("./modules/es6.string.from-code-point")
e("./modules/es6.string.raw")
e("./modules/es6.string.iterator")
e("./modules/es6.string.code-point-at")
e("./modules/es6.string.ends-with")
e("./modules/es6.string.includes")
e("./modules/es6.string.repeat")
e("./modules/es6.string.starts-with")
e("./modules/es6.array.from")
e("./modules/es6.array.of")
e("./modules/es6.array.iterator")
e("./modules/es6.array.species")
e("./modules/es6.array.copy-within")
e("./modules/es6.array.fill")
e("./modules/es6.array.find")
e("./modules/es6.array.find-index")
e("./modules/es6.regexp")
e("./modules/es6.promise")
e("./modules/es6.map")
e("./modules/es6.set")
e("./modules/es6.weak-map")
e("./modules/es6.weak-set")
e("./modules/es6.reflect")
e("./modules/es7.array.includes")
e("./modules/es7.string.at")
e("./modules/es7.string.lpad")
e("./modules/es7.string.rpad")
e("./modules/es7.regexp.escape")
e("./modules/es7.object.get-own-property-descriptors")
e("./modules/es7.object.to-array")
e("./modules/es7.map.to-json")
e("./modules/es7.set.to-json")
e("./modules/js.array.statics")
e("./modules/web.timers")
e("./modules/web.immediate")
e("./modules/web.dom.iterable")
t.exports=e("./modules/$").core},{"./modules/$":26,"./modules/es5":45,"./modules/es6.array.copy-within":46,"./modules/es6.array.fill":47,"./modules/es6.array.find":49,"./modules/es6.array.find-index":48,"./modules/es6.array.from":50,"./modules/es6.array.iterator":51,"./modules/es6.array.of":52,"./modules/es6.array.species":53,"./modules/es6.function.has-instance":54,"./modules/es6.function.name":55,"./modules/es6.map":56,"./modules/es6.math":57,"./modules/es6.number.constructor":58,"./modules/es6.number.statics":59,"./modules/es6.object.assign":60,"./modules/es6.object.is":61,"./modules/es6.object.set-prototype-of":62,"./modules/es6.object.statics-accept-primitives":63,"./modules/es6.object.to-string":64,"./modules/es6.promise":65,"./modules/es6.reflect":66,"./modules/es6.regexp":67,"./modules/es6.set":68,"./modules/es6.string.code-point-at":69,"./modules/es6.string.ends-with":70,"./modules/es6.string.from-code-point":71,"./modules/es6.string.includes":72,"./modules/es6.string.iterator":73,"./modules/es6.string.raw":74,"./modules/es6.string.repeat":75,"./modules/es6.string.starts-with":76,"./modules/es6.symbol":77,"./modules/es6.weak-map":78,"./modules/es6.weak-set":79,"./modules/es7.array.includes":80,"./modules/es7.map.to-json":81,"./modules/es7.object.get-own-property-descriptors":82,"./modules/es7.object.to-array":83,"./modules/es7.regexp.escape":84,"./modules/es7.set.to-json":85,"./modules/es7.string.at":86,"./modules/es7.string.lpad":87,"./modules/es7.string.rpad":88,"./modules/js.array.statics":89,"./modules/web.dom.iterable":90,"./modules/web.immediate":91,"./modules/web.timers":92}],94:[function(e,t,r){(function(e,r){!function(r){"use strict"
var n=Object.prototype.hasOwnProperty
var i
var s=typeof Symbol==="function"&&Symbol.iterator||"@@iterator"
var o=typeof t==="object"
var a=r.regeneratorRuntime
if(a){if(o){t.exports=a}return}a=r.regeneratorRuntime=o?t.exports:{}
function u(e,t,r,n){var i=Object.create((t||g).prototype)
i._invoke=S(e,r||null,new j(n||[]))
return i}a.wrap=u
function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}var l="suspendedStart"
var f="suspendedYield"
var h="executing"
var d="completed"
var p={}
function g(){}function m(){}function y(){}var v=y.prototype=g.prototype
m.prototype=v.constructor=y
y.constructor=m
m.displayName="GeneratorFunction"
function b(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}a.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor
return t?t===m||(t.displayName||t.name)==="GeneratorFunction":false}
a.mark=function(e){e.__proto__=y
e.prototype=Object.create(v)
return e}
a.awrap=function(e){return new w(e)}
function w(e){this.arg=e}function k(t){function r(e,r){var s=t[e](r)
var o=s.value
return o instanceof w?Promise.resolve(o.arg).then(n,i):Promise.resolve(o).then(function(e){s.value=e
return s})}if(typeof e==="object"&&e.domain){r=e.domain.bind(r)}var n=r.bind(t,"next")
var i=r.bind(t,"throw")
var s=r.bind(t,"return")
var o
function a(e,t){var n=o?o.then(function(){return r(e,t)}):new Promise(function(n){n(r(e,t))})
o=n["catch"](function(e){})
return n}this._invoke=a}b(k.prototype)
a.async=function(e,t,r,n){var i=new k(u(e,t,r,n))
return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})}
function S(e,t,r){var n=l
return function s(o,a){if(n===h){throw new Error("Generator is already running")}if(n===d){if(o==="throw"){throw a}return E()}while(true){var u=r.delegate
if(u){if(o==="return"||o==="throw"&&u.iterator[o]===i){r.delegate=null
var g=u.iterator["return"]
if(g){var m=c(g,u.iterator,a)
if(m.type==="throw"){o="throw"
a=m.arg
continue}}if(o==="return"){continue}}var m=c(u.iterator[o],u.iterator,a)
if(m.type==="throw"){r.delegate=null
o="throw"
a=m.arg
continue}o="next"
a=i
var y=m.arg
if(y.done){r[u.resultName]=y.value
r.next=u.nextLoc}else{n=f
return y}r.delegate=null}if(o==="next"){if(n===f){r.sent=a}else{r.sent=i}}else if(o==="throw"){if(n===l){n=d
throw a}if(r.dispatchException(a)){o="next"
a=i}}else if(o==="return"){r.abrupt("return",a)}n=h
var m=c(e,t,r)
if(m.type==="normal"){n=r.done?d:f
var y={value:m.arg,done:r.done}
if(m.arg===p){if(r.delegate&&o==="next"){a=i}}else{return y}}else if(m.type==="throw"){n=d
o="throw"
a=m.arg}}}}b(v)
v[s]=function(){return this}
v.toString=function(){return"[object Generator]"}
function _(e){var t={tryLoc:e[0]}
if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2]
t.afterLoc=e[3]}this.tryEntries.push(t)}function x(e){var t=e.completion||{}
t.type="normal"
delete t.arg
e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}]
e.forEach(_,this)
this.reset(true)}a.keys=function(e){var t=[]
for(var r in e){t.push(r)}t.reverse()
return function n(){while(t.length){var r=t.pop()
if(r in e){n.value=r
n.done=false
return n}}n.done=true
return n}}
function O(e){if(e){var t=e[s]
if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var r=-1,o=function a(){while(++r<e.length){if(n.call(e,r)){a.value=e[r]
a.done=false
return a}}a.value=i
a.done=true
return a}
return o.next=o}}return{next:E}}a.values=O
function E(){return{value:i,done:true}}j.prototype={constructor:j,reset:function(e){this.prev=0
this.next=0
this.sent=i
this.done=false
this.delegate=null
this.tryEntries.forEach(x)
if(!e){for(var t in this){if(t.charAt(0)==="t"&&n.call(this,t)&&!isNaN(+t.slice(1))){this[t]=i}}}},stop:function(){this.done=true
var e=this.tryEntries[0]
var t=e.completion
if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){if(this.done){throw e}var t=this
function r(r,n){o.type="throw"
o.arg=e
t.next=r
return!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i]
var o=s.completion
if(s.tryLoc==="root"){return r("end")}if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc")
var u=n.call(s,"finallyLoc")
if(a&&u){if(this.prev<s.catchLoc){return r(s.catchLoc,true)}else if(this.prev<s.finallyLoc){return r(s.finallyLoc)}}else if(a){if(this.prev<s.catchLoc){return r(s.catchLoc,true)}}else if(u){if(this.prev<s.finallyLoc){return r(s.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r]
if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i
break}}if(s&&(e==="break"||e==="continue")&&s.tryLoc<=t&&t<=s.finallyLoc){s=null}var o=s?s.completion:{}
o.type=e
o.arg=t
if(s){this.next=s.finallyLoc}else{this.complete(o)}return p},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=e.arg
this.next="end"}else if(e.type==="normal"&&t){this.next=t}},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t]
if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc)
x(r)
return p}}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t]
if(r.tryLoc===e){var n=r.completion
if(n.type==="throw"){var i=n.arg
x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:O(e),resultName:t,nextLoc:r}
return p}}}(typeof r==="object"?r:typeof window==="object"?window:typeof self==="object"?self:this)}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:4}]},{},[1])
__KA_exports.OutputImages = OutputImages;
__KA_exports.ScratchpadRecord = ScratchpadRecord;
__KA_exports.ScratchpadConfig = ScratchpadConfig;
this.ScratchpadConfig = ScratchpadConfig;
this.OutputImages = OutputImages;
this.ScratchpadRecord = ScratchpadRecord;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.ui.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/shared-package/i18n.js");
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../../../javascript/node_modules/underscore/index.js");
__KA_require("../../../../../javascript/node_modules/backbone/index.js");
__KA_require("../../../handlebars/handlebars.runtime.js");
__KA_require("./live-editor.audio.js");
__KA_require("./live-editor.shared.js");
this["Handlebars"]=this["Handlebars"]||{}
this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{}
this["Handlebars"]["templates"]["tipbar"]=Handlebars.template(function(t,e,i,r,n){i=i||t.helpers
var s="",o,a,d,l=this,h="function",c=i.blockHelperMissing
function u(t,e){return"x"}function f(t,e){return"Oh noes!"}function p(t,e){return"Show me where"}function g(t,e){return"Previous error"}function m(t,e){return"Next error"}s+='<div class="tipbar">\n    <div class="speech-arrow"></div>\n    <div class="error-buddy"></div>\n    \n    <div class="text-wrap">\n        <button class="close" type="button" aria-label="Close">'
a=i.i18nDoNotTranslate
o=a||e.i18nDoNotTranslate
d=l.program(1,u,n)
d.hash={}
d.fn=d
d.inverse=l.noop
if(a&&typeof o===h){o=o.call(e,d)}else{o=c.call(e,o,d)}if(o||o===0){s+=o}s+='</button>\n        <div class="oh-no">'
a=i["_"]
o=a||e["_"]
d=l.program(3,f,n)
d.hash={}
d.fn=d
d.inverse=l.noop
if(a&&typeof o===h){o=o.call(e,d)}else{o=c.call(e,o,d)}if(o||o===0){s+=o}s+='</div>\n        <div class="message"></div>\n        <div class="show-me"><a href>'
a=i["_"]
o=a||e["_"]
d=l.program(5,p,n)
d.hash={}
d.fn=d
d.inverse=l.noop
if(a&&typeof o===h){o=o.call(e,d)}else{o=c.call(e,o,d)}if(o||o===0){s+=o}s+='</a></div>\n        <div class="tipnav">\n            <a href="javascript:void(0);" class="prev" title="'
a=i["_"]
o=a||e["_"]
d=l.program(7,g,n)
d.hash={}
d.fn=d
d.inverse=l.noop
if(a&&typeof o===h){o=o.call(e,d)}else{o=c.call(e,o,d)}if(o||o===0){s+=o}s+='">\n                <span class="ui-icon ui-icon-circle-triangle-w"></span>\n            </a>\n            <span class="current-pos"></span>\n            <a href="javascript:void(0);" class="next" title="'
a=i["_"]
o=a||e["_"]
d=l.program(9,m,n)
d.hash={}
d.fn=d
d.inverse=l.noop
if(a&&typeof o===h){o=o.call(e,d)}else{o=c.call(e,o,d)}if(o||o===0){s+=o}s+='">\n                <span class="ui-icon ui-icon-circle-triangle-e"></span>\n            </a>\n        </div>\n    </div>\n</div>'
return s})
window.TipBar=Backbone.View.extend({initialize:function t(e){this.liveEditor=e.liveEditor
this.pos=0
this.errors=[]
this.render()
this.bind()},render:function e(){this.$overlay=$('<div class="overlay error-overlay" style="display: none"></div>').appendTo(this.$el)
this.$el.append(Handlebars.templates["tipbar"]())
this.$bar=this.$el.find(".tipbar")},bind:function i(){var t=this
if($.fn.draggable){this.$el.find(".tipbar").draggable({containment:"parent",handle:".error-buddy",axis:"y"})}this.$el.on("click",".tipbar .tipnav a",function(e){if(!$(this).hasClass("ui-state-disabled")){t.pos+=$(this).hasClass("next")?1:-1
t.update()}t.liveEditor.editor.focus()
return false})
this.$el.on("click",".tipbar .show-me a",function(e){e.preventDefault()
var i=t.errors[t.pos]
t.liveEditor.editor.setCursor(i)
t.liveEditor.editor.setErrorHighlight(true)
return false})
this.$el.on("click",".tipbar .close",function(e){t.liveEditor.setThinkingState()})},setErrors:function r(t){this.errors=t
this.update(false)},update:function n(t){if(!this.errors.length)return
var e=this.errors
var i=e[this.pos]==null?0:this.pos
this.$bar.find(".current-pos").text(e.length>1?i+1+"/"+e.length:"").end().find(".message").html(e[i].text||e[i]||"").end().find("a.prev").toggleClass("ui-state-disabled",i===0).end().find("a.next").toggleClass("ui-state-disabled",i+1===e.length).end()
this.$el.find(".show-me").toggle(e[i].row>-1)
this.$bar.find(".tipnav").toggle(e.length>1)
if(t){this.$overlay.show()
this.$bar.show()}},hide:function s(){this.$bar.hide()
this.$overlay.hide()
clearTimeout(this.errorDelay)},toggleErrors:function o(t,e){var i=t.length>0
if(!i){this.hide()
return}this.$overlay.show()
this.setErrors(t)
clearTimeout(this.errorDelay)
this.errorDelay=setTimeout(function(){this.update(true)}.bind(this),e)},setErrorPosition:function a(t){this.pos=t
this.update(true)}})
this["Handlebars"]=this["Handlebars"]||{}
this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{}
this["Handlebars"]["templates"]["live-editor"]=Handlebars.template(function(t,e,i,r,n){i=i||t.helpers
var s="",o,a,d,l,h=this,c="function",u=i.helperMissing,f=void 0,p=this.escapeExpression,g=i.blockHelperMissing
function m(t,e){return" no-output"}function v(t,e){var r="",n
r+='\n                <iframe id="output-frame"\n                    src="'
d=i.execFile
n=d||t.execFile
if(typeof n===c){n=n.call(t,{hash:{}})}else if(n===f){n=u.call(t,"execFile",{hash:{}})}r+=p(n)+'"\n                    data-src="'
d=i.execFile
n=d||t.execFile
if(typeof n===c){n=n.call(t,{hash:{}})}else if(n===f){n=u.call(t,"execFile",{hash:{}})}r+=p(n)+'"></iframe>\n            '
return r}function w(t,e){return"Loading..."}function y(t,e){return"Hmm..."}function b(t,e){return"Restart"}function C(t,e){var i="",r
i+='\n                <a href="" class="draw-color-button" id="'
r=t
if(typeof r===c){r=r.call(t,{hash:{}})}else if(r===f){r=u.call(t,"this",{hash:{}})}i+=p(r)+'">\n                    <span></span>\n                </a>\n                '
return i}function k(t,e){return"Record"}function R(t,e){return"Loading..."}function A(t,e){return"Enable Flash to load audio:"}function T(t,e){return"Play"}function D(t,e){return"Loading audio..."}s+='<div class="scratchpad-wrap'
d=i.execFile
o=d||e.execFile
a=i.unless
l=h.program(1,m,n)
l.hash={}
l.fn=l
l.inverse=h.noop
o=a.call(e,o,l)
if(o||o===0){s+=o}s+='">\n    <!-- Canvases (Drawing + Output) -->\n    <div class="scratchpad-canvas-wrap">\n        <div id="output">\n            <!-- Extra data-src attribute to work around\n                 cross-origin access policies. -->\n            '
d=i.execFile
o=d||e.execFile
a=i["if"]
l=h.program(3,v,n)
l.hash={}
l.fn=l
l.inverse=h.noop
o=a.call(e,o,l)
if(o||o===0){s+=o}s+='\n            <canvas class="scratchpad-draw-canvas" style="display:none;"\n                width="400" height="400"></canvas>\n\n            <div class="overlay disable-overlay" style="display:none;">\n            </div>\n\n            <div class="scratchpad-canvas-loading">\n                <img src="'
d=i.imagesDir
o=d||e.imagesDir
if(typeof o===c){o=o.call(e,{hash:{}})}else if(o===f){o=u.call(e,"imagesDir",{hash:{}})}s+=p(o)+'/throbber-full.gif">\n                <span class="hide-text">'
d=i["_"]
o=d||e["_"]
l=h.program(5,w,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='</span>\n            </div>\n        </div>\n\n        <div class="scratchpad-toolbar">\n            <div class="error-buddy-resting">\n                <div class="error-buddy-happy" style="display:none;">\n                    <img src="'
d=i.imagesDir
o=d||e.imagesDir
if(typeof o===c){o=o.call(e,{hash:{}})}else if(o===f){o=u.call(e,"imagesDir",{hash:{}})}s+=p(o)+'/ohnoes-happy.png"/>\n                </div>\n                <a class="error-buddy-thinking" style="display:none;" href="javascript:void()">\n                    <img src="'
d=i.imagesDir
o=d||e.imagesDir
if(typeof o===c){o=o.call(e,{hash:{}})}else if(o===f){o=u.call(e,"imagesDir",{hash:{}})}s+=p(o)+'/ohnoes-hmm.png"/>\n                    '
s+="\n                    "
d=i["_"]
o=d||e["_"]
l=h.program(7,y,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='\n                </a>\n            </div>\n            <button id="restart-code"\n                class="simple-button pull-right">\n                <span class="icon-refresh"></span>\n                '
d=i["_"]
o=d||e["_"]
l=h.program(9,b,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='</button>\n\n            <!-- Widgets for selecting colors to doodle on the canvas during\n                recordings -->\n            <div id="draw-widgets" style="display:none;">\n                <a href="" id="draw-clear-button" class="ui-button">\n                    <span class="ui-icon-cancel"></span>\n                </a>\n                '
d=i.colors
o=d||e.colors
a=i.each
l=h.program(11,C,n)
l.hash={}
l.fn=l
l.inverse=h.noop
o=a.call(e,o,l)
if(o||o===0){s+=o}s+='\n            </div>\n\n            <!-- Record button -->\n            <button id="record" class="simple-button pull-left" style="display:none;">'
d=i["_"]
o=d||e["_"]
l=h.program(13,k,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='</button>\n        </div>\n    </div>\n\n    <!-- Editor -->\n    <div class="scratchpad-editor-wrap overlay-container">\n        <div class="scratchpad-editor-tabs">\n          <div id="scratchpad-code-editor-tab" class="scratchpad-editor-tab">\n            <div class="scratchpad-editor scratchpad-ace-editor"></div>\n            <div class="overlay disable-overlay" style="display:none;">\n            </div>\n\n            <div class="scratchpad-editor-bigplay-loading" style="display:none;">\n                <img src="'
d=i.imagesDir
o=d||e.imagesDir
if(typeof o===c){o=o.call(e,{hash:{}})}else if(o===f){o=u.call(e,"imagesDir",{hash:{}})}s+=p(o)+'/throbber-full.gif">\n                <span class="hide-text">'
d=i["_"]
o=d||e["_"]
l=h.program(15,R,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='</span>\n            </div>\n\n            <!-- This cannot be removed, if we want Flash to keep working! -->\n            <div id="sm2-container">\n                '
d=i["_"]
o=d||e["_"]
l=h.program(17,A,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='\n                <br>\n            </div>\n\n            <button class="scratchpad-editor-bigplay-button" style="display:none;">\n                <span class="icon-play"></span>\n                <span class="hide-text">'
d=i["_"]
o=d||e["_"]
l=h.program(19,T,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='</span>\n            </button>\n          </div>\n        </div>\n\n        <div class="scratchpad-toolbar">\n            <!-- Row for playback controls -->\n            <div class="scratchpad-playbar" style="display:none;">\n                <div class="scratchpad-playbar-area" style="display:none;">\n                    <button\n                        class="simple-button primary scratchpad-playbar-play"\n                        type="button">\n                        <span class="icon-play"></span>\n                    </button>\n\n                    <div class="scratchpad-playbar-progress"></div>\n\n                    <span class="scratchpad-playbar-timeleft"></span>\n                </div>\n                <div class="loading-msg">\n                    '
d=i["_"]
o=d||e["_"]
l=h.program(21,D,n)
l.hash={}
l.fn=l
l.inverse=h.noop
if(d&&typeof o===c){o=o.call(e,l)}else{o=g.call(e,o,l)}if(o||o===0){s+=o}s+='\n                </div>\n            </div>\n            <div class="scratchpad-debugger"></div>\n        </div>\n\n        <div class="scratchpad-toolbar scratchpad-dev-record-row" style="display:none;"></div>\n    </div>\n</div>'
return s})
window.ScratchpadDrawCanvas=Backbone.View.extend({initialize:function d(t){this.record=t.record
this.isDrawing=false
this.ctx=this.el.getContext("2d")
this.ctx.shadowBlur=2
this.ctx.lineCap="round"
this.ctx.lineJoin="round"
this.ctx.lineWidth=1
this.clear(true)
if(this.record){this.bindRecordView()}},commands:["startLine","drawLine","endLine","setColor","clear"],colors:{black:[0,0,0],red:[255,0,0],orange:[255,165,0],green:[0,128,0],blue:[0,0,255],lightblue:[173,216,230],violet:[128,0,128]},remove:function l(){this.clear(true)
this.endDraw()
this.$el.off(".draw-canvas")
$(document).off(".draw-canvas")},bindRecordView:function h(){var t=this
var e=this.record
this.$el.on({"mousedown.draw-canvas":function i(r){if(e.recording&&r.button===0){t.startLine(r.offsetX,r.offsetY)
r.preventDefault()}},"mousemove.draw-canvas":function r(i){if(e.recording){t.drawLine(i.offsetX,i.offsetY)}},"mouseup.draw-canvas":function n(i){if(e.recording){t.endLine()}},"mouseout.draw-canvas":function s(i){if(e.recording){t.endLine()}}})
e.on("runSeek",function(){t.clear(true)
t.endDraw()})
e.seekCachers.canvas={getState:function o(){if(!t.isDrawing){return}var e=document.createElement("canvas")
e.width=e.height=t.el.width
e.getContext("2d").drawImage(t.el,0,0)
return{x:t.x,y:t.y,down:t.down,color:t.color,canvas:e}},restoreState:function a(e){t.startDraw()
t.x=e.x
t.y=e.y
t.down=e.down
t.setColor(e.color)
var i=t.ctx.shadowColor
t.ctx.shadowColor="rgba(0,0,0,0.0)"
t.ctx.drawImage(e.canvas,0,0)
t.ctx.shadowColor=i}}
_.each(this.commands,function(i){e.handlers[i]=function(){t[i].apply(t,arguments)}})},startLine:function c(t,e){if(!this.down){this.down=true
this.x=t
this.y=e
this.record.log("startLine",t,e)}},drawLine:function u(t,e){if(this.down&&this.x!=null&&this.y!=null){this.ctx.beginPath()
this.ctx.moveTo(this.x,this.y)
this.ctx.lineTo(t,e)
this.ctx.stroke()
this.ctx.closePath()
this.x=t
this.y=e
this.record.log("drawLine",t,e)}},endLine:function f(){if(this.down){this.down=false
this.record.log("endLine")}},setColor:function p(t){if(t!=null){if(!this.isDrawing){this.startDraw(true)}this.color=t
this.ctx.shadowColor="rgba("+this.colors[t]+",0.5)"
this.ctx.strokeStyle="rgba("+this.colors[t]+",1.0)"
this.record.log("setColor",t)}this.trigger("colorSet",t)},clear:function g(t){this.ctx.clearRect(0,0,600,480)
this.x=null
this.y=null
this.down=false
if(t!==true){this.record.log("clear")}},startDraw:function m(t){if(this.isDrawing){return}this.isDrawing=true
if(t!==true){this.setColor("black")}this.trigger("drawStarted")},endDraw:function v(){if(!this.isDrawing){return}this.isDrawing=false
this.setColor(null)
this.trigger("drawEnded")}})
window.ScratchpadAudioChunks=Backbone.Model.extend({initialize:function w(t){this.audioChunks=[]
this.currentChunk=null},setCurrentChunk:function y(t){this.currentChunk=t},currentChunkExists:function b(){return!_.isNull(this.currentChunk)},startNewChunk:function C(){this.currentChunk=null},discardCurrentChunk:function k(){this.currentChunk=null},saveCurrentChunk:function R(){if(!this.currentChunk){return}this.audioChunks.push(this.currentChunk)
this.currentChunk=null},getAllChunks:function A(){return this.audioChunks}})
window.ScratchpadRecordView=Backbone.View.extend({initialize:function T(t){this.render()
this.$recordButton=t.recordButton
this.$finalSaveButton=t.saveButton
this.editor=t.editor
this.record=t.record
this.config=t.config
this.drawCanvas=t.drawCanvas
this.workersDir=t.workersDir
this.transloaditTemplate=t.transloaditTemplate
this.transloaditAuthKey=t.transloaditAuthKey
this.audioChunks=new ScratchpadAudioChunks
this.recordInProgress=false
this.commandChunks=[]
this.startingCode=""
this.lastSavedCode=this.editor.text()
this.$lastAudioChunkElem=this.$el.find(".last-audio-chunk")
this.$savedAudioChunksElem=this.$el.find(".saved-audio-chunks")
this.initializeButtons()},render:function D(){this.$el.html(Handlebars.templates["dev-record"]({})).show()},initializeButtons:function E(){this.$newChunkButton=this.$el.find(".scratchpad-dev-new-chunk")
this.$discardChunkButton=this.$el.find(".scratchpad-dev-discard-chunk")
this.$saveChunkButton=this.$el.find(".scratchpad-dev-save-chunk")
this.$refreshEditorButton=this.$el.find(".scratchpad-dev-refresh-editor-state")
this.disableChunkButtons(true,true,true,true,false)
this.$newChunkButton.on("click",_.bind(this.newChunk,this))
this.$discardChunkButton.on("click",_.bind(this.discardChunk,this))
this.$saveChunkButton.on("click",_.bind(this.saveChunk,this))
this.$refreshEditorButton.on("click",_.bind(this.refreshEditor,this))},initializeRecordingAudio:function S(){this.multirecorder=new MultiRecorder({workerPath:this.workersDir+"shared/multirecorder-worker.js"})
this.$recordButton.text("Use the chunks (and give permission)")
this.setButtonDisableStatus(this.$recordButton,true)
this.disableChunkButtons(false,true,true,true,true)},startRecordingAudio:function x(){var t=this
this.lastSavedCode=this.editor.text()
this.multirecorder.startRecording(1).progress(_.bind(function(t){this.$newChunkButton.text(t+"...")},this)).done(_.bind(function(){this.disableChunkButtons(false,true,true,true,true)
t.record.recordingAudio=true
this.$newChunkButton.html("Stop recording chunk")
this.startRecordingCommands()},this))},stopRecordingAudio:function B(){this.multirecorder.stopRecording().done(_.bind(function(t){this.audioChunks.setCurrentChunk(t)
this.$lastAudioChunkElem.html(t.createAudioPlayer())},this))},showSavedAudioChunks:function P(){this.getFinalAudioRecording(_.bind(function(t){this.$savedAudioChunksElem.html(t.createAudioPlayer())},this))},getDurationMsOfSavedAudio:function L(){var t=0
var e=$(this.$savedAudioChunksElem).find("audio")
if(e&&e.length>0){t=e[0].duration*1e3}return t},startRecordingCommands:function O(){if(this.record.hasNoChunks()){this.startingCode=this.editor.text()
var t=this.config.curVersion()
this.config.switchVersion(t)
this.record.setActualInitData({configVersion:t,code:this.startingCode})}this.editor.focus()
this.record.startRecordChunk(this.getDurationMsOfSavedAudio())
this.record.log("select",0,0)
this.editor.setCursor({row:0,column:0})},stopRecordingCommands:function I(){this.record.stopRecordChunk()},getFinalAudioRecording:function U(t){this.multirecorder.combineRecordings(this.audioChunks.getAllChunks()).done(t)},getFinalCommandRecording:function N(){return this.record.dumpRecording()},newChunk:function F(){if(this.audioChunks.currentChunkExists()){return}if(!this.recordInProgress){this.editor.editor.setReadOnly(false)
this.recordInProgress=true
this.startRecordingAudio()}else{this.recordInProgress=false
this.stopRecordingCommands()
this.disableChunkButtons(true,false,false,true,true)
this.$newChunkButton.html("Start new chunk")}},discardChunk:function Y(t){if(!this.audioChunks.currentChunkExists()){return}this.audioChunks.discardCurrentChunk()
this.record.discardRecordChunk()
this.$lastAudioChunkElem.empty()
this.refreshEditor()},saveChunk:function H(t){if(!this.audioChunks.currentChunkExists()){return}this.audioChunks.saveCurrentChunk()
this.record.saveRecordChunk()
this.lastSavedCode=this.editor.text()
this.disableChunkButtons(false,true,true,false,false)
this.showSavedAudioChunks()
this.$lastAudioChunkElem.empty()},refreshEditor:function M(t){this.record.loadRecording(this.record.dumpRecording())
this.editor.editor.setReadOnly(false)
this.record.initData=this.record.actualInitData
if(this.record.commands){this.record.commands.push([this.getDurationMsOfSavedAudio(),"seek"])}this.record.time=0
this.editor.text(this.startingCode)
this.drawCanvas.clear(true)
this.drawCanvas.endDraw()
this.record.seekTo(this.getDurationMsOfSavedAudio())
setTimeout(_.bind(function(){this.disableChunkButtons(false,true,true,false,false)},this),1e3)},disableChunkButtons:function V(t,e,i,r,n){this.setButtonDisableStatus(this.$newChunkButton,t)
this.setButtonDisableStatus(this.$discardChunkButton,e)
this.setButtonDisableStatus(this.$saveChunkButton,i)
this.setButtonDisableStatus(this.$refreshEditorButton,r)
this.setButtonDisableStatus(this.$finalSaveButton,n)},setButtonDisableStatus:function G(t,e){if(!_.isUndefined(e)){t.prop("disabled",e)}}})
$._=i18n._
window.LiveEditor=Backbone.View.extend({dom:{DRAW_CANVAS:".scratchpad-draw-canvas",DRAW_COLOR_BUTTONS:"#draw-widgets a.draw-color-button",CANVAS_WRAP:".scratchpad-canvas-wrap",EDITOR:".scratchpad-editor",CANVAS_LOADING:".scratchpad-canvas-loading",BIG_PLAY_LOADING:".scratchpad-editor-bigplay-loading",BIG_PLAY_BUTTON:".scratchpad-editor-bigplay-button",PLAYBAR:".scratchpad-playbar",PLAYBAR_AREA:".scratchpad-playbar-area",PLAYBAR_OPTIONS:".scratchpad-playbar-options",PLAYBAR_LOADING:".scratchpad-playbar .loading-msg",PLAYBAR_PROGRESS:".scratchpad-playbar-progress",PLAYBAR_PLAY:".scratchpad-playbar-play",PLAYBAR_TIMELEFT:".scratchpad-playbar-timeleft",PLAYBAR_UI:".scratchpad-playbar-play, .scratchpad-playbar-progress",OUTPUT_FRAME:"#output-frame",OUTPUT_DIV:"#output",ALL_OUTPUT:"#output, #output-frame",RESTART_BUTTON:"#restart-code",GUTTER_ERROR:".ace_error",ERROR_BUDDY_HAPPY:".error-buddy-happy",ERROR_BUDDY_THINKING:".error-buddy-thinking"},mouseCommands:["move","over","out","down","up"],colors:["black","red","orange","green","blue","lightblue","violet"],defaultOutputWidth:400,defaultOutputHeight:400,editors:{},initialize:function W(t){this.workersDir=this._qualifyURL(t.workersDir)
this.externalsDir=this._qualifyURL(t.externalsDir)
this.imagesDir=this._qualifyURL(t.imagesDir)
this.soundsDir=t.soundsDir
this.execFile=t.execFile?this._qualifyURL(t.execFile):""
this.jshintFile=this._qualifyURL(t.jshintFile||this.externalsDir+"jshint/jshint.js")
this.redirectUrl=t.redirectUrl
this.outputType=t.outputType||""
this.editorType=t.editorType||_.keys(this.editors)[0]
this.editorHeight=t.editorHeight
this.initialCode=t.code
this.initialVersion=t.version
this.settings=t.settings
this.validation=t.validation
this.recordingCommands=t.recordingCommands
this.recordingMP3=t.recordingMP3
this.recordingInit=t.recordingInit||{code:this.initialCode,version:this.initialVersion}
this.transloaditTemplate=t.transloaditTemplate
this.transloaditAuthKey=t.transloaditAuthKey
this.render()
this.config=new ScratchpadConfig({version:t.version})
this.record=new ScratchpadRecord
this.drawCanvas=new ScratchpadDrawCanvas({el:this.dom.DRAW_CANVAS,record:this.record})
this.drawCanvas.on({drawStarted:function(){this.$el.find(this.dom.DRAW_CANVAS).show()}.bind(this),drawEnded:function(){this.$el.find(this.dom.DRAW_CANVAS).hide()}.bind(this),colorSet:function(t){this.$el.find(this.dom.DRAW_COLOR_BUTTONS).removeClass("ui-state-active")
if(t!==null){this.$el.find("#"+t).addClass("ui-state-active")}}.bind(this)})
this.newErrorExperience=t.newErrorExperience
if(window.location.search.indexOf("new_error_experience=yes")!==-1){this.newErrorExperience=true}if(t.enableLoopProtect!=null){this.enableLoopProtect=t.enableLoopProtect}else{this.enableLoopProtect=true}this.editor=new this.editors[this.editorType]({el:this.dom.EDITOR,code:this.initialCode,autoFocus:t.autoFocus,config:this.config,record:this.record,imagesDir:this.imagesDir,soundsDir:this.soundsDir,externalsDir:this.externalsDir,workersDir:this.workersDir,type:this.editorType})
var e=this.config.editor.tooltipEngine
if(e.setEnabledStatus){if(window.location.search.indexOf("autosuggestToggle=yes")!==-1){window.localStorage["autosuggest"]="true"
this.editor.editor.commands.addCommand({name:"toggleAutosuggest",bindKey:{win:"Ctrl+Alt+A",mac:"Command+Option+A"},exec:function r(t){var i=window.localStorage["autosuggest"]==="true"
e.setEnabledStatus(i!==true)
window.localStorage.setItem("autosuggest",String(i!==true))}})}else{e.setEnabledStatus("true")}}if(this.editorType==="ace_pjs"){this.noLint=false
this.editor.on("scrubbingStarted",function(){this.noLint=true}.bind(this))
this.editor.on("scrubbingEnded",function(){this.noLint=false}.bind(this))}this.tipbar=new TipBar({el:this.$(this.dom.OUTPUT_DIV),liveEditor:this})
if(t.useDebugger){this["debugger"]=new ScratchpadDebugger({liveEditor:this,editor:this.editor.editor})
this["debugger"].on("enabled",function(t){if(t){this.$el.find(this.dom.RESTART_BUTTON).attr("disabled","")}else{this.$el.find(this.dom.RESTART_BUTTON).removeAttr("disabled")}},this)}var i=t.code
if(i!==undefined){this.editor.text(i)
this.editor.originalCode=i}this.editor.focus()
if(t.cursor){this.editor.setCursor(t.cursor)}else{this.editor.setSelection({start:{row:0,column:0},end:{row:0,column:0}})}this.$el.find("#page-overlay").hide()
this.updateCanvasSize(t.width,t.height)
if(this.canRecord()){this.$el.find("#record").show()}this.bind()
this.setupAudio()},render:function j(){this.$el.html(Handlebars.templates["live-editor"]({execFile:this.execFile,imagesDir:this.imagesDir,colors:this.colors}))},bind:function K(){var t=this
var e=this
var i=this.$el
var r=this.dom
i.delegate(".simple-button.disabled, .ui-state-disabled","click",function(t){t.stopImmediatePropagation()
return false})
i.delegate(this.dom.RESTART_BUTTON,"click",this.restartCode.bind(this))
this.handleMessagesBound=this.handleMessages.bind(this)
$(window).on("message",this.handleMessagesBound)
i.find("#output-frame").on("load",function(){t.outputState="clean"
t.markDirty()})
this.editor.on("change",function(){t.markDirty()})
this.editor.on("userChangedCode",function(){if(!t.record.recording&&!t.record.playing){t.trigger("userChangedCode")}})
this.on("runDone",this.runDone.bind(this))
var n=function h(){if(e.outputState!=="clean"){e.once("runDone",h)}else{setTimeout(function(){if(e.editor.getSelectionIndices){e.postFrame({setCursor:e.editor.getSelectionIndices()})}e.editor.once("changeCursor",h)},0)}setTimeout(function(){e.maybeShowErrors()},0)}
this.editor.once("changeCursor",n)
this.config.on("versionSwitched",function(t,e){this.markDirty()
this.config.runVersion(e,"jshint")}.bind(this))
if(this.hasAudio()){i.find(".overlay").show()
i.find(r.BIG_PLAY_LOADING).show()
i.find(r.PLAYBAR).show()}i.find(r.DRAW_COLOR_BUTTONS).each(function(){$(this).addClass("ui-button").children().css("background",this.id)})
if(jQuery.fn.buttonize){i.buttonize()}i.on("buttonClick","a.draw-color-button",function(){e.drawCanvas.setColor(this.id)
e.editor.focus()})
i.on("click",".disable-overlay",function(){e.record.pausePlayback()})
i.find(r.PLAYBAR_PROGRESS).slider({range:"min",value:0,min:0,max:100,start:function c(){if(e.record.recording){return false}e.record.seeking=true
e.wasPlaying=e.record.playing
e.record.pausePlayback()},slide:function u(t,i){var r=i.value*1e3
if(r!==e.record.endTime()){e.updateTimeLeft(r)
e.seekTo(r)}},stop:function f(t,i){e.record.seeking=false
e.updateTimeLeft(i.value*1e3)
if(e.wasPlaying){setTimeout(function(){e.record.play()},1e3)}}})
var s=function p(){if(e.record.playing){e.record.pausePlayback()}else{e.record.play()}}
i.find(r.PLAYBAR_PLAY).off("click.play-button").on("click.play-button",s)
var o=function g(){i.find(r.PLAYBAR_LOADING).hide()
i.find(r.PLAYBAR_AREA).show()
i.find(r.BIG_PLAY_BUTTON).off("click.big-play-button").on("click.big-play-button",function(){i.find(r.BIG_PLAY_BUTTON).hide()
s()})
i.find(r.PLAYBAR_PLAY).on("click",function(){i.find(r.BIG_PLAY_BUTTON).hide()})
i.find(r.EDITOR).on("click",function(){i.find(r.BIG_PLAY_BUTTON).hide()})
i.find(r.BIG_PLAY_LOADING).hide()
i.find(r.BIG_PLAY_BUTTON).show()
e.off("readyToPlay",g)}
this.on("readyToPlay",o)
i.on("buttonClick","#draw-clear-button",function(){e.drawCanvas.clear()
e.drawCanvas.endDraw()
e.editor.focus()})
i.on("click",this.dom.RESTART_BUTTON,function(){e.record.log("restart")})
i.on("click",this.dom.GUTTER_ERROR,function(){var t=parseInt($(this).text(),10)
e.setErrorPosition(this.gutterDecorations[t])})
i.on("click",this.dom.ERROR_BUDDY_THINKING,function(){e.setErrorPosition(0)})
i.find("#record").on("click",function(){e.recordHandler(function(t){if(t){console.error(t)}})})
if(this.recordingCommands){var a=this.recordingMP3
var d=/_x(1.\d+).mp3/.exec(a)
var l=parseFloat(d&&d[1])||1
this.record.loadRecording({init:this.recordingInit,commands:this.recordingCommands,multiplier:l})}},remove:function z(){$(window).off("message",this.handleMessagesBound)
this.editor.remove()},canRecord:function q(){return this.transloaditAuthKey&&this.transloaditTemplate},hasAudio:function J(){return!!this.recordingMP3},setupAudio:function X(){if(!this.hasAudio()){return}var t=this
var e
soundManager.setup({url:this.externalsDir+"SoundManager2/swf/",debugMode:false,useFlashBlock:true,onready:function i(){window.clearTimeout(e)
t.audioInit()},ontimeout:function r(i){window.clearTimeout(e)
e=window.setTimeout(function(){t.$el.find("#sm2-container div").remove()
soundManager.reboot()},3e3)}})
soundManager.beginDelayedInit()
this.bindRecordHandlers()},audioInit:function Q(){if(!this.hasAudio()){return}var t=this
var e=this.record
this.wasPlaying=undefined
e.time=0
this.player=soundManager.createSound({id:"sound"+(new Date).getTime(),url:this.recordingMP3,autoLoad:true,whileplaying:function(){t.updateTimeLeft(e.currentTime())
if(!e.seeking){t.$el.find(t.dom.PLAYBAR_PROGRESS).slider("option","value",e.currentTime()/1e3)}e.trigger("playUpdate")}.bind(this),onplay:function r(){e.play()},onresume:function n(){e.play()},onpause:function s(){e.pausePlayback()},onload:function o(){e.durationEstimate=e.duration=this.duration
e.trigger("loaded")},whileloading:function a(){e.duration=null
e.durationEstimate=this.durationEstimate
e.trigger("loading")},onfinish:function d(){e.stopPlayback()
e.trigger("playEnded")},onsuspend:function l(){t.trigger("readyToPlay")}})
var i=setInterval(function(){if(t.audioReadyToPlay()){clearInterval(i)
t.trigger("readyToPlay")}},16)
this.bindPlayerHandlers()},audioReadyToPlay:function Z(){return this.player&&(this.player.bytesLoaded>0||this.player.loaded)},bindPlayerHandlers:function te(){var t=this
var e=this.record
this.record.bind({loading:function i(){t.updateDurationDisplay()},loaded:function r(){var i=e.commands
if(i){i.push([Math.max(e.endTime(),i[i.length-1][0]),"seek"])}t.updateDurationDisplay()},playStarted:function n(){if(t.player.paused){t.player.resume()}else if(t.player.playState===0){t.player.play()}},playPaused:function s(){t.player.pause()}})},bindRecordHandlers:function ee(){var t=this
var e=this.record
e.bind({playStarted:function i(r,n){t.config.switchVersion(e.getVersion())
if(!e.recording&&!n){t.editor.reset(e.initData.code,false)
t.drawCanvas.clear(true)
t.drawCanvas.endDraw()}if(!e.recording){t.$el.find("#record").addClass("disabled")}t.$el.find(t.dom.RESTART_BUTTON).addClass("disabled")
if(!e.recording){$("html").addClass("playing")
t.$el.find(".disable-overlay").show()}t.editor.unfold()
t.$el.find(t.dom.PLAYBAR_PLAY).find("span").removeClass("glyphicon-play icon-play").addClass("glyphicon-pause icon-pause")},playEnded:function r(){t.config.switchVersion(this.initialVersion)},playPaused:function n(){$("html").removeClass("playing")
t.$el.find(".disable-overlay").hide()
t.$el.find(t.dom.RESTART_BUTTON).removeClass("disabled")
t.$el.find("#record").removeClass("disabled")
t.$el.find(t.dom.PLAYBAR_PLAY).find("span").addClass("glyphicon-play icon-play").removeClass("glyphicon-pause icon-pause")},recordStarted:function s(){t.postFrame({recording:true})
t.$el.find("#draw-widgets").removeClass("hidden").show()
t.$el.find(".disable-overlay").hide()
t.editor.setReadOnly(false)
$("html").removeClass("playing")
if(e.hasNoChunks()){t.drawCanvas.clear(true)
t.drawCanvas.endDraw()}t.$el.find("#save-button, #fork-button").addClass("disabled")
t.$el.find("#record").addClass("toggled")},recordEnded:function o(){t.postFrame({recording:false})
if(e.recordingAudio){t.recordView.stopRecordingAudio()}t.$el.find("#save-button, #fork-button").removeClass("disabled")
t.$el.find(t.dom.PLAYBAR_UI).removeClass("ui-state-disabled")
t.$el.find("#record").removeClass("toggled disabled")
e.stopPlayback()
t.$el.find(".disable-overlay").show()
$("html").addClass("playing")
t.editor.setReadOnly(true)
t.$el.find("#draw-widgets").addClass("hidden").hide()
t.drawCanvas.endDraw()}})
_.each(this.mouseCommands,function(i){e.handlers[i]=function(e,r){t.postFrame({mouseAction:{name:i,x:e,y:r}})}})
e.handlers.restart=function(){var e=t.$el.find(t.dom.RESTART_BUTTON)
if(!e.hasClass("hilite")){e.addClass("hilite green")
setTimeout(function(){e.removeClass("hilite green")},300)}t.postFrame({restart:true})}
e.currentTime=function(){return t.player?t.player.position:0}
e.endTime=function(){return this.duration||this.durationEstimate}},recordHandler:function ie(t){if(this.record.recording){this.recordView.stopRecordingCommands()
return}var e=this.editor.text()
if(!e){t({error:"empty"})}else if(this.config.curVersion()!==this.config.latestVersion()){t({error:"outdated"})}else if(this.canRecord()&&!this.hasAudio()){this.startRecording()
this.editor.focus()}else{t({error:"exists"})}},startRecording:function re(){this.bindRecordHandlers()
if(!this.recordView){var t=this.$el
var e=this.workersDir.replace(/^https?:\/\/[^\/]*/,"")
this.recordView=new ScratchpadRecordView({el:t.find(".scratchpad-dev-record-row"),recordButton:t.find("#record"),saveButton:t.find("#save-button"),record:this.record,editor:this.editor,config:this.config,workersDir:e,drawCanvas:this.drawCanvas,transloaditTemplate:this.transloaditTemplate,transloaditAuthKey:this.transloaditAuthKey})}this.recordView.initializeRecordingAudio()},saveRecording:function ne(t,e){if(!this.record.recorded||!this.record.recordingAudio){return t()}var i=new TransloaditXhr({authKey:this.transloaditAuthKey,templateId:this.transloaditTemplate,steps:e,successCb:function(e){this.recordingMP3=e.mp3[0].url.replace(/^http:/,"https:")
t(null,this.recordingMP3)}.bind(this),errorCb:t})
this.recordView.getFinalAudioRecording(function(t){i.uploadFile(t.wav)})},updateDurationDisplay:function se(){this.updateTimeLeft(this.record.currentTime())
this.$el.find(this.dom.PLAYBAR_PROGRESS).slider("option","max",this.record.endTime()/1e3)},updateTimeLeft:function oe(t){this.$el.find(".scratchpad-playbar-timeleft").text("-"+this.formatTime(this.record.endTime()-t))},formatTime:function ae(t){var e=t/1e3,i=Math.floor(e/60),r=Math.floor(e%60)
if(i<0||r<0){i=0
r=0}return i+":"+(r<10?"0":"")+r},seekTo:function de(t){if(!this.record.seeking){this.$el.find(this.dom.PLAYBAR_PROGRESS).slider("option","value",t/1e3)}if(this.record.seekTo(t)!==false){this.player.setPosition(t)}},handleMessages:function le(t){var e=t.originalEvent
var i
try{i=JSON.parse(e.data)}catch(r){}if(!i){return}if(typeof i!=="object"){return}if(i.type==="debugger"){return}this.trigger("update",i)
if(i.loaded||i.results){this.$el.find(this.dom.CANVAS_LOADING).hide()}if(i.code!==undefined){this.editor.text(i.code)
this.editor.originalCode=i.code
this.restartCode()}if(i.validate!==undefined&&i.validate!==null){this.validation=i.validate}if(i.results){this.trigger("runDone")}if(this.editorType.indexOf("ace_")===0&&i.results){this.removeMarkers()
if(i.results.assertions||i.results.warnings){var n=[]
for(var s=0;s<i.results.assertions.length;s++){var o=i.results.assertions[s]
n.push({row:+o.row,column:+o.column,text:o.text.toString(),type:"warning"})
this.addUnderlineMarker(+o.row)}for(var s=0;s<i.results.warnings.length;s++){var a=i.results.warnings[s]
n.push({row:+a.row,column:+a.column,text:a.text.toString(),type:"warning"})
this.addUnderlineMarker(+a.row)}this.editor.editor.session.setAnnotations(n)}else{this.editor.editor.session.setAnnotations([])}}if(this.newErrorExperience&&this.errorState.length===0){this.setHappyState()}if(i.results&&_.isArray(i.results.errors)){this.handleErrors(this.cleanErrors(i.results.errors))}if(i.lines!==undefined){this.editor.toggleGutter(i.lines.map(function(t){return+t}))}if(i.restart){this.restartCode()}if(i.log){this.record.log.apply(this.record,i.log)}},addUnderlineMarker:function he(t){var e=ace.require("ace/range").Range
var i=this.editor.editor.session.getDocument().getLine(t)
this.editor.editor.session.addMarker(new e(t,0,t,i.length),"ace_problem_line","text",false)},removeMarkers:function ce(){var t=this.editor.editor.session
var e=t.getMarkers()
_.each(e,function(e,i){t.removeMarker(i)})},removeGutterDecorations:function ue(){var t=this.editor.editor.session
_.each(this.gutterDecorations,function(e,i){t.removeGutterDecoration(i-1,"ace_error")})},gutterDecorations:[],errorCursorRow:null,showError:null,handleErrors:function fe(t){if(!this.newErrorExperience){this.tipbar.toggleErrors(t,1500)
return}window.clearTimeout(this.errorTimeout)
if(t.length){var e=this.editor.editor.session
this.removeMarkers()
this.removeGutterDecorations()
var i=[]
_.each(t,function(t,r){if(i[t.row+1]===null){i[t.row+1]=r
e.addGutterDecoration(t.row,"ace_error")}this.addUnderlineMarker(t.row)},this)
this.gutterDecorations=i
this.setErrors(t)
this.maybeShowErrors()}else{this.removeGutterDecorations()
this.setErrors([])
this.setHappyState()
this.showError=false
this.errorCursorRow=null}},maybeShowErrors:function pe(){if(!this.hasErrors()||!this.editor||!this.editor.getCursor()){return}var t=this.editor.getCursor().row
var e=this.errorCursorRow===null||this.errorCursorRow===t
if(this.errorCursorRow===null){this.errorCursorRow=t}this.showError=this.showError||!e||this.showError===null
if(this.showError){this.setErrorState()}else if(e){this.setThinkingState()
window.clearTimeout(this.errorTimeout)
this.errorTimeout=setTimeout(function(){if(this.hasErrors()){this.setErrorState()}}.bind(this),6e4)}},errorState:"",hasErrors:function ge(){return this.tipbar.errors.length},setErrors:function me(t){this.tipbar.setErrors(t)},setErrorPosition:function ve(t){this.setErrorState()
this.tipbar.setErrorPosition(t)},setErrorState:function we(){this.errorState="error"
this.$el.find(this.dom.ERROR_BUDDY_THINKING).hide()
this.$el.find(this.dom.ERROR_BUDDY_HAPPY).hide()
this.tipbar.update(true)},setThinkingState:function ye(){if(this.errorState!=="thinking"){this.errorState="thinking"
this.tipbar.hide()
this.$el.find(this.dom.ERROR_BUDDY_HAPPY).hide()
this.$el.find(this.dom.ERROR_BUDDY_THINKING).show().animate({left:-2},{duration:300,easing:"linear"}).animate({left:2},{duration:300,easing:"linear"}).animate({left:0},{duration:300,easing:"linear"})}},setHappyState:function be(){this.errorState="happy"
this.tipbar.hide()
this.$el.find(this.dom.ERROR_BUDDY_THINKING).hide()
this.$el.find(this.dom.ERROR_BUDDY_HAPPY).show()},postFrameOrigin:function Ce(){var t=/^.*:\/\/[^\/]*/.exec(this.$el.find("#output-frame").attr("data-src"))
return t?t[0]:window.location.protocol+"//"+window.location.host},postFrame:function ke(t){this.$el.find("#output-frame")[0].contentWindow.postMessage(JSON.stringify(t),this.postFrameOrigin())},hasFrame:function Re(){return!!this.execFile},restartCode:function Ae(){this.postFrame({restart:true})},runCode:_.throttle(function(t){var e={code:arguments.length===0?this.editor.text():t,cursor:this.editor.getSelectionIndices?this.editor.getSelectionIndices():-1,validate:this.validation||"",noLint:this.noLint,version:this.config.curVersion(),settings:this.settings||{},workersDir:this.workersDir,externalsDir:this.externalsDir,imagesDir:this.imagesDir,soundsDir:this.soundsDir,redirectUrl:this.redirectUrl,jshintFile:this.jshintFile,outputType:this.outputType,enableLoopProtect:this.enableLoopProtect}
this.trigger("runCode",e)
this.postFrame(e)},20),markDirty:function Te(){var t=this
if(!this.newErrorExperience){this.tipbar.hide()}if(this.outputState==="clean"){setTimeout(this.runCode.bind(this),0)
this.outputState="running"
this.runTimeout=setTimeout(function(){t.trigger("runDone")},500)}else{this.outputState="dirty"}},runDone:function De(){clearTimeout(this.runTimeout)
var t=this.outputState
this.outputState="clean"
if(t==="dirty"){this.markDirty()}},outputState:"dirty",updateCanvasSize:function _e(t,e){t=t||this.defaultOutputWidth
e=e||this.defaultOutputHeight
this.$el.find(this.dom.CANVAS_WRAP).width(t)
this.$el.find(this.dom.ALL_OUTPUT).height(e)
this.$el.find(this.dom.EDITOR).height(this.editorHeight||e)
this.trigger("canvasSizeUpdated",{width:t,height:e})},getScreenshot:function Ee(t){if(!this.hasFrame()){var e=document.createElement("canvas")
e.width=200
e.height=200
var i=e.getContext("2d")
var r=24
var n=190
var s=this.editor.text()
s=s.replace(/<[^>]+>/g,"")
s=s.replace(/&nbsp;|&#160;/g," ")
s=s.replace(/&lt;|&#60;/g,"<")
s=s.replace(/&gt;|&#62;/g,">")
s=s.replace(/&amp;|&#38;/g,"&")
s=s.replace(/&quot;|&#34;/g,'"')
s=s.replace(/&apos;|&#39;/g,"'")
var o=s.split(/\s+/)
var a=0
var d=o[0]
i.font=r+"px serif"
for(var l=1;l<o.length;l++){var h=o[l]
var c=i.measureText(d+" "+h).width
if(c<n){d+=" "+h}else{a+=1
i.fillText(d,5,(r+5)*a)
d=h}}a+=1
i.fillText(d,5,(r+5)*a+5)
t(e.toDataURL("image/png"))
return}$(window).off("message.getScreenshot")
$(window).on("message.getScreenshot",function(e){if(/^data:/.test(e.originalEvent.data)){t(e.originalEvent.data)}})
this.postFrame({screenshot:true})},undo:function Se(){this.editor.undo()},_qualifyURL:function xe(t){var e=document.createElement("a")
e.href=t
return e.href},cleanErrors:function $e(t){var e={WhileStatement:i18n._("<code>while</code> loop"),DoWhileStatement:i18n._("<code>do-while</code> loop"),ForStatement:i18n._("<code>for</code> loop"),FunctionDeclaration:i18n._("<code>function</code>"),FunctionExpression:i18n._("<code>function</code>")}
t=t.map(function(t){delete t.html
var i=t.infiniteLoopNodeType
if(i){t.html=i18n._("A %(type)s is taking too long to run. "+"Perhaps you have a mistake in your code?",{type:e[i]})}var r={}
r.text=t.html?this.prettify(t.html):this.prettify(this.clean(t.text||t.message||""))
if(t.lint!==undefined){r.lint={}
var n=["character","line"]
var s=["code","evidence","id","raw","reason","scope","type"]
var o=["openTag"]
n.forEach(function(e){if(t.lint[e]!=undefined){r.lint[e]=+t.lint[e]}})
s.forEach(function(e){if(t.lint[e]!=undefined){r.lint[e]=t.lint[e].toString()}})
o.forEach(function(e){if(t.lint[e]!=undefined){r.lint[e]=t.lint[e]}})}if(t.row!=undefined){r.row=+t.row}if(t.column!=undefined){r.column=+t.column}if(t.type!=undefined){r.type=t.type.toString()}if(t.source!=undefined){r.source=t.source.toString()}if(t.priority!=undefined){r.priority=+t.priority}return r}.bind(this))
t=t.sort(function(t,e){var i=t.row-e.row
return i===0?(t.priority||99)-(e.priority||99):i})
return t},prettify:function Be(t){t=t.split('"')
var e=""
for(var i=0;i<t.length;i++){if(t[i].length===0){continue}if(i%2===0){e+='<span class="text">'+t[i]+"</span>"}else{e+='<span class="quote">'+t[i]+"</span>"}}return e},clean:function Pe(t){return String(t).replace(/</g,"&lt;")}})
LiveEditor.registerEditor=function(t,e){LiveEditor.prototype.editors[t]=e}
__KA_exports.LiveEditor = LiveEditor;
__KA_exports.ScratchpadRecordView = ScratchpadRecordView;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_ace.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../../../javascript/node_modules/underscore/index.js");
__KA_require("../../../handlebars/handlebars.runtime.js");
__KA_require("../../../../../javascript/node_modules/backbone/index.js");
__KA_require("./live-editor.ui.js");
__KA_require("./live-editor.editor_ace_deps.js");
__KA_require("./live-editor.tooltips.js");
window.AceEditor=Backbone.View.extend({dom:{ACTIVE_LINE:".ace_active_line",TEXT_INPUT:"textarea",CONTENT:"div.ace_content"},tooltips:{ace_pjs:["imagePicker","soundModal","colorPicker","numberScrubberClick","autoSuggest","numberScrubber"],ace_webpage:["imageModal","colorPicker","numberScrubber"],ace_sql:["numberScrubber"]},initialize:function t(e){var i=this
this.defaultCode=e.code
this.autoFocus=e.autoFocus
this.config=e.config
this.record=e.record
this.type=e.type
this.workersDir=e.workersDir
this.editor=ace.edit(this.el)
this.textarea=this.$(this.dom.TEXT_INPUT)
this.content=this.$(this.dom.CONTENT)
this.offset=this.content.offset()
if(this.record){this.bindRecord()}this.tooltipEngine=new TooltipEngine({tooltips:this.tooltips[this.type],type:this.type,imagesDir:e.imagesDir,soundsDir:e.soundsDir,editor:this.editor,record:this.record})
this.tooltipEngine.on("scrubbingStarted",function(t){this.trigger("scrubbingStarted",t)}.bind(this))
this.tooltipEngine.on("scrubbingEnded",function(t){this.trigger("scrubbingEnded",t)}.bind(this))
if(this.tooltips[this.type].indexOf("autoSuggest")!==-1){ScratchpadAutosuggest.init(this.editor)}if(this.$el.resizable){this.$el.resizable({handles:"s",resize:function n(){i.editor.resize()}})}var o=$("<iframe>").css({width:"100%",height:0,position:"absolute",visibility:"hidden"}).appendTo(this.el)
$(o[0].contentWindow.window).on("resize",function(){this.editor.resize()
this.editor.setFontSize(this.$el.width()<400?"12px":"14px")}.bind(this))
this.$el.on("mousedown",".tooltip",function(t){t.preventDefault()})
this.editor.commands.removeCommand("gotoline")
this.editor.commands.bindKey("Alt-0",null)
this.editor.selection.addEventListener("changeCursor",function(){i.setErrorHighlight(false)})
this.editor.on("change",function(){i.trigger("change")
if(this.editor.curOp&&this.editor.curOp.command.name){i.trigger("userChangedCode")}}.bind(this))
this.editor.on("click",function(){i.trigger("click")})
this.editor.selection.on("changeCursor",function(){i.trigger("changeCursor")})
this.editor.selection.on("changeSelection",function(){i.trigger("changeCursor")})
this.config.on("versionSwitched",function(t){i.config.runVersion(t,i.type+"_editor",i)})
this.config.editor=this
this.reset()},remove:function e(){this.tooltipEngine.remove()},bindRecord:function i(){var t=this
var e=this.editor
var i=this.record
var o=e.session.doc
o.on("change",function(e){var i=e.data.range.start
var o=e.data.range.end
if(e.data.action.indexOf("insert")===0){var n=e.data.lines||e.data.text
t.record.log(e.data.action,i.row,i.column,o.row,o.column,n)}else{t.record.log(e.data.action,i.row,i.column,o.row,o.column)}},true)
e.selection.addEventListener("changeCursor",function(){if(e.selection.isEmpty()){t.handleSelect()}},true)
e.selection.addEventListener("changeSelection",this.handleSelect.bind(this),true)
var n=["insertText","insertLines","removeText","removeLines"]
_.each(n,function(t){i.handlers[t]=function(e,i,n,r,s){var c={action:t,range:{start:{row:e,column:i},end:{row:n,column:r}}}
if(t==="insertText"){c.text=s}else if(t==="insertLines"){c.lines=s}o.applyDeltas([c])}})
$.extend(i.handlers,{select:function r(t,i,o,n){if(o==null){o=t}if(n==null){n=i}e.selection.setSelectionRange({start:{row:t,column:i},end:{row:o,column:n}})}})
i.seekCachers.editor={getState:function s(){return{text:t.text(),cursor:t.getCursor()}},restoreState:function c(e){t.text(e.text)
t.setCursor(e.cursor)}}
i.on("runSeek",function(){t.reset(i.initData.code)})},handleSelect:function o(){if(!this.record.recording){return}var t=this.editor.selection.getRange()
var e=t.start
var i=t.end
this.record.log("select",e.row,e.column,i.row,i.column)},reset:function n(t,e){t=t||this.defaultCode
this.config.runCurVersion(this.type+"_editor",this)
this.text(t)
this.setCursor({row:0,column:0},e)},setErrorHighlight:function r(t){var e=this
this.editor.setHighlightActiveLine(t)
setTimeout(function(){var t=e.$(e.dom.ACTIVE_LINE).addClass("hilite")
setTimeout(function(){t.removeClass("hilite")},100)},1)},toggleGutter:function s(t){this.editor.renderer.setShowGutter(t)},getAllFolds:function c(){var t=this.editor.session
return _.map(t.getAllFolds(),function(t){return[t.start.row,t.end.row]})},setFolds:function a(t){_.each(t,function(t){this.editor.session.foldAll(t[0],t[1],0)}.bind(this))},blockPaste:function d(t){var e=this.editor
if(!e.originalCut){e.originalCut=e.onCut
e.originalCopy=e.onCopy
e.originalPaste=e.onPaste}e.onCut=function(t){e.lastCopied=this.getSelectedText()
e.originalCut.apply(e)}
e.onCopy=function(t){e.lastCopied=this.getSelectedText()
e.originalCopy.apply(e)}
e.onPaste=function(i){var o=function n(t){return t.match(/\s*https?:\/\/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)\s*/)}
if(i===e.lastCopied||i.length<3||o(i)){e.originalPaste.apply(e,[i])
return}else{t()}}
var i=false
e.container.addEventListener("dragstart",function(){i=true})
e.container.addEventListener("dragend",function(){i=false})
e.container.addEventListener("drop",function(e){if(!i){t()
e.stopPropagation()}},true)},focus:function u(){if(this.autoFocus!==false){this.editor.focus()}},getCursor:function l(){return this.editor.getCursorPosition()},getSelectionIndices:function h(){var t=this.editor.getSelectionRange()
var e=this.editor.getSession().getDocument()
return{start:e.positionToIndex(t.start),end:e.positionToIndex(t.end)}},setCursor:function g(t,e){this.editor.moveCursorToPosition(t)
this.editor.clearSelection()
if(e!==false&&this.autoFocus!==false){this.editor.focus()}},setSelection:function f(t){this.editor.selection.setSelectionRange(t)},setReadOnly:function p(t){this.editor.setReadOnly(t)},text:function m(t){if(t!=null){this.editor.getSession().setValue(t)}else{return this.editor.getSession().getValue().replace(/\r\n/g,"\n")}return this},unfold:function v(){return this.editor.getSession().unfold()},insertNewlineIfCursorAtEnd:function C(){var t=this.editor.getSession().getLength()-1
var e=this.editor.getSession().getLine(t)
var i=e.length
var o=this.editor.getCursorPosition()
if(o.row===t&&o.column===i){var n=this.text()
if(n.length&&n[n.length-1]!=="\n"){this.text(this.text()+"\n")
this.setCursor({row:t+1,column:0})}}},undo:function b(){this.editor.undo()}})
LiveEditor.registerEditor("ace_pjs",AceEditor)
LiveEditor.registerEditor("ace_webpage",AceEditor)
LiveEditor.registerEditor("ace_sql",AceEditor)
__KA_module.exports = AceEditor;
this.AceEditor = AceEditor;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_structured_blocks.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../../../javascript/node_modules/underscore/index.js");
__KA_require("../../../../../javascript/node_modules/backbone/index.js");
__KA_require("./live-editor.ui.js");
__KA_require("./live-editor.editor_structured_blocks_deps.js");
__KA_require("./live-editor.tooltips.js");
window.StructuredBlocksEditor=Backbone.View.extend({initialize:function t(i){this.defaultCode=(i.code||"").trim()
this.autoFocus=i.autoFocus
this.config=i.config
this.record=i.record
this.imagesDir=i.imagesDir
this.config.editor=this
var e={}
e[i18n._("Shapes")]=[function(){rect(10,10,50,50)},function(){ellipse(120,120,100,100)},function(){line(10,10,50,50)},function(){triangle(20,20,100,100,250,50)},function(){arc(150,150,100,100,0,360)},{type:"Line",value:""}]
e[i18n._("Colors")]=[function(){fill(255,0,0)},function(){background(255,0,0)},function(){stroke(0,0,0)},function(){strokeWeight(3)},function(){noStroke()},function(){noFill()}]
this.editor=new JSToolboxEditor({el:this.el,toolbox:e,code:this.defaultCode||"",imagesDir:this.imagesDir})
this.editor.on("updated",function(){var t=this.editor.toScript()
this.trigger("change",t)
if(!this.defaultCode&&t){var i=this.$el.find(".empty-help")
i.addClass("help-hidden")
setTimeout(function(){i.remove()},300)
this.trigger("userChangedCode")}}.bind(this))
this.tooltipEngine=new StructuredBlocksTooltips({el:this.el})
this.render()},render:function i(){if(!this.defaultCode){this.$el.append("<div class='empty-help'>"+"<span>"+i18n._("Drag a block from the toolbox")+" <strong>→</strong></span>"+"<span><strong>↑</strong> "+i18n._("And put it up here to get started!")+"</span>"+"</div>")}this.$el.find(".block-trash").html("<div class='text-out'>"+"<div class='trash-icon'>"+"<div class='lid'></div>"+"<div class='lidcap'></div>"+"<div class='bin'></div>"+"</div>"+"<span>"+i18n._("Drag block here to remove.")+"</span>"+"</div>")},getAllFolds:function e(){return[]},setFolds:function o(){},setOptions:function n(){},getCursor:function s(){},setCursor:function r(){},setSelection:function d(){},focus:function c(){},toggleGutter:function u(){},setErrorHighlight:function l(){},setReadOnly:function a(){},undo:function f(){},insertNewlineIfCursorAtEnd:function h(){},text:function g(t){if(t!=null){t=t.trim()
if(t){this.$el.find(".empty-help").remove()}this.editor.setCode(t)}return this.editor.toScript()}})
LiveEditor.registerEditor("structured-blocks_pjs",StructuredBlocksEditor)
__KA_module.exports = StructuredBlocksEditor;
this.StructuredBlocksEditor = StructuredBlocksEditor;
});
KAdefine("third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_textarea.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../../../../../javascript/node_modules/jquery/index.js");
__KA_require("../../../../../javascript/node_modules/underscore/index.js");
__KA_require("../../../../../javascript/node_modules/backbone/index.js");
__KA_require("./live-editor.ui.js");
window.TextareaEditor=Backbone.View.extend({initialize:function t(e){this.defaultCode=e.code
this.autoFocus=e.autoFocus
this.config=e.config
this.type=e.type
this.editor=document.createElement("textarea")
this.editor.className="textarea-editor"
this.$el.append(this.editor)
$(this.editor).on("input",function(){this.trigger("change")}.bind(this))
this.tooltipEngine={}
this.config.editor=this
this.reset()},remove:function e(){},reset:function i(t,e){t=t||this.defaultCode
this.config.runCurVersion(this.type+"_editor",this)
this.text(t)
this.setCursor({start:0,end:0},e)},setErrorHighlight:function o(t){},toggleGutter:function n(t){},getAllFolds:function s(){},setFolds:function r(t){},blockPaste:function u(t){},focus:function c(){if(this.autoFocus!==false){this.editor.focus()}},getCursor:function a(){return{start:this.editor.selectionStart,end:this.editor.selectionEnd}},getSelectionIndices:function d(){return this.getCursor()},setCursor:function h(t,e){if(this.editor.setSelectionRange){this.editor.focus()
this.editor.setSelectionRange(t.start,t.end)}else if(this.editor.createTextRange){var i=this.editor.createTextRange()
i.collapse(true)
i.moveEnd("character",t.end)
i.moveStart("character",t.start)
i.select()}if(e!==false&&this.autoFocus!==false){this.editor.focus()}},setSelection:function f(t){this.setCursor(t)},setReadOnly:function l(t){this.editor.readOnly=t},text:function g(t){if(t!=null){this.editor.value=t}else{return this.editor.value}return this},unfold:function x(){},insertNewlineIfCursorAtEnd:function E(){},undo:function C(){}})
LiveEditor.registerEditor("textarea_document",TextareaEditor)
__KA_module.exports = TextareaEditor;
this.TextareaEditor = TextareaEditor;
});
KAdefine("javascript/scratchpads-package/scratchpad-bingo.js", function(require, module, exports) {
var $=require("jquery")
var _=require("underscore")
var KA=require("../shared-package/ka.js")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var ScratchpadBingo={_alreadyBingod:{},_bingoOnce:function(a){var c=[]
_.each(a,function(a){if(ScratchpadBingo._alreadyBingod[a]){return}ScratchpadBingo._alreadyBingod[a]=true
c.push(a)})
if(c.length>0){$.post("/api/internal/_mt/bigbingo/mark_conversions_with_product",{conversion_ids:c.join(","),topic_slug:ScratchpadUI.topicSlug})}},init:function(){var a=function(a,c){var r={drawing:1968258156,moredraw:1977309939}
for(var i in r){if(ScratchpadUI.scratchpad.get("id")===r[i]){a.push(i+c)}}}
$(ScratchpadUI).bind({started:function(){var c=ScratchpadUI.scratchpad
var r=c.get("kaid")
var i=KA.getKaid()
var e=[]
a(e,"_talkthrough_viewed")
if(c.isNew()){e.push("scratchpad_new_visited")}else{e.push("scratchpad_viewed")
var t=c.get("category")
if(t==="tutorial"){e.push("scratchpad_tutorial_viewed")}else if(t==="official"){e.push("scratchpad_official_viewed")}else if(t==="documentation"){e.push("scratchpad_documentation_viewed")}else if(t==="challenge"){e.push("scratchpad_challenge_viewed")}else if(r!==i){e.push("scratchpad_other_viewed")}}ScratchpadBingo._bingoOnce(e)},readyToPlay:function(){},sharedViaFacebook:function(){ScratchpadBingo._bingoOnce(["scratchpad_shared_facebook"])},sharedViaTwitter:function(){ScratchpadBingo._bingoOnce(["scratchpad_shared_twitter"])},sharedViaEmail:function(){ScratchpadBingo._bingoOnce(["scratchpad_shared_email"])},clickedSpinoff:function(){ScratchpadBingo._bingoOnce(["scratchpad_clicked_spinoff","scratchpad_clicked_program"])},clickedSpinoffAuthor:function(){ScratchpadBingo._bingoOnce(["scratchpad_clicked_spinoff_author","scratchpad_clicked_program_author"])}})
ScratchpadUI.liveEditor.record.bind({playStarted:function(){var c=["scratchpad_playback_started"]
a(c,"_talkthrough_started")
ScratchpadBingo._bingoOnce(c)},playEnded:function(){var c=["scratchpad_playback_completed"]
a(c,"_talkthrough_completed")
ScratchpadBingo._bingoOnce(c)},playPaused:function(){ScratchpadBingo._bingoOnce(["scratchpad_playback_paused"])}})
ScratchpadUI.liveEditor.on({userChangedCode:function(){ScratchpadBingo._bingoOnce(["scratchpad_user_edited"])}})}}
module.exports=ScratchpadBingo
});
KAdefine("javascript/scratchpads-package/scratchpad-ui.js", function(require, module, exports) {
require("../../third_party/javascript-khansrc/bootstrap-khansrc/js/bootstrap-alert.js")
require("../../third_party/javascript-khansrc/jquery-migrate/jquery-migrate-1.1.1.js")
require("../../third_party/javascript-khansrc/jquery-timeago/jquery.timeago.js")
require("../../third_party/javascript-khansrc/jqueryui/jquery.ui.resizable.js")
require("../../third_party/javascript-khansrc/jqueryui/jquery.ui.dialog.js")
var $=require("jquery")
var LiveEditorUI=require("../../third_party/javascript-khansrc/live-editor/build/js/live-editor.ui.js")
var Raven=require("raven")
var React=require("react")
var ReactDOM=require("react-dom")
var Structured=require("../../third_party/javascript-khansrc/live-editor/build/external/structuredjs/structured.js")
var _=require("underscore")
var jQuery=require("jquery")
var KUIButton=React.createFactory(require("../shared-components-package/button.jsx"))
var SplitButton=React.createFactory(require("./split-button.jsx"))
var i18n=require("../shared-package/i18n.js")
var Discussion=require("../discussion-package/discussion.js")
var DiscussionComments=require("../discussion-package/discussion-comments.js")
var DiscussionDocumentation=require("../discussion-package/documentation.js")
var DiscussionProjectFeedback=require("../discussion-package/discussion-projectfeedback.js")
var DiscussionSpinOffs=require("../discussion-package/spinoffs.js")
var DiscussionQuestions=require("../discussion-package/discussion-questions.js")
var DiscussionVoting=require("../discussion-package/discussion-voting.js")
var HoverCard=require("../hover-card-package/hover-card.js")
var KA=require("../shared-package/ka.js")
var TutorialNav=require("../tutorial-package/tutorial-nav.js")
var LocalStore=require("../shared-package/local-store.js")
var Scratchpad=require("../scratchpad-base-package/scratchpads.js").Scratchpad
var ScratchpadDocsView=require("../scratchpad-base-package/scratchpads.js").ScratchpadDocsView
var ScratchpadRevision=require("../scratchpad-base-package/scratchpads.js").ScratchpadRevision
var UserScratchpad=require("../scratchpad-base-package/scratchpads.js").UserScratchpad
var parseQueryString=require("../shared-package/parse-query-string.js")
var guiders=require("../../third_party/javascript-khansrc/Guiders-JS/guiders.js")
var LiveEditor=LiveEditorUI.LiveEditor
var ScratchpadRecordView=LiveEditorUI.ScratchpadRecordView
LiveEditor.prototype.render=function(){}
ScratchpadRecordView.prototype.render=function(){this.$el.html(require("./dev-record.handlebars")())}
var ScratchpadUI={dom:{PAGE:".scratchpad-page",EDITOR:".scratchpad-editor",CANVAS_LOADING:".scratchpad-canvas-loading",OUTPUT_FRAME:"#output-frame",ALL_OUTPUT:"#output, #output-frame",DRAG_HANDLE:".scratchpad-drag-handle",DRAW_COLOR_BUTTONS:"#draw-widgets a.draw-color-button",INPUT_TITLE:"input.title",SCRATCHPAD_WRAP:".scratchpad-wrap",SCRATCHPAD_WRAP_OUTER:".scratchpad-wrap-outer",CANVAS_WRAP:".scratchpad-canvas-wrap",EDITOR_WRAP:".scratchpad-editor-wrap",SAVE_BUTTON:".save-button",FORK_BUTTON:"#fork-button",SAVE_AND_FORK_BUTTONS:".save-button, #fork-button",HEADER_VOTE:".task-header .discussion-vote",HEADER_VOTE_UP:".task-header .discussion-vote .vote-up",NOTICE_CONTAINER:".spinoff-notice",NOTICE_TEXT:".spinoff-text",NOTICE_BUTTON:".spinoff-notice a",MOD_HOTLIST_BUTTON:".scratchpad-hotlist-button",MOD_DELETE_BUTTON:".scratchpad-softdelete-button",SUM_VOTES:".scratchpad-vote .sum-votes",VOTE_CONTROL:".scratchpad-vote .discussion-vote",VOTE_UP:".scratchpad-vote .discussion-vote .vote-up",VOTE_DOWN:".scratchpad-vote .discussion-vote .vote-DOWN"},noOutput:{document:true},isTabletWidth:function(){return window.outerWidth<1400}(),isTablet:function(){var t=parseQueryString(window.location.search.slice(1))
if("ipad"in t||"tablet"in t){return true}if(KA.isIPad){return true}var e=navigator.userAgent
if(/Android.*Nexus[\\s]+(7|9|10)|^.*Android.*Nexus(?:(?!Mobile).)*$/.test(e)||/SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-I9205|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700/.test(e)){if(window.outerHeight>=768&&window.outerWidth>=1024){return true}}return false}(),forceRedirect:function(t){ScratchpadUI.triggerRemove()
$(window).unbind("beforeunload.scratchpad")
var e={url:t}
$(ScratchpadUI).trigger("redirect",e)
top.location.href=e.url},initKeybindings:function(){$(document).off("keydown",scratchpadListenKeydown)
$(document).on("keydown",scratchpadListenKeydown)},canEditChallenge:function(){if(ScratchpadUI.scratchpad.isChallenge()){return KA.isDeveloper()||ScratchpadUI.inEditableTutorial()||_.contains(KA.getGlobalPermissions(),"EDIT_ALL_CS_CHALLENGES")||ScratchpadUI.scratchpad.isOwner()&&_.contains(KA.getGlobalPermissions(),"EDIT_OWN_CS_CHALLENGES")}return false},canEditCurrentScratchpad:function(){return ScratchpadUI.scratchpad.isNew()||ScratchpadUI.scratchpad.isOwner()||ScratchpadUI.canEditChallenge()},inEditMode:function(){return!ScratchpadUI.embedded||ScratchpadUI.inEditableTutorial()},hasEditor:function(){var t=ScratchpadUI.embedded&&ScratchpadUI.scratchpad.get("canvasOnly")
return!t},inEditableTutorial:function(){return!!window.location.pathname.match(/\/edit$/)},shouldDisableChallengePaste:function(){return ScratchpadUI.scratchpad.get("defaultUrlPath")&&ScratchpadUI.scratchpad.get("defaultUrlPath").indexOf("/programming/")>-1},bindStartOverButton:function(){var t=ScratchpadUI.isRedirectedProjectFork?ScratchpadUI.originScratchpad:ScratchpadUI.scratchpad
ScratchpadUI.$el.find(".scratchpad-startover-button").show().on("click",function(){$("<div/>").text(i18n._("Are you sure you want to discard your changes? "+"This can't be undone.")).dialog({closeOnEscape:false,modal:true,title:i18n._("Do you wish to start over?"),buttons:[{text:i18n._("Cancel"),click:function(){$(this).dialog("close")}},{text:i18n._("Start Over"),click:function(){ScratchpadUI.liveEditor.editor.text(t.currentRevision().get("code"))
$(ScratchpadUI).trigger("startCodeOver")
$(this).dialog("close")}}]}).parent().addClass("ui-dialog-no-close-button").end()})},reactifyButtons:function(){ScratchpadUI.$el.find("[data-react-component=button]").each(function(){var t=$(this).data("react-button-type")||"button"
var e=$(this).data("react-button-use")
var a=$(this).text()
var r=$(this).attr("href")||""
var c=this
if(this.nodeName.toLowerCase()==="a"){c=$("<span>")[0]
$.each(this.attributes,function(t,e){c.attributes.setNamedItem(e.cloneNode(true))})
$(this).replaceWith(c)}ScratchpadUI.mountReactButton(c,t,a,false,r,e)})},hasUnsavedChanges:function(){var t=ScratchpadUI.scratchpad
var e=ScratchpadUI.liveEditor.editor.text()
var a=t.currentRevision()
var r=ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_AND_FORK_BUTTONS).is(":visible")
var c=a.get("code")
if(ScratchpadUI.stashedCode){c=ScratchpadUI.stashedCode}return r&&$.trim(e)!==$.trim(c)},isSaveable:function(){if(!ScratchpadUI.$el){return false}var t=ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_BUTTON)
return t.is(":visible")&&!t.hasClass("disabled")},triggerSave:function(){ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_BUTTON).click()},loadDocumentationScratchpads:function(){if(ScratchpadUI._loadingDocumentationScratchpads||!ScratchpadUI.liveEditor.hasFrame()){return}ScratchpadUI._loadingDocumentationScratchpads=true
$.get("/api/internal/scratchpads/documentation/titles",function(t){ScratchpadUI.liveEditor.postFrame({documentation:t})})},displayLanguageAllowsEditing:function(){return ScratchpadUI.scratchpad&&(!ScratchpadUI.scratchpad.get("category")||KA.language.indexOf("en")===0)},getHostName:function(){return window.location.host.toLowerCase()},isProdServer:function(){var t=this.getHostName()
return/khanacademy\.org/.test(t)||/khan-academy\.appspot\.com/.test(t)},prefixDomain:function(t){if(this.isProdServer()){var e=this.getHostName()
var a=/^(.*)-dot-khan-academy\.appspot\.com/.test(e)?RegExp.$1:"www"
return"https://"+a+".kasandbox.org"+t}return t},sandboxUrl:function(t){if(!t){return t}if(t.indexOf("lang=")<0){t+="?lang="+KA.language}t=this.prefixDomain(t)
return t},loadData:function(t,e,a){var r="/api/internal/show_scratchpad?scratchpad_id="+t+"&casing=camel"
if(a){r+="&allow_redirect=1"}$.ajax({type:"GET",url:r,data:{topic_slug:ScratchpadUI.topicSlug},success:function(t){e(t)
delete ScratchpadUI.requestedScratchpadID},error:function(){window.alert(i18n._("We couldn't load the program, can you try reloading?"))}})},getTabFromFeedbackType:function(t){if(t==="projecthelp"){return"projectfeedback"}else if(t==="comment"){return"comments"}else if(t==="projecteval"||t==="projectevalanswer"){return""}return"questions"},init:function(t){t=t||{}
ScratchpadUI.topicSlug=t.scratchpad&&t.scratchpad.forkedFromTopic||t.topic.slug||"computer-programming"
ScratchpadUI.toggleTutorialNav=ScratchpadUI.toggleTutorialNav||t.toggleTutorialNav
var e="cs-scratchpad-new"+KA.getUserID()
if(t.userAuthoredContentType){e+="-"+t.userAuthoredContentType}ScratchpadUI.localStorage=$.extend(ScratchpadUI.localStorage||{},{SCRATCHPADS:e})
var a=/(\d+)(\/embedded)?$/.exec(window.location.pathname)
t.id=t.id||a&&a[1]||""
t.embedded=a&&a[2]||t.embedded||ScratchpadUI.embedded
ScratchpadUI.embedded=t.embedded
ScratchpadUI.topic=t.topic
if(!t.scratchpad&&t.id){ScratchpadUI.requestedScratchpadID=t.id
ScratchpadUI.loadData(t.id,ScratchpadUI.init,t.embedded)
return}var r
var c=t.el||".scratchpad-page"
var i=parseQueryString(window.location.search.slice(1))
ScratchpadUI.$el=c?$(c):$(document)
ScratchpadUI.el=ScratchpadUI.$el[0]
ScratchpadUI.$el.off()
ScratchpadUI.isRedirectedProjectFork=ScratchpadUI.requestedScratchpadID&&t.scratchpad&&String(ScratchpadUI.requestedScratchpadID)!==String(t.scratchpad.id)
if(t.scratchpad){ScratchpadUI.scratchpad=new Scratchpad
ScratchpadUI.scratchpad.set(ScratchpadUI.scratchpad.parse(t.scratchpad))}else{var d=ScratchpadUI.termMap["new"]
ScratchpadUI.scratchpad=new Scratchpad({title:d,translatedTitle:d,category:null,difficulty:null,tags:[],userAuthoredContentType:t.userAuthoredContentType,guidelinesUrlPath:"/"+t.topic.slug+"/guidelines"+("/"+t.userAuthoredContentType),topicId:t.topicId,revision:new ScratchpadRevision({code:ScratchpadUI.termMap["code"]||"",created:new Date})})
var o=LocalStore.get(ScratchpadUI.localStorage.SCRATCHPADS)
if(o){ScratchpadUI.scratchpad.set(ScratchpadUI.scratchpad.parse(o.scratchpad))
r=o.cursor}}ScratchpadUI.userScratchpad=new UserScratchpad({scratchpadId:ScratchpadUI.scratchpad.get("id")})
ScratchpadUI.originScratchpad=new Scratchpad
if(t.originScratchpad){ScratchpadUI.originScratchpad.set(ScratchpadUI.originScratchpad.parse(t.originScratchpad))}var n=ScratchpadUI.scratchpad
ScratchpadUI.trusted=t.embedded
var s=n.currentRevision()
var p=KA.getUserProfile()
ScratchpadUI.localStorage=$.extend(ScratchpadUI.localStorage||{},{SEEN_COMPLETED_PROJECT:"cs-scratchpad-seen-completed"+KA.getUserID()+"-"+n.get("id")})
var l=(KA.isDeveloper()||p&&p.get("canRecordTutorial"))&&!n.isNew()&&!n.isTalkie()&&!n.get("category")&&n.isOwner()
var h=n.get("userAuthoredContentType")
if(h==="pjs"&&"blocks"in i){ScratchpadUI.useBlocks=true}var u=["hour-of-code-blocks"]
if(h==="pjs"&&TutorialNav.extendedSlug){u.forEach(function(t){if(TutorialNav.extendedSlug.indexOf(t)>=0){ScratchpadUI.useBlocks=true}})}if(s.get("editorType")==="structured-blocks_pjs"){ScratchpadUI.useBlocks=true}var S="/computer-programming/exec/"+h
if(h in ScratchpadUI.noOutput){S=""}var f="allow-pointer-lock allow-same-origin allow-scripts"
if(h==="webpage"){f+=" allow-popups allow-modals"}var g={scratchpad:n.toJSON(),originScratchpad:t.originScratchpad,creatorProfile:t.creatorProfile,embedded:t.embedded,embeddedAndWithFrame:t.embedded&&/\/embedded$/.test(window.location.pathname),trusted:t.embedded,appVersion:KA.version,sandboxUrl:ScratchpadUI.sandboxUrl(S),colors:["black","red","orange","green","blue","lightblue","violet"],inEditModeAndCanEdit:ScratchpadUI.inEditMode()&&ScratchpadUI.canEditCurrentScratchpad(),canEdit:ScratchpadUI.canEditCurrentScratchpad(),canRecord:l,canRecordDraw:h==="pjs",isDeveloper:KA.isDeveloper(),isOwner:n.isOwner(),isModerator:p&&p.get("isModerator")&&!ScratchpadUI.isRedirectedProjectFork,profileRoot:p&&p.get("profileRoot"),translatedDescription:n.get("translatedDescription"),translatedTitle:n.get("translatedTitle"),tutorialUrl:n.get("defaultUrlPath"),isNew:n.isNew(),isDocumentation:n.get("category")==="documentation",isOfficial:n.get("category")==="official",isProject:n.isProject(),isChallenge:n.isChallenge(),isUneditableProjectFork:n.get("originIsProject")&&!ScratchpadUI.canEditCurrentScratchpad(),hasAudio:n.isTalkie(),lastUpdatedTime:s.get("created").toISOString(),sandboxProps:f,youtubeUrl:n.getYoutubeEduUrl(),showShareButton:!n.isNew()&&(!p||!p.get("isChildAccount")),showProjectEvalArea:p&&n.get("originIsProject"),showProjectHelpButton:p&&!p.get("isChildAccount")&&!ScratchpadUI.useBlocks&&(n.isOwner()&&!n.isTalkie()&&!n.isChallenge()||n.isProject()),showProjectEvalButton:p&&n.get("originIsProject")&&(ScratchpadUI.isTablet||ScratchpadUI.isTabletWidth)&&ScratchpadUI.useBlocks&&!t.userScratchpad.isComplete,showStartOverButton:n.isChallenge()||ScratchpadUI.isRedirectedProjectFork&&!((ScratchpadUI.isTablet||ScratchpadUI.isTabletWidth)&&ScratchpadUI.useBlocks),hideSave:!ScratchpadUI.inEditMode()&&!n.isChallenge()&&!ScratchpadUI.isRedirectedProjectFork,showDescription:n.get("translatedDescription")||n.isProject()||n.get("originIsProject"),hideVotes:ScratchpadUI.isRedirectedProjectFork||n.inTutorial(),hideVoteControls:ScratchpadUI.isRedirectedProjectFork||n.inTutorial(),hideEditTitle:ScratchpadUI.isRedirectedProjectFork,hideDelete:ScratchpadUI.isRedirectedProjectFork,isRedirectedProjectFork:ScratchpadUI.isRedirectedProjectFork,newTitle:ScratchpadUI.termMap["new"],guidelinesTitle:ScratchpadUI.termMap["guidelines"],restartLabel:ScratchpadUI.termMap["restart"],domain:t.domain,topic:t.topic,isComputerProgramming:t.topic.slug==="computer-programming"}
if(n.get("byChild")){g.private=true}else if(n.get("key")){$.extend(g,{sumVotesIncremented:n.get("sumVotesIncremented"),key:n.get("key"),showModControls:p&&p.get("isModerator"),flags:n.get("flags"),flaggedBy:n.get("flaggedBy"),flaggedByUser:t.flaggedByUser,numberOfFlags:n.get("flags").length,definitelyNotSpam:n.get("definitelyNotSpam"),hideFlagControls:n.inTutorial()||n.isCategorySet(),showAuthorControls:n.isOwner(),isScratchpad:true,inQueue:false,hideModDelete:n.isOwner()||KA.isDeveloper()})}var v=true
var U={}
var I=document.documentElement
if(i.editor==="no"){I.className+=" no-editor"}if(i.output==="no"){I.className+=" no-output"}if(i.buttons==="no"){I.className+=" no-buttons"}if(i.author==="no"){I.className+=" no-author"}if(i.blank==="yes"){ScratchpadUI.blank=true}if(i.autoFocus==="no"){v=false}if(i.settings){try{U=JSON.parse(i.settings)}catch(m){}}if(i.background){ScratchpadUI.$el.find(ScratchpadUI.dom.PAGE).css("background",i.background)}if($(window).width()<=1024){v=false}if(!t.embeddedAndWithFrame&&t.discussion){if(i.qa_expand_key&&ScratchpadUI.ancestorFeedbackType){t.discussion.expandFeedbackType=ScratchpadUI.getTabFromFeedbackType(ScratchpadUI.ancestorFeedbackType)
t.discussion.qaExpandKey=i.qa_expand_key}if(!ScratchpadUI.hasEditor()){t.discussion.showDocumentation=false
t.discussion.showSpinoffs=false}$.extend(g,t.discussion)}$(ScratchpadUI).trigger("render")
g["useContentHeader"]=t.embedded
var T=require("./play-page.handlebars")
ScratchpadUI.$el.html(T(g))
var b=ScratchpadUI.continueDetails()
var w=b.text
var E=b.url
if(w!==undefined&&E!==undefined){var y=$(".ipad-scratchpad-wrap-outer")
ReactDOM.render(KUIButton({domainSlug:ScratchpadUI.topic.domainSlug,label:w,size:"small",type:"button",typeStyle:"button",href:E}),y[0])}var _=""
if(!ScratchpadUI.blank&&!i.code){_=i.code||s.get("code")||""}var k
if(n.isResizableType()){var C=10
k=$(document).width()/2-2*C}var P=parseFloat(i.width)||k||n.get("width")||400
var j=parseFloat(i.height)||n.get("height")||400
if(ScratchpadUI.useBlocks&&(ScratchpadUI.isTabletWidth||ScratchpadUI.isTablet)){TutorialNav.toggleTutorialNav()
document.documentElement.className+=" cs-tablet"
$("body").on("touchmove",function(t){var e=$(t.target).closest(".block-toolbox-editor, "+"#objectives-pane, .eval-guideline-view-objectives")
if(e.length===0){t.preventDefault()}})}if(ScratchpadUI.useBlocks){document.documentElement.className+=" flipped-scratchpad"}var D,A,R
try{D=window.parent
A=i.origin||D.location.origin}catch(O){}var N=function(t){if(D&&A&&D!==window){t.id=R||i.id||""
try{D.postMessage(JSON.stringify(t),A)}catch(e){}}}
var M=s.get("playback")
if(M){M=JSON.parse(M)}if(n.isTalkie()){var x=window.setTimeout(function(){if(!ScratchpadUI.liveEditor.audioReadyToPlay()){ScratchpadUI.$el.find(".scratchpad-editor-youtube-link").show()}},15*1e3)}var H=ScratchpadUI.prefixDomain("/third_party/javascript-khansrc/live-editor/build/images/")
if(h==="webpage"){H="https://www.kasandbox.org/programming-images/"}var F="ace"
var q=j
if(ScratchpadUI.useBlocks){F="structured-blocks"
q=400}if(h==="document"){F="textarea"
j="auto"
q="auto"}var L=!(t.scratchpad&&t.scratchpad.canvasOnly)
ScratchpadUI.liveEditor=new LiveEditor({el:ScratchpadUI.$el,editorType:F+"_"+h,outputType:h,width:P,height:j,editorHeight:q,newErrorExperience:true,autoFocus:v,code:_,validation:s.get("tests"),version:n.get("configVersion"),cursor:r,settings:U,recordingMP3:s.getMp3Url(),recordingCommands:M&&M.commands,recordingInit:M&&M.init,transloaditAuthKey:window.localStorage["TRANSLOADIT_AUTH_KEY"],transloaditTemplate:"7b622b7a661855d67280551cf499aca0",workersDir:ScratchpadUI.prefixDomain("/third_party/javascript-khansrc/live-editor/build/workers/"),externalsDir:ScratchpadUI.prefixDomain("/third_party/javascript-khansrc/live-editor/build/external/"),soundsDir:"https://www.kasandbox.org/programming-sounds/",imagesDir:H,jshintFile:ScratchpadUI.prefixDomain((KA.language!=="en"?"/genfiles/translations/"+KA.kaLocale:"")+"/third_party/javascript-khansrc/live-editor/"+"build/external/jshint/jshint.js"),redirectUrl:window.location.origin+"/computer-programming/link_redirector",execFile:S,enableLoopProtect:L})
ScratchpadUI.$el.addClass("editor-"+F)
if(F==="textarea"){var B={forcePasteAsPlainText:false,toolbar:[["Undo"],["Bold","Italic","Underline","-","RemoveFormat"],["Format"],["NumberedList","BulletedList"],["Link","Unlink"],["Drawing"]],plugins:["format","list","drawing"]}
var G=ScratchpadUI.$el.find(".textarea-editor")[0]
require.async(["../ckeditor-package/ckeditor-utils.js"],function(t){t.whenReady(function(){t.createEditor(G,B,{_onChangeField:function(t){t.editor.updateElement()}})})})}ScratchpadUI.liveEditor.on("readyToPlay",function(){$(ScratchpadUI).trigger("readyToPlay")
window.clearTimeout(x)
ScratchpadUI.$el.find(".scratchpad-editor-youtube-link").hide()})
ScratchpadUI.liveEditor.on("canvasSizeUpdated",function(t){var e=t.width
var a=t.height
var r=i.buttons==="no"?0:2
ScratchpadUI.$el.find(ScratchpadUI.dom.CANVAS_WRAP).width(e+r)
ScratchpadUI.$el.find(ScratchpadUI.dom.DRAG_HANDLE).find("div").height(a)
if(ScratchpadUI.embedded&&i.editor==="no"){$("html").width(e+r).height(a)}})
ScratchpadUI.liveEditor.trigger("canvasSizeUpdated",{width:P,height:j})
ScratchpadUI.liveEditor.listenTo(n,"change:width change:height",function(){ScratchpadUI.liveEditor.updateCanvasSize(n.get("width"),n.get("height"))
ScratchpadUI.liveEditor.restartCode()})
ScratchpadUI.liveEditor.off("update").on("update",function(t){if(t.results&&D&&t.pass!==undefined){N({testsPassed:t.pass},"*")}else if(t.action==="link-click"){var e=i18n._("The link you clicked was on a user-created webpage."+"  Are you sure you would like to visit "+"the following website?\n%(url)s",{url:t.url})
if(confirm(e)){window.open(t.url)}}else if(t.action==="page-info"){var a=t.title||ScratchpadUI.termMap["new"]
ScratchpadUI.scratchpad.setTitle(a)
ScratchpadUI.$el.find(".title-box #scratchpad-title, .task-title span").text(a)
ScratchpadUI.$el.find(ScratchpadUI.dom.INPUT_TITLE).val(a)}else if(t.action==="sql-table-click"){var r=ScratchpadUI.liveEditor.editor.text()
r=$.trim(r)+"\nSELECT * FROM "+t.table+";"
ScratchpadUI.liveEditor.editor.text(r)}$(ScratchpadUI).trigger("update",t)})
ScratchpadUI.liveEditor.on("runCode",function(t){$(ScratchpadUI).trigger("runCode",t)})
var V=ScratchpadUI.liveEditor.record
var K=function(){if(V.recordingAudio||!ScratchpadUI.listenStart){return}var t=(new Date).getTime()
var e=t-ScratchpadUI.listenStart
ScratchpadUI.userScratchpad.addMillisecondsWatched(e,V.currentTime(),V.endTime())
ScratchpadUI.listenStart=null}
V.on({playStarted:function(){if(!V.recordingAudio){ScratchpadUI.listenStart=(new Date).getTime()}},playPaused:function(){K()},playEnded:function(){K()}})
if(g["useContentHeader"]){require.async(["../tasks-package/content-header.jsx","package!tasks.css"],function(t){var e=React.createFactory(t)
var a=g["translatedDescription"]
if(g["isProject"]){a=""}var r=e({title:g["translatedTitle"],description:a,descriptionHtml:a,toggleTutorialNav:ScratchpadUI.toggleTutorialNav})
var c=ScratchpadUI.$el.find(".task-header-mid-container")
if(c.length){ReactDOM.render(r,c[0])}var i=require("./header-buttons.handlebars")
ScratchpadUI.$el.find(".random-stuff").html(i(g))
ScratchpadUI.reactifyButtons()})}else{ScratchpadUI.reactifyButtons()}if(!t.embeddedAndWithFrame){if(t.discussion&&!t.discussion.topicSlug){t.discussion.topicSlug=ScratchpadUI.topicSlug}else if(!t.discussion){t.discussion={topicSlug:ScratchpadUI.topicSlug}}ScratchpadUI.initDiscussion(t.discussion)}ScratchpadUI.initAndBind()
var W=ScratchpadUI.initVoting(t)
var X=ScratchpadUI.initUserScratchpad(t)
if(t.id&&(!W||!X)){if(!(n.isChallenge()||n.isProject()||n.isTalkie())){ScratchpadUI.startScratch()}ScratchpadUI.loadData(t.id,function(t){ScratchpadUI.initVoting(t)
ScratchpadUI.initUserScratchpad(t)
ScratchpadUI.startScratch()})}else{ScratchpadUI.startScratch()}if(ScratchpadUI.isRedirectedProjectFork){$(DiscussionSpinOffs._tabHeaderSelector).hide()}if(ScratchpadUI.scratchpad.get("byChild")){$(DiscussionComments._tabHeaderSelector).hide()
$(DiscussionQuestions._tabHeaderSelector).hide()}},initUserScratchpad:function(t){if(t.userScratchpad){ScratchpadUI.userScratchpad.set(ScratchpadUI.userScratchpad.parse(t.userScratchpad))
return true}},initVoting:function(t){if(!t.embedded&&"upVoted"in t){if(t.upVoted){var e=$(ScratchpadUI.dom.HEADER_VOTE_UP)
e.addClass("voted").find(".kui-button .label1").text(i18n._("Voted Up!"))}DiscussionVoting.init($(ScratchpadUI.dom.VOTE_CONTROL))
return true}return!!t.embedded},initDiscussion:function(t){if(ScratchpadUI.scratchpad.isNew()){DiscussionDocumentation.load(true,ScratchpadDocsView,ScratchpadUI)}else if(t){Discussion.init(t)}},initResizing:function(){if(ScratchpadUI.scratchpad.isResizableType()){var t=400
var e=410
var a=$(this.dom.DRAG_HANDLE)
var r=$(this.dom.OUTPUT_FRAME)
var c=$(this.dom.SCRATCHPAD_WRAP)
a.on("mousedown",function(i){var d=i.pageX
var o=r.width()
var n=_.throttle(function(a){var r=a.pageX-d
if(c.css("direction")==="rtl"){r=-r}var i=o-r
var n=c.width()
if(i<t){i=t}else if(n-i<e){i=n-e}ScratchpadUI.liveEditor.updateCanvasSize(i)
return false},30)
a.addClass("dragging")
r.css("pointer-events","none")
$(document).on("mousemove",n)
$(document).one("mouseup",function(){$(document).off("mousemove",n)
a.removeClass("dragging")
r.css("pointer-events","auto")})})
a.show()}},triggerRemove:function(){$(ScratchpadUI).trigger("remove")},updateCodeFromScratchpadTitle:function(){var t=ScratchpadUI.scratchpad.get("translatedTitle")
var e=ScratchpadUI.liveEditor.editor.text()
var a=/(<title\b[^>]*>)[^<>]*(<\/title>)/i
var r=e.match(a)
if(!r){return}ScratchpadUI.liveEditor.editor.setReadOnly(true)
window.setTimeout(function(){ScratchpadUI.liveEditor.editor.setReadOnly(false)},500)
t="<title>"+t+"</title>"
ScratchpadUI.liveEditor.editor.editor.replace(t,{needle:r[0]})},termMap:{}}
var featureDetect=function(){var t=document.createElement("canvas")
return!!(window.JSON&&window.postMessage&&t&&t.getContext)}
function scratchpadListenKeydown(t){if(!jQuery.browser.msie&&t.which===8&&!$(t.target).is(":input")&&$(t.target).closest("[contenteditable=true]").length===0){t.preventDefault()}if(t.which===83&&(t.ctrlKey||t.metaKey)){if(ScratchpadUI.isSaveable()){ScratchpadUI.triggerSave()}t.preventDefault()}}var StateLabelKUIButton=React.createClass({displayName:"StateLabelKUIButton",propTypes:{label:React.PropTypes.string.isRequired},getInitialState:function(){return{label:this.props.label}},render:function(){return React.createElement(KUIButton,_.extend({},this.props,{label:this.state.label}))}})
var StateLabelKUIButtonFactory=React.createFactory(StateLabelKUIButton)
ScratchpadUI.mountReactButton=function(t,e,a,r,c,i){if(!t){return false}var d
if(r){d=ReactDOM.render(SplitButton({domainSlug:ScratchpadUI.topic.domainSlug,href:c,label:a,label2:"",size:"small",type:"button",typeStyle:e,use:i||"primary"}),t)}else{d=ReactDOM.render(StateLabelKUIButtonFactory({domainSlug:ScratchpadUI.topic.domainSlug,href:c,label:a,size:"small",type:"button",typeStyle:e,use:i||"primary"}),t)}var o=$(t).attr("id")
if(o){this.reactButtons=this.reactButtons||{}
this.reactButtons[o]=d}return d}
ScratchpadUI.updateReactButton=function(t,e){var a=e.label
var r=ScratchpadUI.reactButtons[t]
if(r){if(r instanceof StateLabelKUIButton){r.setState({label:a})}else{var c="UpdateReactButton was expecting a "+"StateLabelKUIButton, but got "+r.constructor.displayName
if(Raven){Raven.captureMessage(c,{tags:{ipaddebugging:true}})}}}}
ScratchpadUI.initAndBind=function(){var t=this
if(maybeRedirectToTutorialView()){return}if(!featureDetect()){$("#browser-notice-container").show()
return}$("html").addClass("scratchpad-has-features")
$(ScratchpadUI).trigger("load")
if(Discussion.data){if(ScratchpadUI.scratchpad.isOwner()){Discussion.maybeShowTab("questions")
Discussion.maybeShowTab("comments")
var e=DiscussionProjectFeedback
e.load()
var a=setInterval(function(){Discussion.checkCollectionStatus(e,a,ScratchpadUI.initProjectFeedback,true)}.bind(Discussion),100)}else if(!ScratchpadUI.scratchpad.inTutorial()){if(!Discussion.data.qaExpandKey&&!ScratchpadUI.scratchpad.isCategorySet()){Discussion._switchType("spin-offs")}Discussion.maybeShowTab("projectfeedback",ScratchpadUI.initProjectFeedback)}else if(ScratchpadUI.scratchpad.isTalkie()){Discussion._switchType("questions")}}var r=false
var c=function(){if(!KA.isPhantom()&&!r&&ScratchpadUI.liveEditor.record.currentTime()){r=true
var t="/api/internal/user/badge_action/"+ScratchpadUI.scratchpad.get("id")
$.post(t,{action:"SCRATCHPAD_TINKER",casing:"camel"})}}
ScratchpadUI.liveEditor.on("userChangedCode",_.debounce(c,500))
var i=function(){var e={"true":i18n._("Undo hide from hotlist"),"false":i18n._("Hide from hotlist")}
var a={"true":i18n._("Undo hide everywhere"),"false":i18n._("Hide everywhere")}
$(t.dom.MOD_HOTLIST_BUTTON).removeAttr("disabled")
ScratchpadUI.updateReactButton("hide-from-hotlist",{label:e[ScratchpadUI.scratchpad.get("hideFromHotlist")]})
$(t.dom.MOD_DELETE_BUTTON).removeAttr("disabled")
ScratchpadUI.updateReactButton("hide-everywhere",{label:a[ScratchpadUI.scratchpad.get("deleted")]})}
var d=function(e,a){t.$el.on("click",e,function(){$(this).attr("disabled","disabled")
var t=$(this).attr("id")
ScratchpadUI.updateReactButton(t,{label:i18n._("Processing...")})
var e={}
e[a]=!ScratchpadUI.scratchpad.get(a)
ScratchpadUI.scratchpad.save(e,{patch:true,success:function(){i()},error:function(){window.alert("There was an error processing the request.")
i()}})})}
d(t.dom.MOD_HOTLIST_BUTTON,"hideFromHotlist")
d(t.dom.MOD_DELETE_BUTTON,"deleted")
t.$el.on("click",".scratchpad-delete-button",function(){var t=$("<div/>").text(i18n._("Are you sure you want to delete this project? "+"This can't be undone.")).dialog({closeOnEscape:false,modal:true,title:i18n._("Delete this project?"),buttons:[{"data-test-id":"cancel-delete-project-dialog-button",text:i18n._("Cancel"),click:function(){$(this).dialog("close")}},{"data-test-id":"delete-project-dialog-button",text:i18n._("Delete"),click:function(){t.dialog("option",{title:i18n._("Deleting..."),buttons:{}}).text(i18n._("Deleting project. You'll be redirected "+"when it's done."))
ScratchpadUI.scratchpad.destroy({success:function(){ScratchpadUI.forceRedirect(ScratchpadUI.topic.relativeUrl)},error:function(){t.dialog("option",{title:i18n._("Deletion Failed."),buttons:[{text:i18n._("Okay")}]}).html(i18n._("Something went wrong and we "+"couldn't delete the project. "+"Please try again!"))}})}}]}).parent().addClass("ui-dialog-no-close-button").end()})
t.$el.on("click",".fork",function(t){if($(t.target).hasClass("discussion-author")){$(ScratchpadUI).trigger("clickedSpinoffAuthor")}else{$(ScratchpadUI).trigger("clickedSpinoff")}})
t.$el.on("click",".hover-card-content a",function(){$(ScratchpadUI).trigger("clickedSpinoffAuthor")})
t.$el.on("click",ScratchpadUI.dom.SAVE_AND_FORK_BUTTONS,function(){ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_AND_FORK_BUTTONS).addClass("disabled")
var t={isNewScratchpad:ScratchpadUI.scratchpad.isNew(),fork:$(this).is("#fork-button"),cancelSave:function(){t.dialog.dialog("close")
ScratchpadUI.updateSaveLabel(i18n._("Save"))
ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_AND_FORK_BUTTONS).removeClass("disabled")
$(ScratchpadUI).trigger("cancelSave")},showError:function(e){var a=t.dialog
var r={}
r[i18n._("Okay")]=t.cancelSave
a.html(e)
a.dialog("option",{buttons:r})
a.dialog("open")}}
t.showDialog=!!(t.fork||t.isNewScratchpad)
t.dialog=$("<div/>").dialog({closeOnEscape:false,modal:true,autoOpen:t.showDialog,width:600}).parent().addClass("ui-dialog-no-close-button").end()
$(ScratchpadUI).trigger("saving",t)
ScratchpadUI.saveTitle(t)})
var o=$(ScratchpadUI.dom.HEADER_VOTE_UP)
if(o.length){var n=$("<div class='vote-for-js'>").addClass(o.attr("class")).data(o.data())
$(ScratchpadUI.dom.HEADER_VOTE).html(n)
ScratchpadUI.mountReactButton(n[0],"button",i18n._("Vote Up"),true,"","white")
$(ScratchpadUI.dom.SUM_VOTES).appendTo($(".label2"))}$(window).unbind("beforeunload.scratchpad")
$(window).bind("beforeunload.scratchpad",function(){ScratchpadUI.triggerRemove()
if(!ScratchpadUI.scratchpad.isNew()){var t={defaultMsg:i18n._("You have unsaved changes! "+"Are you sure you wish to leave the page?")}
if(ScratchpadUI.hasUnsavedChanges()){t.warnMsg=t.defaultMsg}$(ScratchpadUI).trigger("beforeunload",t)
return t.warnMsg}})}
ScratchpadUI.saveTitle=function(t){if(!t.fork&&!t.isNewScratchpad){ScratchpadUI.validate(t)
return}var e=ScratchpadUI.scratchpad
var a=t.dialog
var r=e.get("translatedTitle")
var c='Spin-off of ".*"'
var i=i18n._('Spin-off of "%(title)s"',{title:"%%%"}).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&").replace("%%%",".*")
var d="^("+i+"|"+c+")"
if(t.fork&&!RegExp(d,"i").test(r)){r=i18n._('Spin-off of "%(title)s"',{title:r})}if(t.saveMessage){$(a).append(t.saveMessage)}else{$("<p>").text(i18n._("We're going to save your project now, please set a "+"descriptive title for it:")).appendTo(a)}var o=$("<div class='scratchpad-change-title-prompt' "+"data-test-id='scratchpad-change-title-prompt'/>").append($("<input/>",{"data-test-id":"scratchpad-name-input",val:r})).append("<p>"+i18n._("To find your projects later, you can:")+"</p><ul>"+"<li>"+i18n._('Click "My Projects" from links around the '+"site.")+"</li>"+"<li>"+i18n._("Click your name in the upper right corner to get "+'to your profile, then click "projects".')+"</li>"+(t.fork?"<li>"+i18n._("To find all of your spin-offs of this project, "+'click "Spin-offs" and look under "Your spin-offs."')+"</li>":"")+"</ul>").appendTo(a)
var n=[{"data-test-id":"save-project-dialog-button",text:i18n._("Save"),click:function(){var a=o.children("input").val()
if(!a){return}e.setTitle(a)
o.remove()
ScratchpadUI.validate(t)}},{"data-test-id":"cancel-save-project-dialog-button",text:i18n._("Cancel"),click:t.cancelSave}]
a.dialog("option",{title:i18n._("Save As..."),buttons:n,close:t.cancelSave})
o.children("input").focus().select()}
ScratchpadUI.isAttemptingSomething=function(){if(ScratchpadUI.embedded&&!ScratchpadUI.inEditMode()){return true}return!ScratchpadUI.canEditCurrentScratchpad()}
ScratchpadUI.initProjectFeedback=function(){var t=function(){if(!DiscussionProjectFeedback.isLoaded()){return}var t=KA.getUserProfile()
if(t&&!t.get("isChildAccount")&&ScratchpadUI.scratchpad.isOriginProject()&&ScratchpadUI.scratchpad.isOwner()){if(DiscussionProjectFeedback.hasEvalRequests()){ScratchpadUI.$el.find(ScratchpadUI.dom.NOTICE_CONTAINER).slideUp(1e3)}}}
DiscussionProjectFeedback._projectFeedback.on("change reset add remove",t)
t()}
ScratchpadUI.loadUserSpinOffs=function(){Discussion.maybeShowTab("spin-offs",function(){var t=DiscussionSpinOffs.userForkList
if(t&&t.data.length){Discussion._switchType("spin-offs")
if(ScratchpadUI.scratchpad.isProject()&&ScratchpadUI.userScratchpad.get("isComplete")){if(window._kiq){window._kiq.push(["set",{view_project_completed:"true"}])}if(!LocalStore.get(ScratchpadUI.localStorage.SEEN_COMPLETED_PROJECT)){var e=ScratchpadUI.$el.find(".objectives-pane-outer")
ScratchpadUI.renderComplete(e)
LocalStore.set(ScratchpadUI.localStorage.SEEN_COMPLETED_PROJECT,1)}var a=i18n._("You've completed this project! View your "+"spin-offs of this project to see your solution.")
ScratchpadUI.$el.find("#complete-spin-off").hide()
ScratchpadUI.$el.find(ScratchpadUI.dom.NOTICE_TEXT).text(a)}ScratchpadUI.$el.find(ScratchpadUI.dom.NOTICE_CONTAINER).slideDown(1e3)}else{$(DiscussionSpinOffs._tabHeaderSelector).hide()}},true)
this.$el.on("click",this.dom.NOTICE_BUTTON,function(){Discussion._switchType("spin-offs")
guiders.createGuider({id:"scratchpad-guider-your-spinoffs",buttons:[{text:i18n._("Got it!"),classString:"simple-button green",href:"javascript:void(0);",onclick:function(){var t=$(window).scrollTop()
guiders.next()
$(window).scrollTop(t)}}],attachTo:".user-forks",position:9,offset:{left:0,top:0},title:i18n._("Looking for your projects?"),description:i18n._("Find your completed spin-offs of this "+"project here!"),next:"scratchpad-guider-try-again",overlay:true}).show()
guiders.createGuider({id:"scratchpad-guider-try-again",buttons:[{text:i18n._("Awesome!"),classString:"simple-button green",href:"javascript:void(0);",onclick:function(){var t=$(window).scrollTop()
guiders.hideAll()
$(window).scrollTop(t)}}],attachTo:"#fork-button",position:9,offset:{left:0,top:0},title:i18n._("Want to do this project again?"),description:i18n._("Click here to create another spin-off of this "+"project and complete it again!"),overlay:true})
return false})}
ScratchpadUI.stashUserCode=function(t,e){if(!ScratchpadUI.liveEditor){return}if(_.isUndefined(e)){e=ScratchpadUI.liveEditor.editor.text()}var a=ScratchpadUI.userScratchpad
t=t||{}
var r=_.extend({stashedCode:e},t.attrs||{})
r["scratchpadId"]=a.get("scratchpadId")
t.attrs=r
a.save(r,t)
ScratchpadUI.stashedCode=e}
ScratchpadUI.updateSaveLabel=function(t){ScratchpadUI.updateReactButton("save-button",{label:t})
ScratchpadUI.updateReactButton("dev-save-button",{label:t})}
ScratchpadUI.save=function(t){var e=t.dialog
ScratchpadUI.updateSaveLabel(i18n._("Saving..."))
e.html(i18n._("Saving..."))
e.dialog("option",{title:i18n._("Saving..."),buttons:{}})
ScratchpadUI.liveEditor.getScreenshot(function(a){saveRevision(a,t)
var r=ScratchpadUI.scratchpad
if(t.fork){r=r.fork()}r.save({},{success:function(a){if(t.isNewScratchpad){LocalStore.del(ScratchpadUI.localStorage.SCRATCHPADS)}if(window.ga){window.ga("send","event","Learning-Action","Scratchpad-Saved",ScratchpadUI.scratchpad.get("title"))}if(t.fork&&ScratchpadUI.scratchpad.isProject()){ScratchpadUI.stashUserCode(null,"")}if(t.showDialog){e.html(i18n._("Saved! Loading project..."))
ScratchpadUI.forceRedirect(a.pathForShow())}else{enableSaveButton()}$(ScratchpadUI).trigger("saveCompleted",a)},error:function(e,a){if(a.status===413){t.showError(i18n._("Your creation is too large. Please "+"shorten the content and try again."))}else{t.showError(i18n._("Error saving your creation to the server. "+"Please try again!"))}$(ScratchpadUI).trigger("saveFailed")}})})}
var enableSaveButton=function(){ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_AND_FORK_BUTTONS).removeClass("disabled")
ScratchpadUI.updateSaveLabel(i18n._("Saved!"))
setTimeout(function(){ScratchpadUI.updateSaveLabel(i18n._("Saved!"))},2e3)}
var maybeRedirectToTutorialView=function(){var t=parseQueryString(window.location.search.slice(1))
var e=ScratchpadUI.scratchpad.get("defaultUrlPath")
if(e&&!ScratchpadUI.embedded&&!ScratchpadUI.canEditCurrentScratchpad()&&!t.no_redirect){ScratchpadUI.forceRedirect(e+window.location.search)
return true}return false}
ScratchpadUI.startScratch=function(){var t=require("./scratchpad-bingo.js")
var e=ScratchpadUI.scratchpad
t.init()
if(!ScratchpadUI.hasEditor()){$(ScratchpadUI.dom.PAGE).addClass("no-editor no-buttons")}if(ScratchpadUI.inEditMode()&&ScratchpadUI.canEditCurrentScratchpad()||ScratchpadUI.isRedirectedProjectFork){ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_BUTTON).show()}$(".timeago").timeago()
var a=ScratchpadUI.$el.find(ScratchpadUI.dom.SAVE_BUTTON).is(":visible")
var r=$(".title-box").click(function(){if(!a||$("#edit-title").hasClass("disabled")){return}$("#edit-title").hide()
c.val(e.get("translatedTitle")).show().focus().select()
r.find("#scratchpad-title").addClass("hidden-title")}).find("#scratchpad-title").text(e.get("translatedTitle")).end()
if(!a){$("#edit-title").hide()
r.css("cursor","auto")}else if(!ScratchpadUI.displayLanguageAllowsEditing()){$("#edit-title").addClass("disabled")
$("#edit-title").text(i18n._("(Must be in English to edit this scratchpad title)"))}var c=$("<input>").addClass("title").hide().appendTo(r).blur(function(){if(c.val().length>0){var t=c.val()
e.setTitle(t)}if(!e.isNew()){$("#edit-title").show()
r.find("#scratchpad-title").text(e.get("translatedTitle")).removeClass("hidden-title")
c.hide()}}).keypress(function(t){if(t.which===13){c.trigger("blur")
t.preventDefault()}})
if(e.isNew()){r.click()}ScratchpadUI.initKeybindings()
var i={code:""}
$(ScratchpadUI).trigger("initCode",i)
ScratchpadUI.stashedCode=i.code
if(ScratchpadUI.stashedCode){ScratchpadUI.liveEditor.editor.text(ScratchpadUI.stashedCode)}$(ScratchpadUI).trigger("started")
if(!a){$("#fork-button").addClass("green")}}
var saveRevision=function(t,e){var a=ScratchpadUI.scratchpad
var r=a.currentRevision()
var c={code:ScratchpadUI.liveEditor.editor.text(),editor_type:ScratchpadUI.liveEditor.options.editorType,folds:ScratchpadUI.liveEditor.editor.getAllFolds(),image_url:t,config_version:a.getVersion(),topic_slug:ScratchpadUI.topicSlug}
e.data=c
$(ScratchpadUI).trigger("saveData",e)
r.set(c)}
var shouldHideRestart=function(t){var e=ScratchpadUI.scratchpad.get("userAuthoredContentType")
if(e==="webpage"){if(t.match(/<script>/)||t.match(/animation:/)){return false}}else if(e==="pjs"){var a=["function(){var draw = function(){};}","function(){draw = function(){};}","function(){var mousePressed = function(){};}","function(){var mouseReleased = function(){};}","function(){var mouseMoved = function(){};}","function(){var mouseClicked = function(){};}","function(){var keyPressed = function(){};}","function(){mousePressed = function(){};}","function(){mouseReleased = function(){};}","function(){mouseMoved = function(){};}","function(){mouseClicked = function(){};}","function(){keyPressed = function(){};}","function(){random();}","function(){var _ = new Random();}","function(){var _ = random();}"]
try{for(var r=0;r<a.length;r++){if(Structured.match(t,a[r])){return false}}return true}catch(c){}}return true}
var maybeHideRestart=function(){var t=ScratchpadUI.liveEditor.editor.text()
var e=shouldHideRestart(t)
if(e!==undefined){ScratchpadUI.$el.find("#restart-code").toggle(!e)}}
var maybeToggleFork=function(){var t=ScratchpadUI.scratchpad.isChallenge()
var e=ScratchpadUI.scratchpad.isTalkie()
var a=!ScratchpadUI.liveEditor.record.playPos&&ScratchpadUI.scratchpad.get("revision").get("code")===ScratchpadUI.liveEditor.editor.text()
if(e&&(ScratchpadUI.liveEditor.record.playing||a)||t||ScratchpadUI.isRedirectedProjectFork){$("#fork-button").hide()}else{$("#fork-button").show()}}
var ScratchpadUIStart=function(){require("../../third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_ace.js")
require("../../third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_textarea.js")
require("../../third_party/javascript-khansrc/live-editor/build/js/live-editor.editor_structured_blocks.js")
require("./scratchpad-ui-dev.js").bindEvents()
require("./scratchpad-ui-intro.js").bindEvents()
require("./scratchpad-ui-playback.js").bindEvents()
require("./scratchpad-ui-project.js").bindEvents()
require("./scratchpad-ui-share.js").bindEvents()
require("./scratchpad-ui-challenge.js").bindEvents()
$(document).on("mouseenter",".author-nickname",function(){var t="top left"
if(window!==window.top){t="bottom left"}HoverCard.createHoverCardQtip($(this),{my:t,at:"bottom left"})})
$(ScratchpadUI).on({started:function(){maybeHideRestart()
maybeToggleFork()
var t=ScratchpadUI.liveEditor.editor
t.on("change",_.debounce(function(){ScratchpadUI.loadDocumentationScratchpads()
maybeToggleFork()
maybeHideRestart()},300))
t.on("click",function(){var e=ScratchpadUI.scratchpad.isTalkie()
if(e&&!ScratchpadUI.liveEditor.record.playing||!e&&!ScratchpadUI.liveEditor.record.recording){t.insertNewlineIfCursorAtEnd()}})
var e=ScratchpadUI.scratchpad.currentRevision().get("folds")
ScratchpadUI.liveEditor.editor.setFolds(e)
ScratchpadUI.initResizing()
var a=ScratchpadUI.scratchpad.get("userAuthoredContentType")
if(a==="webpage"){var r=ScratchpadUI.$el.find(ScratchpadUI.dom.INPUT_TITLE)
r.change(function(t){ScratchpadUI.scratchpad.setTitle($(t.target).val())
ScratchpadUI.updateCodeFromScratchpadTitle()})}}})
$(ScratchpadUI).on("remove",function(){if(!ScratchpadUI.liveEditor){return}ScratchpadUI.liveEditor.remove()
var t=ScratchpadUI.scratchpad
var e=ScratchpadUI.liveEditor.editor.text()
var a=t.currentRevision()
if(t.isNew()){a.set("code",e)
LocalStore.set(ScratchpadUI.localStorage.SCRATCHPADS,{cursor:ScratchpadUI.liveEditor.editor.getCursor(),scratchpad:ScratchpadUI.scratchpad})}})}
window.ScratchpadUI=ScratchpadUI
module.exports={ScratchpadUI:ScratchpadUI,ScratchpadUIStart:ScratchpadUIStart,featureDetect:featureDetect}
});
KAdefine("javascript/scratchpads-package/scratchpad-ui-challenge.js", function(require, module, exports) {
require("../../third_party/javascript-khansrc/bootstrap-khansrc/js/bootstrap-modal.js")
var $=require("jquery")
var _=require("underscore")
var i18n=require("../shared-package/i18n.js")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var bindEvents=_.once(function(){$(ScratchpadUI).bind({started:function(e){if(!isChallenge()){return}var t=ScratchpadUI.liveEditor.editor
var a=ScratchpadUI.$el
if(!ScratchpadUI.canEditChallenge()&&ScratchpadUI.shouldDisableChallengePaste()&&t.blockPaste){var s=false
t.blockPaste(function(){if(!s){var e=i18n._("To make sure you get the most out of "+"these challenges, we've disabled pasting "+"code from outside. Studies show that typing "+"code helps our brain solidify the concepts more.")
s=$("<div>").addClass("modal generic-dialog").css("top","50%").html("<span class='close' data-dismiss='modal'>"+"&#215;"+"</span><div>"+e+"</div>").appendTo("body")}s.modal({show:true,backdrop:false})})}createChallenge(function(e){ScratchpadUI.challenge=e
var s=isAttemptingChallenge()
if(s){ScratchpadUI.userScratchpad.setChallengeTimeTaken()
ScratchpadUI.userScratchpad.startInactivityTimer()}ScratchpadUI.loadUserSpinOffs()
if(ScratchpadUI.canEditChallenge()){ScratchpadUI.testsEditors.show()}t.on("change",function(){$("#save-progress-text").stop(true).show().text(i18n._("Saving progress..."))
throttledSaveChallengeProgress()})
a.find(".scratchpad-editor-undo-button").show().on("click",function(){t.undo()
t.focus()})
ScratchpadUI.bindStartOverButton()
$("#edit-title").hide()
$(".title-box").css("cursor","auto")
ScratchpadUI.liveEditor.markDirty()}.bind(this))},startCodeOver:function(e){if(isAttemptingChallenge()&&ScratchpadUI.challenge){window.setTimeout(function(){ScratchpadUI.challenge.startOver()},100)}},initCode:function(e,t){if(isAttemptingChallenge()){t.code=ScratchpadUI.userScratchpad.get("stashedCode")}},runCode:function(e,t){if(t.validate){t.validate=ScratchpadUI.scratchpad.get("translatedTests")}if(ScratchpadUI.testsEditors){var a=ScratchpadUI.testsEditors.getCodeToTest()
if(a){t.code=a
t.onlyRunTests=false}t.validate=ScratchpadUI.testsEditors.getTests()}},update:function(e,t){if(t.results&&t.results.tests&&isChallenge()&&ScratchpadUI.challenge){if(ScratchpadUI.testsEditors&&ScratchpadUI.testsEditors.runningRegTests){ScratchpadUI.testsEditors.checkRegTestResults(t)}else{ScratchpadUI.challenge.processResults(t.results)}}},saveData:function(){if(ScratchpadUI.canEditChallenge()&&ScratchpadUI.testsEditors){if(ScratchpadUI.testsEditors.testsEditor){ScratchpadUI.scratchpad.currentRevision().set("tests",ScratchpadUI.testsEditors.testsEditor.getValue())}if(ScratchpadUI.testsEditors.regTestsEditor){ScratchpadUI.scratchpad.currentRevision().set("regressionTests",ScratchpadUI.testsEditors.regTestsEditor.getValue())}}},remove:function(){var e={}
if(isAttemptingChallenge()){e=ScratchpadUI.userScratchpad.setChallengeTimeTaken()}saveChallengeProgress(e)},beforeunload:function(e,t){if(isAttemptingChallenge()){var a=ScratchpadUI.liveEditor.editor.text()
if(a!==ScratchpadUI.userScratchpad.get("stashedCode")){t.warnMsg=t.defaultMsg}}}})})
var isChallenge=function(){return ScratchpadUI.scratchpad.isChallenge()}
var createChallenge=function(e){require.async(["../scratchpad-challenge-package/scratchpad-challenge.js"],function(t){var a=new t.ScratchpadChallenge({userScratchpad:ScratchpadUI.userScratchpad,editor:ScratchpadUI.liveEditor.editor})
new t.ChallengePanels({challenge:a,el:$("#objectives-pane")})
new t.ChallengeProgress({challenge:a,el:$("#challenge-progress-bar")})
new t.ChallengeStatusMessage({challenge:a,el:$("#challenge-status-message")})
if(ScratchpadUI.canEditChallenge()){ScratchpadUI.testsEditors=new t.ChallengeTestsEditors({challenge:a,scratchpad:ScratchpadUI.scratchpad,el:$(".scratchpad-editor-tabs")})}e(a)})}
var isAttemptingChallenge=function(){return ScratchpadUI.isAttemptingSomething()&&isChallenge()}
var showSaveStatus=function(e){if(isAttemptingChallenge()){ScratchpadUI.$el.find("#save-progress-text").text(e)}}
var saveChallengeProgress=function(e){if(!isAttemptingChallenge()){return}var t={success:function(){showSaveStatus(i18n._("All changes saved."))},error:function(){showSaveStatus(i18n._("Failed to save changes."))},attrs:e||{}}
ScratchpadUI.stashUserCode(t)
ScratchpadUI.userScratchpad.startInactivityTimer()}
var throttledSaveChallengeProgress=_.debounce(saveChallengeProgress,3e3)
module.exports={bindEvents:bindEvents}
});
KAdefine("javascript/scratchpads-package/scratchpad-ui-playback.js", function(require, module, exports) {
require("../../third_party/javascript-khansrc/bootstrap-dropdown/dropdown.js")
require("../../third_party/javascript-khansrc/jqueryui/jquery.ui.dialog.js")
require("../../third_party/javascript-khansrc/jqueryui/jquery.ui.effect.js")
require("../../third_party/javascript-khansrc/jqueryui/jquery.ui.slider.js")
var $=require("jquery")
var _=require("underscore")
var i18n=require("../shared-package/i18n.js")
var InteractiveTranscriptView=require("../transcripts-package/transcripts.js").InteractiveTranscriptView
var KA=require("../shared-package/ka.js")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var VideoTranscript=require("../transcripts-package/transcripts.js").VideoTranscript
$.extend(ScratchpadUI.dom,{BIG_PLAY_LOADING:".scratchpad-editor-bigplay-loading",BIG_PLAY_BUTTON:".scratchpad-editor-bigplay-button",PLAYBAR:".scratchpad-playbar",PLAYBAR_AREA:".scratchpad-playbar-area",PLAYBAR_OPTIONS:".scratchpad-playbar-options",PLAYBAR_LOADING:".scratchpad-playbar .loading-msg",PLAYBAR_PROGRESS:".scratchpad-playbar-progress",PLAYBAR_PLAY:".scratchpad-playbar-play",PLAYBAR_TIMELEFT:".scratchpad-playbar-timeleft",PLAYBAR_UI:".scratchpad-playbar-play, .scratchpad-playbar-progress"})
var bindEvents=_.once(function(){$(ScratchpadUI).bind({load:function(){if(ScratchpadUI.scratchpad.getYoutubeId()){setupTranscript()}},saving:function(r,a){var e=ScratchpadUI.scratchpad
var t=e.currentRevision()
a.userCanRecord=KA.isDeveloper()||KA.getUserProfile()&&KA.getUserProfile().get("canRecordTutorial")
a.hasRecording=a.userCanRecord&&(ScratchpadUI.liveEditor.record.recorded||t.hasAudio())},saveData:function(r,a){var e=ScratchpadUI.scratchpad
var t=e.currentRevision()
var i=ScratchpadUI.liveEditor.editor.text()
var c=ScratchpadUI.liveEditor.record
a.data.code=a.saveRecording&&c.recorded?t.get("code"):i
a.data.playback=a.saveRecording?JSON.stringify(c.dumpRecording()):""
a.data.config_version=a.saveRecording?e.getVersion():ScratchpadUI.liveEditor.config.curVersion()},beforeunload:function(r,a){if(a.warnMsg&&ScratchpadUI.liveEditor.record.playing){a.warnMsg=undefined}},remove:function(){if(ScratchpadUI.liveEditor.player){ScratchpadUI.liveEditor.player.destruct()
ScratchpadUI.liveEditor.record.stopPlayback()}ScratchpadUI.liveEditor.recordHandlersBound=false}})})
ScratchpadUI.checkForRecording=function(r){var a=ScratchpadUI.scratchpad.currentRevision()
var e=ScratchpadUI.liveEditor.record
var t=ScratchpadUI.liveEditor.editor
var i=r.dialog
if(r.hasRecording){r.saveRecording=true}if(!r.hasRecording||!e.recorded){return ScratchpadUI.save(r)}r.showDialog=true
e.initData.code=t.originalCode
i.html(i18n._("Saving..."))
i.dialog("option",{title:i18n._("Saving..."),buttons:{}})
i.dialog("open")
var c="en/"+ScratchpadUI.scratchpad.get("id")+"/"+a.get("id")+"/audio.${file.ext}"
var d={"export":{path:c}}
ScratchpadUI.liveEditor.saveRecording(function(e,t){if(t){a.set("mp3Url",t)}ScratchpadUI.save(r)},d)}
var setupTranscript=function(){var r
function a(){r=new InteractiveTranscriptView({model:e})
ScratchpadUI.$el.find(ScratchpadUI.dom.SCRATCHPAD_WRAP).after(r.render().el)
r.on("subtitleSelection",function(r){var a=r*1e3
ScratchpadUI.$el.find(ScratchpadUI.dom.PLAYBAR_PROGRESS).slider("option","value",r)
ScratchpadUI.liveEditor.record.seeking=true
ScratchpadUI.wasPlaying=ScratchpadUI.liveEditor.record.playing
ScratchpadUI.liveEditor.record.pausePlayback()
ScratchpadUI.liveEditor.updateTimeLeft(a)
ScratchpadUI.liveEditor.seekTo(a)
ScratchpadUI.liveEditor.record.seeking=false
if(ScratchpadUI.wasPlaying){setTimeout(function(){ScratchpadUI.liveEditor.record.play()},1e3)}})
ScratchpadUI.liveEditor.record.bind({playUpdate:function(){r.onPlayerUpdate(ScratchpadUI.liveEditor.record.currentTime()/1e3)}})}var e=new VideoTranscript({youtubeId:ScratchpadUI.scratchpad.getYoutubeId()})
e.fetch({success:function(){var t=ScratchpadUI.$el.find(ScratchpadUI.dom.PLAYBAR_OPTIONS)
t.find(".dropdown-toggle").dropdown("click").prop("disabled",false)
if(!e.hasValid()){t.find("input").attr("disabled","disabled")
t.find("label").addClass("disabled")
return}t.delegate("input","click",function(){if(!r){a()}if($(this).is(":checked")){r.showWithSlide()}else{r.hideWithSlide()}})
if(KA.language!=="en"){t.find("input").click()}}})}
ScratchpadUI.continueDetails=function(){var r
var a
var e=require.ifLoadedLegacy("../tutorial-package/tutorial-nav.js")
if(e&&e.liveContext){var t=e.liveContext.navListView.getNextTitleAndURL()
if(t){r=i18n._('Continue to "%(title)s"',{title:t.title})
a=t.url}}return{text:r,url:a}}
ScratchpadUI.renderComplete=function(r){var a=ScratchpadUI.continueDetails()
var e=a.text
var t=a.url
var i=require("./goal-tab.handlebars")
var c=ScratchpadUI.scratchpad
r.html(i({scratchpad:c,isChallenge:c.isChallenge(),isOriginProject:c.isOriginProject(),isChallengeOrProjectBased:c.isChallenge()||c.isOriginProject()||c.isProject(),continueText:e,isProject:c.isProject(),continueUrl:t,showPoints:c.isProjectOrFork()&&c.get("sendToPeers")||c.isChallenge(),topicRelativeUrl:ScratchpadUI.topic.relativeUrl}))
r.find("#complete-spin-off").on("click",function(){$("#fork-button").trigger("click")})
var d=ScratchpadUI.userScratchpad.get("points")
if(d>0||ScratchpadUI.scratchpad.get("difficulty")<10){r.find(".point-counter").text(d)}ScratchpadUI.userScratchpad.on("change:points",function(a,e){var t=r.find(".point-counter")
$({num:0}).animate({num:e},{duration:500,easing:"easeOutCirc",step:function(r){t.text(Math.round(r))}})})}
module.exports={bindEvents:bindEvents}
});
KAdefine("javascript/scratchpads-package/scratchpad-ui-project.js", function(require, module, exports) {
require("../../third_party/javascript-khansrc/qTip2/jquery.qtip.js")
var $=require("jquery")
var _=require("underscore")
var React=require("react")
var ReactDOM=require("react-dom")
var i18n=require("../shared-package/i18n.js")
var KA=require("../shared-package/ka.js")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var LocalStore=require("../shared-package/local-store.js")
var isAttemptingProject=function(){return ScratchpadUI.isAttemptingSomething()&&(ScratchpadUI.scratchpad.isProject()||ScratchpadUI.isRedirectedProjectFork)}
var saveProjectProgress=function(){if(ScratchpadUI.isRedirectedProjectFork&&ScratchpadUI.isSaveable()){ScratchpadUI.triggerSave()}else{ScratchpadUI.stashUserCode()}ScratchpadUI.userScratchpad.startInactivityTimer()}
var throttledSaveProjectProgress=_.debounce(saveProjectProgress,3e3)
$.extend(ScratchpadUI.dom,{PROJECT_REQ_HELP_BUTTON:".request-help-button",PROJECT_REQ_EVAL_BUTTON:".request-eval-button",PROJECT_EVAL_BUTTON:".eval-button-container .kui-button",PROJECT_OBJECTIVES_PANE:".scratchpad-objectives-notchallenge .challenge-step"})
var bindEvents=_.once(function(){$(ScratchpadUI).on({started:function(e){var a=ScratchpadUI.scratchpad
if(a.isProject()&&ScratchpadUI.inEditMode()&&ScratchpadUI.displayLanguageAllowsEditing()&&ScratchpadUI.canEditCurrentScratchpad()){var t=ScratchpadUI.$el.find(ScratchpadUI.dom.PROJECT_OBJECTIVES_PANE)[0]
require.async(["../scratchpad-project-editor-package/project-editor.jsx"],function(e){e=React.createFactory(e)
ReactDOM.render(e({scratchpad:ScratchpadUI.scratchpad,domainSlug:ScratchpadUI.topic.domainSlug}),t)
var a=$("<div>").attr("id","dev-save-button").addClass("save-button").appendTo(t)[0]
ScratchpadUI.mountReactButton(a,"submit",i18n._("Save"),false,"","primary")})}if(!isAttemptingProject()){return}var r=ScratchpadUI.liveEditor.editor
r.on("change",function(){throttledSaveProjectProgress()})
this.$el.on("click",this.dom.PROJECT_REQ_EVAL_BUTTON,function(e){$(ScratchpadUI.dom.PROJECT_EVAL_BUTTON)[0].click()})
this.$el.on("click",this.dom.PROJECT_EVAL_BUTTON,function(e){ScratchpadUI.userScratchpad.saveChallengeTimeTaken()})
var c=function(){if(ScratchpadUI.userScratchpad.get("challengeStatus")===5){if(!LocalStore.get(ScratchpadUI.localStorage.SEEN_COMPLETED_PROJECT)){ScratchpadUI.renderComplete(ScratchpadUI.$el.find(".objectives-pane-outer"))
LocalStore.set(ScratchpadUI.localStorage.SEEN_COMPLETED_PROJECT,1)}ScratchpadUI.$el.find(ScratchpadUI.dom.PROJECT_REQ_EVAL_BUTTON).hide()}}
ScratchpadUI.userScratchpad.on("change:challengeStatus",function(e,a){c()})
c()
ScratchpadUI.bindStartOverButton()
ScratchpadUI.userScratchpad.setChallengeTimeTaken()
ScratchpadUI.userScratchpad.startInactivityTimer()
if(ScratchpadUI.isRedirectedProjectFork){return}ScratchpadUI.loadUserSpinOffs()
this.$el.on("click",this.dom.PROJECT_REQ_HELP_BUTTON,function(e){if(KA.isPhantom()){$(this).qtip({content:i18n._("You'll need to <a href='%(loginUrl)s'>"+"login or sign up</a> in order to request "+"feedback!",{loginUrl:KA.loginUrl}),style:{classes:"qtip-light qtip-shadow"},hide:{delay:100,fixed:true},position:{my:"top center",at:"bottom center"},show:true})
return false}var a=e.target
$(ScratchpadUI.dom.PROJECT_REQ_HELP_BUTTON).addClass("disabled")
$(ScratchpadUI).on({"redirect.feedback":function(e,t){t.url+=a.hash},"cancelSave.feedback":function(e,a){$(ScratchpadUI.dom.PROJECT_HELP_BUTTON).removeClass("disabled")
$(ScratchpadUI).off(".feedback")},"save.feedback":function(e,a){a.saveMessage="<p>"+i18n._("We need to save your "+"progress before requesting feedback, "+"please set a descriptive title for your "+"project:")+"</p>"}})
$(ScratchpadUI.dom.FORK_BUTTON).click()
return false})},initCode:function(e,a){if(!isAttemptingProject()||ScratchpadUI.isRedirectedProjectFork){return}a.code=ScratchpadUI.userScratchpad.get("stashedCode")},remove:function(e){if(!isAttemptingProject()){return}ScratchpadUI.userScratchpad.saveChallengeTimeTaken()
saveProjectProgress()}})})
module.exports={bindEvents:bindEvents}
});
KAdefine("javascript/scratchpads-package/scratchpad-ui-share.js", function(require, module, exports) {
require("../../third_party/javascript-khansrc/bootstrap-khansrc/js/bootstrap-modal.js")
var $=require("jquery")
var _=require("underscore")
var i18n=require("../shared-package/i18n.js")
var KA=require("../shared-package/ka.js")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var Social=require("../shared-package/social.js")
var bindEvents=_.once(function(){$(ScratchpadUI).bind({load:function(){var a=ScratchpadUI.$el
var e=a.find(".scratchpad-share-modal")
a.delegate(".scratchpad-share-button","click",function(){t()
e.modal({keyboard:true,backdrop:false,show:true})
e.find("input, textarea").on("focus",function(){$(this).select()}).on("mouseup",function(a){a.preventDefault()})
e.find(".scratchpad-share-warning").toggle(ScratchpadUI.hasUnsavedChanges())
if(KA.isZeroRated){e.find(".scratchpad-share-facebook-button").hide()}else{Social.prepFacebook()}})
a.delegate(".scratchpad-share-facebook-button","click",function(){$(ScratchpadUI).trigger("sharedViaFacebook")
badgeAction("SCRATCHPAD_SHARE")
var a=getShareInfo()
Social.facebookShare(a.message,a.url,a.imageUrl)
e.modal("hide")})
a.delegate(".scratchpad-share-twitter-button","click",function(){$(ScratchpadUI).trigger("sharedViaTwitter")
badgeAction("SCRATCHPAD_SHARE")
var a=getShareInfo("@khanacademy")
Social.openTwitterPopup(Social.formatTwitterShareUrl({url:a.url,text:a.message}))
e.modal("hide")})
a.delegate(".scratchpad-share-email-button","click",function(){$(ScratchpadUI).trigger("sharedViaEmail")
badgeAction("SCRATCHPAD_SHARE")
var a=getShareInfo()
var r=i18n._("Check it out at %(url)s.",{url:a.url})
window.open(Social.formatMailtoUrl({subject:a.message,body:r}),"_newtab")
e.modal("hide")})
var r=require("./share-embed.handlebars")
var t=function(){var e=a.find(".scratchpad-share-embed")
a.find(".scratchpad-share-url").val(getShareURL)
var t=function(a){return e.find("[name="+a+"]").prop("checked")?"no":"yes"}
var c=e.find("textarea")
var i=getShareURL()
c.val(r({shareURL:i,isComputerProgramming:~i.indexOf("computer-programming"),url:ScratchpadUI.scratchpad.urlForShow(),translatedTitle:ScratchpadUI.scratchpad.get("translatedTitle"),params:$.param({editor:t("hide-editor"),buttons:t("hide-buttons"),author:t("hide-author"),embed:"yes"})}).replace(/\n\s*/g," ").replace(/\\\//g,"/"))}
a.delegate(".scratchpad-share-embed input, .scratchpad-share-embed textarea","click",t)}})})
var badgeAction=function(a){if(!KA.isPhantom()){var e="/api/internal/user/badge_action/"+ScratchpadUI.scratchpad.get("id")
$.post(e,{action:a,casing:"camel"})}}
var getShareURL=function(){return ScratchpadUI.scratchpad.inTutorial()?window.location.protocol+"//"+window.location.host+ScratchpadUI.scratchpad.get("defaultUrlPath"):ScratchpadUI.scratchpad.urlForShow()}
var getShareInfo=function(a){var e=ScratchpadUI.scratchpad
var r=e.get("translatedTitle")
var t
a=a||i18n._("Khan Academy")
if(e.isOwner()){t=i18n._('I just created "%(translatedTitle)s" on %(khanAcademy)s!',{translatedTitle:r,khanAcademy:a})}else{t=i18n._('I just explored "%(translatedTitle)s" on %(khanAcademy)s!',{translatedTitle:r,khanAcademy:a})}return{message:t,url:getShareURL(),imageUrl:e.urlForImage()}}
module.exports={bindEvents:bindEvents}
});
KAdefine("javascript/scratchpads-package/scratchpad-ui-intro.js", function(require, module, exports) {
var $=require("jquery")
var _=require("underscore")
var _require=require("aphrodite")
var StyleSheet=_require.StyleSheet
var css=_require.css
var guiders=require("../../third_party/javascript-khansrc/Guiders-JS/guiders.js")
var i18n=require("../shared-package/i18n.js")
var Cookies=require("../shared-package/cookies.js")
var KA=require("../shared-package/ka.js")
var LocalStore=require("../shared-package/local-store.js")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var GUIDER_ID_WELCOME="scratchpad-guider-welcome"
var GUIDER_ID_PLAY="scratchpad-guider-play"
var GUIDER_ID_PLAYBAR="scratchpad-guider-playbar"
var bindEvents=_.once(function(){$(ScratchpadUI).on({started:function(){var e=KA.getUserProfile()
if(!e||e.get("isPhantom")){require.async(["../cs-intro-package/cs-intro.js"],function(e){e.showLoginTeaser()})}},readyToPlay:function(){ScratchpadUI.localStorage=$.extend(ScratchpadUI.localStorage||{},{WELCOME_MODAL:"cs-scratchpad-welcome-modal"+KA.getUserID()})
maybeShowIntro()},saveCompleted:function(){markUserSavedScratchpad()}})})
var maybeShowIntro=function(){var e=ScratchpadUI.scratchpad
if(!e||!e.isTalkie()){return}if(!LocalStore.get(ScratchpadUI.localStorage.WELCOME_MODAL)){var t=$("#page-container").offset()
var r=StyleSheet.create({welcomeGuider:{marginTop:t.top,marginLeft:t.left}})
guiders.createGuider({id:GUIDER_ID_WELCOME,buttons:[{action:guiders.ButtonAction.NEXT,text:i18n._("Tell me more!"),classString:"simple-button green"}],title:i18n._("Welcome! This is a coding talk-through."),description:i18n._("<p><span class='icon-arrow-left'></span> "+"You'll see code written on the left side.</p>"+"<p style='text-align:right;'>"+"You'll see the result on the right side."+" <span class='icon-arrow-right'></span></p>"),next:GUIDER_ID_PLAY,overlay:true,width:460,classString:css(r.welcomeGuider)}).show()
guiders.createGuider({id:GUIDER_ID_PLAY,buttons:[{action:guiders.ButtonAction.NEXT,text:i18n._("Coool!"),classString:"simple-button green"}],attachTo:ScratchpadUI.dom.PLAYBAR,position:11,offset:{left:0,top:0},title:i18n._("You can control it all down here."),description:i18n._("Press the play button to start watching the "+"talk-through. You can pause at any time by clicking it "+"again, or clicking either side. You can even edit the code "+"yourself at those points, too."),next:GUIDER_ID_PLAYBAR,overlay:true})
guiders.createGuider({id:GUIDER_ID_PLAYBAR,buttons:[{action:guiders.ButtonAction.CLOSE,text:i18n._("Ok, I got it!"),classString:"simple-button green"}],attachTo:ScratchpadUI.dom.PLAYBAR_OPTIONS,position:11,offset:{left:-30,top:0},title:i18n._("See what we say"),description:i18n._("You can click the gear button to turn on the interactive transcript feature, which are like subtitles that you can scroll."),overlay:true})
LocalStore.set(ScratchpadUI.localStorage.WELCOME_MODAL,1)}}
var markUserSavedScratchpad=function(){if(!KA.isPhantom()){return}if(!Cookies.readCookie("csPhantomBait")){return Cookies.createCookie("csPhantomBait","saved scratchpad")}}
module.exports={bindEvents:bindEvents}
});
KAdefine("javascript/scratchpads-package/scratchpad-ui-dev.js", function(require, module, exports) {
require("../../third_party/javascript-khansrc/bootstrap-khansrc/js/bootstrap-modal.js")
require("../../third_party/javascript-khansrc/jqueryui/jquery.ui.dialog.js")
var $=require("jquery")
var _=require("underscore")
var React=require("react")
var ReactDOM=require("react-dom")
var i18n=require("../shared-package/i18n.js")
var KA=require("../shared-package/ka.js")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var DevControls=require("./dev-controls.jsx")
var EditControls=require("./edit-controls.jsx")
var bindEvents=_.once(function(){$(ScratchpadUI).on({load:function(){var e=ScratchpadUI.$el
var a=ScratchpadUI.dom
var r=ScratchpadUI.scratchpad
e.delegate(".dev-settings-button","click",function(){var t=KA.isDeveloper()?DevControls:EditControls
ReactDOM.render(React.createElement(t,{scratchpad:r,onCloseModal:function(){ReactDOM.unmountComponentAtNode(document.getElementById("react-dev-controls"))},onSaveAndClose:function(){ReactDOM.unmountComponentAtNode(document.getElementById("react-dev-controls"))
$(e.find(a.SAVE_BUTTON)[0]).trigger("click")}}),document.getElementById("react-dev-controls"))})}})})
var canEditCurrentScratchpad=ScratchpadUI.canEditCurrentScratchpad
ScratchpadUI.canEditCurrentScratchpad=function(){return KA.isDeveloper()||canEditCurrentScratchpad()}
ScratchpadUI.validate=function(e){var a=ScratchpadUI.scratchpad
var r=a.get("category")
var t=a.get("difficulty")||"-1"
if(KA.isDeveloper()&&(r==="tutorial"||r==="official")&&t==="-1"){e.showError(i18n._("You must select a difficulty to save an "+"official program!"))
return}if(!e.fork&&KA.isDeveloper()&&r){e.dialog.text(i18n._("Are you sure you want to save an official scratchpad?")).dialog({closeOnEscape:false,modal:true,autoOpen:true,title:i18n._("Save official scratchpad?"),buttons:[{text:i18n._("Cancel"),click:e.cancelSave},{text:i18n._("Save"),click:function(){ScratchpadUI.checkForRecording(e)
$(this).dialog("close")}}]}).parent().addClass("ui-dialog-no-close-button").end()}else{ScratchpadUI.checkForRecording(e)}}
module.exports={bindEvents:bindEvents}
});
KAdefine("javascript/scratchpads-package/scratchpad-views.js", function(require, module, exports) {
var $=require("jquery")
var Backbone=require("backbone")
var ScratchpadUI=require("./scratchpad-ui.js").ScratchpadUI
var ScratchpadTrustedVersionView=Backbone.View.extend({template:require("./dev-trusted-revision-panel.handlebars"),events:{"click .mark-trusted":"markTrusted","click .see-trusted":"seeTrusted"},initialize:function(){var e=this
$(ScratchpadUI).bind("saveCompleted",function(t,i){e.render(i.toJSON())})},update:function(e){if(e==="sanctioned"){this.$el.show()}else{this.$el.hide()}},render:function(e){this.scratchpadID=e.id
this.revisionID=e.revision.id
this.trustedRevisionID=e.trustedRevision?e.trustedRevision.id:-1
var t=e.revision.cid?e.revision.toJSON():e.revision
var i=e.trustedRevision&&e.trustedRevision.id===t.id
var r={revision:t,trustedRevision:e.trustedRevision,currentRevisionTrusted:i}
this.$el.find(".trusted-version-panel").html(this.template(r))
this.update(e.category)},markTrusted:function(){var e=this
$.ajax({url:"/api/internal/scratchpads/"+this.scratchpadID+"/"+this.revisionID+"/set_trusted",type:"POST",success:function(t){e.render(t)}})},seeTrusted:function(){window.open("/computer-programming/blah/"+this.scratchpadID+"/embedded/trusted",this.scratchpadID)}})
module.exports=ScratchpadTrustedVersionView
});
KAdefine("javascript/scratchpads-package/dev-controls.jsx", function(require, module, exports) {
var $=require("jquery")
var React=require("react")
var ReactDOM=require("react-dom")
var _=require("underscore")
var $_=require("../shared-package/i18n.js").$_
require("../../third_party/javascript-khansrc/select2/select2.js")
var absoluteLinks=require("../shared-package/absolute-links.js")
var i18n=require("../shared-package/i18n.js")
var KUIButton=require("../shared-components-package/button.jsx")
var KUICheckbox=require("../react-package/kui/checkbox.jsx")
var KUILabeledField=require("../shared-components-package/labeled-field.jsx")
var KUITextArea=require("../react-package/kui/labeled-textarea.jsx")
var Modal=require("../shared-components-package/modal.jsx")
var Select=require("../react-package/select.jsx")
var CATEGORIES={"":"Regular",tutorial:"Talk-through",challenge:"Challenge (reload for editor)",project:"Project",documentation:"Documentation",official:"Official",sanctioned:"Sanctioned"}
var DIFFICULTIES={1:i18n._("Work in Progress"),10:i18n._("Getting Started"),20:i18n._("Easy"),30:i18n._("Intermediate"),40:i18n._("Expert")}
var CONFIG_VERSIONS={0:"Initial Configuration",1:"Switch to Degrees From Radians",2:"Brace Autocompletion Changes",3:"Disable Unneeded JSHint Rules",4:"version 4 placeholder"}
var _contentTagData=null
var DevControls=React.createClass({displayName:"DevControls",propTypes:{onCloseModal:React.PropTypes.func,onSaveAndClose:React.PropTypes.func.isRequired,scratchpad:React.PropTypes.object.isRequired},setupSelect2:function(){var e=this
var t=$(ReactDOM.findDOMNode(this.refs.conceptTags))
t.select2({multiple:true,data:_contentTagData}).on("change",function(t){return e.handleChange("conceptTags",t.val)})},handleChange:function(e,t){this.props.scratchpad.set(e,t)
this.forceUpdate()},componentDidMount:function(){var e=this
if(!_contentTagData){$.get("/api/internal/dev/content_tags").then(function(t){_contentTagData=_.sortBy(_.map(t,function(e){return{id:e.id,text:e.displayName}}),"text")
e.forceUpdate()
e.setupSelect2()})}else{this.setupSelect2()}},render:function(){var e=this
var t=_.pairs(DIFFICULTIES)
var a=_.pairs(CATEGORIES)
var n=_.pairs(CONFIG_VERSIONS)
var r=this.props.scratchpad
return React.createElement(Modal,{backdrop:false},React.createElement("span",{className:"close",onClick:this.props.onCloseModal},"×"),React.createElement("div",{className:"control-group"},React.createElement("div",{className:"kui-labeledfield__title"},"Category"),React.createElement("br",null),React.createElement(Select,{value:r.get("category"),hideBlank:true,options:a,onChange:function(t){return e.handleChange("category",t)}})),React.createElement(KUILabeledField,{title:"Canvas Width",type:"text",value:(r.get("width")||400).toString(),onChange:function(t){return e.handleChange("width",parseInt(t.target.value)||400)}}),React.createElement(KUILabeledField,{title:"Canvas Height",type:"text",value:(r.get("height")||400).toString(),onChange:function(t){return e.handleChange("height",parseInt(t.target.value)||400)}}),React.createElement("div",{className:"control-group"},React.createElement("label",null,React.createElement(KUICheckbox,{name:"canvasOnly",checked:r.get("canvasOnly"),onChange:function(t){return e.handleChange("canvasOnly",!r.get("canvasOnly"))}}),"Show only the canvas when embedded in a tutorial.")),!r.isProject()&&React.createElement("div",{className:"control-group"},React.createElement("div",{className:"kui-labeledfield__title"},"Difficulty"),React.createElement("br",null),React.createElement(Select,{value:(r.get("difficulty")||-1).toString(),hideBlank:true,options:t,onChange:function(t){return e.handleChange("difficulty",parseInt(t))}})),React.createElement("div",{className:"control-group"},React.createElement("div",{className:"kui-labeledfield__title"},"Config Version"),React.createElement("br",null),React.createElement(Select,{value:r.getVersion().toString(),hideBlank:true,options:n,onChange:function(t){r.setVersion(parseInt(t))
e.forceUpdate()}})),React.createElement(KUILabeledField,{title:"Youtube ID",type:"text",value:r.getYoutubeId(),onChange:function(t){r.setYoutubeId(t.target.value)
e.forceUpdate()}}),React.createElement("div",{className:"kui-labeledfield select2-input"},React.createElement("a",{href:absoluteLinks.safeLinkTo("https://docs.google.com/"+"document/d/"+"13_QIJlUBDe1NLDpfm_zsSrUXLwKnQMu1vbtIeyXtDls"),style:{"float":"right"}},$_(null,"For more info on tags, see here")),React.createElement("div",{className:"kui-labeledfield__title"},"User Facing Tags"),React.createElement("div",{className:"select2-wrapper"},React.createElement("input",{className:"kui-labeledfield__input",ref:"conceptTags",type:"text",defaultValue:r.get("conceptTags"),disabled:_contentTagData===null}))),!r.isProject()&&React.createElement(KUITextArea,{title:"Description",value:r.get("description"),onChange:function(t){return e.handleChange("description",t.target.value)}}),React.createElement(KUIButton,{onClick:this.props.onSaveAndClose,type:"button",use:"primary",label:"Save and Close"}))}})
module.exports=DevControls
});
KAdefine("javascript/scratchpads-package/edit-controls.jsx", function(require, module, exports) {
var React=require("react")
var $_=require("../shared-package/i18n.js").$_
var i18n=require("../shared-package/i18n.js")
var KUIButton=require("../shared-components-package/button.jsx")
var Modal=require("../shared-components-package/modal.jsx")
var Select=require("../react-package/select.jsx")
var EditControls=React.createClass({displayName:"EditControls",propTypes:{onCloseModal:React.PropTypes.func,onSaveAndClose:React.PropTypes.func.isRequired,scratchpad:React.PropTypes.objectOf(React.PropTypes.any).isRequired},handleChange:function(e,t){this.props.scratchpad.set(e,t)
this.forceUpdate()},handleSaveAndClose:function(){this.props.onSaveAndClose()},render:function(){var e=this
var t=this.props.scratchpad
var a=[["400","400 (default)"],["500","500"],["600","600"]]
var r=t.get("userAuthoredContentType")==="pjs"
return React.createElement(Modal,{backdrop:false},React.createElement("span",{className:"close",onClick:this.props.onCloseModal},"×"),r&&React.createElement("div",{className:"control-group"},React.createElement("div",{className:"kui-labeledfield__title"},$_(null,"Width")),React.createElement("br",null),React.createElement(Select,{value:t.get("width").toString(),hideBlank:true,options:a,onChange:function(t){return e.handleChange("width",parseInt(t))}})),React.createElement("div",{className:"control-group"},React.createElement("div",{className:"kui-labeledfield__title"},$_(null,"Height")),React.createElement("br",null),React.createElement(Select,{value:t.get("height").toString(),hideBlank:true,options:a,onChange:function(t){return e.handleChange("height",parseInt(t))}})),React.createElement("p",null,$_(null,"To see the full effect of the size on your canvas, reload your program after saving.")),React.createElement(KUIButton,{onClick:this.props.onSaveAndClose,type:"button",use:"primary",label:i18n._("Save and Close")}))}})
module.exports=EditControls
});
KAdefine("javascript/scratchpads-package/split-button.jsx", function(require, module, exports) {
var KUIButton=require("../shared-components-package/button.jsx")
var React=require("react")
var SplitButton=React.createClass({displayName:"SplitButton",render:function(){var e=React.createElement("span",null,React.createElement("span",{className:"label1"},this.props.label),React.createElement("span",{className:"label2",style:{borderLeft:"1px solid",fontWeight:"600",padding:"10px 0 10px 10px",marginLeft:"10px"}},this.props.label2))
var t=this.props
var a=t.label
var l=babelHelpers.objectWithoutProperties(t,["label"])
return React.createElement(KUIButton,babelHelpers._extends({label:e},l))}})
module.exports=SplitButton
});
KAdefine("third_party/javascript-khansrc/rainbow/js/rainbow.min.js", function(__KA_require, __KA_module, __KA_exports) {
window.Rainbow=function(){function e(e){var n,t=e.getAttribute&&e.getAttribute("data-language")||0
if(!t){e=e.attributes
for(n=0;n<e.length;++n)if("data-language"===e[n].nodeName)return e[n].nodeValue}return t}function n(n){var t=e(n)||e(n.parentNode)
if(!t){var a=/\blang(?:uage)?-(\w+)/;(n=n.className.match(a)||n.parentNode.className.match(a))&&(t=n[1])}return t}function t(e,n){for(var t in g[d]){t=parseInt(t,10)
if(e==t&&n==g[d][t]?0:e<=t&&n>=g[d][t])delete g[d][t],delete l[d][t]
if(e>=t&&e<g[d][t]||n>t&&n<g[d][t])return!0}return!1}function a(e,n){return'<span class="'+e.replace(/\./g," ")+(w?" "+w:"")+'">'+n+"</span>"}function r(e,n,c,f){var s=e.exec(c)
if(s){++v
!n.name&&"string"==typeof n.matches[0]&&(n.name=n.matches[0],delete n.matches[0])
var m=s[0],h=s.index,p=s[0].length+h,b=function(){function t(){r(e,n,c,f)}v%100>0?t():setTimeout(t,0)}
if(t(h,p))b()
else{var w=o(n.matches),N=function(e,t,r){if(e>=t.length)r(m)
else{var o=s[t[e]]
if(o){var c=n.matches[t[e]],f=c.language,l=c.name&&c.matches?c.matches:c,g=function(n,o,i){var c
c=0
var u
for(u=1;u<t[e];++u)s[u]&&(c=c+s[u].length)
o=i?a(i,o):o
m=m.substr(0,c)+m.substr(c).replace(n,o)
N(++e,t,r)}
f?u(o,f,function(e){g(o,e)}):typeof c==="string"?g(o,o,c):i(o,l.length?l:[l],function(e){g(o,e,c.matches?c.name:0)})}else N(++e,t,r)}}
N(0,w,function(e){n.name&&(e=a(n.name,e))
if(!l[d]){l[d]={}
g[d]={}}l[d][h]={replace:s[0],"with":e}
g[d][h]=p
b()})}}else f()}function o(e){var n=[],t
for(t in e)e.hasOwnProperty(t)&&n.push(t)
return n.sort(function(e,n){return n-e})}function i(e,n,t){function a(n,o){o<n.length?r(n[o].pattern,n[o],e,function(){a(n,++o)}):c(e,function(e){delete l[d]
delete g[d];--d
t(e)})}++d
a(n,0)}function c(e,n){function t(e,n,a,r){if(a<n.length){++b
var o=n[a],i=l[d][o],e=e.substr(0,o)+e.substr(o).replace(i.replace,i["with"]),o=function(){t(e,n,++a,r)}
0<b%250?o():setTimeout(o,0)}else r(e)}var a=o(l[d])
t(e,a,0,n)}function u(e,n,t){var a=m[n]||[],r=m[p]||[],n=h[n]?a:a.concat(r)
i(e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&(?![\w\#]+;)/g,"&amp;"),n,t)}function f(e,t,a){if(t<e.length){var r=e[t],o=n(r)
return!(-1<(" "+r.className+" ").indexOf(" rainbow "))&&o?(o=o.toLowerCase(),r.className+=r.className?" rainbow":"rainbow",u(r.innerHTML,o,function(n){r.innerHTML=n
l={}
g={}
N&&N(r,o)
setTimeout(function(){f(e,++t,a)},0)})):f(e,++t,a)}a&&a()}function s(e,n){var e=e&&"function"==typeof e.getElementsByTagName?e:document,t=e.getElementsByTagName("pre"),a=e.getElementsByTagName("code"),r,o=[]
for(r=0;r<a.length;++r)o.push(a[r])
for(r=0;r<t.length;++r)t[r].getElementsByTagName("code").length||o.push(t[r])
f(o,0,n)}var l={},g={},m={},h={},d=0,p=0,v=0,b=0,w,N
return{extend:function(e,n,t){1==arguments.length&&(n=e,e=p)
h[e]=t
m[e]=n.concat(m[e]||[])},b:function(e){N=e},a:function(e){w=e},color:function(e,n,t){if("string"==typeof e)return u(e,n,t)
if("function"==typeof e)return s(0,e)
s(e,n)}}}()
document.addEventListener?document.addEventListener("DOMContentLoaded",Rainbow.color,!1):window.attachEvent("onload",Rainbow.color)
Rainbow.onHighlight=Rainbow.b
Rainbow.addClass=Rainbow.a
__KA_module.exports = Rainbow;
this.Rainbow = Rainbow;
__KA_require("./language/generic.js");
__KA_require("./language/html.js");
__KA_require("./language/javascript.js");
});
KAdefine("third_party/javascript-khansrc/rainbow/js/language/generic.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../rainbow.min.js");
Rainbow.extend([{matches:{1:[{name:"keyword.operator",pattern:/\=|\+/g},{name:"keyword.dot",pattern:/\./g}],2:{name:"string",matches:{name:"constant.character.escape",pattern:/\\('|"){1}/g}}},pattern:/(\(|\s|\[|\=|:|\+|\.)(('|")([^\\\1]|\\.)*?(\3))/gm},{name:"comment",pattern:/\/\*[\s\S]*?\*\/|(\/\/|\#)[\s\S]*?$/gm},{name:"constant.numeric",pattern:/\b(\d+(\.\d+)?(e(\+|\-)?\d+)?(f|d)?|0x[\da-f]+)\b/gi},{matches:{1:"keyword"},pattern:/\b(and|array|as|b(ool(ean)?|reak)|c(ase|atch|har|lass|on(st|tinue))|d(ef|elete|o(uble)?)|e(cho|lse(if)?|xit|xtends|xcept)|f(inally|loat|or(each)?|unction)|global|if|import|int(eger)?|long|new|object|or|pr(int|ivate|otected)|public|return|self|st(ring|ruct|atic)|switch|th(en|is|row)|try|(un)?signed|var|void|while)(?=\(|\b)/gi},{name:"constant.language",pattern:/true|false|null/g},{name:"keyword.operator",pattern:/\+|\!|\-|&(gt|lt|amp);|\||\*|\=/g},{matches:{1:"function.call"},pattern:/(\w+?)(?=\()/g},{matches:{1:"storage.function",2:"entity.name.function"},pattern:/(function)\s(.*?)(?=\()/g}])
});
KAdefine("third_party/javascript-khansrc/rainbow/js/language/javascript.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../rainbow.min.js");
Rainbow.extend("javascript",[{name:"selector",pattern:/(\s|^)\$(?=\.|\()/g},{name:"support",pattern:/\b(window|document)\b/g},{matches:{1:"support.property"},pattern:/\.(length|node(Name|Value))\b/g},{matches:{1:"support.function"},pattern:/(setTimeout|setInterval)(?=\()/g},{matches:{1:"support.method"},pattern:/\.(getAttribute|push|getElementById|getElementsByClassName|log|setTimeout|setInterval)(?=\()/g},{name:"string.regexp",matches:{1:"string.regexp.open",2:{name:"constant.regexp.escape",pattern:/\\(.){1}/g},3:"string.regexp.close",4:"string.regexp.modifier"},pattern:/(\/)(?!\*)(.+)(\/)([igm]{0,3})/g},{matches:{1:"storage",3:"entity.function"},pattern:/(var)?(\s|^)(\S*)(?=\s?=\s?function\()/g},{matches:{1:"keyword",2:"entity.function"},pattern:/(new)\s+(.*)(?=\()/g},{name:"entity.function",pattern:/(\w+)(?=:\s{0,}function)/g}])
});
KAdefine("third_party/javascript-khansrc/rainbow/js/language/html.js", function(__KA_require, __KA_module, __KA_exports) {
__KA_require("../rainbow.min.js");
Rainbow.extend("html",[{name:"source.php.embedded",matches:{2:{language:"php"}},pattern:/&lt;\?=?(?!xml)(php)?([\s\S]*?)(\?&gt;)/gm},{name:"source.css.embedded",matches:{1:{matches:{1:"support.tag.style",2:[{name:"entity.tag.style",pattern:/^style/g},{name:"string",pattern:/('|")(.*?)(\1)/g},{name:"entity.tag.style.attribute",pattern:/(\w+)/g}],3:"support.tag.style"},pattern:/(&lt;\/?)(style.*?)(&gt;)/g},2:{language:"css"},3:"support.tag.style",4:"entity.tag.style",5:"support.tag.style"},pattern:/(&lt;style.*?&gt;)([\s\S]*?)(&lt;\/)(style)(&gt;)/gm},{name:"source.js.embedded",matches:{1:{matches:{1:"support.tag.script",2:[{name:"entity.tag.script",pattern:/^script/g},{name:"string",pattern:/('|")(.*?)(\1)/g},{name:"entity.tag.script.attribute",pattern:/(\w+)/g}],3:"support.tag.script"},pattern:/(&lt;\/?)(script.*?)(&gt;)/g},2:{language:"javascript"},3:"support.tag.script",4:"entity.tag.script",5:"support.tag.script"},pattern:/(&lt;script(?! src).*?&gt;)([\s\S]*?)(&lt;\/)(script)(&gt;)/gm},{name:"comment.html",pattern:/&lt;\!--[\S\s]*?--&gt;/g},{matches:{1:"support.tag.open",2:"support.tag.close"},pattern:/(&lt;)|(\/?\??&gt;)/g},{name:"support.tag",matches:{1:"support.tag",2:"support.tag.special",3:"support.tag-name"},pattern:/(&lt;\??)(\/|\!?)(\w+)/g},{matches:{1:"support.attribute"},pattern:/([a-z-]+)(?=\=)/gi},{matches:{1:"support.operator",2:"string.quote",3:"string.value",4:"string.quote"},pattern:/(=)('|")(.*?)(\2)/g},{matches:{1:"support.operator",2:"support.value"},pattern:/(=)([a-zA-Z\-0-9]*)\b/g},{matches:{1:"support.attribute"},pattern:/\s(\w+)(?=\s|&gt;)(?![\s\S]*&lt;)/g}],true)
});
; KAdefine.updatePathToPackageMap({"javascript/ckeditor-package/ckeditor-utils.js": "ckeditor.js", "javascript/cs-intro-package/cs-intro.js": "cs-intro.js", "javascript/scratchpad-challenge-package/scratchpad-challenge.js": "scratchpad-challenge.js", "javascript/scratchpad-project-editor-package/project-editor.jsx": "scratchpad-project-editor.js", "javascript/tasks-package/content-header.jsx": "tasks.js"});
